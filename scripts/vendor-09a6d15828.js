/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t="length"in e&&e.length,n=Q.type(e);return"function"===n||Q.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(Q.isFunction(t))return Q.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Q.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return Q.filter(t,e,n);t=Q.filter(t,e)}return Q.grep(e,function(e){return V.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t=pe[e]={};return Q.each(e.match(he)||[],function(e,n){t[n]=!0}),t}function o(){K.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1),Q.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+s.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(xe,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:be.test(n)?Q.parseJSON(n):n}catch(i){}ye.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return K.activeElement}catch(e){}}function d(e,t){return Q.nodeName(e,"table")&&Q.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function h(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=Pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function m(e,t){var n,r,i,a,o,s,u,l;if(1===t.nodeType){if(ve.hasData(e)&&(a=ve.access(e),o=ve.set(t,a),l=a.events)){delete o.handle,o.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Q.event.add(t,i,l[i][n])}ye.hasData(e)&&(s=ye.access(e),u=Q.extend({},s),ye.set(t,u))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Q.nodeName(e,t)?Q.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&$e.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var r,i=Q(n.createElement(t)).appendTo(n.body),a=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Q.css(i[0],"display");return i.detach(),a}function x(e){var t=K,n=Ue[e];return n||(n=b(e,t),"none"!==n&&n||(Fe=(Fe||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Fe[0].contentDocument,t.write(),t.close(),n=b(e,t),Fe.detach()),Ue[e]=n),n}function w(e,t,n){var r,i,a,o,s=e.style;return n=n||He(e),n&&(o=n.getPropertyValue(t)||n[t]),n&&(""!==o||Q.contains(e.ownerDocument,e)||(o=Q.style(e,t)),qe.test(o)&&ze.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Xe.length;i--;)if(t=Xe[i]+n,t in e)return t;return r}function $(e,t,n){var r=Ye.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function S(e,t,n,r,i){for(var a=n===(r?"border":"content")?4:"width"===t?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=Q.css(e,n+_e[a],!0,i)),r?("content"===n&&(o-=Q.css(e,"padding"+_e[a],!0,i)),"margin"!==n&&(o-=Q.css(e,"border"+_e[a]+"Width",!0,i))):(o+=Q.css(e,"padding"+_e[a],!0,i),"padding"!==n&&(o+=Q.css(e,"border"+_e[a]+"Width",!0,i)));return o}function M(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,a=He(e),o="border-box"===Q.css(e,"boxSizing",!1,a);if(0>=i||null==i){if(i=w(e,t,a),(0>i||null==i)&&(i=e.style[t]),qe.test(i))return i;r=o&&(J.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+S(e,t,n||(o?"border":"content"),r,a)+"px"}function T(e,t){for(var n,r,i,a=[],o=0,s=e.length;s>o;o++)r=e[o],r.style&&(a[o]=ve.get(r,"olddisplay"),n=r.style.display,t?(a[o]||"none"!==n||(r.style.display=""),""===r.style.display&&ke(r)&&(a[o]=ve.access(r,"olddisplay",x(r.nodeName)))):(i=ke(r),"none"===n&&i||ve.set(r,"olddisplay",i?n:Q.css(r,"display"))));for(o=0;s>o;o++)r=e[o],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?a[o]||"":"none"));return e}function C(e,t,n,r,i){return new C.prototype.init(e,t,n,r,i)}function E(){return setTimeout(function(){Je=void 0}),Je=Q.now()}function A(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=_e[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function O(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),a=0,o=i.length;o>a;a++)if(r=i[a].call(n,t,e))return r}function D(e,t,n){var r,i,a,o,s,u,l,c,f=this,d={},h=e.style,p=e.nodeType&&ke(e),g=ve.get(e,"fxshow");n.queue||(s=Q._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,Q.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=Q.css(e,"display"),c="none"===l?ve.get(e,"olddisplay")||x(e.nodeName):l,"inline"===c&&"none"===Q.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ze.exec(i)){if(delete t[r],a=a||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}d[r]=g&&g[r]||Q.style(e,r)}else l=void 0;if(Q.isEmptyObject(d))"inline"===("none"===l?x(e.nodeName):l)&&(h.display=l);else{g?"hidden"in g&&(p=g.hidden):g=ve.access(e,"fxshow",{}),a&&(g.hidden=!p),p?Q(e).show():f.done(function(){Q(e).hide()}),f.done(function(){var t;ve.remove(e,"fxshow");for(t in d)Q.style(e,t,d[t])});for(r in d)o=O(p?g[r]:0,r,f),r in g||(g[r]=o.start,p&&(o.end=o.start,o.start="width"===r||"height"===r?1:0))}}function L(e,t){var n,r,i,a,o;for(n in e)if(r=Q.camelCase(n),i=t[r],a=e[n],Q.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),o=Q.cssHooks[r],o&&"expand"in o){a=o.expand(a),delete e[r];for(n in a)n in e||(e[n]=a[n],t[n]=i)}else t[r]=i}function N(e,t,n){var r,i,a=0,o=tt.length,s=Q.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Je||E(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,a=1-r,o=0,u=l.tweens.length;u>o;o++)l.tweens[o].run(a);return s.notifyWith(e,[l,a,n]),1>a&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Je||E(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Q.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(L(c,l.opts.specialEasing);o>a;a++)if(r=tt[a].call(l,e,c,l.opts))return r;return Q.map(c,O,l),Q.isFunction(l.opts.start)&&l.opts.start.call(e,l),Q.fx.timer(Q.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function j(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(he)||[];if(Q.isFunction(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function P(e,t,n,r){function i(s){var u;return a[s]=!0,Q.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||o||a[l]?o?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var a={},o=e===bt;return i(t.dataTypes[0])||!a["*"]&&i("*")}function R(e,t){var n,r,i=Q.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Q.extend(!0,e,r),e}function I(e,t,n){for(var r,i,a,o,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)a=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){a=i;break}o||(o=i)}a=a||o}return a?(a!==u[0]&&u.unshift(a),n[a]):void 0}function F(e,t,n,r){var i,a,o,s,u,l={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(o=l[u+" "+a]||l["* "+a],!o)for(i in l)if(s=i.split(" "),s[1]===a&&(o=l[u+" "+s[0]]||l["* "+s[0]])){o===!0?o=l[i]:l[i]!==!0&&(a=s[0],c.unshift(s[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(f){return{state:"parsererror",error:o?f:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}function U(e,t,n,r){var i;if(Q.isArray(t))Q.each(t,function(t,i){n||$t.test(e)?r(e,i):U(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Q.type(t))r(e,t);else for(i in t)U(e+"["+i+"]",t[i],n,r)}function z(e){return Q.isWindow(e)?e:9===e.nodeType&&e.defaultView}var q=[],H=q.slice,B=q.concat,Y=q.push,V=q.indexOf,W={},G=W.toString,X=W.hasOwnProperty,J={},K=e.document,Z="2.1.4",Q=function(e,t){return new Q.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};Q.fn=Q.prototype={jquery:Z,constructor:Q,selector:"",length:0,toArray:function(){return H.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:H.call(this)},pushStack:function(e){var t=Q.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Q.each(this,e,t)},map:function(e){return this.pushStack(Q.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(H.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:q.sort,splice:q.splice},Q.extend=Q.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||Q.isFunction(o)||(o={}),s===u&&(o=this,s--);u>s;s++)if(null!=(e=arguments[s]))for(t in e)n=o[t],r=e[t],o!==r&&(l&&r&&(Q.isPlainObject(r)||(i=Q.isArray(r)))?(i?(i=!1,a=n&&Q.isArray(n)?n:[]):a=n&&Q.isPlainObject(n)?n:{},o[t]=Q.extend(l,a,r)):void 0!==r&&(o[t]=r));return o},Q.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Q.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Q.type(e)||e.nodeType||Q.isWindow(e)?!1:e.constructor&&!X.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?W[G.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Q.trim(e),e&&(1===e.indexOf("use strict")?(t=K.createElement("script"),t.text=e,K.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,a=0,o=e.length,s=n(e);if(r){if(s)for(;o>a&&(i=t.apply(e[a],r),i!==!1);a++);else for(a in e)if(i=t.apply(e[a],r),i===!1)break}else if(s)for(;o>a&&(i=t.call(e[a],a,e[a]),i!==!1);a++);else for(a in e)if(i=t.call(e[a],a,e[a]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Q.merge(r,"string"==typeof e?[e]:e):Y.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:V.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],a=0,o=e.length,s=!n;o>a;a++)r=!t(e[a],a),r!==s&&i.push(e[a]);return i},map:function(e,t,r){var i,a=0,o=e.length,s=n(e),u=[];if(s)for(;o>a;a++)i=t(e[a],a,r),null!=i&&u.push(i);else for(a in e)i=t(e[a],a,r),null!=i&&u.push(i);return B.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),Q.isFunction(e)?(r=H.call(arguments,2),i=function(){return e.apply(t||this,r.concat(H.call(arguments)))},i.guid=e.guid=e.guid||Q.guid++,i):void 0},now:Date.now,support:J}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()});var ie=/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
function(e){function t(e,t,n,r){var i,a,o,s,u,l,f,h,p,g;if((t?t.ownerDocument||t:U)!==D&&O(t),t=t||D,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&N){if(11!==s&&(i=ye.exec(e)))if(o=i[1]){if(9===s){if(a=t.getElementById(o),!a||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&I(t,a)&&a.id===o)return n.push(a),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&w.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&(!j||!j.test(e))){if(h=f=F,p=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=S(e),(f=t.getAttribute("id"))?h=f.replace(xe,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",u=l.length;u--;)l[u]=h+d(l[u]);p=be.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return Z.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{f||t.removeAttribute("id")}}}return T(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function i(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),r=e.length;r--;)_.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=n&&"parentNode"===r,a=q++;return t.first?function(t,n,a){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,a)}:function(t,n,o){var s,u,l=[z,a];if(o){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[F]||(t[F]={}),(s=u[r])&&s[0]===z&&s[1]===a)return l[2]=s[2];if(u[r]=l,l[2]=e(t,n,o))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,a=n.length;a>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var a,o=[],s=0,u=e.length,l=null!=t;u>s;s++)(a=e[s])&&(!n||n(a,r,i))&&(o.push(a),l&&t.push(s));return o}function v(e,t,n,i,a,o){return i&&!i[F]&&(i=v(i)),a&&!a[F]&&(a=v(a,o)),r(function(r,o,s,u){var l,c,f,d=[],h=[],p=o.length,v=r||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:m(v,d,e,s,u),b=n?a||(r?e:p||i)?[]:o:y;if(n&&n(y,b,s,u),i)for(l=m(b,h),i(l,[],s,u),c=l.length;c--;)(f=l[c])&&(b[h[c]]=!(y[h[c]]=f));if(r){if(a||e){if(a){for(l=[],c=b.length;c--;)(f=b[c])&&l.push(y[c]=f);a(null,b=[],l,u)}for(c=b.length;c--;)(f=b[c])&&(l=a?ee(r,f):d[c])>-1&&(r[l]=!(o[l]=f))}}else b=m(b===o?b.splice(p,b.length):b),a?a(null,o,b,u):Z.apply(o,b)})}function y(e){for(var t,n,r,i=e.length,a=_.relative[e[0].type],o=a||_.relative[" "],s=a?1:0,u=h(function(e){return e===t},o,!0),l=h(function(e){return ee(t,e)>-1},o,!0),c=[function(e,n,r){var i=!a&&(r||n!==C)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>s;s++)if(n=_.relative[e[s].type])c=[h(p(c),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;i>r&&!_.relative[e[r].type];r++);return v(s>1&&p(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ue,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&d(e))}c.push(n)}return p(c)}function b(e,n){var i=n.length>0,a=e.length>0,o=function(r,o,s,u,l){var c,f,d,h=0,p="0",g=r&&[],v=[],y=C,b=r||a&&_.find.TAG("*",l),x=z+=null==y?1:Math.random()||.1,w=b.length;for(l&&(C=o!==D&&o);p!==w&&null!=(c=b[p]);p++){if(a&&c){for(f=0;d=e[f++];)if(d(c,o,s)){u.push(c);break}l&&(z=x)}i&&((c=!d&&c)&&h--,r&&g.push(c))}if(h+=p,i&&p!==h){for(f=0;d=n[f++];)d(g,v,o,s);if(r){if(h>0)for(;p--;)g[p]||v[p]||(v[p]=J.call(u));v=m(v)}Z.apply(u,v),l&&!r&&v.length>0&&h+n.length>1&&t.uniqueSort(u)}return l&&(z=x,C=y),g};return i?r(o):o}var x,w,_,k,$,S,M,T,C,E,A,O,D,L,N,j,P,R,I,F="sizzle"+1*new Date,U=e.document,z=0,q=0,H=n(),B=n(),Y=n(),V=function(e,t){return e===t&&(A=!0),0},W=1<<31,G={}.hasOwnProperty,X=[],J=X.pop,K=X.push,Z=X.push,Q=X.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),ae="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ke=function(){O()};try{Z.apply(X=Q.call(U.childNodes),U.childNodes),X[U.childNodes.length].nodeType}catch($e){Z={apply:X.length?function(e,t){K.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},$=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},O=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!==D&&9===r.nodeType&&r.documentElement?(D=r,L=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),N=!$(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(r.getElementsByClassName),w.getById=i(function(e){return L.appendChild(e).id=F,!r.getElementsByName||!r.getElementsByName(F).length}),w.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(we,_e);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(we,_e);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},_.find.CLASS=w.getElementsByClassName&&function(e,t){return N?t.getElementsByClassName(e):void 0},P=[],j=[],(w.qsa=ve.test(r.querySelectorAll))&&(i(function(e){L.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+F+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||j.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(w.matchesSelector=ve.test(R=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&i(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),P.push("!=",oe)}),j=j.length&&new RegExp(j.join("|")),P=P.length&&new RegExp(P.join("|")),t=ve.test(L.compareDocumentPosition),I=t||ve.test(L.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===U&&I(U,e)?-1:t===r||t.ownerDocument===U&&I(U,t)?1:E?ee(E,e)-ee(E,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,a=e.parentNode,s=t.parentNode,u=[e],l=[t];if(!a||!s)return e===r?-1:t===r?1:a?-1:s?1:E?ee(E,e)-ee(E,t):0;if(a===s)return o(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?o(u[i],l[i]):u[i]===U?-1:l[i]===U?1:0},r):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&O(e),n=n.replace(fe,"='$1']"),!(!w.matchesSelector||!N||P&&P.test(n)||j&&j.test(n)))try{var r=R.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&O(e),I(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&O(e);var n=_.attrHandle[t.toLowerCase()],r=n&&G.call(_.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==r?r:w.attributes||!N?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,E=!w.sortStable&&e.slice(0),e.sort(V),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return E=null,e},k=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=k(t);return n},_=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(we,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var a=t.attr(i,e);return null==a?"!="===n:n?(a+="","="===n?a===r:"!="===n?a!==r:"^="===n?r&&0===a.indexOf(r):"*="===n?r&&a.indexOf(r)>-1:"$="===n?r&&a.slice(-r.length)===r:"~="===n?(" "+a.replace(se," ")+" ").indexOf(r)>-1:"|="===n?a===r||a.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,d,h,p,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(m){if(a){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&y){for(c=m[F]||(m[F]={}),l=c[e]||[],h=l[0]===z&&l[1],d=l[0]===z&&l[2],f=h&&m.childNodes[h];f=++h&&f&&f[g]||(d=h=0)||p.pop();)if(1===f.nodeType&&++d&&f===t){c[e]=[z,h,d];break}}else if(y&&(l=(t[F]||(t[F]={}))[e])&&l[0]===z)d=l[1];else for(;(f=++h&&f&&f[g]||(d=h=0)||p.pop())&&((s?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++d||(y&&((f[F]||(f[F]={}))[e]=[z,d]),f!==t)););return d-=i,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,n){var i,a=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[F]?a(n):a.length>1?(i=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=a(e,n),o=i.length;o--;)r=ee(e,i[o]),e[r]=!(t[r]=i[o])}):function(e){return a(e,0,i)}):a}},pseudos:{not:r(function(e){var t=[],n=[],i=M(e.replace(ue,"$1"));return i[F]?r(function(e,t,n,r){for(var a,o=i(e,null,r,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))}):function(e,r,a){return t[0]=e,i(t,null,a,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,_e),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,_e).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},_.pseudos.nth=_.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})_.pseudos[x]=u(x);return f.prototype=_.filters=_.pseudos,_.setFilters=new f,S=t.tokenize=function(e,n){var r,i,a,o,s,u,l,c=B[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=_.preFilter;s;){(!r||(i=le.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(a=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),a.push({value:r,type:i[0].replace(ue," ")}),s=s.slice(r.length));for(o in _.filter)!(i=pe[o].exec(s))||l[o]&&!(i=l[o](i))||(r=i.shift(),a.push({value:r,type:o,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):B(e,u).slice(0)},M=t.compile=function(e,t){var n,r=[],i=[],a=Y[e+" "];if(!a){for(t||(t=S(e)),n=t.length;n--;)a=y(t[n]),a[F]?r.push(a):i.push(a);a=Y(e,b(i,r)),a.selector=e}return a},T=t.select=function(e,t,n,r){var i,a,o,s,u,l="function"==typeof e&&e,f=!r&&S(e=l.selector||e);if(n=n||[],1===f.length){if(a=f[0]=f[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&w.getById&&9===t.nodeType&&N&&_.relative[a[1].type]){if(t=(_.find.ID(o.matches[0].replace(we,_e),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(i=pe.needsContext.test(e)?0:a.length;i--&&(o=a[i],!_.relative[s=o.type]);)if((u=_.find[s])&&(r=u(o.matches[0].replace(we,_e),be.test(a[0].type)&&c(t.parentNode)||t))){if(a.splice(i,1),e=r.length&&d(a),!e)return Z.apply(n,r),n;break}}return(l||M(e,f))(r,t,!N,n,be.test(e)&&c(t.parentNode)||t),n},w.sortStable=F.split("").sort(V).join("")===F,w.detectDuplicates=!!A,O(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Q.find=ie,Q.expr=ie.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=ie.uniqueSort,Q.text=ie.getText,Q.isXMLDoc=ie.isXML,Q.contains=ie.contains;var ae=Q.expr.match.needsContext,oe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;Q.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Q.find.matchesSelector(r,e)?[r]:[]:Q.find.matches(e,Q.grep(t,function(e){return 1===e.nodeType}))},Q.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(Q(e).filter(function(){for(t=0;n>t;t++)if(Q.contains(i[t],this))return!0}));for(t=0;n>t;t++)Q.find(e,i[t],r);return r=this.pushStack(n>1?Q.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ae.test(e)?Q(e):e||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Q.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ue).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Q?t[0]:t,Q.merge(this,Q.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:K,!0)),oe.test(n[1])&&Q.isPlainObject(t))for(n in t)Q.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=K.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=K,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?"undefined"!=typeof ue.ready?ue.ready(e):e(Q):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))};ce.prototype=Q.fn,ue=Q(K);var fe=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Q(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Q.fn.extend({has:function(e){var t=Q(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Q.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,a=[],o=ae.test(e)||"string"!=typeof e?Q(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&Q.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?Q.unique(a):a)},index:function(e){return e?"string"==typeof e?V.call(Q(e),this[0]):V.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Q.unique(Q.merge(this.get(),Q(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Q.merge([],e.childNodes)}},function(e,t){Q.fn[e]=function(n,r){var i=Q.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Q.filter(r,i)),this.length>1&&(de[e]||Q.unique(i),fe.test(e)&&i.reverse()),this.pushStack(i)}});var he=/\S+/g,pe={};Q.Callbacks=function(e){e="string"==typeof e?pe[e]||a(e):Q.extend({},e);var t,n,r,i,o,s,u=[],l=!e.once&&[],c=function(a){for(t=e.memory&&a,n=!0,s=i||0,i=0,o=u.length,r=!0;u&&o>s;s++)if(u[s].apply(a[0],a[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function a(t){Q.each(t,function(t,n){var r=Q.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&a(n)})}(arguments),r?o=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&Q.each(arguments,function(e,t){for(var n;(n=Q.inArray(t,u,n))>-1;)u.splice(n,1),r&&(o>=n&&o--,s>=n&&s--)}),this},has:function(e){return e?Q.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],o=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred(function(n){Q.each(t,function(t,a){var o=Q.isFunction(e[t])&&e[t];i[a[1]](function(){var e=o&&o.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Q.extend(e,r):r}},i={};return r.pipe=r.then,Q.each(t,function(e,a){var o=a[2],s=a[3];r[a[1]]=o.add,s&&o.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[a[0]]=function(){return i[a[0]+"With"](this===i?r:this,arguments),this},i[a[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,a=H.call(arguments),o=a.length,s=1!==o||e&&Q.isFunction(e.promise)?o:0,u=1===s?e:Q.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?H.call(arguments):i,r===t?u.notifyWith(n,r):--s||u.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);o>i;i++)a[i]&&Q.isFunction(a[i].promise)?a[i].promise().done(l(i,r,a)).fail(u.reject).progress(l(i,n,t)):--s;return s||u.resolveWith(r,a),u.promise()}});var ge;Q.fn.ready=function(e){return Q.ready.promise().done(e),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){(e===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,e!==!0&&--Q.readyWait>0||(ge.resolveWith(K,[Q]),Q.fn.triggerHandler&&(Q(K).triggerHandler("ready"),Q(K).off("ready"))))}}),Q.ready.promise=function(t){return ge||(ge=Q.Deferred(),"complete"===K.readyState?setTimeout(Q.ready):(K.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1))),ge.promise(t)},Q.ready.promise();var me=Q.access=function(e,t,n,r,i,a,o){var s=0,u=e.length,l=null==n;if("object"===Q.type(n)){i=!0;for(s in n)Q.access(e,t,s,n[s],!0,a,o)}else if(void 0!==r&&(i=!0,Q.isFunction(r)||(o=!0),l&&(o?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Q(e),n)})),t))for(;u>s;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):a};Q.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=Q.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Q.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),a=this.cache[i];if("string"==typeof t)a[t]=n;else if(Q.isEmptyObject(a))Q.extend(this.cache[i],t);else for(r in t)a[r]=t[r];return a},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Q.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,a=this.key(e),o=this.cache[a];if(void 0===t)this.cache[a]={};else{Q.isArray(t)?r=t.concat(t.map(Q.camelCase)):(i=Q.camelCase(t),t in o?r=[t,i]:(r=i,r=r in o?[r]:r.match(he)||[])),n=r.length;for(;n--;)delete o[r[n]]}},hasData:function(e){return!Q.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new s,ye=new s,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xe=/([A-Z])/g;Q.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Q.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=ye.get(a),1===a.nodeType&&!ve.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf("data-")&&(r=Q.camelCase(r.slice(5)),u(a,r,i[r])));ve.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ye.set(this,e)}):me(this,function(t){var n,r=Q.camelCase(e);if(a&&void 0===t){if(n=ye.get(a,e),void 0!==n)return n;if(n=ye.get(a,r),void 0!==n)return n;if(n=u(a,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Q.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ve.get(e,t),n&&(!r||Q.isArray(n)?r=ve.access(e,t,Q.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),r=n.length,i=n.shift(),a=Q._queueHooks(e,t),o=function(){Q.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,o,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Q.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Q.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Q.queue(this[0],e):void 0===t?this:this.each(function(){var n=Q.queue(this,e,t);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Q.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=ve.get(a[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)},$e=/^(?:checkbox|radio)$/i;!function(){var e=K.createDocumentFragment(),t=e.appendChild(K.createElement("div")),n=K.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),J.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",J.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Se="undefined";J.focusinBubbles="onfocusin"in e;var Me=/^key/,Te=/^(?:mouse|pointer|contextmenu)|click/,Ce=/^(?:focusinfocus|focusoutblur)$/,Ee=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,t,n,r,i){var a,o,s,u,l,c,f,d,h,p,g,m=ve.get(e);if(m)for(n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=Q.guid++),(u=m.events)||(u=m.events={}),(o=m.handle)||(o=m.handle=function(t){return typeof Q!==Se&&Q.event.triggered!==t.type?Q.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(he)||[""],l=t.length;l--;)s=Ee.exec(t[l])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h&&(f=Q.event.special[h]||{},h=(i?f.delegateType:f.bindType)||h,f=Q.event.special[h]||{},c=Q.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Q.expr.match.needsContext.test(i),namespace:p.join(".")},a),(d=u[h])||(d=u[h]=[],d.delegateCount=0,f.setup&&f.setup.call(e,r,p,o)!==!1||e.addEventListener&&e.addEventListener(h,o,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,c):d.push(c),Q.event.global[h]=!0)},remove:function(e,t,n,r,i){var a,o,s,u,l,c,f,d,h,p,g,m=ve.hasData(e)&&ve.get(e);if(m&&(u=m.events)){for(t=(t||"").match(he)||[""],l=t.length;l--;)if(s=Ee.exec(t[l])||[],h=g=s[1],p=(s[2]||"").split(".").sort(),h){for(f=Q.event.special[h]||{},h=(r?f.delegateType:f.bindType)||h,d=u[h]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=d.length;a--;)c=d[a],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));o&&!d.length&&(f.teardown&&f.teardown.call(e,p,m.handle)!==!1||Q.removeEvent(e,h,m.handle),delete u[h])}else for(h in u)Q.event.remove(e,h+t[l],n,r,!0);Q.isEmptyObject(u)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,n,r,i){var a,o,s,u,l,c,f,d=[r||K],h=X.call(t,"type")?t.type:t,p=X.call(t,"namespace")?t.namespace.split("."):[];if(o=s=r=r||K,3!==r.nodeType&&8!==r.nodeType&&!Ce.test(h+Q.event.triggered)&&(h.indexOf(".")>=0&&(p=h.split("."),h=p.shift(),p.sort()),l=h.indexOf(":")<0&&"on"+h,t=t[Q.expando]?t:new Q.Event(h,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),
n=null==n?[t]:Q.makeArray(n,[t]),f=Q.event.special[h]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Q.isWindow(r)){for(u=f.delegateType||h,Ce.test(u+h)||(o=o.parentNode);o;o=o.parentNode)d.push(o),s=o;s===(r.ownerDocument||K)&&d.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=d[a++])&&!t.isPropagationStopped();)t.type=a>1?u:f.bindType||h,c=(ve.get(o,"events")||{})[t.type]&&ve.get(o,"handle"),c&&c.apply(o,n),c=l&&o[l],c&&c.apply&&Q.acceptData(o)&&(t.result=c.apply(o,n),t.result===!1&&t.preventDefault());return t.type=h,i||t.isDefaultPrevented()||f._default&&f._default.apply(d.pop(),n)!==!1||!Q.acceptData(r)||l&&Q.isFunction(r[h])&&!Q.isWindow(r)&&(s=r[l],s&&(r[l]=null),Q.event.triggered=h,r[h](),Q.event.triggered=void 0,s&&(r[l]=s)),t.result}},dispatch:function(e){e=Q.event.fix(e);var t,n,r,i,a,o=[],s=H.call(arguments),u=(ve.get(this,"events")||{})[e.type]||[],l=Q.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(o=Q.event.handlers.call(this,e,u),t=0;(i=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(a.namespace))&&(e.handleObj=a,e.data=a.data,r=((Q.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,a,o=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;s>n;n++)a=t[n],i=a.selector+" ",void 0===r[i]&&(r[i]=a.needsContext?Q(i,this).index(u)>=0:Q.find(i,this,null,[u]).length),r[i]&&r.push(a);r.length&&o.push({elem:u,handlers:r})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||K,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[Q.expando])return e;var t,n,r,i=e.type,a=e,o=this.fixHooks[i];for(o||(this.fixHooks[i]=o=Te.test(i)?this.mouseHooks:Me.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new Q.Event(a),t=r.length;t--;)n=r[t],e[n]=a[n];return e.target||(e.target=K),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Q.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Q.event.trigger(i,null,t):Q.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Q.Event=function(e,t){return this instanceof Q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&Q.extend(this,t),this.timeStamp=e&&e.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(e,t)},Q.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return(!i||i!==r&&!Q.contains(r,i))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),J.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ve.access(r,t);i||r.addEventListener(e,n,!0),ve.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ve.access(r,t)-1;i?ve.access(r,t,i):(r.removeEventListener(e,n,!0),ve.remove(r,t))}}}),Q.fn.extend({on:function(e,t,n,r,i){var a,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(a=r,r=function(e){return Q().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Q(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Q.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Q.event.trigger(e,t,n,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Oe=/<([\w:]+)/,De=/<|&#?\w+;/,Le=/<(?:script|style|link)/i,Ne=/checked\s*(?:[^=]|=\s*.checked.)/i,je=/^$|\/(?:java|ecma)script/i,Pe=/^true\/(.*)/,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ie={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,Q.extend({clone:function(e,t,n){var r,i,a,o,s=e.cloneNode(!0),u=Q.contains(e.ownerDocument,e);if(!(J.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(o=v(s),a=v(e),r=0,i=a.length;i>r;r++)y(a[r],o[r]);if(t)if(n)for(a=a||v(e),o=o||v(s),r=0,i=a.length;i>r;r++)m(a[r],o[r]);else m(e,s);return o=v(s,"script"),o.length>0&&g(o,!u&&v(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,a,o,s,u,l,c=t.createDocumentFragment(),f=[],d=0,h=e.length;h>d;d++)if(i=e[d],i||0===i)if("object"===Q.type(i))Q.merge(f,i.nodeType?[i]:i);else if(De.test(i)){for(a=a||c.appendChild(t.createElement("div")),o=(Oe.exec(i)||["",""])[1].toLowerCase(),s=Ie[o]||Ie._default,a.innerHTML=s[1]+i.replace(Ae,"<$1></$2>")+s[2],l=s[0];l--;)a=a.lastChild;Q.merge(f,a.childNodes),a=c.firstChild,a.textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",d=0;i=f[d++];)if((!r||-1===Q.inArray(i,r))&&(u=Q.contains(i.ownerDocument,i),a=v(c.appendChild(i),"script"),u&&g(a),n))for(l=0;i=a[l++];)je.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,a=Q.event.special,o=0;void 0!==(n=e[o]);o++){if(Q.acceptData(n)&&(i=n[ve.expando],i&&(t=ve.cache[i]))){if(t.events)for(r in t.events)a[r]?Q.event.remove(n,r):Q.removeEvent(n,r,t.handle);ve.cache[i]&&delete ve.cache[i]}delete ye.cache[n[ye.expando]]}}}),Q.fn.extend({text:function(e){return me(this,function(e){return void 0===e?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Q.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Q.cleanData(v(n)),n.parentNode&&(t&&Q.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Q.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Le.test(e)&&!Ie[(Oe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ae,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(Q.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Q.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=B.apply([],e);var n,r,i,a,o,s,u=0,l=this.length,c=this,f=l-1,d=e[0],g=Q.isFunction(d);if(g||l>1&&"string"==typeof d&&!J.checkClone&&Ne.test(d))return this.each(function(n){var r=c.eq(n);g&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=Q.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Q.map(v(n,"script"),h),a=i.length;l>u;u++)o=n,u!==f&&(o=Q.clone(o,!0,!0),a&&Q.merge(i,v(o,"script"))),t.call(this[u],o,u);if(a)for(s=i[i.length-1].ownerDocument,Q.map(i,p),u=0;a>u;u++)o=i[u],je.test(o.type||"")&&!ve.access(o,"globalEval")&&Q.contains(s,o)&&(o.src?Q._evalUrl&&Q._evalUrl(o.src):Q.globalEval(o.textContent.replace(Re,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Q.fn[e]=function(e){for(var n,r=[],i=Q(e),a=i.length-1,o=0;a>=o;o++)n=o===a?this:this.clone(!0),Q(i[o])[t](n),Y.apply(r,n.get());return this.pushStack(r)}});var Fe,Ue={},ze=/^margin/,qe=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),He=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",i.appendChild(a);var t=e.getComputedStyle(o,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(a)}var n,r,i=K.documentElement,a=K.createElement("div"),o=K.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",J.clearCloneStyle="content-box"===o.style.backgroundClip,a.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",a.appendChild(o),e.getComputedStyle&&Q.extend(J,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=o.appendChild(K.createElement("div"));return n.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",o.style.width="1px",i.appendChild(a),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(a),o.removeChild(n),t}}))}(),Q.swap=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];i=n.apply(e,r||[]);for(a in t)e.style[a]=o[a];return i};var Be=/^(none|table(?!-c[ea]).+)/,Ye=new RegExp("^("+we+")(.*)$","i"),Ve=new RegExp("^([+-])=("+we+")","i"),We={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=Q.camelCase(t),u=e.style;return t=Q.cssProps[s]||(Q.cssProps[s]=k(u,s)),o=Q.cssHooks[t]||Q.cssHooks[s],void 0===n?o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:u[t]:(a=typeof n,"string"===a&&(i=Ve.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Q.css(e,t)),a="number"),null!=n&&n===n&&("number"!==a||Q.cssNumber[s]||(n+="px"),J.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,a,o,s=Q.camelCase(t);return t=Q.cssProps[s]||(Q.cssProps[s]=k(e.style,s)),o=Q.cssHooks[t]||Q.cssHooks[s],o&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(a=parseFloat(i),n===!0||Q.isNumeric(a)?a||0:i):i}}),Q.each(["height","width"],function(e,t){Q.cssHooks[t]={get:function(e,n,r){return n?Be.test(Q.css(e,"display"))&&0===e.offsetWidth?Q.swap(e,We,function(){return M(e,t,r)}):M(e,t,r):void 0},set:function(e,n,r){var i=r&&He(e);return $(e,n,r?S(e,t,r,"border-box"===Q.css(e,"boxSizing",!1,i),i):0)}}}),Q.cssHooks.marginRight=_(J.reliableMarginRight,function(e,t){return t?Q.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(e,t){Q.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+_e[r]+t]=a[r]||a[r-2]||a[0];return i}},ze.test(e)||(Q.cssHooks[e+t].set=$)}),Q.fn.extend({css:function(e,t){return me(this,function(e,t,n){var r,i,a={},o=0;if(Q.isArray(t)){for(r=He(e),i=t.length;i>o;o++)a[t[o]]=Q.css(e,t[o],!1,r);return a}return void 0!==n?Q.style(e,t,n):Q.css(e,t)},e,t,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=C,C.prototype={constructor:C,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(Q.cssNumber[n]?"":"px")},cur:function(){var e=C.propHooks[this.prop];return e&&e.get?e.get(this):C.propHooks._default.get(this)},run:function(e){var t,n=C.propHooks[this.prop];return this.pos=t=this.options.duration?Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.fx=C.prototype.init,Q.fx.step={};var Je,Ke,Ze=/^(?:toggle|show|hide)$/,Qe=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[D],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Qe.exec(t),a=i&&i[3]||(Q.cssNumber[e]?"":"px"),o=(Q.cssNumber[e]||"px"!==a&&+r)&&Qe.exec(Q.css(n.elem,e)),s=1,u=20;if(o&&o[3]!==a){a=a||o[3],i=i||[],o=+r||1;do s=s||".5",o/=s,Q.style(n.elem,e,o+a);while(s!==(s=n.cur()/r)&&1!==s&&--u)}return i&&(o=n.start=+o||+r||0,n.unit=a,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};Q.Animation=Q.extend(N,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Q.speed=function(e,t,n){var r=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return r.duration=Q.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Q.fx.speeds?Q.fx.speeds[r.duration]:Q.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Q.isFunction(r.old)&&r.old.call(this),r.queue&&Q.dequeue(this,r.queue)},r},Q.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Q.isEmptyObject(e),a=Q.speed(t,n,r),o=function(){var t=N(this,Q.extend({},e),a);(i||ve.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",a=Q.timers,o=ve.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&et.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));(t||!n)&&Q.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=Q.timers,o=r?r.length:0;for(n.finish=!0,Q.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Q.each(["toggle","show","hide"],function(e,t){var n=Q.fn[t];Q.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,r,i)}}),Q.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Q.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Q.timers=[],Q.fx.tick=function(){var e,t=0,n=Q.timers;for(Je=Q.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Q.fx.stop(),Je=void 0},Q.fx.timer=function(e){Q.timers.push(e),e()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Ke||(Ke=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Ke),Ke=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(e,t){return e=Q.fx?Q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=K.createElement("input"),t=K.createElement("select"),n=t.appendChild(K.createElement("option"));e.type="checkbox",J.checkOn=""!==e.value,J.optSelected=n.selected,t.disabled=!0,J.optDisabled=!n.disabled,e=K.createElement("input"),e.value="t",e.type="radio",J.radioValue="t"===e.value}();var rt,it,at=Q.expr.attrHandle;Q.fn.extend({attr:function(e,t){return me(this,Q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})}}),Q.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===Se?Q.prop(e,t,n):(1===a&&Q.isXMLDoc(e)||(t=t.toLowerCase(),r=Q.attrHooks[t]||(Q.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Q.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void Q.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,a=t&&t.match(he);if(a&&1===e.nodeType)for(;n=a[i++];)r=Q.propFix[n]||n,Q.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!J.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?Q.removeAttr(e,n):e.setAttribute(n,n),n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(e,t){var n=at[t]||Q.find.attr;at[t]=function(e,t,r){var i,a;return r||(a=at[t],at[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,at[t]=a),i}});var ot=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(e,t){return me(this,Q.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Q.propFix[e]||e]})}}),Q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,a,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return a=1!==o||!Q.isXMLDoc(e),a&&(t=Q.propFix[t]||t,i=Q.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||ot.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),J.optSelected||(Q.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(e){var t,n,r,i,a,o,s="string"==typeof e&&e,u=0,l=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):" ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=Q.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,a,o,s=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(he)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):"")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");o=e?Q.trim(r):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Q.isFunction(e)?function(n){Q(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=Q(this),a=e.match(he)||[];t=a[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Se||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var ut=/\r/g;Q.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=Q.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Q(this).val()):e,null==i?i="":"number"==typeof i?i+="":Q.isArray(i)&&(i=Q.map(i,function(e){return null==e?"":e+""})),t=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Q.valHooks[i.type]||Q.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ut,""):null==n?"":n)}}}),Q.extend({valHooks:{option:{get:function(e){var t=Q.find.attr(e,"value");return null!=t?t:Q.trim(Q.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,a="select-one"===e.type||0>i,o=a?null:[],s=a?i+1:r.length,u=0>i?s:a?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(J.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Q.nodeName(n.parentNode,"optgroup"))){if(t=Q(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,a=Q.makeArray(t),o=i.length;o--;)r=i[o],(r.selected=Q.inArray(r.value,a)>=0)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(e,t){return Q.isArray(t)?e.checked=Q.inArray(Q(e).val(),t)>=0:void 0}},J.checkOn||(Q.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Q.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Q.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=Q.now(),ct=/\?/;Q.parseJSON=function(e){return JSON.parse(e+"")},Q.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+e),t};var ft=/#.*$/,dt=/([?&])_=[^&]*/,ht=/^(.*?):[ \t]*([^\r\n]*)$/gm,pt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},bt={},xt="*/".concat("*"),wt=e.location.href,_t=vt.exec(wt.toLowerCase())||[];Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:pt.test(_t[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,Q.ajaxSettings),t):R(Q.ajaxSettings,e)},ajaxPrefilter:j(yt),ajaxTransport:j(bt),ajax:function(e,t){function n(e,t,n,o){var u,c,v,y,x,_=t;2!==b&&(b=2,s&&clearTimeout(s),r=void 0,a=o||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=I(f,w,n)),y=F(f,y,w,u),u?(f.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(Q.lastModified[i]=x),x=w.getResponseHeader("etag"),x&&(Q.etag[i]=x)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=y.state,c=y.data,v=y.error,u=!v)):(v=_,(e||!_)&&(_="error",0>e&&(e=0))),w.status=e,w.statusText=(t||_)+"",u?p.resolveWith(d,[c,_,w]):p.rejectWith(d,[w,_,v]),w.statusCode(m),m=void 0,l&&h.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:v]),g.fireWith(d,[w,_]),l&&(h.trigger("ajaxComplete",[w,f]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,a,o,s,u,l,c,f=Q.ajaxSetup({},t),d=f.context||f,h=f.context&&(d.nodeType||d.jquery)?Q(d):Q.event,p=Q.Deferred(),g=Q.Callbacks("once memory"),m=f.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!o)for(o={};t=ht.exec(a);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return r&&r.abort(t),n(0,t),this}};if(p.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||wt)+"").replace(ft,"").replace(mt,_t[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=Q.trim(f.dataType||"*").toLowerCase().match(he)||[""],null==f.crossDomain&&(u=vt.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===_t[1]&&u[2]===_t[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(_t[3]||("http:"===_t[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Q.param(f.data,f.traditional)),P(yt,f,t,w),2===b)return w;l=Q.event&&f.global,l&&0===Q.active++&&Q.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!gt.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ct.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=dt.test(i)?i.replace(dt,"$1_="+lt++):i+(ct.test(i)?"&":"?")+"_="+lt++)),f.ifModified&&(Q.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Q.lastModified[i]),Q.etag[i]&&w.setRequestHeader("If-None-Match",Q.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+xt+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(d,w,f)===!1||2===b))return w.abort();x="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=P(bt,f,t,w)){w.readyState=1,l&&h.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{b=1,r.send(v,n)}catch(_){if(!(2>b))throw _;n(-1,_)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Q.get(e,t,n,"json")},getScript:function(e,t){return Q.get(e,void 0,t,"script")}}),Q.each(["get","post"],function(e,t){Q[t]=function(e,n,r,i){return Q.isFunction(n)&&(i=i||r,r=n,n=void 0),Q.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Q._evalUrl=function(e){return Q.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Q.fn.extend({wrapAll:function(e){var t;return Q.isFunction(e)?this.each(function(t){Q(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Q(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Q.isFunction(e)?function(t){Q(this).wrapInner(e.call(this,t))}:function(){var t=Q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Q.isFunction(e);return this.each(function(n){Q(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)};var kt=/%20/g,$t=/\[\]$/,St=/\r?\n/g,Mt=/^(?:submit|button|image|reset|file)$/i,Tt=/^(?:input|select|textarea|keygen)/i;Q.param=function(e,t){var n,r=[],i=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t);

};if(void 0===t&&(t=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){i(this.name,this.value)});else for(n in e)U(n,e[n],t,i);return r.join("&").replace(kt,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&Tt.test(this.nodeName)&&!Mt.test(e)&&(this.checked||!$e.test(e))}).map(function(e,t){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(e){return{name:t.name,value:e.replace(St,"\r\n")}}):{name:t.name,value:n.replace(St,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Ct=0,Et={},At={0:200,1223:204},Ot=Q.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Et)Et[e]()}),J.cors=!!Ot&&"withCredentials"in Ot,J.ajax=Ot=!!Ot,Q.ajaxTransport(function(e){var t;return J.cors||Ot&&!e.crossDomain?{send:function(n,r){var i,a=e.xhr(),o=++Ct;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)a[i]=e.xhrFields[i];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)a.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Et[o],t=a.onload=a.onerror=null,"abort"===e?a.abort():"error"===e?r(a.status,a.statusText):r(At[a.status]||a.status,a.statusText,"string"==typeof a.responseText?{text:a.responseText}:void 0,a.getAllResponseHeaders()))}},a.onload=t(),a.onerror=t("error"),t=Et[o]=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Q.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Q("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),K.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Dt=[],Lt=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||Q.expando+"_"+lt++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(t,n,r){var i,a,o,s=t.jsonp!==!1&&(Lt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=Q.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Lt,"$1"+i):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||Q.error(i+" was not called"),o[0]},t.dataTypes[0]="json",a=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=a,t[i]&&(t.jsonpCallback=n.jsonpCallback,Dt.push(i)),o&&Q.isFunction(a)&&a(o[0]),o=a=void 0}),"script"):void 0}),Q.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||K;var r=oe.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Q.buildFragment([e],t,i),i&&i.length&&Q(i).remove(),Q.merge([],r.childNodes))};var Nt=Q.fn.load;Q.fn.load=function(e,t,n){if("string"!=typeof e&&Nt)return Nt.apply(this,arguments);var r,i,a,o=this,s=e.indexOf(" ");return s>=0&&(r=Q.trim(e.slice(s)),e=e.slice(0,s)),Q.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&Q.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){a=arguments,o.html(r?Q("<div>").append(Q.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,a||[e.responseText,t,e])}),this},Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length};var jt=e.document.documentElement;Q.offset={setOffset:function(e,t,n){var r,i,a,o,s,u,l,c=Q.css(e,"position"),f=Q(e),d={};"static"===c&&(e.style.position="relative"),s=f.offset(),a=Q.css(e,"top"),u=Q.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(a+u).indexOf("auto")>-1,l?(r=f.position(),o=r.top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(u)||0),Q.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):f.css(d)}},Q.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},a=r&&r.ownerDocument;if(a)return t=a.documentElement,Q.contains(t,r)?(typeof r.getBoundingClientRect!==Se&&(i=r.getBoundingClientRect()),n=z(a),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Q.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Q.nodeName(e[0],"html")||(r=e.offset()),r.top+=Q.css(e[0],"borderTopWidth",!0),r.left+=Q.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Q.css(n,"marginTop",!0),left:t.left-r.left-Q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||jt;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||jt})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Q.fn[t]=function(i){return me(this,function(t,i,a){var o=z(t);return void 0===a?o?o[n]:t[i]:void(o?o.scrollTo(r?e.pageXOffset:a,r?a:e.pageYOffset):t[i]=a)},t,i,arguments.length,null)}}),Q.each(["top","left"],function(e,t){Q.cssHooks[t]=_(J.pixelPosition,function(e,n){return n?(n=w(e,t),qe.test(n)?Q(e).position()[t]+"px":n):void 0})}),Q.each({Height:"height",Width:"width"},function(e,t){Q.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Q.fn[r]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(r===!0||i===!0?"margin":"border");return me(this,function(t,n,r){var i;return Q.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Q.css(t,n,o):Q.style(t,n,r,o)},t,a?r:void 0,a,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Pt=e.jQuery,Rt=e.$;return Q.noConflict=function(t){return e.$===Q&&(e.$=Rt),t&&e.jQuery===Q&&(e.jQuery=Pt),Q},typeof t===Se&&(e.jQuery=e.$=Q),Q}),/**
 * @license AngularJS v1.4.7
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t,n){"use strict";function r(e,t){return t=t||Error,function(){var n,r,i=2,a=arguments,o=a[0],s="["+(e?e+":":"")+o+"] ",u=a[1];for(s+=u.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1),n=t+i;return n<a.length?be(a[n]):e}),s+="\nhttp://errors.angularjs.org/1.4.7/"+(e?e+"/":"")+o,r=i,n="?";r<a.length;r++,n="&")s+=n+"p"+(r-i)+"="+encodeURIComponent(be(a[r]));return new t(s)}}function i(e){if(null==e||C(e))return!1;var t="length"in Object(e)&&e.length;return e.nodeType===Wr&&t?!0:k(e)||Ir(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){var r,o;if(e)if(M(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(Ir(e)||i(e)){var s="object"!=typeof e;for(r=0,o=e.length;o>r;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==a)e.forEach(t,n,e);else if(_(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)wr.call(e,r)&&t.call(n,e[r],r,e);return e}function o(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function s(e){return function(t,n){e(n,t)}}function u(){return++Pr}function l(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function c(e,t,n){for(var r=e.$$hashKey,i=0,a=t.length;a>i;++i){var o=t[i];if(w(o)||M(o))for(var s=Object.keys(o),u=0,f=s.length;f>u;u++){var d=s[u],h=o[d];n&&w(h)?S(h)?e[d]=new Date(h.valueOf()):T(h)?e[d]=new RegExp(h):(w(e[d])||(e[d]=Ir(h)?[]:{}),c(e[d],[h],!0)):e[d]=h}}return l(e,r),e}function f(e){return c(e,Er.call(arguments,1),!1)}function d(e){return c(e,Er.call(arguments,1),!0)}function h(e){return parseInt(e,10)}function p(e,t){return f(Object.create(e),t)}function g(){}function m(e){return e}function v(e){return function(){return e}}function y(e){return M(e.toString)&&e.toString!==Object.prototype.toString}function b(e){return"undefined"==typeof e}function x(e){return"undefined"!=typeof e}function w(e){return null!==e&&"object"==typeof e}function _(e){return null!==e&&"object"==typeof e&&!Lr(e)}function k(e){return"string"==typeof e}function $(e){return"number"==typeof e}function S(e){return"[object Date]"===Dr.call(e)}function M(e){return"function"==typeof e}function T(e){return"[object RegExp]"===Dr.call(e)}function C(e){return e&&e.window===e}function E(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"[object File]"===Dr.call(e)}function O(e){return"[object FormData]"===Dr.call(e)}function D(e){return"[object Blob]"===Dr.call(e)}function L(e){return"boolean"==typeof e}function N(e){return e&&M(e.then)}function j(e){return Fr.test(Dr.call(e))}function P(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function R(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function I(e){return xr(e.nodeName||e[0]&&e[0].nodeName)}function F(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function U(e,t,n,r){if(C(e)||E(e))throw Nr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(j(t))throw Nr("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t){if(e===t)throw Nr("cpi","Can't copy! Source and destination are identical.");n=n||[],r=r||[],w(e)&&(n.push(e),r.push(t));var i;if(Ir(e)){t.length=0;for(var o=0;o<e.length;o++)t.push(U(e[o],null,n,r))}else{var s=t.$$hashKey;if(Ir(t)?t.length=0:a(t,function(e,n){delete t[n]}),_(e))for(i in e)t[i]=U(e[i],null,n,r);else if(e&&"function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&(t[i]=U(e[i],null,n,r));else for(i in e)wr.call(e,i)&&(t[i]=U(e[i],null,n,r));l(t,s)}}else if(t=e,w(e)){var u;if(n&&-1!==(u=n.indexOf(e)))return r[u];if(Ir(e))return U(e,[],n,r);if(j(e))t=new e.constructor(e);else if(S(e))t=new Date(e.getTime());else if(T(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else{if(!M(e.cloneNode)){var c=Object.create(Lr(e));return U(e,c,n,r)}t=e.cloneNode(!0)}r&&(n.push(e),r.push(t))}return t}function z(e,t){if(Ir(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(w(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function q(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,a=typeof e,o=typeof t;if(a==o&&"object"==a){if(!Ir(e)){if(S(e))return S(t)?q(e.getTime(),t.getTime()):!1;if(T(e))return T(t)?e.toString()==t.toString():!1;if(E(e)||E(t)||C(e)||C(t)||Ir(t)||S(t)||T(t))return!1;i=me();for(r in e)if("$"!==r.charAt(0)&&!M(e[r])){if(!q(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&x(t[r])&&!M(t[r]))return!1;return!0}if(!Ir(t))return!1;if((n=e.length)==t.length){for(r=0;n>r;r++)if(!q(e[r],t[r]))return!1;return!0}}return!1}function H(e,t,n){return e.concat(Er.call(t,n))}function B(e,t){return Er.call(e,t||0)}function Y(e,t){var n=arguments.length>2?B(arguments,2):[];return!M(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,H(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function V(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=n:C(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":E(r)&&(i="$SCOPE"),i}function W(e,t){return"undefined"==typeof e?n:($(t)||(t=t?2:null),JSON.stringify(e,V,t))}function G(e){return k(e)?JSON.parse(e):e}function X(e,t){var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function J(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function K(e,t,n){n=n?-1:1;var r=X(t,e.getTimezoneOffset());return J(e,n*(r-e.getTimezoneOffset()))}function Z(e){e=Mr(e).clone();try{e.empty()}catch(t){}var n=Mr("<div>").append(e).html();try{return e[0].nodeType===Xr?xr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+xr(t)})}catch(t){return xr(n)}}function Q(e){try{return decodeURIComponent(e)}catch(t){}}function ee(e){var t={};return a((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(r=e.substring(0,n),i=e.substring(n+1)),r=Q(r),x(r)&&(i=x(i)?Q(i):!0,wr.call(t,r)?Ir(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function te(e){var t=[];return a(e,function(e,n){Ir(e)?a(e,function(e){t.push(re(n,!0)+(e===!0?"":"="+re(e,!0)))}):t.push(re(n,!0)+(e===!0?"":"="+re(e,!0)))}),t.length?t.join("&"):""}function ne(e){return re(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function re(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ie(e,t){var n,r,i=Br.length;for(r=0;i>r;++r)if(n=Br[r]+t,k(n=e.getAttribute(n)))return n;return null}function ae(e,t){var n,r,i={};a(Br,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),a(Br,function(t){var i,a=t+"app";!n&&(i=e.querySelector("["+a.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(a))}),n&&(i.strictDi=null!==ie(n,"strict-di"),t(n,r?[r]:[],i))}function oe(n,r,i){w(i)||(i={});var o={strictDi:!1};i=f(o,i);var s=function(){if(n=Mr(n),n.injector()){var e=n[0]===t?"document":Z(n);throw Nr("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var a=Ze(r,i.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),a},u=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return e&&u.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(u,"")),e&&!l.test(e.name)?s():(e.name=e.name.replace(l,""),jr.resumeBootstrap=function(e){return a(e,function(e){r.push(e)}),s()},void(M(jr.resumeDeferredBootstrap)&&jr.resumeDeferredBootstrap()))}function se(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function ue(e){var t=jr.element(e).injector();if(!t)throw Nr("test","no injector found for element argument to getTestability");return t.get("$$testability")}function le(e,t){return t=t||"_",e.replace(Yr,function(e,n){return(n?t:"")+e.toLowerCase()})}function ce(){var t;if(!Vr){var r=Hr();Tr=b(r)?e.jQuery:r?e[r]:n,Tr&&Tr.fn.on?(Mr=Tr,f(Tr.fn,{scope:hi.scope,isolateScope:hi.isolateScope,controller:hi.controller,injector:hi.injector,inheritedData:hi.inheritedData}),t=Tr.cleanData,Tr.cleanData=function(e){var n;if(Rr)Rr=!1;else for(var r,i=0;null!=(r=e[i]);i++)n=Tr._data(r,"events"),n&&n.$destroy&&Tr(r).triggerHandler("$destroy");t(e)}):Mr=Ce,jr.element=Mr,Vr=!0}}function fe(e,t,n){if(!e)throw Nr("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function de(e,t,n){return n&&Ir(e)&&(e=e[e.length-1]),fe(M(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function he(e,t){if("hasOwnProperty"===e)throw Nr("badname","hasOwnProperty is not a valid {0} name",t)}function pe(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;o>s;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&M(e)?Y(a,e):e}function ge(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=Mr(Er.call(e,0,i))),t.push(n));return t||e}function me(){return Object.create(null)}function ve(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),a=t(e,"angular",Object);return a.$$minErr=a.$$minErr||r,t(a,"module",function(){var e={};return function(r,a,o){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),a&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,t,n,r){return r||(r=i),function(){return r[n||"push"]([e,t,arguments]),c}}function t(e,t){return function(n,a){return a&&M(a)&&(a.$$moduleName=r),i.push([e,t,arguments]),c}}if(!a)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var i=[],s=[],u=[],l=e("$injector","invoke","push",s),c={_invokeQueue:i,_configBlocks:s,_runBlocks:u,requires:a,name:r,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:t("$provide","decorator"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:l,run:function(e){return u.push(e),this}};return o&&l(o),c})}})}function ye(e){var t=[];return JSON.stringify(e,function(e,n){if(n=V(e,n),w(n)){if(t.indexOf(n)>=0)return"...";t.push(n)}return n})}function be(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):b(e)?"undefined":"string"!=typeof e?ye(e):e}function xe(t){f(t,{bootstrap:oe,copy:U,extend:f,merge:d,equals:q,element:Mr,forEach:a,injector:Ze,noop:g,bind:Y,toJson:W,fromJson:G,identity:m,isUndefined:b,isDefined:x,isString:k,isFunction:M,isObject:w,isNumber:$,isElement:P,isArray:Ir,version:Qr,isDate:S,lowercase:xr,uppercase:_r,callbacks:{counter:0},getTestability:ue,$$minErr:r,$$csp:qr,reloadWithDebugInfo:se}),(Cr=ve(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:vn}),e.provider("$compile",ut).directive({a:ha,input:Aa,textarea:Aa,form:ya,script:ko,select:Mo,style:Co,option:To,ngBind:La,ngBindHtml:ja,ngBindTemplate:Na,ngClass:Ra,ngClassEven:Fa,ngClassOdd:Ia,ngCloak:Ua,ngController:za,ngForm:ba,ngHide:vo,ngIf:Ba,ngInclude:Ya,ngInit:Wa,ngNonBindable:so,ngPluralize:fo,ngRepeat:ho,ngShow:mo,ngStyle:yo,ngSwitch:bo,ngSwitchWhen:xo,ngSwitchDefault:wo,ngOptions:co,ngTransclude:_o,ngModel:io,ngList:Ga,ngChange:Pa,pattern:Ao,ngPattern:Ao,required:Eo,ngRequired:Eo,minlength:Do,ngMinlength:Do,maxlength:Oo,ngMaxlength:Oo,ngValue:Da,ngModelOptions:oo}).directive({ngInclude:Va}).directive(pa).directive(qa),e.provider({$anchorScroll:Qe,$animate:Ci,$animateCss:Ei,$$animateQueue:Ti,$$AnimateRunner:Mi,$browser:at,$cacheFactory:ot,$controller:ht,$document:pt,$exceptionHandler:gt,$filter:On,$$forceReflow:Ni,$interpolate:Et,$interval:At,$http:St,$httpParamSerializer:vt,$httpParamSerializerJQLike:yt,$httpBackend:Tt,$xhrFactory:Mt,$location:Bt,$log:Yt,$parse:fn,$rootScope:mn,$q:dn,$$q:hn,$sce:wn,$sceDelegate:xn,$sniffer:_n,$templateCache:st,$templateRequest:kn,$$testability:$n,$timeout:Sn,$window:Cn,$$rAF:gn,$$jqLite:We,$$HashMap:vi,$$cookieReader:An})}])}function we(){return++ti}function _e(e){return e.replace(ii,function(e,t,n,r){return r?n.toUpperCase():n}).replace(ai,"Moz$1")}function ke(e){return!li.test(e)}function $e(e){var t=e.nodeType;return t===Wr||!t||t===Kr}function Se(e){for(var t in ei[e.ng339])return!0;return!1}function Me(e,t){var n,r,i,o,s=t.createDocumentFragment(),u=[];if(ke(e))u.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),r=(ci.exec(e)||["",""])[1].toLowerCase(),i=di[r]||di._default,n.innerHTML=i[1]+e.replace(fi,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;u=H(u,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",a(u,function(e){s.appendChild(e)}),s}function Te(e,n){n=n||t;var r;return(r=ui.exec(e))?[n.createElement(r[1])]:(r=Me(e,n))?r.childNodes:[]}function Ce(e){if(e instanceof Ce)return e;var t;if(k(e)&&(e=Ur(e),t=!0),!(this instanceof Ce)){if(t&&"<"!=e.charAt(0))throw si("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Ce(e)}t?Ie(this,Te(e)):Ie(this,e)}function Ee(e){return e.cloneNode(!0)}function Ae(e,t){if(t||De(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)De(n[r])}function Oe(e,t,n,r){if(x(r))throw si("offargs","jqLite#off() does not support the `selector` argument");var i=Le(e),o=i&&i.events,s=i&&i.handle;if(s)if(t)a(t.split(" "),function(t){if(x(n)){var r=o[t];if(F(r||[],n),r&&r.length>0)return}ri(e,t,s),delete o[t]});else for(t in o)"$destroy"!==t&&ri(e,t,s),delete o[t]}function De(e,t){var r=e.ng339,i=r&&ei[r];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),Oe(e)),delete ei[r],e.ng339=n}}function Le(e,t){var r=e.ng339,i=r&&ei[r];return t&&!i&&(e.ng339=r=we(),i=ei[r]={events:{},data:{},handle:n}),i}function Ne(e,t,n){if($e(e)){var r=x(n),i=!r&&t&&!w(t),a=!t,o=Le(e,!i),s=o&&o.data;if(r)s[t]=n;else{if(a)return s;if(i)return s&&s[t];f(s,t)}}}function je(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Pe(e,t){t&&e.setAttribute&&a(t.split(" "),function(t){e.setAttribute("class",Ur((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Ur(t)+" "," ")))})}function Re(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");a(t.split(" "),function(e){e=Ur(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",Ur(n))}}function Ie(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Fe(e,t){return Ue(e,"$"+(t||"ngController")+"Controller")}function Ue(e,t,n){e.nodeType==Kr&&(e=e.documentElement);for(var r=Ir(t)?t:[t];e;){for(var i=0,a=r.length;a>i;i++)if(x(n=Mr.data(e,r[i])))return n;e=e.parentNode||e.nodeType===Zr&&e.host}}function ze(e){for(Ae(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function qe(e,t){t||Ae(e);var n=e.parentNode;n&&n.removeChild(e)}function He(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):Mr(n).on("load",t)}function Be(e,t){var n=pi[t.toLowerCase()];return n&&gi[I(e)]&&n}function Ye(e){return mi[e]}function Ve(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(b(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},a>1&&(i=z(i));for(var s=0;a>s;s++)n.isImmediatePropagationStopped()||i[s].call(e,n)}};return n.elem=e,n}function We(){this.$get=function(){return f(Ce,{hasClass:function(e,t){return e.attr&&(e=e[0]),je(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),Re(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Pe(e,t)}})}}function Ge(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||u)():r+":"+e}function Xe(e,t){if(t){var n=0;this.nextUid=function(){return++n}}a(e,this.put,this)}function Je(e){var t=e.toString().replace(wi,""),n=t.match(yi);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ke(e,t,n){var r,i,o,s;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw k(n)&&n||(n=e.name||Je(e)),_i("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=e.toString().replace(wi,""),o=i.match(yi),a(o[1].split(bi),function(e){e.replace(xi,function(e,t,n){r.push(n)})})}e.$inject=r}}else Ir(e)?(s=e.length-1,de(e[s],"fn"),r=e.slice(0,s)):de(e,"fn",!0);return r}function Ze(e,t){function r(e){return function(t,n){return w(t)?void a(t,s(e)):e(t,n)}}function i(e,t){if(he(e,"service"),(M(t)||Ir(t))&&(t=$.instantiate(t)),!t.$get)throw _i("pget","Provider '{0}' must define $get factory method.",e);return _[e+m]=t}function o(e,t){return function(){var n=T.invoke(t,this);if(b(n))throw _i("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function u(e,t,n){return i(e,{$get:n!==!1?o(e,t):t})}function l(e,t){return u(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return u(e,v(t),!1)}function f(e,t){he(e,"constant"),_[e]=t,S[e]=t}function d(e,t){var n=$.get(e+m),r=n.$get;n.$get=function(){var e=T.invoke(r,n);return T.invoke(t,null,{$delegate:e})}}function h(e){fe(b(e)||Ir(e),"modulesToLoad","not an array");var t,n=[];return a(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=$.get(r[0]);i[r[1]].apply(i,r[2])}}if(!x.get(e)){x.put(e,!0);try{k(e)?(t=Cr(e),n=n.concat(h(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):M(e)?n.push($.invoke(e)):Ir(e)?n.push($.invoke(e)):de(e,"module")}catch(i){throw Ir(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),_i("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function p(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===g)throw _i("cdep","Circular dependency found: {0}",t+" <- "+y.join(" <- "));return e[t]}try{return y.unshift(t),e[t]=g,e[t]=n(t,r)}catch(i){throw e[t]===g&&delete e[t],i}finally{y.shift()}}function i(e,n,i,a){"string"==typeof i&&(a=i,i=null);var o,s,u,l=[],c=Ze.$$annotate(e,t,a);for(s=0,o=c.length;o>s;s++){if(u=c[s],"string"!=typeof u)throw _i("itkn","Incorrect injection token! Expected service name as string, got {0}",u);l.push(i&&i.hasOwnProperty(u)?i[u]:r(u,a))}return Ir(e)&&(e=e[o]),e.apply(n,l)}function a(e,t,n){var r=Object.create((Ir(e)?e[e.length-1]:e).prototype||null),a=i(e,r,t,n);return w(a)||M(a)?a:r}return{invoke:i,instantiate:a,get:r,annotate:Ze.$$annotate,has:function(t){return _.hasOwnProperty(t+m)||e.hasOwnProperty(t)}}}t=t===!0;var g={},m="Provider",y=[],x=new Xe([],!0),_={$provide:{provider:r(i),factory:r(u),service:r(l),value:r(c),constant:r(f),decorator:d}},$=_.$injector=p(_,function(e,t){throw jr.isString(t)&&y.push(t),_i("unpr","Unknown provider: {0}",y.join(" <- "))}),S={},T=S.$injector=p(S,function(e,t){var r=$.get(e+m,t);return T.invoke(r.$get,r,n,e)});return a(h(e),function(e){e&&T.invoke(e)}),T}function Qe(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===I(e)?(t=e,!0):void 0}),t}function a(){var e=s.yOffset;if(M(e))e=e();else if(P(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else $(e)||(e=0);return e}function o(e){if(e){e.scrollIntoView();var n=a();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){e=k(e)?e:n.hash();var t;e?(t=u.getElementById(e))?o(t):(t=i(u.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}var u=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&He(function(){r.$evalAsync(s)})}),s}]}function et(e,t){return e||t?e?t?(Ir(e)&&(e=e.join(" ")),Ir(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function tt(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===$i)return n}}function nt(e){k(e)&&(e=e.split(" "));var t=me();return a(e,function(e){e.length&&(t[e]=!0)}),t}function rt(e){return w(e)?e:{}}function it(e,t,n,r){function i(e){try{e.apply(null,B(arguments,1))}finally{if(y--,0===y)for(;x.length;)try{x.pop()()}catch(t){n.error(t)}}}function o(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){S=null,l(),c()}function u(){try{return h.state}catch(e){}}function l(){w=u(),w=b(w)?null:w,q(w,C)&&(w=C),C=w}function c(){(k!==f.url()||_!==w)&&(k=f.url(),_=w,a(M,function(e){e(f.url(),w)}))}var f=this,d=(t[0],e.location),h=e.history,p=e.setTimeout,m=e.clearTimeout,v={};f.isMock=!1;var y=0,x=[];f.$$completeOutstandingRequest=i,f.$$incOutstandingRequestCount=function(){y++},f.notifyWhenNoOutstandingRequests=function(e){0===y?e():x.push(e)};var w,_,k=d.href,$=t.find("base"),S=null;l(),_=w,f.url=function(t,n,i){if(b(i)&&(i=null),d!==e.location&&(d=e.location),h!==e.history&&(h=e.history),t){var a=_===i;if(k===t&&(!r.history||a))return f;var s=k&&jt(k)===jt(t);return k=t,_=i,!r.history||s&&a?((!s||S)&&(S=t),n?d.replace(t):s?d.hash=o(t):d.href=t,d.href!==t&&(S=t)):(h[n?"replaceState":"pushState"](i,"",t),l(),_=w),f}return S||d.href.replace(/%27/g,"'")},f.state=function(){return w};var M=[],T=!1,C=null;f.onUrlChange=function(t){return T||(r.history&&Mr(e).on("popstate",s),Mr(e).on("hashchange",s),T=!0),M.push(t),t},f.$$applicationDestroyed=function(){Mr(e).off("hashchange popstate",s)},f.$$checkUrlChange=c,f.baseHref=function(){var e=$.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""},f.defer=function(e,t){var n;return y++,n=p(function(){delete v[n],i(e)},t||0),v[n]=!0,n},f.defer.cancel=function(e){return v[e]?(delete v[e],m(e),i(g),!0):!1}}function at(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new it(e,r,t,n)}]}function ot(){this.$get=function(){function e(e,n){function i(e){e!=d&&(h?h==e&&(h=e.n):h=e,a(e.n,e.p),a(e,d),d=e,d.n=null)}function a(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var o=0,s=f({},n,{id:e}),u={},l=n&&n.capacity||Number.MAX_VALUE,c={},d=null,h=null;return t[e]={put:function(e,t){if(!b(t)){if(l<Number.MAX_VALUE){var n=c[e]||(c[e]={key:e});i(n)}return e in u||o++,u[e]=t,o>l&&this.remove(h.key),t}},get:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;i(t)}return u[e]},remove:function(e){if(l<Number.MAX_VALUE){var t=c[e];if(!t)return;t==d&&(d=t.p),t==h&&(h=t.n),a(t.n,t.p),delete c[e]}delete u[e],o--},removeAll:function(){u={},o=0,c={},d=h=null},destroy:function(){u=null,s=null,c=null,delete t[e]},info:function(){return f({},s,{size:o})}}}var t={};return e.info=function(){var e={};return a(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function st(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function ut(e,r){function i(e,t,n){var r=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return a(e,function(e,a){var o=e.match(r);if(!o)throw Ai("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,a,e,n?"controller bindings definition":"isolate scope definition");i[a]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||a}}),i}function o(e,t){var n={isolateScope:null,bindToController:null};if(w(e.scope)&&(e.bindToController===!0?(n.bindToController=i(e.scope,t,!0),n.isolateScope={}):n.isolateScope=i(e.scope,t,!1)),w(e.bindToController)&&(n.bindToController=i(e.bindToController,t,!0)),w(n.bindToController)){var r=e.controller,a=e.controllerAs;if(!r)throw Ai("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);if(!dt(r,a))throw Ai("noident","Cannot bind to controller without identifier for directive '{0}'.",t)}return n}function u(e){var t=e.charAt(0);if(!t||t!==xr(t))throw Ai("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw Ai("baddir","Directive name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}var l={},c="Directive",d=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,h=/(([\w\-]+)(?:\:([^;]+))?;?)/,y=R("ngSrc,ngSrcset,src,srcset"),_=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,$=/^(on[a-z]+|formaction)$/;this.directive=function T(t,n){return he(t,"directive"),k(t)?(u(t),fe(n,"directiveFactory"),l.hasOwnProperty(t)||(l[t]=[],e.factory(t+c,["$injector","$exceptionHandler",function(e,n){var r=[];return a(l[t],function(i,a){try{var s=e.invoke(i);M(s)?s={compile:v(s)}:!s.compile&&s.link&&(s.compile=v(s.link)),s.priority=s.priority||0,s.index=a,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA";var u=s.$$bindings=o(s,s.name);w(u.isolateScope)&&(s.$$isolateBindings=u.isolateScope),s.$$moduleName=i.$$moduleName,r.push(s)}catch(l){n(l)}}),r}])),l[t].push(n)):a(t,s(T)),this},this.aHrefSanitizationWhitelist=function(e){return x(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return x(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var S=!0;this.debugInfoEnabled=function(e){return x(e)?(S=e,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,i,o,s,u,v,x,T,C,A){function O(e,t){try{e.addClass(t)}catch(n){}}function D(e,t,n,r,i){e instanceof Mr||(e=Mr(e)),a(e,function(t,n){t.nodeType==Xr&&t.nodeValue.match(/\S+/)&&(e[n]=Mr(t).wrap("<span></span>").parent()[0])});var o=N(e,t,e,n,r,i);D.$$addScopeClass(e);var s=null;return function(t,n,r){fe(t,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,a=r.transcludeControllers,u=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=L(u));var l;if(l="html"!==s?Mr(Q(s,Mr("<div>").append(e).html())):n?hi.clone.call(e):e,a)for(var c in a)l.data("$"+c+"Controller",a[c].instance);return D.$$addScopeInfo(l,t),n&&n(l,t),o&&o(t,l,l,i),l}}function L(e){var t=e&&e[0];return t&&"foreignobject"!==I(t)&&t.toString().match(/SVG/)?"svg":"html"}function N(e,t,r,i,a,o){function s(e,r,i,a){var o,s,u,l,c,f,d,h,m;if(p){var v=r.length;for(m=new Array(v),c=0;c<g.length;c+=3)d=g[c],m[d]=r[d]}else m=r;for(c=0,f=g.length;f>c;)if(u=m[g[c++]],o=g[c++],s=g[c++],o){if(o.scope){l=e.$new(),D.$$addScopeInfo(Mr(u),l);var y=o.$$destroyBindings;y&&(o.$$destroyBindings=null,l.$on("$destroyed",y))}else l=e;h=o.transcludeOnThisElement?j(e,o.transclude,a):!o.templateOnThisElement&&a?a:!a&&t?j(e,t):null,o(s,l,u,i,h,o)}else s&&s(e,u.childNodes,n,a)}for(var u,l,c,f,d,h,p,g=[],m=0;m<e.length;m++)u=new oe,l=P(e[m],[],u,0===m?i:n,a),c=l.length?z(l,e[m],u,t,r,null,[],[],o):null,c&&c.scope&&D.$$addScopeClass(u.$$element),d=c&&c.terminal||!(f=e[m].childNodes)||!f.length?null:N(f,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),(c||d)&&(g.push(m,c,d),h=!0,p=p||c),o=null;return h?s:null}function j(e,t,n){var r=function(r,i,a,o,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})};return r}function P(e,t,n,r,i){var a,o,s=e.nodeType,u=n.$attr;switch(s){case Wr:Y(t,lt(I(e)),"E",r,i);for(var l,c,f,p,g,m,v=e.attributes,y=0,b=v&&v.length;b>y;y++){var x=!1,_=!1;l=v[y],c=l.name,g=Ur(l.value),p=lt(c),(m=de.test(p))&&(c=c.replace(Oi,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var $=p.replace(/(Start|End)$/,"");V($)&&p===$+"Start"&&(x=c,_=c.substr(0,c.length-5)+"end",c=c.substr(0,c.length-6)),f=lt(c.toLowerCase()),u[f]=c,(m||!n.hasOwnProperty(f))&&(n[f]=g,Be(e,f)&&(n[f]=!0)),te(e,t,g,f,m),Y(t,f,"A",r,i,x,_)}if(o=e.className,w(o)&&(o=o.animVal),k(o)&&""!==o)for(;a=h.exec(o);)f=lt(a[2]),Y(t,f,"C",r,i)&&(n[f]=Ur(a[3])),o=o.substr(a.index+a[0].length);break;case Xr:if(11===Sr)for(;e.parentNode&&e.nextSibling&&e.nextSibling.nodeType===Xr;)e.nodeValue=e.nodeValue+e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);K(t,e.nodeValue);break;case Jr:try{a=d.exec(e.nodeValue),a&&(f=lt(a[1]),Y(t,f,"M",r,i)&&(n[f]=Ur(a[2])))}catch(S){}}return t.sort(X),t}function R(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Ai("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==Wr&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return Mr(r)}function U(e,t,n){return function(r,i,a,o,s){return i=R(i[0],t,n),e(r,i,a,o,s)}}function z(e,r,a,o,s,l,c,f,d){function h(e,t,n,r){e&&(n&&(e=U(e,n,r)),e.require=v.require,e.directiveName=y,(A===v||v.$$isolateScope)&&(e=re(e,{isolateScope:!0})),c.push(e)),t&&(n&&(t=U(t,n,r)),t.require=v.require,t.directiveName=y,(A===v||v.$$isolateScope)&&(t=re(t,{isolateScope:!0})),f.push(t))}function p(e,t,n,r){var i;if(k(t)){var a=t.match(_),o=t.substring(a[0].length),s=a[1]||a[3],u="?"===a[2];if("^^"===s?n=n.parent():(i=r&&r[o],i=i&&i.instance),!i){var l="$"+o+"Controller";i=s?n.inheritedData(l):n.data(l)}if(!i&&!u)throw Ai("ctreq","Controller '{0}', required by directive '{1}', can't be found!",o,e)}else if(Ir(t)){i=[];for(var c=0,f=t.length;f>c;c++)i[c]=p(e,t[c],n,r)}return i||null}function g(e,t,n,r,i,a){var o=me();for(var s in r){var l=r[s],c={$scope:l===A||l.$$isolateScope?i:a,$element:e,$attrs:t,$transclude:n},f=l.controller;"@"==f&&(f=t[l.name]);var d=u(f,c,!0,l.controllerAs);o[l.name]=d,I||e.data("$"+l.name+"Controller",d.instance)}return o}function m(e,t,i,o,s,u){function l(e,t,r){var i;return E(e)||(r=t,t=e,e=n),I&&(i=b),r||(r=I?w.parent():w),s(e,t,i,r,L)}var d,h,m,v,y,b,x,w,_;if(r===i?(_=a,w=a.$$element):(w=Mr(i),_=new oe(w,a)),A&&(y=t.$new(!0)),s&&(x=l,x.$$boundTransclude=s),C&&(b=g(w,_,x,C,y,t)),A&&(D.$$addScopeInfo(w,y,!0,!(O&&(O===A||O===A.$$originalDirective))),D.$$addScopeClass(w,!0),y.$$isolateBindings=A.$$isolateBindings,ae(t,_,y,y.$$isolateBindings,A,y)),b){var k,$,S=A||T;S&&b[S.name]&&(k=S.$$bindings.bindToController,v=b[S.name],v&&v.identifier&&k&&($=v,u.$$destroyBindings=ae(t,_,v.instance,k,S)));for(d in b){v=b[d];var M=v();M!==v.instance&&(v.instance=M,w.data("$"+d+"Controller",M),v===$&&(u.$$destroyBindings(),u.$$destroyBindings=ae(t,_,M,k,S)))}}for(d=0,h=c.length;h>d;d++)m=c[d],ie(m,m.isolateScope?y:t,w,_,m.require&&p(m.directiveName,m.require,w,b),x);var L=t;for(A&&(A.template||null===A.templateUrl)&&(L=y),e&&e(L,i.childNodes,n,s),d=f.length-1;d>=0;d--)m=f[d],ie(m,m.isolateScope?y:t,w,_,m.require&&p(m.directiveName,m.require,w,b),x)}d=d||{};for(var v,y,b,x,$,S=-Number.MAX_VALUE,T=d.newScopeDirective,C=d.controllerDirectives,A=d.newIsolateScopeDirective,O=d.templateDirective,L=d.nonTlbTranscludeDirective,N=!1,j=!1,I=d.hasElementTranscludeDirective,F=a.$$element=Mr(r),z=l,q=o,Y=0,V=e.length;V>Y;Y++){v=e[Y];var X=v.$$start,K=v.$$end;if(X&&(F=R(r,X,K)),b=n,S>v.priority)break;if(($=v.scope)&&(v.templateUrl||(w($)?(J("new/isolated scope",A||T,v,F),A=v):J("new/isolated scope",A,v,F)),T=T||v),y=v.name,!v.templateUrl&&v.controller&&($=v.controller,C=C||me(),J("'"+y+"' controller",C[y],v,F),
C[y]=v),($=v.transclude)&&(N=!0,v.$$tlb||(J("transclusion",L,v,F),L=v),"element"==$?(I=!0,S=v.priority,b=F,F=a.$$element=Mr(t.createComment(" "+y+": "+a[y]+" ")),r=F[0],ne(s,B(b),r),q=D(b,o,S,z&&z.name,{nonTlbTranscludeDirective:L})):(b=Mr(Ee(r)).contents(),F.empty(),q=D(b,o))),v.template)if(j=!0,J("template",O,v,F),O=v,$=M(v.template)?v.template(F,a):v.template,$=ce($),v.replace){if(z=v,b=ke($)?[]:ft(Q(v.templateNamespace,Ur($))),r=b[0],1!=b.length||r.nodeType!==Wr)throw Ai("tplrt","Template for directive '{0}' must have exactly one root element. {1}",y,"");ne(s,F,r);var ee={$attr:{}},te=P(r,[],ee),se=e.splice(Y+1,e.length-(Y+1));A&&H(te),e=e.concat(te).concat(se),W(a,ee),V=e.length}else F.html($);if(v.templateUrl)j=!0,J("template",O,v,F),O=v,v.replace&&(z=v),m=G(e.splice(Y,e.length-Y),F,a,s,N&&q,c,f,{controllerDirectives:C,newScopeDirective:T!==v&&T,newIsolateScopeDirective:A,templateDirective:O,nonTlbTranscludeDirective:L}),V=e.length;else if(v.compile)try{x=v.compile(F,a,q),M(x)?h(null,x,X,K):x&&h(x.pre,x.post,X,K)}catch(ue){i(ue,Z(F))}v.terminal&&(m.terminal=!0,S=Math.max(S,v.priority))}return m.scope=T&&T.scope===!0,m.transcludeOnThisElement=N,m.templateOnThisElement=j,m.transclude=q,d.hasElementTranscludeDirective=I,m}function H(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function Y(t,n,r,a,o,s,u){if(n===o)return null;var f=null;if(l.hasOwnProperty(n))for(var d,h=e.get(n+c),g=0,m=h.length;m>g;g++)try{d=h[g],(b(a)||a>d.priority)&&-1!=d.restrict.indexOf(r)&&(s&&(d=p(d,{$$start:s,$$end:u})),t.push(d),f=d)}catch(v){i(v)}return f}function V(t){if(l.hasOwnProperty(t))for(var n,r=e.get(t+c),i=0,a=r.length;a>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function W(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;a(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),a(t,function(t,a){"class"==a?(O(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==a?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==a.charAt(0)||e.hasOwnProperty(a)||(e[a]=t,r[a]=n[a])})}function G(e,t,n,r,i,s,u,l){var c,f,d=[],h=t[0],g=e.shift(),m=p(g,{templateUrl:null,transclude:null,replace:null,$$originalDirective:g}),v=M(g.templateUrl)?g.templateUrl(t,n):g.templateUrl,y=g.templateNamespace;return t.empty(),o(v).then(function(o){var p,b,x,_;if(o=ce(o),g.replace){if(x=ke(o)?[]:ft(Q(y,Ur(o))),p=x[0],1!=x.length||p.nodeType!==Wr)throw Ai("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g.name,v);b={$attr:{}},ne(r,t,p);var k=P(p,[],b);w(g.scope)&&H(k),e=k.concat(e),W(n,b)}else p=h,t.html(o);for(e.unshift(m),c=z(e,p,n,i,t,g,s,u,l),a(r,function(e,n){e==p&&(r[n]=t[0])}),f=N(t[0].childNodes,i);d.length;){var $=d.shift(),S=d.shift(),M=d.shift(),T=d.shift(),C=t[0];if(!$.$$destroyed){if(S!==h){var E=S.className;l.hasElementTranscludeDirective&&g.replace||(C=Ee(p)),ne(M,Mr(S),C),O(Mr(C),E)}_=c.transcludeOnThisElement?j($,c.transclude,T):T,c(f,$,C,r,_,c)}}d=null}),function(e,t,n,r,i){var a=i;t.$$destroyed||(d?d.push(t,n,r,a):(c.transcludeOnThisElement&&(a=j(t,c.transclude,i)),c(f,t,n,r,a,c)))}}function X(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function J(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw Ai("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,Z(r))}function K(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&D.$$addBindingClass(t),function(e,t){var i=t.parent();r||D.$$addBindingClass(i),D.$$addBindingInfo(i,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function Q(e,n){switch(e=xr(e||"html")){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function ee(e,t){if("srcdoc"==t)return T.HTML;var n=I(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?T.RESOURCE_URL:void 0}function te(e,t,n,i,a){var o=ee(e,i);a=y[i]||a;var s=r(n,!0,o,a);if(s){if("multiple"===i&&"select"===I(e))throw Ai("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(e));t.push({priority:100,compile:function(){return{pre:function(e,t,u){var l=u.$$observers||(u.$$observers=me());if($.test(i))throw Ai("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=u[i];c!==n&&(s=c&&r(c,!0,o,a),n=c),s&&(u[i]=s(e),(l[i]||(l[i]=[])).$$inter=!0,(u.$$observers&&u.$$observers[i].$$scope||e).$watch(s,function(e,t){"class"===i&&e!=t?u.$updateClass(e,t):u.$set(i,e)}))}}}})}}function ne(e,n,r){var i,a,o=n[0],s=n.length,u=o.parentNode;if(e)for(i=0,a=e.length;a>i;i++)if(e[i]==o){e[i++]=r;for(var l=i,c=l+s-1,f=e.length;f>l;l++,c++)f>c?e[l]=e[c]:delete e[l];e.length-=s-1,e.context===o&&(e.context=r);break}u&&u.replaceChild(r,o);var d=t.createDocumentFragment();d.appendChild(o),Mr.hasData(o)&&(Mr(r).data(Mr(o).data()),Tr?(Rr=!0,Tr.cleanData([o])):delete Mr.cache[o[Mr.expando]]);for(var h=1,p=n.length;p>h;h++){var g=n[h];Mr(g).remove(),d.appendChild(g),delete n[h]}n[0]=r,n.length=1}function re(e,t){return f(function(){return e.apply(null,arguments)},e,t)}function ie(e,t,n,r,a,o){try{e(t,n,r,a,o)}catch(s){i(s,Z(n))}}function ae(e,t,n,i,o,u){var l;a(i,function(i,a){var u,c,f,d,h=i.attrName,p=i.optional,m=i.mode;switch(m){case"@":p||wr.call(t,h)||(n[a]=t[h]=void 0),t.$observe(h,function(e){k(e)&&(n[a]=e)}),t.$$observers[h].$$scope=e,k(t[h])&&(n[a]=r(t[h])(e));break;case"=":if(!wr.call(t,h)){if(p)break;t[h]=void 0}if(p&&!t[h])break;c=s(t[h]),d=c.literal?q:function(e,t){return e===t||e!==e&&t!==t},f=c.assign||function(){throw u=n[a]=c(e),Ai("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",t[h],o.name)},u=n[a]=c(e);var v=function(t){return d(t,n[a])||(d(t,u)?f(e,t=n[a]):n[a]=t),u=t};v.$stateful=!0;var y;y=i.collection?e.$watchCollection(t[h],v):e.$watch(s(t[h],v),null,c.literal),l=l||[],l.push(y);break;case"&":if(c=t.hasOwnProperty(h)?s(t[h]):g,c===g&&p)break;n[a]=function(t){return c(e,t)}}});var c=l?function(){for(var e=0,t=l.length;t>e;++e)l[e]()}:g;return u&&c!==g?(u.$on("$destroy",c),g):c}var oe=function(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;r>n;n++)i=a[n],this[i]=t[i]}else this.$attr={};this.$$element=e};oe.prototype={$normalize:lt,$addClass:function(e){e&&e.length>0&&C.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&C.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=ct(e,t);n&&n.length&&C.addClass(this.$$element,n);var r=ct(t,e);r&&r.length&&C.removeClass(this.$$element,r)},$set:function(e,t,n,r){var o,s=this.$$element[0],u=Be(s,e),l=Ye(e),c=e;if(u?(this.$$element.prop(e,t),r=u):l&&(this[l]=t,c=l),this[e]=t,r?this.$attr[e]=r:(r=this.$attr[e],r||(this.$attr[e]=r=le(e,"-"))),o=I(this.$$element),"a"===o&&"href"===e||"img"===o&&"src"===e)this[e]=t=A(t,"src"===e);else if("img"===o&&"srcset"===e){for(var f="",d=Ur(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(d)?h:/(,)/,g=d.split(p),m=Math.floor(g.length/2),v=0;m>v;v++){var y=2*v;f+=A(Ur(g[y]),!0),f+=" "+Ur(g[y+1])}var x=Ur(g[2*v]).split(/\s/);f+=A(Ur(x[0]),!0),2===x.length&&(f+=" "+Ur(x[1])),this[e]=t=f}n!==!1&&(null===t||b(t)?this.$$element.removeAttr(r):this.$$element.attr(r,t));var w=this.$$observers;w&&a(w[c],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=me()),i=r[e]||(r[e]=[]);return i.push(t),v.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||b(n[e])||t(n[e])}),function(){F(i,t)}}};var se=r.startSymbol(),ue=r.endSymbol(),ce="{{"==se||"}}"==ue?m:function(e){return e.replace(/\{\{/g,se).replace(/}}/g,ue)},de=/^ngAttr[A-Z]/;return D.$$addBindingInfo=S?function(e,t){var n=e.data("$binding")||[];Ir(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:g,D.$$addBindingClass=S?function(e){O(e,"ng-binding")}:g,D.$$addScopeInfo=S?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:g,D.$$addScopeClass=S?function(e,t){O(e,t?"ng-isolate-scope":"ng-scope")}:g,D}]}function lt(e){return _e(e.replace(Oi,""))}function ct(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o==i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function ft(e){e=Mr(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===Jr&&Ar.call(e,t,1)}return e}function dt(e,t){if(t&&k(t))return t;if(k(e)){var n=Li.exec(e);if(n)return n[3]}}function ht(){var e={},t=!1;this.register=function(t,n){he(t,"controller"),w(t)?f(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(i,a){function o(e,t,n,i){if(!e||!w(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,s,u,l){var c,d,h,p;if(u=u===!0,l&&k(l)&&(p=l),k(r)){if(d=r.match(Li),!d)throw Di("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);h=d[1],p=p||d[3],r=e.hasOwnProperty(h)?e[h]:pe(s.$scope,h,!0)||(t?pe(a,h,!0):n),de(r,h,!0)}if(u){var g=(Ir(r)?r[r.length-1]:r).prototype;c=Object.create(g||null),p&&o(s,p,c,h||r.name);var m;return m=f(function(){var e=i.invoke(r,c,s,h);return e!==c&&(w(e)||M(e))&&(c=e,p&&o(s,p,c,h||r.name)),c},{instance:c,identifier:p})}return c=i.instantiate(r,s,h),p&&o(s,p,c,h||r.name),c}}]}function pt(){this.$get=["$window",function(e){return Mr(e.document)}]}function gt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function mt(e){return w(e)?S(e)?e.toISOString():W(e):e}function vt(){this.$get=function(){return function(e){if(!e)return"";var t=[];return o(e,function(e,n){null===e||b(e)||(Ir(e)?a(e,function(e,r){t.push(re(n)+"="+re(mt(e)))}):t.push(re(n)+"="+re(mt(e))))}),t.join("&")}}}function yt(){this.$get=function(){return function(e){function t(e,r,i){null===e||b(e)||(Ir(e)?a(e,function(e,n){t(e,r+"["+(w(e)?n:"")+"]")}):w(e)&&!S(e)?o(e,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):n.push(re(r)+"="+re(mt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function bt(e,t){if(k(e)){var n=e.replace(Fi,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(ji)||xt(n))&&(e=G(n))}}return e}function xt(e){var t=e.match(Ri);return t&&Ii[t[0]].test(e)}function wt(e){function t(e,t){e&&(r[e]=r[e]?r[e]+", "+t:t)}var n,r=me();return k(e)?a(e.split("\n"),function(e){n=e.indexOf(":"),t(xr(Ur(e.substr(0,n))),Ur(e.substr(n+1)))}):w(e)&&a(e,function(e,n){t(xr(n),Ur(e))}),r}function _t(e){var t;return function(n){if(t||(t=wt(e)),n){var r=t[xr(n)];return void 0===r&&(r=null),r}return t}}function kt(e,t,n,r){return M(r)?r(e,t,n):(a(r,function(r){e=r(e,t,n)}),e)}function $t(e){return e>=200&&300>e}function St(){var e=this.defaults={transformResponse:[bt],transformRequest:[function(e){return!w(e)||A(e)||D(e)||O(e)?e:W(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:z(Pi),put:z(Pi),patch:z(Pi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},t=!1;this.useApplyAsync=function(e){return x(e)?(t=!!e,this):t};var i=!0;this.useLegacyPromiseExtensions=function(e){return x(e)?(i=!!e,this):i};var o=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(s,u,l,c,d,h){function p(t){function o(e){var t=f({},e);return t.data=e.data?kt(e.data,e.headers,e.status,l.transformResponse):e.data,$t(e.status)?t:d.reject(t)}function s(e,t){var n,r={};return a(e,function(e,i){M(e)?(n=e(t),null!=n&&(r[i]=n)):r[i]=e}),r}function u(t){var n,r,i,a=e.headers,o=f({},t.headers);a=f({},a.common,a[xr(t.method)]);e:for(n in a){r=xr(n);for(i in o)if(xr(i)===r)continue e;o[n]=a[n]}return s(o,z(t))}if(!jr.isObject(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var l=f({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer},t);l.headers=u(t),l.method=_r(l.method),l.paramSerializer=k(l.paramSerializer)?h.get(l.paramSerializer):l.paramSerializer;var c=function(t){var r=t.headers,i=kt(t.data,_t(r),n,t.transformRequest);return b(i)&&a(r,function(e,t){"content-type"===xr(t)&&delete r[t]}),b(t.withCredentials)&&!b(e.withCredentials)&&(t.withCredentials=e.withCredentials),v(t,i).then(o,o)},p=[c,n],g=d.when(l);for(a($,function(e){(e.request||e.requestError)&&p.unshift(e.request,e.requestError),(e.response||e.responseError)&&p.push(e.response,e.responseError)});p.length;){var m=p.shift(),y=p.shift();g=g.then(m,y)}return i?(g.success=function(e){return de(e,"fn"),g.then(function(t){e(t.data,t.status,t.headers,l)}),g},g.error=function(e){return de(e,"fn"),g.then(null,function(t){e(t.data,t.status,t.headers,l)}),g}):(g.success=zi("success"),g.error=zi("error")),g}function g(e){a(arguments,function(e){p[e]=function(t,n){return p(f({},n||{},{method:e,url:t}))}})}function m(e){a(arguments,function(e){p[e]=function(t,n,r){return p(f({},r||{},{method:e,url:t,data:n}))}})}function v(r,i){function a(e,n,r,i){function a(){o(n,e,r,i)}h&&($t(e)?h.put($,[e,n,wt(r),i]):h.remove($)),t?c.$applyAsync(a):(a(),c.$$phase||c.$apply())}function o(e,t,n,i){t=t>=-1?t:0,($t(t)?m.resolve:m.reject)({data:e,status:t,headers:_t(n),config:r,statusText:i})}function l(e){o(e.data,e.status,z(e.headers()),e.statusText)}function f(){var e=p.pendingRequests.indexOf(r);-1!==e&&p.pendingRequests.splice(e,1)}var h,g,m=d.defer(),v=m.promise,k=r.headers,$=y(r.url,r.paramSerializer(r.params));if(p.pendingRequests.push(r),v.then(f,f),!r.cache&&!e.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(h=w(r.cache)?r.cache:w(e.cache)?e.cache:_),h&&(g=h.get($),x(g)?N(g)?g.then(l,l):Ir(g)?o(g[1],g[0],z(g[2]),g[3]):o(g,200,{},"OK"):h.put($,v)),b(g)){var S=Tn(r.url)?u()[r.xsrfCookieName||e.xsrfCookieName]:n;S&&(k[r.xsrfHeaderName||e.xsrfHeaderName]=S),s(r.method,$,i,a,k,r.timeout,r.withCredentials,r.responseType)}return v}function y(e,t){return t.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+t),e}var _=l("$http");e.paramSerializer=k(e.paramSerializer)?h.get(e.paramSerializer):e.paramSerializer;var $=[];return a(o,function(e){$.unshift(k(e)?h.get(e):h.invoke(e))}),p.pendingRequests=[],g("get","delete","head","jsonp"),m("post","put","patch"),p.defaults=e,p}]}function Mt(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Tt(){this.$get=["$browser","$window","$document","$xhrFactory",function(e,t,n,r){return Ct(e,r,e.defer,t.angular.callbacks,n[0])}]}function Ct(e,t,n,r,i){function o(e,t,n){var a=i.createElement("script"),o=null;return a.type="text/javascript",a.src=e,a.async=!0,o=function(e){ri(a,"load",o),ri(a,"error",o),i.body.removeChild(a),a=null;var s=-1,u="unknown";e&&("load"!==e.type||r[t].called||(e={type:"error"}),u=e.type,s="error"===e.type?404:200),n&&n(s,u)},ni(a,"load",o),ni(a,"error",o),i.body.appendChild(a),o}return function(i,s,u,l,c,f,d,h){function p(){y&&y(),w&&w.abort()}function m(t,r,i,a,o){x($)&&n.cancel($),y=w=null,t(r,i,a,o),e.$$completeOutstandingRequest(g)}if(e.$$incOutstandingRequestCount(),s=s||e.url(),"jsonp"==xr(i)){var v="_"+(r.counter++).toString(36);r[v]=function(e){r[v].data=e,r[v].called=!0};var y=o(s.replace("JSON_CALLBACK","angular.callbacks."+v),v,function(e,t){m(l,e,r[v].data,"",t),r[v]=g})}else{var w=t(i,s);w.open(i,s,!0),a(c,function(e,t){x(e)&&w.setRequestHeader(t,e)}),w.onload=function(){var e=w.statusText||"",t="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=t?200:"file"==Mn(s).protocol?404:0),m(l,n,t,w.getAllResponseHeaders(),e)};var _=function(){m(l,-1,null,null,"")};if(w.onerror=_,w.onabort=_,d&&(w.withCredentials=!0),h)try{w.responseType=h}catch(k){if("json"!==h)throw k}w.send(b(u)?null:u)}if(f>0)var $=n(p,f);else N(f)&&f.then(p)}}function Et(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function a(e){return"\\\\\\"+e}function o(n){return n.replace(d,e).replace(h,t)}function s(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=W(e)}return e}function u(a,u,d,h){function p(e){try{return e=C(e),h&&!x(e)?e:s(e)}catch(t){r(qi.interr(a,t))}}h=!!h;for(var g,m,v,y=0,w=[],_=[],k=a.length,$=[],S=[];k>y;){if(-1==(g=a.indexOf(e,y))||-1==(m=a.indexOf(t,g+l))){y!==k&&$.push(o(a.substring(y)));break}y!==g&&$.push(o(a.substring(y,g))),v=a.substring(g+l,m),w.push(v),_.push(n(v,p)),y=m+c,S.push($.length),$.push("")}if(d&&$.length>1&&qi.throwNoconcat(a),!u||w.length){var T=function(e){for(var t=0,n=w.length;n>t;t++){if(h&&b(e[t]))return;$[S[t]]=e[t]}return $.join("")},C=function(e){return d?i.getTrusted(d,e):i.valueOf(e)};return f(function(e){var t=0,n=w.length,i=new Array(n);try{for(;n>t;t++)i[t]=_[t](e);return T(i)}catch(o){r(qi.interr(a,o))}},{exp:a,expressions:w,$$watchDelegate:function(e,t){var n;return e.$watchGroup(_,function(r,i){var a=T(r);M(t)&&t.call(this,a,r!==i?n:a,e),n=a})}})}}var l=e.length,c=t.length,d=new RegExp(e.replace(/./g,a),"g"),h=new RegExp(t.replace(/./g,a),"g");return u.startSymbol=function(){return e},u.endSymbol=function(){return t},u}]}function At(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function i(i,o,s,u){var l=arguments.length>4,c=l?B(arguments,4):[],f=t.setInterval,d=t.clearInterval,h=0,p=x(u)&&!u,g=(p?r:n).defer(),m=g.promise;return s=x(s)?s:0,m.then(null,null,l?function(){i.apply(null,c)}:i),m.$$intervalId=f(function(){g.notify(h++),s>0&&h>=s&&(g.resolve(h),d(m.$$intervalId),delete a[m.$$intervalId]),p||e.$apply()},o),a[m.$$intervalId]=g,m}var a={};return i.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},i}]}function Ot(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ne(t[n]);return t.join("/")}function Dt(e,t){var n=Mn(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=h(n.port)||Bi[n.protocol]||null}function Lt(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=Mn(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=ee(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Nt(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function jt(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function Pt(e){return e.replace(/(#.+)|#$/,"$1")}function Rt(e){return e.substr(0,jt(e).lastIndexOf("/")+1)}function It(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Ft(e,t,n){this.$$html5=!0,n=n||"",Dt(e,this),this.$$parse=function(e){var n=Nt(t,e);if(!k(n))throw Yi("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Lt(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=te(this.$$search),n=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Ot(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o,s;return x(a=Nt(e,r))?(o=a,s=x(a=Nt(n,a))?t+(Nt("/",a)||a):e+o):x(a=Nt(t,r))?s=t+a:t==r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function Ut(e,t,n){Dt(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var a,o=Nt(e,r)||Nt(t,r);b(o)||"#"!==o.charAt(0)?this.$$html5?a=o:(a="",b(o)&&(e=r,this.replace())):(a=Nt(n,o),b(a)&&(a=o)),Lt(a,this),this.$$path=i(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Ot(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t,n){return jt(e)==jt(t)?(this.$$parse(t),!0):!1}}function zt(e,t,n){this.$$html5=!0,Ut.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o;return e==jt(r)?a=r:(o=Nt(t,r))?a=e+n+o:t===r+"/"&&(a=t),a&&this.$$parse(a),!!a},this.$$compose=function(){var t=te(this.$$search),r=this.$$hash?"#"+ne(this.$$hash):"";this.$$url=Ot(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function qt(e){return function(){return this[e]}}function Ht(e,t){return function(n){return b(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Bt(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return x(t)?(e=t,this):e},this.html5Mode=function(e){return L(e)?(t.enabled=e,this):w(e)?(L(e.enabled)&&(t.enabled=e.enabled),L(e.requireBase)&&(t.requireBase=e.requireBase),L(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,o){function s(e,t,n){var i=l.url(),a=l.$$state;try{r.url(e,t,n),l.$$state=r.state()}catch(o){throw l.url(i),l.$$state=a,o}}function u(e,t){n.$broadcast("$locationChangeSuccess",l.absUrl(),e,l.$$state,t)}var l,c,f,d=r.baseHref(),h=r.url();if(t.enabled){if(!d&&t.requireBase)throw Yi("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=It(h)+(d||"/"),c=i.history?Ft:zt}else f=jt(h),c=Ut;var p=Rt(f);l=new c(f,p,"#"+e),l.$$parseLinkUrl(h,h),l.$$state=r.state();var g=/^\s*(javascript|mailto):/i;a.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var i=Mr(e.target);"a"!==I(i[0]);)if(i[0]===a[0]||!(i=i.parent())[0])return;var s=i.prop("href"),u=i.attr("href")||i.attr("xlink:href");w(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=Mn(s.animVal).href),g.test(s)||!s||i.attr("target")||e.isDefaultPrevented()||l.$$parseLinkUrl(s,u)&&(e.preventDefault(),l.absUrl()!=r.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}}),Pt(l.absUrl())!=Pt(h)&&r.url(l.absUrl(),!0);var m=!0;return r.onUrlChange(function(e,t){return b(Nt(p,e))?void(o.location.href=e):(n.$evalAsync(function(){var r,i=l.absUrl(),a=l.$$state;l.$$parse(e),l.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,a).defaultPrevented,l.absUrl()===e&&(r?(l.$$parse(i),l.$$state=a,s(i,!1,a)):(m=!1,u(i,a)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=Pt(r.url()),t=Pt(l.absUrl()),a=r.state(),o=l.$$replace,c=e!==t||l.$$html5&&i.history&&a!==l.$$state;(m||c)&&(m=!1,n.$evalAsync(function(){var t=l.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,l.$$state,a).defaultPrevented;l.absUrl()===t&&(r?(l.$$parse(e),l.$$state=a):(c&&s(t,o,a===l.$$state?null:l.$$state),u(e,a)))})),l.$$replace=!1}),l}]}function Yt(){var e=!0,t=this;this.debugEnabled=function(t){return x(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||g,o=!1;try{o=!!i.apply}catch(s){}return o?function(){var e=[];return a(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Vt(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw Wi("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Wt(e,t){if(e+="",!k(e))throw Wi("iseccst","Cannot convert object to primitive value! Expression: {0}",t);return e}function Gt(e,t){if(e){if(e.constructor===e)throw Wi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw Wi("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw Wi("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw Wi("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function Xt(e,t){if(e){if(e.constructor===e)throw Wi("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===Gi||e===Xi||e===Ji)throw Wi("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Jt(e,t){if(e&&(e===0..constructor||e===(!1).constructor||e==="".constructor||e==={}.constructor||e===[].constructor||e===Function.constructor))throw Wi("isecaf","Assigning to a constructor is disallowed! Expression: {0}",t)}function Kt(e,t){return"undefined"!=typeof e?e:t}function Zt(e,t){return"undefined"==typeof e?t:"undefined"==typeof t?e:e+t}function Qt(e,t){var n=e(t);return!n.$stateful}function en(e,t){var n,r;switch(e.type){case ea.Program:n=!0,a(e.body,function(e){en(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case ea.Literal:e.constant=!0,e.toWatch=[];break;case ea.UnaryExpression:en(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case ea.BinaryExpression:en(e.left,t),en(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case ea.LogicalExpression:en(e.left,t),en(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case ea.ConditionalExpression:en(e.test,t),en(e.alternate,t),en(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case ea.Identifier:e.constant=!1,e.toWatch=[e];break;case ea.MemberExpression:en(e.object,t),e.computed&&en(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case ea.CallExpression:n=e.filter?Qt(t,e.callee.name):!1,r=[],a(e.arguments,function(e){en(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=e.filter&&Qt(t,e.callee.name)?r:[e];break;case ea.AssignmentExpression:en(e.left,t),en(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case ea.ArrayExpression:n=!0,r=[],a(e.elements,function(e){en(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=r;break;case ea.ObjectExpression:n=!0,r=[],a(e.properties,function(e){en(e.value,t),n=n&&e.value.constant,e.value.constant||r.push.apply(r,e.value.toWatch)}),e.constant=n,e.toWatch=r;break;case ea.ThisExpression:e.constant=!1,e.toWatch=[]}}function tn(e){if(1==e.length){var t=e[0].expression,r=t.toWatch;return 1!==r.length?r:r[0]!==t?r:n}}function nn(e){return e.type===ea.Identifier||e.type===ea.MemberExpression}function rn(e){return 1===e.body.length&&nn(e.body[0].expression)?{type:ea.AssignmentExpression,left:e.body[0].expression,right:{type:ea.NGValueParameter},operator:"="}:void 0}function an(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===ea.Literal||e.body[0].expression.type===ea.ArrayExpression||e.body[0].expression.type===ea.ObjectExpression)}function on(e){return e.constant}function sn(e,t){this.astBuilder=e,this.$filter=t}function un(e,t){this.astBuilder=e,this.$filter=t}function ln(e){return"constructor"==e}function cn(e){return M(e.valueOf)?e.valueOf():na.call(e)}function fn(){var e=me(),t=me();this.$get=["$filter",function(r){function i(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=cn(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function o(e,t,r,a,o){var s,u=a.inputs;if(1===u.length){var l=i;return u=u[0],e.$watch(function(e){var t=u(e);return i(t,l)||(s=a(e,n,n,[t]),l=t&&cn(t)),s},t,r,o)}for(var c=[],f=[],d=0,h=u.length;h>d;d++)c[d]=i,f[d]=null;return e.$watch(function(e){for(var t=!1,r=0,o=u.length;o>r;r++){var l=u[r](e);(t||(t=!i(l,c[r])))&&(f[r]=l,c[r]=l&&cn(l))}return t&&(s=a(e,n,n,f)),s},t,r,o)}function s(e,t,n,r){var i,a;return i=e.$watch(function(e){return r(e)},function(e,n,r){a=e,M(t)&&t.apply(this,arguments),x(e)&&r.$$postDigest(function(){x(a)&&i()})},n)}function u(e,t,n,r){function i(e){var t=!0;return a(e,function(e){x(e)||(t=!1)}),t}var o,s;return o=e.$watch(function(e){return r(e)},function(e,n,r){s=e,M(t)&&t.call(this,e,n,r),i(e)&&r.$$postDigest(function(){i(s)&&o()})},n)}function l(e,t,n,r){var i;return i=e.$watch(function(e){return r(e)},function(e,n,r){M(t)&&t.apply(this,arguments),i()},n)}function c(e,t){if(!t)return e;var n=e.$$watchDelegate,r=n!==u&&n!==s,i=r?function(n,r,i,a){var o=e(n,r,i,a);return t(o,n,r)}:function(n,r,i,a){var o=e(n,r,i,a),s=t(o,n,r);return x(o)?s:o};return e.$$watchDelegate&&e.$$watchDelegate!==o?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=o,i.inputs=e.inputs?e.inputs:[e]),i}var f=qr().noUnsafeEval,d={csp:f,expensiveChecks:!1},h={csp:f,expensiveChecks:!0};return function(n,i,a){var f,p,m;switch(typeof n){case"string":n=n.trim(),m=n;var v=a?t:e;if(f=v[m],!f){":"===n.charAt(0)&&":"===n.charAt(1)&&(p=!0,n=n.substring(2));var y=a?h:d,b=new Qi(y),x=new ta(b,r,y);f=x.parse(n),f.constant?f.$$watchDelegate=l:p?f.$$watchDelegate=f.literal?u:s:f.inputs&&(f.$$watchDelegate=o),v[m]=f}return c(f,i);case"function":return c(n,i);default:return g}}}]}function dn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return pn(function(t){e.$evalAsync(t)},t)}]}function hn(){this.$get=["$browser","$exceptionHandler",function(e,t){return pn(function(t){e.defer(t)},t)}]}function pn(e,t){function i(e,t,n){function r(t){return function(n){i||(i=!0,t.call(e,n))}}var i=!1;return[r(t),r(n)]}function o(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function u(e){var r,i,a;a=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,s=a.length;s>o;++o){i=a[o][0],r=a[o][e.status];try{M(r)?i.resolve(r(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(u){i.reject(u),t(u)}}}function l(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){u(t)}))}function c(){this.promise=new o,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function d(e){var t=new c,n=0,r=Ir(e)?[]:{};return a(e,function(e,i){n++,y(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var h=r("$q",TypeError),p=function(){return new c};f(o.prototype,{then:function(e,t,n){if(b(e)&&b(t)&&b(n))return this;var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&l(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return v(t,!0,e)},function(t){return v(t,!1,e)},t)}}),f(c.prototype,{resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(h("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(w(e)||M(e))&&(n=e&&e.then),M(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,l(this.promise.$$state))}catch(a){r[1](a),t(a)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,a=0,o=r.length;o>a;a++){i=r[a][0],e=r[a][3];try{i.notify(M(e)?e(n):n)}catch(s){t(s)}}})}});var g=function(e){var t=new c;return t.reject(e),t.promise},m=function(e,t){var n=new c;return t?n.resolve(e):n.reject(e),n.promise},v=function(e,t,n){
var r=null;try{M(n)&&(r=n())}catch(i){return m(i,!1)}return N(r)?r.then(function(){return m(e,t)},function(e){return m(e,!1)}):m(e,t)},y=function(e,t,n,r){var i=new c;return i.resolve(e),i.promise.then(t,n,r)},x=y,_=function k(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!M(e))throw h("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof k))return new k(e);var r=new c;return e(t,n),r.promise};return _.defer=p,_.reject=g,_.when=y,_.resolve=x,_.all=d,_}function gn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,a=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return a.supported=i,a}]}function mn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=u(),this.$$ChildScope=null}return t.prototype=e,t}var t=10,n=r("$rootScope"),o=null,s=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,l,c,f){function d(e){e.currentScope.$$destroyed=!0}function h(){this.$id=u(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(e){if($.$$phase)throw n("inprog","{0} already in progress",$.$$phase);$.$$phase=e}function m(){$.$$phase=null}function v(e,t){do e.$$watchersCount+=t;while(e=e.$parent)}function y(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function x(){}function _(){for(;C.length;)try{C.shift()()}catch(e){l(e)}s=null}function k(){null===s&&(s=f.defer(function(){$.$apply(_)}))}h.prototype={constructor:h,$new:function(t,n){var r;return n=n||this,t?(r=new h,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!=this)&&r.$on("$destroy",d),r},$watch:function(e,t,n,r){var i=c(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var a=this,s=a.$$watchers,u={fn:t,last:x,get:i,exp:r||e,eq:!!n};return o=null,M(t)||(u.fn=g),s||(s=a.$$watchers=[]),s.unshift(u),v(this,1),function(){F(s,u)>=0&&v(a,-1),o=null}},$watchGroup:function(e,t){function n(){u=!1,l?(l=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),o=[],s=this,u=!1,l=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(i,i,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,a){i[0]=e,r[0]=n,t(i,e===n?i:r,a)}):(a(e,function(e,t){var a=s.$watch(e,function(e,a){i[t]=e,r[t]=a,u||(u=!0,s.$evalAsync(n))});o.push(a)}),function(){for(;o.length;)o.shift()()})},$watchCollection:function(e,t){function n(e){a=e;var t,n,r,s,u;if(!b(a)){if(w(a))if(i(a)){o!==h&&(o=h,m=o.length=0,f++),t=a.length,m!==t&&(f++,o.length=m=t);for(var l=0;t>l;l++)u=o[l],s=a[l],r=u!==u&&s!==s,r||u===s||(f++,o[l]=s)}else{o!==p&&(o=p={},m=0,f++),t=0;for(n in a)wr.call(a,n)&&(t++,s=a[n],u=o[n],n in o?(r=u!==u&&s!==s,r||u===s||(f++,o[n]=s)):(m++,o[n]=s,f++));if(m>t){f++;for(n in o)wr.call(a,n)||(m--,delete o[n])}}else o!==a&&(o=a,f++);return f}}function r(){if(g?(g=!1,t(a,a,u)):t(a,s,u),l)if(w(a))if(i(a)){s=new Array(a.length);for(var e=0;e<a.length;e++)s[e]=a[e]}else{s={};for(var n in a)wr.call(a,n)&&(s[n]=a[n])}else s=a}n.$stateful=!0;var a,o,s,u=this,l=t.length>1,f=0,d=c(e,n),h=[],p={},g=!0,m=0;return this.$watch(d,r)},$digest:function(){var e,r,i,a,u,c,d,h,g,v,y=t,b=this,w=[];p("$digest"),f.$$checkUrlChange(),this===$&&null!==s&&(f.defer.cancel(s),_()),o=null;do{for(c=!1,h=b;S.length;){try{v=S.shift(),v.scope.$eval(v.expression,v.locals)}catch(k){l(k)}o=null}e:do{if(a=h.$$watchers)for(u=a.length;u--;)try{if(e=a[u])if((r=e.get(h))===(i=e.last)||(e.eq?q(r,i):"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))){if(e===o){c=!1;break e}}else c=!0,o=e,e.last=e.eq?U(r,null):r,e.fn(r,i===x?r:i,h),5>y&&(g=4-y,w[g]||(w[g]=[]),w[g].push({msg:M(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:r,oldVal:i}))}catch(k){l(k)}if(!(d=h.$$watchersCount&&h.$$childHead||h!==b&&h.$$nextSibling))for(;h!==b&&!(d=h.$$nextSibling);)h=h.$parent}while(h=d);if((c||S.length)&&!y--)throw m(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,w)}while(c||S.length);for(m();T.length;)try{T.shift()()}catch(k){l(k)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===$&&f.$$applicationDestroyed(),v(this,-this.$$watchersCount);for(var t in this.$$listenerCount)y(this,this.$$listenerCount[t],t);e&&e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=g,this.$on=this.$watch=this.$watchGroup=function(){return g},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){$.$$phase||S.length||f.defer(function(){S.length&&$.$digest()}),S.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){T.push(e)},$apply:function(e){try{p("$apply");try{return this.$eval(e)}finally{m()}}catch(t){l(t)}finally{try{$.$digest()}catch(t){throw l(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&C.push(t),k()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,y(i,1,e))}},$emit:function(e,t){var n,r,i,a=[],o=this,s=!1,u={name:e,targetScope:o,stopPropagation:function(){s=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=H([u],arguments,1);do{for(n=o.$$listeners[e]||a,u.currentScope=o,r=0,i=n.length;i>r;r++)if(n[r])try{n[r].apply(null,c)}catch(f){l(f)}else n.splice(r,1),r--,i--;if(s)return u.currentScope=null,u;o=o.$parent}while(o);return u.currentScope=null,u},$broadcast:function(e,t){var n=this,r=n,i=n,a={name:e,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return a;for(var o,s,u,c=H([a],arguments,1);r=i;){for(a.currentScope=r,o=r.$$listeners[e]||[],s=0,u=o.length;u>s;s++)if(o[s])try{o[s].apply(null,c)}catch(f){l(f)}else o.splice(s,1),s--,u--;if(!(i=r.$$listenerCount[e]&&r.$$childHead||r!==n&&r.$$nextSibling))for(;r!==n&&!(i=r.$$nextSibling);)r=r.$parent}return a.currentScope=null,a}};var $=new h,S=$.$$asyncQueue=[],T=$.$$postDigestQueue=[],C=$.$$applyAsyncQueue=[];return $}]}function vn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return x(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return x(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,a=r?t:e;return i=Mn(n).href,""===i||i.match(a)?n:"unsafe:"+i}}}function yn(e){if("self"===e)return e;if(k(e)){if(e.indexOf("***")>-1)throw ra("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=zr(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(T(e))return new RegExp("^"+e.source+"$");throw ra("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function bn(e){var t=[];return x(e)&&a(e,function(e){t.push(yn(e))}),t}function xn(){this.SCE_CONTEXTS=ia;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=bn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=bn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Tn(t):!!e.exec(t.href)}function i(n){var i,a,o=Mn(n.toString()),s=!1;for(i=0,a=e.length;a>i;i++)if(r(e[i],o)){s=!0;break}if(s)for(i=0,a=t.length;a>i;i++)if(r(t[i],o)){s=!1;break}return s}function a(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function o(e,t){var n=f.hasOwnProperty(e)?f[e]:null;if(!n)throw ra("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||b(t)||""===t)return t;if("string"!=typeof t)throw ra("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof c?e.$$unwrapTrustedValue():e}function u(e,t){if(null===t||b(t)||""===t)return t;var n=f.hasOwnProperty(e)?f[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===ia.RESOURCE_URL){if(i(t))return t;throw ra("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===ia.HTML)return l(t);throw ra("unsafe","Attempting to use an unsafe value in a safe context.")}var l=function(e){throw ra("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(l=n.get("$sanitize"));var c=a(),f={};return f[ia.HTML]=a(c),f[ia.CSS]=a(c),f[ia.URL]=a(c),f[ia.JS]=a(c),f[ia.RESOURCE_URL]=a(f[ia.URL]),{trustAs:o,getTrusted:u,valueOf:s}}]}function wn(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>Sr)throw ra("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=z(ia);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=m),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var i=r.parseAs,o=r.getTrusted,s=r.trustAs;return a(ia,function(e,t){var n=xr(t);r[_e("parse_as_"+n)]=function(t){return i(e,t)},r[_e("get_trusted_"+n)]=function(t){return o(e,t)},r[_e("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function _n(){this.$get=["$window","$document",function(e,t){var n,r,i={},a=h((/android (\d+)/.exec(xr((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},u=/^(Moz|webkit|ms)(?=[A-Z])/,l=s.body&&s.body.style,c=!1,f=!1;if(l){for(var d in l)if(r=u.exec(d)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),c=!!("transition"in l||n+"Transition"in l),f=!!("animation"in l||n+"Animation"in l),!a||c&&f||(c=k(l.webkitTransition),f=k(l.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>a||o),hasEvent:function(e){if("input"===e&&11>=Sr)return!1;if(b(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:qr(),vendorPrefix:n,transitions:c,animations:f,android:a}}]}function kn(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,r){function i(a,o){function s(e){if(!o)throw Ai("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,e.status,e.statusText);return n.reject(e)}i.totalPendingRequests++,k(a)&&e.get(a)||(a=r.getTrustedResourceUrl(a));var u=t.defaults&&t.defaults.transformResponse;Ir(u)?u=u.filter(function(e){return e!==bt}):u===bt&&(u=null);var l={cache:e,transformResponse:u};return t.get(a,l)["finally"](function(){i.totalPendingRequests--}).then(function(t){return e.put(a,t.data),t.data},s)}return i.totalPendingRequests=0,i}]}function $n(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return a(r,function(e){var r=jr.element(e).data("$binding");r&&a(r,function(r){if(n){var a=new RegExp("(^|\\s)"+zr(t)+"(\\s|\\||$)");a.test(r)&&i.push(e)}else-1!=r.indexOf(t)&&i.push(e)})}),i},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a=n?"=":"*=",o="["+r[i]+"model"+a+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function Sn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function a(a,s,u){M(a)||(u=s,s=a,a=g);var l,c=B(arguments,3),f=x(u)&&!u,d=(f?r:n).defer(),h=d.promise;return l=t.defer(function(){try{d.resolve(a.apply(null,c))}catch(t){d.reject(t),i(t)}finally{delete o[h.$$timeoutId]}f||e.$apply()},s),h.$$timeoutId=l,o[l]=d,h}var o={};return a.cancel=function(e){return e&&e.$$timeoutId in o?(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},a}]}function Mn(e){var t=e;return Sr&&(aa.setAttribute("href",t),t=aa.href),aa.setAttribute("href",t),{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,""):"",hostname:aa.hostname,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}}function Tn(e){var t=k(e)?Mn(e):e;return t.protocol===oa.protocol&&t.host===oa.host}function Cn(){this.$get=v(e)}function En(e){function t(e){try{return decodeURIComponent(e)}catch(t){return e}}var n=e[0]||{},r={},i="";return function(){var e,a,o,s,u,l=n.cookie||"";if(l!==i)for(i=l,e=i.split("; "),r={},o=0;o<e.length;o++)a=e[o],s=a.indexOf("="),s>0&&(u=t(a.substring(0,s)),b(r[u])&&(r[u]=t(a.substring(s+1))));return r}}function An(){this.$get=En}function On(e){function t(r,i){if(w(r)){var o={};return a(r,function(e,n){o[n]=t(n,e)}),o}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Pn),t("date",Xn),t("filter",Dn),t("json",Jn),t("limitTo",Kn),t("lowercase",fa),t("number",Rn),t("orderBy",Zn),t("uppercase",da)}function Dn(){return function(e,t,n){if(!i(e)){if(null==e)return e;throw r("filter")("notarray","Expected array but received: {0}",e)}var a,o,s=jn(t);switch(s){case"function":a=t;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":a=Ln(t,n,o);break;default:return e}return Array.prototype.filter.call(e,a)}}function Ln(e,t,n){var r,i=w(e)&&"$"in e;return t===!0?t=q:M(t)||(t=function(e,t){return b(e)?!1:null===e||null===t?e===t:w(t)||w(e)&&!y(e)?!1:(e=xr(""+e),t=xr(""+t),-1!==e.indexOf(t))}),r=function(r){return i&&!w(r)?Nn(r,e.$,t,!1):Nn(r,e,t,n)}}function Nn(e,t,n,r,i){var a=jn(e),o=jn(t);if("string"===o&&"!"===t.charAt(0))return!Nn(e,t.substring(1),n,r);if(Ir(e))return e.some(function(e){return Nn(e,t,n,r)});switch(a){case"object":var s;if(r){for(s in e)if("$"!==s.charAt(0)&&Nn(e[s],t,n,!0))return!0;return i?!1:Nn(e,t,n,!1)}if("object"===o){for(s in t){var u=t[s];if(!M(u)&&!b(u)){var l="$"===s,c=l?e:e[s];if(!Nn(c,u,n,l,l))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function jn(e){return null===e?"null":typeof e}function Pn(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return b(n)&&(n=t.CURRENCY_SYM),b(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:In(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Rn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:In(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function In(e,t,n,r,i){if(w(e))return"";var a=0>e;e=Math.abs(e);var o=e===1/0;if(!o&&!isFinite(e))return"";var s=e+"",u="",l=!1,c=[];if(o&&(u=""),!o&&-1!==s.indexOf("e")){var f=s.match(/([\d\.]+)e(-?)(\d+)/);f&&"-"==f[2]&&f[3]>i+1?e=0:(u=s,l=!0)}if(o||l)i>0&&1>e&&(u=e.toFixed(i),e=parseFloat(u),u=u.replace(sa,r));else{var d=(s.split(sa)[1]||"").length;b(i)&&(i=Math.min(Math.max(t.minFrac,d),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i);var h=(""+e).split(sa),p=h[0];h=h[1]||"";var g,m=0,v=t.lgSize,y=t.gSize;if(p.length>=v+y)for(m=p.length-v,g=0;m>g;g++)(m-g)%y===0&&0!==g&&(u+=n),u+=p.charAt(g);for(g=m;g<p.length;g++)(p.length-g)%v===0&&0!==g&&(u+=n),u+=p.charAt(g);for(;h.length<i;)h+="0";i&&"0"!==i&&(u+=r+h.substr(0,i))}return 0===e&&(a=!1),c.push(a?t.negPre:t.posPre,u,a?t.negSuf:t.posSuf),c.join("")}function Fn(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function Un(e,t,n,r){return n=n||0,function(i){var a=i["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),Fn(a,t,r)}}function zn(e,t){return function(n,r){var i=n["get"+e](),a=_r(t?"SHORT"+e:e);return r[a][i]}}function qn(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Fn(Math[r>0?"floor":"ceil"](r/60),2)+Fn(Math.abs(r%60),2)}function Hn(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function Bn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function Yn(e){return function(t){var n=Hn(t.getFullYear()),r=Bn(t),i=+r-+n,a=1+Math.round(i/6048e5);return Fn(a,e)}}function Vn(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function Wn(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Gn(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function Xn(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,a=0,o=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=h(t[9]+t[10]),a=h(t[9]+t[11])),o.call(r,h(t[1]),h(t[2])-1,h(t[3]));var u=h(t[4]||0)-i,l=h(t[5]||0)-a,c=h(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,u,l,c,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,s,u="",l=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,k(n)&&(n=ca.test(n)?h(n):t(n)),$(n)&&(n=new Date(n)),!S(n)||!isFinite(n.getTime()))return n;for(;r;)s=la.exec(r),s?(l=H(l,s,1),r=l.pop()):(l.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=X(i,n.getTimezoneOffset()),n=K(n,i,!0)),a(l,function(t){o=ua[t],u+=o?o(n,e.DATETIME_FORMATS,c):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}}function Jn(){return function(e,t){return b(t)&&(t=2),W(e,t)}}function Kn(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):h(t),isNaN(t)?e:($(e)&&(e=e.toString()),Ir(e)||k(e)?(n=!n||isNaN(n)?0:h(n),n=0>n&&n>=-e.length?e.length+n:n,t>=0?e.slice(n,n+t):0===n?e.slice(t,e.length):e.slice(Math.max(0,n+t),n)):e)}}function Zn(e){function t(t,n){return n=n?-1:1,t.map(function(t){var r=1,i=m;if(M(t))i=t;else if(k(t)&&(("+"==t.charAt(0)||"-"==t.charAt(0))&&(r="-"==t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(i=e(t),i.constant))){var a=i();i=function(e){return e[a]}}return{get:i,descending:r*n}})}function n(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function r(e,t){return"function"==typeof e.valueOf&&(e=e.valueOf(),n(e))?e:y(e)&&(e=e.toString(),n(e))?e:t}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"string"===n?e=e.toLowerCase():"object"===n&&(e=r(e,t)),{value:e,type:n}}function o(e,t){var n=0;return e.type===t.type?e.value!==t.value&&(n=e.value<t.value?-1:1):n=e.type<t.type?-1:1,n}return function(e,n,r){function s(e,t){return{value:e,predicateValues:l.map(function(n){return a(n.get(e),t)})}}function u(e,t){for(var n=0,r=0,i=l.length;i>r&&!(n=o(e.predicateValues[r],t.predicateValues[r])*l[r].descending);++r);return n}if(!i(e))return e;Ir(n)||(n=[n]),0===n.length&&(n=["+"]);var l=t(n,r);l.push({get:function(){return{}},descending:r?-1:1});var c=Array.prototype.map.call(e,s);return c.sort(u),e=c.map(function(e){return e.value})}}function Qn(e){return M(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function er(e,t){e.$name=t}function tr(e,t,r,i,o){var s=this,u=[];s.$error={},s.$$success={},s.$pending=n,s.$name=o(t.name||t.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,s.$$parentForm=ga,s.$rollbackViewValue=function(){a(u,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){a(u,function(e){e.$commitViewValue()})},s.$addControl=function(e){he(e.$name,"input"),u.push(e),e.$name&&(s[e.$name]=e),e.$$parentForm=s},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],a(s.$pending,function(t,n){s.$setValidity(n,null,e)}),a(s.$error,function(t,n){s.$setValidity(n,null,e)}),a(s.$$success,function(t,n){s.$setValidity(n,null,e)}),F(u,e),e.$$parentForm=ga},mr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(F(r,n),0===r.length&&delete e[t])},$animate:i}),s.$setDirty=function(){i.removeClass(e,Ka),i.addClass(e,Za),s.$dirty=!0,s.$pristine=!1,s.$$parentForm.$setDirty()},s.$setPristine=function(){i.setClass(e,Ka,Za+" "+ma),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,a(u,function(e){e.$setPristine()})},s.$setUntouched=function(){a(u,function(e){e.$setUntouched()})},s.$setSubmitted=function(){i.addClass(e,ma),s.$submitted=!0,s.$$parentForm.$setSubmitted()}}function nr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function rr(e,t,n,r,i,a){ir(e,t,n,r,i,a),nr(r)}function ir(e,t,n,r,i,a){var o=xr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(e){s=!0}),t.on("compositionend",function(){s=!1,u()})}var u=function(e){if(l&&(a.defer.cancel(l),l=null),!s){var i=t.val(),u=e&&e.type;"password"===o||n.ngTrim&&"false"===n.ngTrim||(i=Ur(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var l,c=function(e,t,n){l||(l=a.defer(function(){l=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",u),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function ar(e,t){if(S(e))return e;if(k(e)){Ma.lastIndex=0;var n=Ma.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,u=0,l=Hn(r),c=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),u=t.getMilliseconds()),new Date(r,0,l.getDate()+c,a,o,s,u)}}return 0/0}function or(e,t){return function(n,r){var i,o;if(S(n))return n;if(k(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),xa.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},a(i,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return 0/0}}function sr(e,t,r,i){return function(a,o,s,u,l,c,f){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function h(e){return x(e)&&!S(e)?r(e)||n:e}ur(a,o,s,u),ir(a,o,s,u,l,c);var p,g=u&&u.$options&&u.$options.timezone;if(u.$$parserName=e,u.$parsers.push(function(e){if(u.$isEmpty(e))return null;if(t.test(e)){var i=r(e,p);return g&&(i=K(i,g)),i}return n}),u.$formatters.push(function(e){if(e&&!S(e))throw no("datefmt","Expected `{0}` to be a date",e);return d(e)?(p=e,p&&g&&(p=K(p,g,!0)),f("date")(e,i,g)):(p=null,"")}),x(s.min)||s.ngMin){var m;u.$validators.min=function(e){return!d(e)||b(m)||r(e)>=m},s.$observe("min",function(e){m=h(e),u.$validate()})}if(x(s.max)||s.ngMax){var v;u.$validators.max=function(e){return!d(e)||b(v)||r(e)<=v},s.$observe("max",function(e){v=h(e),u.$validate()})}}}function ur(e,t,r,i){var a=t[0],o=i.$$hasNativeValidators=w(a.validity);o&&i.$parsers.push(function(e){var r=t.prop(br)||{};return r.badInput&&!r.typeMismatch?n:e})}function lr(e,t,r,i,a,o){if(ur(e,t,r,i),ir(e,t,r,i,a,o),i.$$parserName="number",i.$parsers.push(function(e){return i.$isEmpty(e)?null:ka.test(e)?parseFloat(e):n}),i.$formatters.push(function(e){if(!i.$isEmpty(e)){if(!$(e))throw no("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),x(r.min)||r.ngMin){var s;i.$validators.min=function(e){return i.$isEmpty(e)||b(s)||e>=s},r.$observe("min",function(e){x(e)&&!$(e)&&(e=parseFloat(e,10)),s=$(e)&&!isNaN(e)?e:n,i.$validate()})}if(x(r.max)||r.ngMax){var u;i.$validators.max=function(e){return i.$isEmpty(e)||b(u)||u>=e},r.$observe("max",function(e){x(e)&&!$(e)&&(e=parseFloat(e,10)),u=$(e)&&!isNaN(e)?e:n,i.$validate()})}}function cr(e,t,n,r,i,a){ir(e,t,n,r,i,a),nr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||wa.test(n)}}function fr(e,t,n,r,i,a){ir(e,t,n,r,i,a),nr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||_a.test(n)}}function dr(e,t,n,r){b(n.name)&&t.attr("name",u());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function hr(e,t,n,r,i){var a;if(x(r)){if(a=e(r),!a.constant)throw no("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}function pr(e,t,n,r,i,a,o,s){var u=hr(s,e,"ngTrueValue",n.ngTrueValue,!0),l=hr(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return q(e,u)}),r.$parsers.push(function(e){return e?u:l})}function gr(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i==t[a])continue e;n.push(i)}return n}function i(e){var t=[];return Ir(e)?(a(e,function(e){t=t.concat(i(e))}),t):k(e)?e.split(" "):w(e)?(a(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t):e}return{restrict:"AC",link:function(o,s,u){function l(e){var t=f(e,1);u.$addClass(t)}function c(e){var t=f(e,-1);u.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||me(),r=[];return a(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function d(e,t){var i=r(t,e),a=r(e,t);i=f(i,1),a=f(a,-1),i&&i.length&&n.addClass(s,i),a&&a.length&&n.removeClass(s,a)}function h(e){if(t===!0||o.$index%2===t){var n=i(e||[]);if(p){if(!q(e,p)){var r=i(p);d(r,n)}}else l(n)}p=z(e)}var p;o.$watch(u[e],h,!0),u.$observe("class",function(t){h(o.$eval(u[e]))}),"ngClass"!==e&&o.$watch("$index",function(n,r){var a=1&n;if(a!==(1&r)){var s=i(o.$eval(u[e]));a===t?l(s):c(s)}})}}}]}function mr(e){function t(e,t,u){b(t)?r("$pending",e,u):i("$pending",e,u),L(t)?t?(f(s.$error,e,u),c(s.$$success,e,u)):(c(s.$error,e,u),f(s.$$success,e,u)):(f(s.$error,e,u),f(s.$$success,e,u)),s.$pending?(a(to,!0),s.$valid=s.$invalid=n,o("",null)):(a(to,!1),s.$valid=vr(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var l;l=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,o(e,l),s.$$parentForm.$setValidity(e,l,s)}function r(e,t,n){s[e]||(s[e]={}),c(s[e],t,n)}function i(e,t,r){s[e]&&f(s[e],t,r),vr(s[e])&&(s[e]=n)}function a(e,t){t&&!l[e]?(d.addClass(u,e),l[e]=!0):!t&&l[e]&&(d.removeClass(u,e),l[e]=!1)}function o(e,t){e=e?"-"+le(e,"-"):"",a(Xa+e,t===!0),a(Ja+e,t===!1)}var s=e.ctrl,u=e.$element,l={},c=e.set,f=e.unset,d=e.$animate;l[Ja]=!(l[Xa]=u.hasClass(Xa)),s.$setValidity=t}function vr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var yr=/^\/(.+)\/([a-z]*)$/,br="validity",xr=function(e){return k(e)?e.toLowerCase():e},wr=Object.prototype.hasOwnProperty,_r=function(e){return k(e)?e.toUpperCase():e},kr=function(e){return k(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},$r=function(e){return k(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(xr=kr,_r=$r);var Sr,Mr,Tr,Cr,Er=[].slice,Ar=[].splice,Or=[].push,Dr=Object.prototype.toString,Lr=Object.getPrototypeOf,Nr=r("ng"),jr=e.angular||(e.angular={}),Pr=0;Sr=t.documentMode,g.$inject=[],m.$inject=[];var Rr,Ir=Array.isArray,Fr=/^\[object (Uint8(Clamped)?)|(Uint16)|(Uint32)|(Int8)|(Int16)|(Int32)|(Float(32)|(64))Array\]$/,Ur=function(e){return k(e)?e.trim():e},zr=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},qr=function(){function e(){try{return new Function(""),!1}catch(e){return!0}}if(!x(qr.rules)){var n=t.querySelector("[ng-csp]")||t.querySelector("[data-ng-csp]");if(n){var r=n.getAttribute("ng-csp")||n.getAttribute("data-ng-csp");qr.rules={noUnsafeEval:!r||-1!==r.indexOf("no-unsafe-eval"),noInlineStyle:!r||-1!==r.indexOf("no-inline-style")}}else qr.rules={noUnsafeEval:e(),noInlineStyle:!1}}return qr.rules},Hr=function(){if(x(Hr.name_))return Hr.name_;var e,n,r,i,a=Br.length;for(n=0;a>n;++n)if(r=Br[n],e=t.querySelector("["+r.replace(":","\\:")+"jq]")){i=e.getAttribute(r+"jq");break}return Hr.name_=i},Br=["ng-","data-ng-","ng:","x-ng-"],Yr=/[A-Z]/g,Vr=!1,Wr=1,Gr=2,Xr=3,Jr=8,Kr=9,Zr=11,Qr={full:"1.4.7",major:1,minor:4,dot:7,codeName:"dark-luminescence"};Ce.expando="ng339";var ei=Ce.cache={},ti=1,ni=function(e,t,n){e.addEventListener(t,n,!1)},ri=function(e,t,n){e.removeEventListener(t,n,!1)};Ce._data=function(e){return this.cache[e[this.expando]]||{}};var ii=/([\:\-\_]+(.))/g,ai=/^moz([A-Z])/,oi={mouseleave:"mouseout",mouseenter:"mouseover"},si=r("jqLite"),ui=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,li=/<|&#?\w+;/,ci=/<([\w:-]+)/,fi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,di={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};di.optgroup=di.option,di.tbody=di.tfoot=di.colgroup=di.caption=di.thead,di.th=di.td;var hi=Ce.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),Ce(e).on("load",r))},toString:function(){var e=[];return a(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Mr(e>=0?this[e]:this[this.length+e])},length:0,push:Or,sort:[].sort,splice:[].splice},pi={};a("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){pi[xr(e)]=e});var gi={};a("input,select,option,textarea,button,form,details".split(","),function(e){gi[e]=!0});var mi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};a({data:Ne,removeData:De,hasData:Se},function(e,t){Ce[t]=e}),a({data:Ne,inheritedData:Ue,scope:function(e){return Mr.data(e,"$scope")||Ue(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Mr.data(e,"$isolateScope")||Mr.data(e,"$isolateScopeNoTemplate")},controller:Fe,injector:function(e){return Ue(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:je,css:function(e,t,n){return t=_e(t),x(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,r){var i=e.nodeType;if(i!==Xr&&i!==Gr&&i!==Jr){var a=xr(t);if(pi[a]){if(!x(r))return e[t]||(e.attributes.getNamedItem(t)||g).specified?a:n;r?(e[t]=!0,e.setAttribute(t,a)):(e[t]=!1,e.removeAttribute(a))}else if(x(r))e.setAttribute(t,r);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}}},prop:function(e,t,n){return x(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){
if(b(t)){var n=e.nodeType;return n===Wr||n===Xr?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(b(t)){if(e.multiple&&"select"===I(e)){var n=[];return a(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return b(t)?e.innerHTML:(Ae(e,!0),void(e.innerHTML=t))},empty:ze},function(e,t){Ce.prototype[t]=function(t,n){var r,i,a=this.length;if(e!==ze&&b(2==e.length&&e!==je&&e!==Fe?t:n)){if(w(t)){for(r=0;a>r;r++)if(e===Ne)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var o=e.$dv,s=b(o)?Math.min(a,1):a,u=0;s>u;u++){var l=e(this[u],t,n);o=o?o+l:l}return o}for(r=0;a>r;r++)e(this[r],t,n);return this}}),a({removeData:De,on:function Lo(e,t,n,r){if(x(r))throw si("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if($e(e)){var i=Le(e,!0),a=i.events,o=i.handle;o||(o=i.handle=Ve(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],u=s.length;u--;){t=s[u];var l=a[t];l||(a[t]=[],"mouseenter"===t||"mouseleave"===t?Lo(e,oi[t],function(e){var n=this,r=e.relatedTarget;(!r||r!==n&&!n.contains(r))&&o(e,t)}):"$destroy"!==t&&ni(e,t,o),l=a[t]),l.push(n)}}},off:Oe,one:function(e,t,n){e=Mr(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Ae(e),a(new Ce(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return a(e.childNodes,function(e){e.nodeType===Wr&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===Wr||n===Zr){t=new Ce(t);for(var r=0,i=t.length;i>r;r++){var a=t[r];e.appendChild(a)}}},prepend:function(e,t){if(e.nodeType===Wr){var n=e.firstChild;a(new Ce(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=Mr(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:qe,detach:function(e){qe(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new Ce(t);for(var i=0,a=t.length;a>i;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:Re,removeClass:Pe,toggleClass:function(e,t,n){t&&a(t.split(" "),function(t){var r=n;b(r)&&(r=!je(e,t)),(r?Re:Pe)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Zr?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Ee,triggerHandler:function(e,t,n){var r,i,o,s=t.type||t,u=Le(e),l=u&&u.events,c=l&&l[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:g,type:s,target:e},t.type&&(r=f(r,t)),i=z(c),o=n?[r].concat(n):[r],a(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){Ce.prototype[t]=function(t,n,r){for(var i,a=0,o=this.length;o>a;a++)b(i)?(i=e(this[a],t,n,r),x(i)&&(i=Mr(i))):Ie(i,e(this[a],t,n,r));return x(i)?i:this},Ce.prototype.bind=Ce.prototype.on,Ce.prototype.unbind=Ce.prototype.off}),Xe.prototype={put:function(e,t){this[Ge(e,this.nextUid)]=t},get:function(e){return this[Ge(e,this.nextUid)]},remove:function(e){var t=this[e=Ge(e,this.nextUid)];return delete this[e],t}};var vi=[function(){this.$get=[function(){return Xe}]}],yi=/^[^\(]*\(\s*([^\)]*)\)/m,bi=/,/,xi=/^\s*(_?)(\S+?)\1\s*$/,wi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,_i=r("$injector");Ze.$$annotate=Ke;var ki=r("$animate"),$i=1,Si="ng-animate",Mi=function(){this.$get=["$q","$$rAF",function(e,t){function n(){}return n.all=g,n.chain=g,n.prototype={end:g,cancel:g,resume:g,pause:g,complete:g,then:function(n,r){return e(function(e){t(function(){e()})}).then(n,r)}},n}]},Ti=function(){var e=new Xe,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(e,t,n){var r=!1;return t&&(t=k(t)?t.split(" "):Ir(t)?t:[],a(t,function(t){t&&(r=!0,e[t]=n)})),r}function o(){a(t,function(t){var n=e.get(t);if(n){var r=nt(t.attr("class")),i="",o="";a(n,function(e,t){var n=!!r[t];e!==n&&(e?i+=(i.length?" ":"")+t:o+=(o.length?" ":"")+t)}),a(t,function(e){i&&Re(e,i),o&&Pe(e,o)}),e.remove(t)}}),t.length=0}function s(n,a,s){var u=e.get(n)||{},l=i(u,a,!0),c=i(u,s,!1);(l||c)&&(e.put(n,u),t.push(n),1===t.length&&r.$$postDigest(o))}return{enabled:g,on:g,off:g,pin:g,push:function(e,t,r,i){return i&&i(),r=r||{},r.from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass),new n}}}]},Ci=["$provide",function(e){var t=this;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw ki("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null,this.$$classNameFilter)){var t=new RegExp("(\\s+|\\/)"+Si+"(\\s+|\\/)");if(t.test(this.$$classNameFilter.toString()))throw ki("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Si)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=tt(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,a){return r=r&&Mr(r),i=i&&Mr(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",rt(a))},move:function(n,r,i,a){return r=r&&Mr(r),i=i&&Mr(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",rt(a))},leave:function(t,n){return e.push(t,"leave",rt(n),function(){t.remove()})},addClass:function(t,n,r){return r=rt(r),r.addClass=et(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=rt(r),r.removeClass=et(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=rt(i),i.addClass=et(i.addClass,n),i.removeClass=et(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,a){return a=rt(a),a.from=a.from?f(a.from,n):n,a.to=a.to?f(a.to,r):r,i=i||"ng-inline-animate",a.tempClasses=et(a.tempClasses,i),e.push(t,"animate",a)}}}]}],Ei=function(){this.$get=["$$rAF","$q",function(e,t){var n=function(){};return n.prototype={done:function(e){this.defer&&this.defer[e===!0?"reject":"resolve"]()},end:function(){this.done()},cancel:function(){this.done(!0)},getPromise:function(){return this.defer||(this.defer=t.defer()),this.defer.promise},then:function(e,t){return this.getPromise().then(e,t)},"catch":function(e){return this.getPromise()["catch"](e)},"finally":function(e){return this.getPromise()["finally"](e)}},function(t,r){function i(){return e(function(){a(),o||s.done(),o=!0}),s}function a(){r.addClass&&(t.addClass(r.addClass),r.addClass=null),r.removeClass&&(t.removeClass(r.removeClass),r.removeClass=null),r.to&&(t.css(r.to),r.to=null)}r.cleanupStyles&&(r.from=r.to=null),r.from&&(t.css(r.from),r.from=null);var o,s=new n;return{start:i,end:i}}}]},Ai=r("$compile");ut.$inject=["$provide","$$sanitizeUriProvider"];var Oi=/^((?:x|data)[\:\-_])/i,Di=r("$controller"),Li=/^(\S+)(\s+as\s+(\w+))?$/,Ni=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Mr&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},ji="application/json",Pi={"Content-Type":ji+";charset=utf-8"},Ri=/^\[|^\{(?!\{)/,Ii={"[":/]$/,"{":/}$/},Fi=/^\)\]\}',?\n/,Ui=r("$http"),zi=function(e){return function(){throw Ui("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",e)}},qi=jr.$interpolateMinErr=r("$interpolate");qi.throwNoconcat=function(e){throw qi("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},qi.interr=function(e,t){return qi("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Hi=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Bi={http:80,https:443,ftp:21},Yi=r("$location"),Vi={$$html5:!1,$$replace:!1,absUrl:qt("$$absUrl"),url:function(e){if(b(e))return this.$$url;var t=Hi.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:qt("$$protocol"),host:qt("$$host"),port:qt("$$port"),path:Ht("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(k(e)||$(e))e=e.toString(),this.$$search=ee(e);else{if(!w(e))throw Yi("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=U(e,{}),a(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:b(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Ht("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};a([zt,Ut,Ft],function(e){e.prototype=Object.create(Vi),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Ft||!this.$$html5)throw Yi("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=b(t)?null:t,this}});var Wi=r("$parse"),Gi=Function.prototype.call,Xi=Function.prototype.apply,Ji=Function.prototype.bind,Ki=me();a("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Ki[e]=!0});var Zi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Qi=function(e){this.options=e};Qi.prototype={constructor:Qi,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Ki[t],a=Ki[n],o=Ki[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||""===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=x(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Wi("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=xr(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var s=Zi[a];n+=s||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var ea=function(e,t){this.lexer=e,this.options=t};ea.Program="Program",ea.ExpressionStatement="ExpressionStatement",ea.AssignmentExpression="AssignmentExpression",ea.ConditionalExpression="ConditionalExpression",ea.LogicalExpression="LogicalExpression",ea.BinaryExpression="BinaryExpression",ea.UnaryExpression="UnaryExpression",ea.CallExpression="CallExpression",ea.MemberExpression="MemberExpression",ea.Identifier="Identifier",ea.Literal="Literal",ea.ArrayExpression="ArrayExpression",ea.Property="Property",ea.ObjectExpression="ObjectExpression",ea.ThisExpression="ThisExpression",ea.NGValueParameter="NGValueParameter",ea.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:ea.Program,body:e}},expressionStatement:function(){return{type:ea.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();return this.expect("=")&&(e={type:ea.AssignmentExpression,left:e,right:this.assignment(),operator:"="}),e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:ea.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:ea.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:ea.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:ea.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:ea.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:ea.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:ea.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:ea.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.constants.hasOwnProperty(this.peek().text)?e=U(this.constants[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:ea.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:ea.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:ea.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:ea.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do e.push(this.expression());while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:ea.Identifier,name:e.text}},constant:function(){return{type:ea.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:ea.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:ea.Property,kind:"init"},this.peek().constant?e.key=this.constant():this.peek().identifier?e.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),e.value=this.expression(),t.push(e)}while(this.expect(","));return this.consume("}"),{type:ea.ObjectExpression,properties:t}},throwError:function(e,t){throw Wi("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Wi("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Wi("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},constants:{"true":{type:ea.Literal,value:!0},"false":{type:ea.Literal,value:!1},"null":{type:ea.Literal,value:null},undefined:{type:ea.Literal,value:n},"this":{type:ea.ThisExpression}}},sn.prototype={compile:function(e,t){var r=this,i=this.astBuilder.ast(e);this.state={nextId:0,filters:{},expensiveChecks:t,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},en(i,r.$filter);var o,s="";if(this.stage="assign",o=rn(i)){this.state.computing="assign";var u=this.nextId();this.recurse(o,u),this.return_(u),s="fn.assign="+this.generateFunction("assign","s,v,l")}var l=tn(i.body);r.stage="inputs",a(l,function(e,t){var n="fn"+t;r.state[n]={vars:[],body:[],own:{}},r.state.computing=n;var i=r.nextId();r.recurse(e,i),r.return_(i),r.state.inputs.push(n),e.watchId=t}),this.state.computing="fn",this.stage="main",this.recurse(i);var c='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+s+this.watchFns()+"return fn;",f=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",c)(this.$filter,Vt,Gt,Xt,Wt,Jt,Kt,Zt,e);return this.state=this.stage=n,f.literal=an(i),f.constant=on(i),f},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return a(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return a(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,r,i,o,s){var u,l,c,f,d=this;if(i=i||g,!s&&x(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,r,i,o,!0));switch(e.type){case ea.Program:a(e.body,function(t,r){d.recurse(t.expression,n,n,function(e){l=e}),r!==e.body.length-1?d.current().body.push(l,";"):d.return_(l)});break;case ea.Literal:f=this.escape(e.value),this.assign(t,f),i(f);break;case ea.UnaryExpression:this.recurse(e.argument,n,n,function(e){l=e}),f=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,f),i(f);break;case ea.BinaryExpression:this.recurse(e.left,n,n,function(e){u=e}),this.recurse(e.right,n,n,function(e){l=e}),f="+"===e.operator?this.plus(u,l):"-"===e.operator?this.ifDefined(u,0)+e.operator+this.ifDefined(l,0):"("+u+")"+e.operator+"("+l+")",this.assign(t,f),i(f);break;case ea.LogicalExpression:t=t||this.nextId(),d.recurse(e.left,t),d.if_("&&"===e.operator?t:d.not(t),d.lazyRecurse(e.right,t)),i(t);break;case ea.ConditionalExpression:t=t||this.nextId(),d.recurse(e.test,t),d.if_(t,d.lazyRecurse(e.alternate,t),d.lazyRecurse(e.consequent,t)),i(t);break;case ea.Identifier:t=t||this.nextId(),r&&(r.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),r.computed=!1,r.name=e.name),Vt(e.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",e.name)),function(){d.if_("inputs"===d.stage||"s",function(){o&&1!==o&&d.if_(d.not(d.nonComputedMember("s",e.name)),d.lazyAssign(d.nonComputedMember("s",e.name),"{}")),d.assign(t,d.nonComputedMember("s",e.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",e.name))),(d.state.expensiveChecks||ln(e.name))&&d.addEnsureSafeObject(t),i(t);break;case ea.MemberExpression:u=r&&(r.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(e.object,u,n,function(){d.if_(d.notNull(u),function(){e.computed?(l=d.nextId(),d.recurse(e.property,l),d.getStringValue(l),d.addEnsureSafeMemberName(l),o&&1!==o&&d.if_(d.not(d.computedMember(u,l)),d.lazyAssign(d.computedMember(u,l),"{}")),f=d.ensureSafeObject(d.computedMember(u,l)),d.assign(t,f),r&&(r.computed=!0,r.name=l)):(Vt(e.property.name),o&&1!==o&&d.if_(d.not(d.nonComputedMember(u,e.property.name)),d.lazyAssign(d.nonComputedMember(u,e.property.name),"{}")),f=d.nonComputedMember(u,e.property.name),(d.state.expensiveChecks||ln(e.property.name))&&(f=d.ensureSafeObject(f)),d.assign(t,f),r&&(r.computed=!1,r.name=e.property.name))},function(){d.assign(t,"undefined")}),i(t)},!!o);break;case ea.CallExpression:t=t||this.nextId(),e.filter?(l=d.filter(e.callee.name),c=[],a(e.arguments,function(e){var t=d.nextId();d.recurse(e,t),c.push(t)}),f=l+"("+c.join(",")+")",d.assign(t,f),i(t)):(l=d.nextId(),u={},c=[],d.recurse(e.callee,l,u,function(){d.if_(d.notNull(l),function(){d.addEnsureSafeFunction(l),a(e.arguments,function(e){d.recurse(e,d.nextId(),n,function(e){c.push(d.ensureSafeObject(e))})}),u.name?(d.state.expensiveChecks||d.addEnsureSafeObject(u.context),f=d.member(u.context,u.name,u.computed)+"("+c.join(",")+")"):f=l+"("+c.join(",")+")",f=d.ensureSafeObject(f),d.assign(t,f)},function(){d.assign(t,"undefined")}),i(t)}));break;case ea.AssignmentExpression:if(l=this.nextId(),u={},!nn(e.left))throw Wi("lval","Trying to assing a value to a non l-value");this.recurse(e.left,n,u,function(){d.if_(d.notNull(u.context),function(){d.recurse(e.right,l),d.addEnsureSafeObject(d.member(u.context,u.name,u.computed)),d.addEnsureSafeAssignContext(u.context),f=d.member(u.context,u.name,u.computed)+e.operator+l,d.assign(t,f),i(t||f)})},1);break;case ea.ArrayExpression:c=[],a(e.elements,function(e){d.recurse(e,d.nextId(),n,function(e){c.push(e)})}),f="["+c.join(",")+"]",this.assign(t,f),i(f);break;case ea.ObjectExpression:c=[],a(e.properties,function(e){d.recurse(e.value,d.nextId(),n,function(t){c.push(d.escape(e.key.type===ea.Identifier?e.key.name:""+e.key.value)+":"+t)})}),f="{"+c.join(",")+"}",this.assign(t,f),i(f);break;case ea.ThisExpression:this.assign(t,"s"),i("s");break;case ea.NGValueParameter:this.assign(t,"v"),i("v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){return e?(this.current().body.push(e,"=",t,";"),e):void 0},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(e===!0)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){return e+"."+t},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},addEnsureSafeObject:function(e){this.current().body.push(this.ensureSafeObject(e),";")},addEnsureSafeMemberName:function(e){this.current().body.push(this.ensureSafeMemberName(e),";")},addEnsureSafeFunction:function(e){this.current().body.push(this.ensureSafeFunction(e),";")},addEnsureSafeAssignContext:function(e){this.current().body.push(this.ensureSafeAssignContext(e),";")},ensureSafeObject:function(e){return"ensureSafeObject("+e+",text)"},ensureSafeMemberName:function(e){return"ensureSafeMemberName("+e+",text)"},ensureSafeFunction:function(e){return"ensureSafeFunction("+e+",text)"},getStringValue:function(e){this.assign(e,"getStringValue("+e+",text)")},ensureSafeAssignContext:function(e){return"ensureSafeAssignContext("+e+",text)"},lazyRecurse:function(e,t,n,r,i,a){var o=this;return function(){o.recurse(e,t,n,r,i,a)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(k(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if($(e))return e.toString();if(e===!0)return"true";if(e===!1)return"false";if(null===e)return"null";if("undefined"==typeof e)return"undefined";throw Wi("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},un.prototype={compile:function(e,t){var n=this,r=this.astBuilder.ast(e);this.expression=e,this.expensiveChecks=t,en(r,n.$filter);var i,o;(i=rn(r))&&(o=this.recurse(i));var s,u=tn(r.body);u&&(s=[],a(u,function(e,t){var r=n.recurse(e);e.input=r,s.push(r),e.watchId=t}));var l=[];a(r.body,function(e){l.push(n.recurse(e.expression))});var c=0===r.body.length?function(){}:1===r.body.length?l[0]:function(e,t){var n;return a(l,function(r){n=r(e,t)}),n};return o&&(c.assign=function(e,t,n){return o(e,n,t)}),s&&(c.inputs=s),c.literal=an(r),c.constant=on(r),c},recurse:function(e,t,r){var i,o,s,u=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case ea.Literal:return this.value(e.value,t);case ea.UnaryExpression:return o=this.recurse(e.argument),this["unary"+e.operator](o,t);case ea.BinaryExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case ea.LogicalExpression:return i=this.recurse(e.left),o=this.recurse(e.right),this["binary"+e.operator](i,o,t);case ea.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case ea.Identifier:return Vt(e.name,u.expression),u.identifier(e.name,u.expensiveChecks||ln(e.name),t,r,u.expression);case ea.MemberExpression:return i=this.recurse(e.object,!1,!!r),e.computed||(Vt(e.property.name,u.expression),o=e.property.name),e.computed&&(o=this.recurse(e.property)),e.computed?this.computedMember(i,o,t,r,u.expression):this.nonComputedMember(i,o,u.expensiveChecks,t,r,u.expression);case ea.CallExpression:return s=[],a(e.arguments,function(e){s.push(u.recurse(e))}),e.filter&&(o=this.$filter(e.callee.name)),e.filter||(o=this.recurse(e.callee,!0)),e.filter?function(e,r,i,a){for(var u=[],l=0;l<s.length;++l)u.push(s[l](e,r,i,a));var c=o.apply(n,u,a);return t?{context:n,name:n,value:c}:c}:function(e,n,r,i){var a,l=o(e,n,r,i);if(null!=l.value){Gt(l.context,u.expression),Xt(l.value,u.expression);for(var c=[],f=0;f<s.length;++f)c.push(Gt(s[f](e,n,r,i),u.expression));a=Gt(l.value.apply(l.context,c),u.expression)}return t?{value:a}:a};case ea.AssignmentExpression:return i=this.recurse(e.left,!0,1),o=this.recurse(e.right),function(e,n,r,a){var s=i(e,n,r,a),l=o(e,n,r,a);return Gt(s.value,u.expression),Jt(s.context),s.context[s.name]=l,t?{value:l}:l};case ea.ArrayExpression:return s=[],a(e.elements,function(e){s.push(u.recurse(e))}),function(e,n,r,i){for(var a=[],o=0;o<s.length;++o)a.push(s[o](e,n,r,i));return t?{value:a}:a};case ea.ObjectExpression:return s=[],a(e.properties,function(e){s.push({key:e.key.type===ea.Identifier?e.key.name:""+e.key.value,value:u.recurse(e.value)})}),function(e,n,r,i){for(var a={},o=0;o<s.length;++o)a[s[o].key]=s[o].value(e,n,r,i);return t?{value:a}:a};case ea.ThisExpression:return function(e){return t?{value:e}:e};case ea.NGValueParameter:return function(e,n,r,i){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=x(o)?+o:0,t?{value:o}:o}},"unary-":function(e,t){return function(n,r,i,a){var o=e(n,r,i,a);return o=x(o)?-o:0,t?{value:o}:o}},"unary!":function(e,t){return function(n,r,i,a){var o=!e(n,r,i,a);return t?{value:o}:o}},"binary+":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),u=t(r,i,a,o),l=Zt(s,u);return n?{value:l}:l}},"binary-":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o),u=t(r,i,a,o),l=(x(s)?s:0)-(x(u)?u:0);return n?{value:l}:l}},"binary*":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)*t(r,i,a,o);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)/t(r,i,a,o);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)%t(r,i,a,o);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)===t(r,i,a,o);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!==t(r,i,a,o);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)==t(r,i,a,o);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)!=t(r,i,a,o);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<t(r,i,a,o);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>t(r,i,a,o);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)<=t(r,i,a,o);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)>=t(r,i,a,o);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)&&t(r,i,a,o);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,a,o){var s=e(r,i,a,o)||t(r,i,a,o);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,a,o,s){var u=e(i,a,o,s)?t(i,a,o,s):n(i,a,o,s);return r?{value:u}:u}},value:function(e,t){return function(){return t?{context:n,name:n,value:e}:e}},identifier:function(e,t,r,i,a){return function(o,s,u,l){var c=s&&e in s?s:o;i&&1!==i&&c&&!c[e]&&(c[e]={});var f=c?c[e]:n;return t&&Gt(f,a),r?{context:c,name:e,value:f}:f}},computedMember:function(e,t,n,r,i){return function(a,o,s,u){var l,c,f=e(a,o,s,u);return null!=f&&(l=t(a,o,s,u),l=Wt(l),Vt(l,i),r&&1!==r&&f&&!f[l]&&(f[l]={}),c=f[l],Gt(c,i)),n?{context:f,name:l,value:c}:c}},nonComputedMember:function(e,t,r,i,a,o){return function(s,u,l,c){var f=e(s,u,l,c);a&&1!==a&&f&&!f[t]&&(f[t]={});var d=null!=f?f[t]:n;return(r||ln(t))&&Gt(d,o),i?{context:f,name:t,value:d}:d}},inputs:function(e,t){return function(n,r,i,a){return a?a[t]:e(n,r,i)}}};var ta=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n,this.ast=new ea(this.lexer),this.astCompiler=n.csp?new un(this.ast,t):new sn(this.ast,t)};ta.prototype={constructor:ta,parse:function(e){return this.astCompiler.compile(e,this.options.expensiveChecks)}};var na=(me(),me(),Object.prototype.valueOf),ra=r("$sce"),ia={
HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ai=r("$compile"),aa=t.createElement("a"),oa=Mn(e.location.href);En.$inject=["$document"],On.$inject=["$provide"],Pn.$inject=["$locale"],Rn.$inject=["$locale"];var sa=".",ua={yyyy:Un("FullYear",4),yy:Un("FullYear",2,0,!0),y:Un("FullYear",1),MMMM:zn("Month"),MMM:zn("Month",!0),MM:Un("Month",2,1),M:Un("Month",1,1),dd:Un("Date",2),d:Un("Date",1),HH:Un("Hours",2),H:Un("Hours",1),hh:Un("Hours",2,-12),h:Un("Hours",1,-12),mm:Un("Minutes",2),m:Un("Minutes",1),ss:Un("Seconds",2),s:Un("Seconds",1),sss:Un("Milliseconds",3),EEEE:zn("Day"),EEE:zn("Day",!0),a:Vn,Z:qn,ww:Yn(2),w:Yn(1),G:Wn,GG:Wn,GGG:Wn,GGGG:Gn},la=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,ca=/^\-?\d+$/;Xn.$inject=["$locale"];var fa=v(xr),da=v(_r);Zn.$inject=["$parse"];var ha=v({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===Dr.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),pa={};a(pi,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!=e){var r=lt("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),pa[r]=function(){return{restrict:"A",priority:100,link:i}}}}),a(mi,function(e,t){pa[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(yr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),a(["src","srcset","href"],function(e){var t=lt("ng-"+e);pa[t]=function(){return{priority:99,link:function(n,r,i){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===Dr.call(r.prop("href"))&&(o="xlinkHref",i.$attr[o]="xlink:href",a=null),i.$observe(t,function(t){return t?(i.$set(o,t),void(Sr&&a&&r.prop(a,i[o]))):void("href"===e&&i.$set(o,null))})}}}});var ga={$addControl:g,$$renameControl:er,$removeControl:g,$setValidity:g,$setDirty:g,$setPristine:g,$setSubmitted:g},ma="ng-submitted";tr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var va=function(e){return["$timeout","$parse",function(t,r){function i(e){return""===e?r('this[""]').assign:r(e).assign||g}var a={name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:tr,compile:function(r,a){r.addClass(Ka).addClass(Xa);var o=a.name?"name":e&&a.ngForm?"ngForm":!1;return{pre:function(e,r,a,s){var u=s[0];if(!("action"in a)){var l=function(t){e.$apply(function(){u.$commitViewValue(),u.$setSubmitted()}),t.preventDefault()};ni(r[0],"submit",l),r.on("$destroy",function(){t(function(){ri(r[0],"submit",l)},0,!1)})}var c=s[1]||u.$$parentForm;c.$addControl(u);var d=o?i(u.$name):g;o&&(d(e,u),a.$observe(o,function(t){u.$name!==t&&(d(e,n),u.$$parentForm.$$renameControl(u,t),(d=i(u.$name))(e,u))})),r.on("$destroy",function(){u.$$parentForm.$removeControl(u),d(e,n),f(u,ga)})}}}};return a}]},ya=va(),ba=va(!0),xa=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,wa=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,_a=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,ka=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,$a=/^(\d{4})-(\d{2})-(\d{2})$/,Sa=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ma=/^(\d{4})-W(\d\d)$/,Ta=/^(\d{4})-(\d\d)$/,Ca=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ea={text:rr,date:sr("date",$a,or($a,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":sr("datetimelocal",Sa,or(Sa,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:sr("time",Ca,or(Ca,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:sr("week",Ma,ar,"yyyy-Www"),month:sr("month",Ta,or(Ta,["yyyy","MM"]),"yyyy-MM"),number:lr,url:cr,email:fr,radio:dr,checkbox:pr,hidden:g,button:g,submit:g,reset:g,file:g},Aa=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(Ea[xr(o.type)]||Ea.text)(i,a,o,s[0],t,e,n,r)}}}}],Oa=/^(true|false|\d+)$/,Da=function(){return{restrict:"A",priority:100,compile:function(e,t){return Oa.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},La=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=b(e)?"":e})}}}}],Na=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var a=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,a.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=b(e)?"":e})}}}}],ja=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,function(){r.html(e.getTrustedHtml(a(t))||"")})}}}}],Pa=v({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Ra=gr("",!0),Ia=gr("Odd",0),Fa=gr("Even",1),Ua=Qn({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),za=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],qa={},Ha={blur:!0,focus:!0};a("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=lt("ng-"+e);qa[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,a){var o=n(a[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){o(t,{$event:n})};Ha[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var Ba=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,u,l;n.$watch(i.ngIf,function(n){n?u||o(function(n,a){u=a,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)}):(l&&(l.remove(),l=null),u&&(u.$destroy(),u=null),s&&(l=ge(s.clone),e.leave(l).then(function(){l=null}),s=null))})}}}],Ya=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:jr.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,u,l,c){var f,d,h,p=0,g=function(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),h&&(n.leave(h).then(function(){d=null}),d=h,h=null)};r.$watch(a,function(a){var u=function(){!x(s)||s&&!r.$eval(s)||t()},d=++p;a?(e(a,!0).then(function(e){if(d===p){var t=r.$new();l.template=e;var s=c(t,function(e){g(),n.enter(e,null,i).then(u)});f=t,h=s,f.$emit("$includeContentLoaded",a),r.$eval(o)}},function(){d===p&&(g(),r.$emit("$includeContentError",a))}),r.$emit("$includeContentRequested",a)):(g(),l.template=null)})}}}}],Va=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){return/SVG/.test(r[0].toString())?(r.empty(),void e(Me(a.template,t).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(a.template),void e(r.contents())(n))}}}],Wa=Qn({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ga=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var o=t.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,u=s?Ur(o):o,l=function(e){if(!b(e)){var t=[];return e&&a(e.split(u),function(e){e&&t.push(s?Ur(e):e)}),t}};i.$parsers.push(l),i.$formatters.push(function(e){return Ir(e)?e.join(o):n}),i.$isEmpty=function(e){return!e||!e.length}}}},Xa="ng-valid",Ja="ng-invalid",Ka="ng-pristine",Za="ng-dirty",Qa="ng-untouched",eo="ng-touched",to="ng-pending",no=r("ngModel"),ro=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,i,o,s,u,l,c,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(e),this.$$parentForm=ga;var d,h=o(r.ngModel),p=h.assign,m=h,v=p,y=null,w=this;this.$$setOptions=function(e){if(w.$options=e,e&&e.getterSetter){var t=o(r.ngModel+"()"),n=o(r.ngModel+"($$$p)");m=function(e){var n=h(e);return M(n)&&(n=t(e)),n},v=function(e,t){M(h(e))?n(e,{$$$p:w.$modelValue}):p(e,w.$modelValue)}}else if(!h.assign)throw no("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,Z(i))},this.$render=g,this.$isEmpty=function(e){return b(e)||""===e||null===e||e!==e};var _=0;mr({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},$animate:s}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,s.removeClass(i,Za),s.addClass(i,Ka)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,s.removeClass(i,Ka),s.addClass(i,Za),w.$$parentForm.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,s.setClass(i,Qa,eo)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,s.setClass(i,eo,Qa)},this.$rollbackViewValue=function(){u.cancel(y),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!$(w.$modelValue)||!isNaN(w.$modelValue)){var e=w.$$lastCommittedViewValue,t=w.$$rawModelValue,r=w.$valid,i=w.$modelValue,a=w.$options&&w.$options.allowInvalid;w.$$runValidators(t,e,function(e){a||r===e||(w.$modelValue=e?t:n,w.$modelValue!==i&&w.$$writeModelToScope())})}},this.$$runValidators=function(e,t,r){function i(){var e=w.$$parserName||"parse";return b(d)?(u(e,null),!0):(d||(a(w.$validators,function(e,t){u(t,null)}),a(w.$asyncValidators,function(e,t){u(t,null)})),u(e,d),d)}function o(){var n=!0;return a(w.$validators,function(r,i){var a=r(e,t);n=n&&a,u(i,a)}),n?!0:(a(w.$asyncValidators,function(e,t){u(t,null)}),!1)}function s(){var r=[],i=!0;a(w.$asyncValidators,function(a,o){var s=a(e,t);if(!N(s))throw no("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);u(o,n),r.push(s.then(function(){u(o,!0)},function(e){i=!1,u(o,!1)}))}),r.length?c.all(r).then(function(){l(i)},g):l(!0)}function u(e,t){f===_&&w.$setValidity(e,t)}function l(e){f===_&&r(e)}_++;var f=_;return i()&&o()?void s():void l(!1)},this.$commitViewValue=function(){var e=w.$viewValue;u.cancel(y),(w.$$lastCommittedViewValue!==e||""===e&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=e,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){w.$modelValue!==o&&w.$$writeModelToScope()}var r=w.$$lastCommittedViewValue,i=r;if(d=b(i)?n:!0)for(var a=0;a<w.$parsers.length;a++)if(i=w.$parsers[a](i),b(i)){d=!1;break}$(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=m(e));var o=w.$modelValue,s=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=i,s&&(w.$modelValue=i,t()),w.$$runValidators(i,w.$$lastCommittedViewValue,function(e){s||(w.$modelValue=e?i:n,t())})},this.$$writeModelToScope=function(){v(e,w.$modelValue),a(w.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){w.$viewValue=e,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=w.$options;i&&x(i.debounce)&&(n=i.debounce,$(n)?r=n:$(n[t])?r=n[t]:$(n["default"])&&(r=n["default"])),u.cancel(y),r?y=u(function(){w.$commitViewValue()},r):l.$$phase?w.$commitViewValue():e.$apply(function(){w.$commitViewValue()})},e.$watch(function(){var t=m(e);if(t!==w.$modelValue&&(w.$modelValue===w.$modelValue||t===t)){w.$modelValue=w.$$rawModelValue=t,d=n;for(var r=w.$formatters,i=r.length,a=t;i--;)a=r[i](a);w.$viewValue!==a&&(w.$viewValue=w.$$lastCommittedViewValue=a,w.$render(),w.$$runValidators(t,a,g))}return t})}],io=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:ro,priority:1,compile:function(t){return t.addClass(Ka).addClass(Qa).addClass(Xa),{pre:function(e,t,n,r){var i=r[0],a=r[1]||i.$$parentForm;i.$$setOptions(r[2]&&r[2].$options),a.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){var a=i[0];a.$options&&a.$options.updateOn&&n.on(a.$options.updateOn,function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(n){a.$touched||(e.$$phase?t.$evalAsync(a.$setTouched):t.$apply(a.$setTouched))})}}}}}],ao=/(\s+|^)default(\s+|$)/,oo=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var n=this;this.$options=U(e.$eval(t.ngModelOptions)),x(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Ur(this.$options.updateOn.replace(ao,function(){return n.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},so=Qn({terminal:!0,priority:1e3}),uo=r("ngOptions"),lo=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,co=["$compile","$parse",function(e,n){function r(e,t,r){function a(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function o(e){var t;if(!l&&i(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var s=e.match(lo);if(!s)throw uo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,Z(t));var u=s[5]||s[7],l=s[6],c=/ as /.test(s[0])&&s[1],f=s[9],d=n(s[2]?s[1]:u),h=c&&n(c),p=h||d,g=f&&n(f),m=f?function(e,t){return g(r,t)}:function(e){return Ge(e)},v=function(e,t){return m(e,k(e,t))},y=n(s[2]||s[1]),b=n(s[3]||""),x=n(s[4]||""),w=n(s[8]),_={},k=l?function(e,t){return _[l]=t,_[u]=e,_}:function(e){return _[u]=e,_};return{trackBy:f,getTrackByValue:v,getWatchables:n(w,function(e){var t=[];e=e||[];for(var n=o(e),i=n.length,a=0;i>a;a++){var u=e===n?a:n[a],l=(e[u],k(e[u],u)),c=m(e[u],l);if(t.push(c),s[2]||s[1]){var f=y(r,l);t.push(f)}if(s[4]){var d=x(r,l);t.push(d)}}return t}),getOptions:function(){for(var e=[],t={},n=w(r)||[],i=o(n),s=i.length,u=0;s>u;u++){var l=n===i?u:i[u],c=n[l],d=k(c,l),h=p(r,d),g=m(h,d),_=y(r,d),$=b(r,d),S=x(r,d),M=new a(g,h,_,$,S);e.push(M),t[g]=M}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[v(e)]},getViewValueFromOption:function(e){return f?jr.copy(e.viewValue):e.viewValue}}}}}var o=t.createElement("option"),s=t.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","?ngModel"],link:function(t,n,i,u){function l(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),e.value!==t.value&&(t.value=e.selectValue)}function c(e,t,n,r){var i;return t&&xr(t.nodeName)===n?i=t:(i=r.cloneNode(!1),t?e.insertBefore(i,t):e.appendChild(i)),i}function f(e){for(var t;e;)t=e.nextSibling,qe(e),e=t}function d(e){var t=g&&g[0],n=_&&_[0];if(t||n)for(;e&&(e===t||e===n||t&&t.nodeType===Jr);)e=e.nextSibling;return e}function h(){var e=k&&m.readValue();k=$.getOptions();var t={},r=n[0].firstChild;if(w&&n.prepend(g),r=d(r),k.items.forEach(function(e){var i,a,u;e.group?(i=t[e.group],i||(a=c(n[0],r,"optgroup",s),r=a.nextSibling,a.label=e.group,i=t[e.group]={groupElement:a,currentOptionElement:a.firstChild}),u=c(i.groupElement,i.currentOptionElement,"option",o),l(e,u),i.currentOptionElement=u.nextSibling):(u=c(n[0],r,"option",o),l(e,u),r=u.nextSibling)}),Object.keys(t).forEach(function(e){f(t[e].currentOptionElement)}),f(r),p.$render(),!p.$isEmpty(e)){var i=m.readValue();($.trackBy?q(e,i):e===i)||(p.$setViewValue(i),p.$render())}}var p=u[1];if(p){for(var g,m=u[0],v=i.multiple,y=0,b=n.children(),x=b.length;x>y;y++)if(""===b[y].value){g=b.eq(y);break}var w=!!g,_=Mr(o.cloneNode(!1));_.val("?");var k,$=r(i.ngOptions,n,t),S=function(){w||n.prepend(g),n.val(""),g.prop("selected",!0),g.attr("selected",!0)},M=function(){w||g.remove()},T=function(){n.prepend(_),n.val("?"),_.prop("selected",!0),_.attr("selected",!0)},C=function(){_.remove()};v?(p.$isEmpty=function(e){return!e||0===e.length},m.writeValue=function(e){k.items.forEach(function(e){e.element.selected=!1}),e&&e.forEach(function(e){var t=k.getOptionFromViewValue(e);t&&!t.disabled&&(t.element.selected=!0)})},m.readValue=function(){var e=n.val()||[],t=[];return a(e,function(e){var n=k.selectValueMap[e];n&&!n.disabled&&t.push(k.getViewValueFromOption(n))}),t},$.trackBy&&t.$watchCollection(function(){return Ir(p.$viewValue)?p.$viewValue.map(function(e){return $.getTrackByValue(e)}):void 0},function(){p.$render()})):(m.writeValue=function(e){var t=k.getOptionFromViewValue(e);t&&!t.disabled?n[0].value!==t.selectValue&&(C(),M(),n[0].value=t.selectValue,t.element.selected=!0,t.element.setAttribute("selected","selected")):null===e||w?(C(),S()):(M(),T())},m.readValue=function(){var e=k.selectValueMap[n.val()];return e&&!e.disabled?(M(),C(),k.getViewValueFromOption(e)):null},$.trackBy&&t.$watch(function(){return $.getTrackByValue(p.$viewValue)},function(){p.$render()})),w?(g.remove(),e(g)(t),g.removeClass("ng-scope")):g=Mr(o.cloneNode(!1)),h(),t.$watchCollection($.getWatchables,h)}}}}],fo=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(o,s,u){function l(e){s.text(e||"")}var c,f=u.count,d=u.$attr.when&&s.attr(u.$attr.when),h=u.offset||0,p=o.$eval(d)||{},m={},v=t.startSymbol(),y=t.endSymbol(),x=v+f+"-"+h+y,w=jr.noop;a(u,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+xr(n[2]);p[r]=s.attr(u.$attr[t])}}),a(p,function(e,n){m[n]=t(e.replace(r,x))}),o.$watch(f,function(t){var r=parseFloat(t),i=isNaN(r);if(i||r in p||(r=e.pluralCat(r-h)),r!==c&&!(i&&$(c)&&isNaN(c))){w();var a=m[r];b(a)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+d),w=g,l()):w=o.$watch(a,l),c=r}})}}}],ho=["$parse","$animate",function(e,o){var s="$$NG_REMOVED",u=r("ngRepeat"),l=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},f=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,d){var h=d.ngRepeat,p=t.createComment(" end ngRepeat: "+h+" "),g=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!g)throw u("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",h);var m=g[1],v=g[2],y=g[3],b=g[4];if(g=m.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!g)throw u("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",m);var x=g[3]||g[1],w=g[2];if(y&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(y)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(y)))throw u("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",y);var _,k,$,S,M={$id:Ge};return b?_=e(b):($=function(e,t){return Ge(t)},S=function(e){return e}),function(e,t,r,d,g){_&&(k=function(t,n,r){return w&&(M[w]=t),M[x]=n,M.$index=r,_(e,M)});var m=me();e.$watchCollection(v,function(r){var d,v,b,_,M,T,C,E,A,O,D,L,N=t[0],j=me();if(y&&(e[y]=r),i(r))A=r,E=k||$;else{E=k||S,A=[];for(var P in r)wr.call(r,P)&&"$"!==P.charAt(0)&&A.push(P)}for(_=A.length,D=new Array(_),d=0;_>d;d++)if(M=r===A?d:A[d],T=r[M],C=E(M,T,d),m[C])O=m[C],delete m[C],j[C]=O,D[d]=O;else{if(j[C])throw a(D,function(e){e&&e.scope&&(m[e.id]=e)}),u("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",h,C,T);D[d]={id:C,scope:n,clone:n},j[C]=!0}for(var R in m){if(O=m[R],L=ge(O.clone),o.leave(L),L[0].parentNode)for(d=0,v=L.length;v>d;d++)L[d][s]=!0;O.scope.$destroy()}for(d=0;_>d;d++)if(M=r===A?d:A[d],T=r[M],O=D[d],O.scope){b=N;do b=b.nextSibling;while(b&&b[s]);c(O)!=b&&o.move(ge(O.clone),null,Mr(N)),N=f(O),l(O.scope,d,x,T,w,M,_)}else g(function(e,t){O.scope=t;var n=p.cloneNode(!1);e[e.length++]=n,o.enter(e,null,Mr(N)),N=n,O.clone=e,j[O.id]=O,l(O.scope,d,x,T,w,M,_)});m=j})}}}}],po="ng-hide",go="ng-hide-animate",mo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,po,{tempClasses:go})})}}}],vo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,po,{tempClasses:go})})}}}],yo=Qn(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&a(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),bo=["$animate",function(e){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var s=i.ngSwitch||i.on,u=[],l=[],c=[],f=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=c.length;i>r;++r)e.cancel(c[r]);for(c.length=0,r=0,i=f.length;i>r;++r){var s=ge(l[r].clone);f[r].$destroy();var h=c[r]=e.leave(s);h.then(d(c,r))}l.length=0,f.length=0,(u=o.cases["!"+n]||o.cases["?"])&&a(u,function(n){n.transclude(function(r,i){f.push(i);var a=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:r};l.push(o),e.enter(r,a.parent(),a)})})})}}}],xo=Qn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),wo=Qn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),_o=Qn({restrict:"EAC",link:function(e,t,n,i,a){if(!a)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(t));a(function(e){t.empty(),t.append(e)})}}),ko=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],$o={$setViewValue:g,$render:g},So=["$element","$scope","$attrs",function(e,r,i){var a=this,o=new Xe;a.ngModelCtrl=$o,a.unknownOption=Mr(t.createElement("option")),a.renderUnknownOption=function(t){var n="? "+Ge(t)+" ?";a.unknownOption.val(n),e.prepend(a.unknownOption),e.val(n)},r.$on("$destroy",function(){a.renderUnknownOption=g}),a.removeUnknownOption=function(){a.unknownOption.parent()&&a.unknownOption.remove()},a.readValue=function(){return a.removeUnknownOption(),e.val()},a.writeValue=function(t){a.hasOption(t)?(a.removeUnknownOption(),e.val(t),""===t&&a.emptyOption.prop("selected",!0)):null==t&&a.emptyOption?(a.removeUnknownOption(),e.val("")):a.renderUnknownOption(t)},a.addOption=function(e,t){he(e,'"option value"'),""===e&&(a.emptyOption=t);var n=o.get(e)||0;o.put(e,n+1)},a.removeOption=function(e){var t=o.get(e);t&&(1===t?(o.remove(e),""===e&&(a.emptyOption=n)):o.put(e,t-1))},a.hasOption=function(e){return!!o.get(e)}}],Mo=function(){return{restrict:"E",require:["select","?ngModel"],controller:So,link:function(e,t,n,r){var i=r[1];if(i){var o=r[0];if(o.ngModelCtrl=i,i.$render=function(){o.writeValue(i.$viewValue)},t.on("change",function(){e.$apply(function(){i.$setViewValue(o.readValue())})}),n.multiple){o.readValue=function(){var e=[];return a(t.find("option"),function(t){t.selected&&e.push(t.value)}),e},o.writeValue=function(e){var n=new Xe(e);a(t.find("option"),function(e){e.selected=x(n.get(e.value))})};var s,u=0/0;e.$watch(function(){u!==i.$viewValue||q(s,i.$viewValue)||(s=z(i.$viewValue),i.$render()),u=i.$viewValue}),i.$isEmpty=function(e){return!e||0===e.length}}}}}},To=["$interpolate",function(e){function t(e){e[0].hasAttribute("selected")&&(e[0].selected=!0)}return{restrict:"E",priority:100,compile:function(n,r){if(x(r.value))var i=e(r.value,!0);else{var a=e(n.text(),!0);a||r.$set("value",n.text())}return function(e,n,r){function o(e){l.addOption(e,n),l.ngModelCtrl.$render(),t(n)}var s="$selectController",u=n.parent(),l=u.data(s)||u.parent().data(s);if(l&&l.ngModelCtrl){if(i){var c;r.$observe("value",function(e){x(c)&&l.removeOption(c),c=e,o(e)})}else a?e.$watch(a,function(e,t){r.$set("value",e),t!==e&&l.removeOption(t),o(e)}):o(r.value);n.on("$destroy",function(){l.removeOption(r.value),l.ngModelCtrl.$render()})}}}}}],Co=v({restrict:"E",terminal:!1}),Eo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Ao=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,a){if(a){var o,s=i.ngPattern||i.pattern;i.$observe("pattern",function(e){if(k(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,Z(t));o=e||n,a.$validate()}),a.$validators.pattern=function(e,t){return a.$isEmpty(t)||b(o)||o.test(t)}}}}},Oo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=h(e);i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>i||r.$isEmpty(t)||t.length<=i}}}}},Do=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=h(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(ce(),xe(jr),jr.module("ngLocale",[],["$provide",function(e){function t(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function r(e,r){var i=r;n===i&&(i=Math.min(t(e),3));var a=Math.pow(10,i),o=(e*a|0)%a;return{v:i,f:o}}var i={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a","short":"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",pluralCat:function(e,t){var n=0|e,a=r(e,t);return 1==n&&0==a.v?i.ONE:i.OTHER}})}]),void Mr(t).ready(function(){ae(t,oe)}))}(window,document),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),/**
 * @license AngularJS v1.4.7
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t,n){"use strict";function r(e){return t.lowercase(e.nodeName||e[0]&&e[0].nodeName)}function i(e,n,r){a.directive(e,["$parse","$swipe",function(i,a){var o=75,s=.3,u=30;return function(l,c,f){function d(e){if(!h)return!1;var t=Math.abs(e.y-h.y),r=(e.x-h.x)*n;return p&&o>t&&r>0&&r>u&&s>t/r}var h,p,g=i(f[e]),m=["touch"];t.isDefined(f.ngSwipeDisableMouse)||m.push("mouse"),a.bind(c,{start:function(e,t){h=e,p=!0},cancel:function(e){p=!1},end:function(e,t){d(e)&&l.$apply(function(){c.triggerHandler(r),g(l,{$event:t})})}},m)}}])}var a=t.module("ngTouch",[]);a.factory("$swipe",[function(){function e(e){var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],r=t.changedTouches&&t.changedTouches[0]||n[0];return{x:r.clientX,y:r.clientY}}function n(e,n){var r=[];return t.forEach(e,function(e){var t=i[e][n];t&&r.push(t)}),r.join(" ")}var r=10,i={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(t,i,a){var o,s,u,l,c=!1;a=a||["mouse","touch"],t.on(n(a,"start"),function(t){u=e(t),c=!0,o=0,s=0,l=u,i.start&&i.start(u,t)});var f=n(a,"cancel");f&&t.on(f,function(e){c=!1,i.cancel&&i.cancel(e)}),t.on(n(a,"move"),function(t){if(c&&u){var n=e(t);if(o+=Math.abs(n.x-l.x),s+=Math.abs(n.y-l.y),l=n,!(r>o&&r>s))return s>o?(c=!1,void(i.cancel&&i.cancel(t))):(t.preventDefault(),void(i.move&&i.move(n,t)))}}),t.on(n(a,"end"),function(t){c&&(c=!1,i.end&&i.end(e(t),t))})}}}]),a.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),a.directive("ngClick",["$parse","$timeout","$rootElement",function(e,n,i){function a(e,t,n,r){return Math.abs(e-n)<m&&Math.abs(t-r)<m}function o(e,t,n){for(var r=0;r<e.length;r+=2)if(a(e[r],e[r+1],t,n))return e.splice(r,r+2),!0;return!1}function s(e){if(!(Date.now()-c>g)){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,i=t[0].clientY;1>n&&1>i||d&&d[0]===n&&d[1]===i||(d&&(d=null),"label"===r(e.target)&&(d=[n,i]),o(f,n,i)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur&&e.target.blur()))}}function u(e){var t=e.touches&&e.touches.length?e.touches:[e],r=t[0].clientX,i=t[0].clientY;f.push(r,i),n(function(){for(var e=0;e<f.length;e+=2)if(f[e]==r&&f[e+1]==i)return void f.splice(e,e+2)},g,!1)}function l(e,t){f||(i[0].addEventListener("click",s,!0),i[0].addEventListener("touchstart",u,!0),f=[]),c=Date.now(),o(f,e,t)}var c,f,d,h=750,p=12,g=2500,m=25,v="ng-click-active";return function(n,r,i){function a(){d=!1,r.removeClass(v)}var o,s,u,c,f=e(i.ngClick),d=!1;r.on("touchstart",function(e){d=!0,o=e.target?e.target:e.srcElement,3==o.nodeType&&(o=o.parentNode),r.addClass(v),s=Date.now();var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],i=n[0];u=i.clientX,c=i.clientY}),r.on("touchcancel",function(e){a()}),r.on("touchend",function(e){var n=Date.now()-s,f=e.originalEvent||e,g=f.changedTouches&&f.changedTouches.length?f.changedTouches:f.touches&&f.touches.length?f.touches:[f],m=g[0],v=m.clientX,y=m.clientY,b=Math.sqrt(Math.pow(v-u,2)+Math.pow(y-c,2));d&&h>n&&p>b&&(l(v,y),o&&o.blur(),t.isDefined(i.disabled)&&i.disabled!==!1||r.triggerHandler("click",[e])),a()}),r.onclick=function(e){},r.on("click",function(e,t){n.$apply(function(){f(n,{$event:t||e})})}),r.on("mousedown",function(e){r.addClass(v)}),r.on("mousemove mouseup",function(e){r.removeClass(v)})}}]),i("ngSwipeLeft",-1,"swipeleft"),i("ngSwipeRight",1,"swiperight")}(window,window.angular),/**
 * @license AngularJS v1.4.7
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t,n){"use strict";/*
 * HTML Parser By Misko Hevery (misko@hevery.com)
 * based on:  HTML Parser By John Resig (ejohn.org)
 * Original code by Erik Arvidsson, Mozilla Public License
 * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js
 *
 * // Use like so:
 * htmlParser(htmlString, {
 *     start: function(tag, attrs, unary) {},
 *     end: function(tag) {},
 *     chars: function(text) {},
 *     comment: function(text) {}
 * });
 *
 */
function r(){this.$get=["$$sanitizeUri",function(e){return function(t){var n=[];return o(t,l(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function i(e){var n=[],r=l(n,t.noop);return r.chars(e),n.join("")}function a(e,n){var r,i={},a=e.split(",");for(r=0;r<a.length;r++)i[n?t.lowercase(a[r]):a[r]]=!0;return i}function o(e,n){function r(e,r,a,o){if(r=t.lowercase(r),S[r])for(;b.last()&&M[b.last()];)i("",b.last());$[r]&&b.last()==r&&i("",r),o=w[r]||!!o,o||b.push(r);var u={};a.replace(h,function(e,t,n,r,i){var a=n||r||i||"";u[t]=s(a)}),n.start&&n.start(r,u,o)}function i(e,r){var i,a=0;if(r=t.lowercase(r))for(a=b.length-1;a>=0&&b[a]!=r;a--);if(a>=0){for(i=b.length-1;i>=a;i--)n.end&&n.end(b[i]);b.length=a}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var a,o,u,l,b=[],x=e;for(b.last=function(){return b[b.length-1]};e;){if(l="",o=!0,b.last()&&C[b.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(m,"$1").replace(y,"$1"),n.chars&&n.chars(s(t)),""}),i("",b.last())):(0===e.indexOf("<!--")?(a=e.indexOf("--",4),a>=0&&e.lastIndexOf("-->",a)===a&&(n.comment&&n.comment(e.substring(4,a)),e=e.substring(a+3),o=!1)):v.test(e)?(u=e.match(v),u&&(e=e.replace(u[0],""),o=!1)):g.test(e)?(u=e.match(d),u&&(e=e.substring(u[0].length),u[0].replace(d,i),o=!1)):p.test(e)&&(u=e.match(f),u?(u[4]&&(e=e.substring(u[0].length),u[0].replace(f,r)),o=!1):(l+="<",e=e.substring(1))),o&&(a=e.indexOf("<"),l+=0>a?e:e.substring(0,a),e=0>a?"":e.substring(a),n.chars&&n.chars(s(l)))),e==x)throw c("badparse","The sanitizer was unable to parse the following block of html: {0}",e);x=e}i()}function s(e){return e?(N.innerHTML=e.replace(/</g,"&lt;"),N.textContent):""}function u(e){return e.replace(/&/g,"&amp;").replace(b,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(x,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!r&&C[e]&&(r=e),r||E[e]!==!0||(i("<"),i(e),t.forEach(a,function(r,a){var o=t.lowercase(a),s="img"===e&&"src"===o||"background"===o;L[o]!==!0||A[o]===!0&&!n(r,s)||(i(" "),i(a),i('="'),i(u(r)),i('"'))}),i(o?"/>":">"))},end:function(e){e=t.lowercase(e),r||E[e]!==!0||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(u(e))}}}var c=t.$$minErr("$sanitize"),f=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,d=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,g=/^<\//,m=/<!--(.*?)-->/g,v=/<!DOCTYPE([^>]*?)>/i,y=/<!\[CDATA\[(.*?)]]>/g,b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x=/([^\#-~| |!])/g,w=a("area,br,col,hr,img,wbr"),_=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),k=a("rp,rt"),$=t.extend({},k,_),S=t.extend({},_,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),M=t.extend({},k,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),T=a("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan,use"),C=a("script,style"),E=t.extend({},w,S,M,$,T),A=a("background,cite,href,longdesc,src,usemap,xlink:href"),O=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),D=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),L=t.extend({},A,D,O),N=document.createElement("pre");t.module("ngSanitize",[]).provider("$sanitize",r),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i;return function(a,o){function s(e){e&&h.push(i(e))}function u(e,n){h.push("<a "),t.isDefined(o)&&h.push('target="',o,'" '),h.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),h.push("</a>")}if(!a)return a;for(var l,c,f,d=a,h=[];l=d.match(n);)c=l[0],l[2]||l[4]||(c=(l[3]?"http://":"mailto:")+c),f=l.index,s(d.substr(0,f)),u(c,l[0].replace(r,"")),d=d.substring(f+l[0].length);return s(d),e(h.join(""))}}])}(window,window.angular),function(e,t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&module.exports?module.exports=t():e.tv4=t()}(this,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(t){var n="";f[t.charAt(0)]&&(n=t.charAt(0),t=t.substring(1));var r="",i="",a=!0,o=!1,s=!1;"+"===n?a=!1:"."===n?(i=".",r="."):"/"===n?(i="/",r="/"):"#"===n?(i="#",a=!1):";"===n?(i=";",r=";",o=!0,s=!0):"?"===n?(i="?",r="&",o=!0):"&"===n&&(i="&",r="&",o=!0);for(var u=[],l=t.split(","),c=[],h={},p=0;p<l.length;p++){var g=l[p],m=null;if(-1!==g.indexOf(":")){var v=g.split(":");g=v[0],m=parseInt(v[1],10)}for(var y={};d[g.charAt(g.length-1)];)y[g.charAt(g.length-1)]=!0,g=g.substring(0,g.length-1);var b={truncate:m,name:g,suffices:y};c.push(b),h[g]=b,u.push(g)}var x=function(t){for(var n="",u=0,l=0;l<c.length;l++){var f=c[l],d=t(f.name);if(null===d||void 0===d||Array.isArray(d)&&0===d.length||"object"==typeof d&&0===Object.keys(d).length)u++;else if(n+=l===u?i:r||",",Array.isArray(d)){o&&(n+=f.name+"=");for(var h=0;h<d.length;h++)h>0&&(n+=f.suffices["*"]?r||",":",",f.suffices["*"]&&o&&(n+=f.name+"=")),n+=a?encodeURIComponent(d[h]).replace(/!/g,"%21"):e(d[h])}else if("object"==typeof d){o&&!f.suffices["*"]&&(n+=f.name+"=");var p=!0;for(var g in d)p||(n+=f.suffices["*"]?r||",":","),p=!1,n+=a?encodeURIComponent(g).replace(/!/g,"%21"):e(g),n+=f.suffices["*"]?"=":",",n+=a?encodeURIComponent(d[g]).replace(/!/g,"%21"):e(d[g])}else o&&(n+=f.name,s&&""===d||(n+="=")),null!=f.truncate&&(d=d.substring(0,f.truncate)),n+=a?encodeURIComponent(d).replace(/!/g,"%21"):e(d)}return n};return x.varNames=u,{prefix:i,substitution:x}}function n(e){if(!(this instanceof n))return new n(e);for(var r=e.split("{"),i=[r.shift()],a=[],o=[],s=[];r.length>0;){var u=r.shift(),l=u.split("}")[0],c=u.substring(l.length+1),f=t(l);o.push(f.substitution),a.push(f.prefix),i.push(c),s=s.concat(f.substitution.varNames)}this.fill=function(e){for(var t=i[0],n=0;n<o.length;n++){var r=o[n];t+=r(e),t+=i[n+1]}return t},this.varNames=s,this.template=e}function r(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else{var i;for(i in e)if(void 0===t[i]&&void 0!==e[i])return!1;for(i in t)if(void 0===e[i]&&void 0!==t[i])return!1;for(i in e)if(!r(e[i],t[i]))return!1}return!0}return!1}function i(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function a(e,t){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=i(t||""),e=i(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+n(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function o(e){return e.split("#")[0]}function s(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=a(t,e.id),e.id=t),Array.isArray(e))for(var n=0;n<e.length;n++)s(e[n],t);else{"string"==typeof e.$ref&&(e.$ref=a(t,e.$ref));for(var r in e)"enum"!==r&&s(e[r],t)}}function u(e,t,n,r,i,a){if(Error.call(this),void 0===e)throw new Error("No code supplied for error: "+t);this.message=t,this.params=n,this.code=e,this.dataPath=r||"",this.schemaPath=i||"",this.subErrors=a||null;var o=new Error(this.message);if(this.stack=o.stack||o.stacktrace,!this.stack)try{throw o}catch(o){this.stack=o.stack||o.stacktrace}}function l(e,t){if(t.substring(0,e.length)===e){var n=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===n.charAt(0)||"?"===n.charAt(0))return!0}return!1}function c(e){var t=new h,n=e||"en",r={addFormat:function(){t.addFormat.apply(t,arguments)},language:function(e){return e?(x[e]||(e=e.split("-")[0]),x[e]?(n=e,e):!1):n},addLanguage:function(e,t){var n;for(n in m)t[n]&&!t[m[n]]&&(t[m[n]]=t[n]);var r=e.split("-")[0];if(x[r]){x[e]=Object.create(x[r]);for(n in t)"undefined"==typeof x[r][n]&&(x[r][n]=t[n]),x[e][n]=t[n]}else x[e]=t,x[r]=t;return this},freshApi:function(e){var t=c();return e&&t.language(e),t},validate:function(e,r,i,a){var o=new h(t,!1,x[n],i,a);"string"==typeof r&&(r={$ref:r}),o.addSchema("",r);var s=o.validateAll(e,r,null,null,"");return!s&&a&&(s=o.banUnknownProperties()),this.error=s,this.missing=o.missing,this.valid=null===s,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,r,i,a){var o=new h(t,!0,x[n],i,a);"string"==typeof r&&(r={$ref:r}),o.addSchema("",r),o.validateAll(e,r,null,null,""),a&&o.banUnknownProperties();var s={};return s.errors=o.errors,s.missing=o.missing,s.valid=0===s.errors.length,s},addSchema:function(){return t.addSchema.apply(t,arguments)},getSchema:function(){return t.getSchema.apply(t,arguments)},getSchemaMap:function(){return t.getSchemaMap.apply(t,arguments)},getSchemaUris:function(){return t.getSchemaUris.apply(t,arguments)},getMissingUris:function(){return t.getMissingUris.apply(t,arguments)},dropSchemas:function(){t.dropSchemas.apply(t,arguments)},defineKeyword:function(){t.defineKeyword.apply(t,arguments)},defineError:function(e,t,n){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof m[e])throw new Error("Error already defined: "+e+" as "+m[e]);if("undefined"!=typeof v[t])throw new Error("Error code already used: "+v[t]+" as "+t);m[e]=t,v[t]=e,b[e]=b[t]=n;for(var r in x){var i=x[r];i[e]&&(i[t]=i[t]||i[e])}},reset:function(){t.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:s,resolveUrl:a,getDocumentUri:o,errorCodes:m};return r}Object.keys||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var a=[];for(var o in i)e.call(i,o)&&a.push(o);if(t)for(var s=0;r>s;s++)e.call(i,n[s])&&a.push(n[s]);return a}}()),Object.create||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),n=t.length>>>0;if(0===n)return-1;var r=0;if(arguments.length>1&&(r=Number(arguments[1]),r!==r?r=0:0!==r&&r!==1/0&&r!==-(1/0)&&(r=(r>0||-1)*Math.floor(Math.abs(r)))),r>=n)return-1;for(var i=r>=0?r:Math.max(n-Math.abs(r),0);n>i;i++)if(i in t&&t[i]===e)return i;return-1}),Object.isFrozen||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(n){return!0}});var f={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},d={"*":!0};n.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var h=function(e,t,n,r,i){if(this.missing=[],this.missingMap={},this.formatValidators=e?Object.create(e.formatValidators):{},this.schemas=e?Object.create(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,r&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),i&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorMessages=n,this.definedKeywords={},e)for(var a in e.definedKeywords)this.definedKeywords[a]=e.definedKeywords[a].slice(0)};h.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},h.prototype.createError=function(e,t,n,r,i){var a=this.errorMessages[e]||b[e];if("string"!=typeof a)return new u(e,"Unknown error code "+e+": "+JSON.stringify(t),t,n,r,i);var o=a.replace(/\{([^{}]*)\}/g,function(e,n){var r=t[n];return"string"==typeof r||"number"==typeof r?r:e});return new u(e,o,t,n,r,i)},h.prototype.returnError=function(e){return e},h.prototype.collectError=function(e){return e&&this.errors.push(e),null},h.prototype.prefixErrors=function(e,t,n){for(var r=e;r<this.errors.length;r++)this.errors[r]=this.errors[r].prefixWith(t,n);return this},h.prototype.banUnknownProperties=function(){for(var e in this.unknownPropertyPaths){var t=this.createError(m.UNKNOWN_PROPERTY,{path:e},e,""),n=this.handleError(t);if(n)return n}return null},h.prototype.addFormat=function(e,t){if("object"==typeof e){for(var n in e)this.addFormat(n,e[n]);return this}this.formatValidators[e]=t},h.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(m.CIRCULAR_REFERENCE,{urls:Object.keys(t).join(", ")},"","");t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},h.prototype.getSchema=function(e,t){var n;if(void 0!==this.schemas[e])return n=this.schemas[e],this.resolveRefs(n,t);var r=e,i="";if(-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#")+1),r=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[r]){n=this.schemas[r];var a=decodeURIComponent(i);if(""===a)return this.resolveRefs(n,t);if("/"!==a.charAt(0))return void 0;for(var o=a.split("/").slice(1),s=0;s<o.length;s++){var u=o[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===n[u]){n=void 0;break}n=n[u]}if(void 0!==n)return this.resolveRefs(n,t)}void 0===this.missing[r]&&(this.missing.push(r),this.missing[r]=r,this.missingMap[r]=r)},h.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)this.searchSchemas(e[n],t);else if(e&&"object"==typeof e){"string"==typeof e.id&&l(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var r in e)if("enum"!==r)if("object"==typeof e[r])this.searchSchemas(e[r],t);else if("$ref"===r){var i=o(e[r]);i&&void 0===this.schemas[i]&&void 0===this.missingMap[i]&&(this.missingMap[i]=i)}}},h.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===o(e)+"#"&&(e=o(e)),this.schemas[e]=t,delete this.missingMap[e],s(t,e),this.searchSchemas(t,e)},h.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},h.prototype.getSchemaUris=function(e){var t=[];for(var n in this.schemas)(!e||e.test(n))&&t.push(n);return t},h.prototype.getMissingUris=function(e){var t=[];for(var n in this.missingMap)(!e||e.test(n))&&t.push(n);return t},h.prototype.dropSchemas=function(){this.schemas={},this.reset()},h.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},h.prototype.validateAll=function(e,t,n,r,i){var a;if(t=this.resolveRefs(t),!t)return null;if(t instanceof u)return this.errors.push(t),t;var o,s=this.errors.length,l=null,c=null;if(this.checkRecursive&&e&&"object"==typeof e){if(a=!this.scanned.length,e[this.validatedSchemasKey]){var f=e[this.validatedSchemasKey].indexOf(t);if(-1!==f)return this.errors=this.errors.concat(e[this.validationErrorsKey][f]),null}if(Object.isFrozen(e)&&(o=this.scannedFrozen.indexOf(e),-1!==o)){var d=this.scannedFrozenSchemas[o].indexOf(t);if(-1!==d)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[o][d]),null}if(this.scanned.push(e),Object.isFrozen(e))-1===o&&(o=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),l=this.scannedFrozenSchemas[o].length,this.scannedFrozenSchemas[o][l]=t,this.scannedFrozenValidationErrors[o][l]=[];else{if(!e[this.validatedSchemasKey])try{Object.defineProperty(e,this.validatedSchemasKey,{value:[],configurable:!0}),Object.defineProperty(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(h){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}c=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][c]=t,e[this.validationErrorsKey][c]=[]}}var p=this.errors.length,g=this.validateBasic(e,t,i)||this.validateNumeric(e,t,i)||this.validateString(e,t,i)||this.validateArray(e,t,i)||this.validateObject(e,t,i)||this.validateCombinations(e,t,i)||this.validateHypermedia(e,t,i)||this.validateFormat(e,t,i)||this.validateDefinedKeywords(e,t,i)||null;if(a){for(;this.scanned.length;){var m=this.scanned.pop();delete m[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(g||p!==this.errors.length)for(;n&&n.length||r&&r.length;){var v=n&&n.length?""+n.pop():null,y=r&&r.length?""+r.pop():null;g&&(g=g.prefixWith(v,y)),this.prefixErrors(p,v,y)}return null!==l?this.scannedFrozenValidationErrors[o][l]=this.errors.slice(s):null!==c&&(e[this.validationErrorsKey][c]=this.errors.slice(s)),this.handleError(g)},h.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var n=this.formatValidators[t.format].call(null,e,t);return"string"==typeof n||"number"==typeof n?this.createError(m.FORMAT_CUSTOM,{message:n}).prefixWith(null,"format"):n&&"object"==typeof n?this.createError(m.FORMAT_CUSTOM,{message:n.message||"?"},n.dataPath||null,n.schemaPath||"/format"):null},h.prototype.validateDefinedKeywords=function(e,t,n){for(var r in this.definedKeywords)if("undefined"!=typeof t[r])for(var i=this.definedKeywords[r],a=0;a<i.length;a++){var o=i[a],s=o(e,t[r],t,n);if("string"==typeof s||"number"==typeof s)return this.createError(m.KEYWORD_CUSTOM,{key:r,message:s}).prefixWith(null,"format");if(s&&"object"==typeof s){var u=s.code;if("string"==typeof u){if(!m[u])throw new Error("Undefined error code (use defineError): "+u);u=m[u]}else"number"!=typeof u&&(u=m.KEYWORD_CUSTOM);var l="object"==typeof s.message?s.message:{key:r,message:s.message||"?"},c=s.schemaPath||"/"+r.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(u,l,s.dataPath||null,c)}}return null},h.prototype.validateBasic=function(e,t,n){var r;return(r=this.validateType(e,t,n))?r.prefixWith(null,"type"):(r=this.validateEnum(e,t,n))?r.prefixWith(null,"type"):null},h.prototype.validateType=function(e,t){if(void 0===t.type)return null;var n=typeof e;null===e?n="null":Array.isArray(e)&&(n="array");var r=t.type;"object"!=typeof r&&(r=[r]);for(var i=0;i<r.length;i++){var a=r[i];if(a===n||"integer"===a&&"number"===n&&e%1===0)return null}return this.createError(m.INVALID_TYPE,{type:n,expected:r.join("/")})},h.prototype.validateEnum=function(e,t){if(void 0===t["enum"])return null;for(var n=0;n<t["enum"].length;n++){var i=t["enum"][n];if(r(e,i))return null}return this.createError(m.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e})},h.prototype.validateNumeric=function(e,t,n){return this.validateMultipleOf(e,t,n)||this.validateMinMax(e,t,n)||this.validateNaN(e,t,n)||null};var p=Math.pow(2,-51),g=1-p;h.prototype.validateMultipleOf=function(e,t){var n=t.multipleOf||t.divisibleBy;if(void 0===n)return null;if("number"==typeof e){var r=e/n%1;if(r>=p&&g>r)return this.createError(m.NUMBER_MULTIPLE_OF,{value:e,multipleOf:n})}return null},h.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(m.NUMBER_MINIMUM,{value:e,minimum:t.minimum}).prefixWith(null,"minimum");if(t.exclusiveMinimum&&e===t.minimum)return this.createError(m.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum}).prefixWith(null,"exclusiveMinimum")}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(m.NUMBER_MAXIMUM,{value:e,maximum:t.maximum}).prefixWith(null,"maximum");if(t.exclusiveMaximum&&e===t.maximum)return this.createError(m.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum}).prefixWith(null,"exclusiveMaximum")}return null},h.prototype.validateNaN=function(e){return"number"!=typeof e?null:isNaN(e)===!0||e===1/0||e===-(1/0)?this.createError(m.NUMBER_NOT_A_NUMBER,{value:e}).prefixWith(null,"type"):null},h.prototype.validateString=function(e,t,n){return this.validateStringLength(e,t,n)||this.validateStringPattern(e,t,n)||null},h.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(m.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength}).prefixWith(null,"minLength"):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(m.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength}).prefixWith(null,"maxLength"):null},h.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||void 0===t.pattern)return null;var n=new RegExp(t.pattern);return n.test(e)?null:this.createError(m.STRING_PATTERN,{pattern:t.pattern}).prefixWith(null,"pattern")},h.prototype.validateArray=function(e,t,n){return Array.isArray(e)?this.validateArrayLength(e,t,n)||this.validateArrayUniqueItems(e,t,n)||this.validateArrayItems(e,t,n)||null:null},h.prototype.validateArrayLength=function(e,t){var n;return void 0!==t.minItems&&e.length<t.minItems&&(n=this.createError(m.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems}).prefixWith(null,"minItems"),this.handleError(n))?n:void 0!==t.maxItems&&e.length>t.maxItems&&(n=this.createError(m.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems}).prefixWith(null,"maxItems"),this.handleError(n))?n:null},h.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(r(e[n],e[i])){var a=this.createError(m.ARRAY_UNIQUE,{match1:n,match2:i}).prefixWith(null,"uniqueItems");if(this.handleError(a))return a}return null},h.prototype.validateArrayItems=function(e,t,n){if(void 0===t.items)return null;var r,i;if(Array.isArray(t.items)){for(i=0;i<e.length;i++)if(i<t.items.length){if(r=this.validateAll(e[i],t.items[i],[i],["items",i],n+"/"+i))return r}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(r=this.createError(m.ARRAY_ADDITIONAL_ITEMS,{}).prefixWith(""+i,"additionalItems"),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalItems,[i],["additionalItems"],n+"/"+i))return r}else for(i=0;i<e.length;i++)if(r=this.validateAll(e[i],t.items,[i],["items"],n+"/"+i))return r;return null},h.prototype.validateObject=function(e,t,n){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,n)||this.validateObjectRequiredProperties(e,t,n)||this.validateObjectProperties(e,t,n)||this.validateObjectDependencies(e,t,n)||null},h.prototype.validateObjectMinMaxProperties=function(e,t){var n,r=Object.keys(e);return void 0!==t.minProperties&&r.length<t.minProperties&&(n=this.createError(m.OBJECT_PROPERTIES_MINIMUM,{propertyCount:r.length,minimum:t.minProperties}).prefixWith(null,"minProperties"),this.handleError(n))?n:void 0!==t.maxProperties&&r.length>t.maxProperties&&(n=this.createError(m.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:r.length,maximum:t.maxProperties}).prefixWith(null,"maxProperties"),this.handleError(n))?n:null},h.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var n=0;n<t.required.length;n++){var r=t.required[n];if(void 0===e[r]){var i=this.createError(m.OBJECT_REQUIRED,{key:r}).prefixWith(null,""+n).prefixWith(null,"required");if(this.handleError(i))return i}}return null},h.prototype.validateObjectProperties=function(e,t,n){var r;for(var i in e){var a=n+"/"+i.replace(/~/g,"~0").replace(/\//g,"~1"),o=!1;if(void 0!==t.properties&&void 0!==t.properties[i]&&(o=!0,r=this.validateAll(e[i],t.properties[i],[i],["properties",i],a)))return r;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var u=new RegExp(s);if(u.test(i)&&(o=!0,r=this.validateAll(e[i],t.patternProperties[s],[i],["patternProperties",s],a)))return r}if(o)this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[a]=!0,delete this.unknownPropertyPaths[a]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(r=this.createError(m.OBJECT_ADDITIONAL_PROPERTIES,{}).prefixWith(i,"additionalProperties"),this.handleError(r)))return r}else if(r=this.validateAll(e[i],t.additionalProperties,[i],["additionalProperties"],a))return r}else this.trackUnknownProperties&&!this.knownPropertyPaths[a]&&(this.unknownPropertyPaths[a]=!0)}return null},h.prototype.validateObjectDependencies=function(e,t,n){var r;if(void 0!==t.dependencies)for(var i in t.dependencies)if(void 0!==e[i]){var a=t.dependencies[i];if("string"==typeof a){if(void 0===e[a]&&(r=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:i,missing:a}).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(Array.isArray(a))for(var o=0;o<a.length;o++){var s=a[o];if(void 0===e[s]&&(r=this.createError(m.OBJECT_DEPENDENCY_KEY,{key:i,missing:s}).prefixWith(null,""+o).prefixWith(null,i).prefixWith(null,"dependencies"),this.handleError(r)))return r}else if(r=this.validateAll(e,a,[],["dependencies",i],n))return r}return null},h.prototype.validateCombinations=function(e,t,n){return this.validateAllOf(e,t,n)||this.validateAnyOf(e,t,n)||this.validateOneOf(e,t,n)||this.validateNot(e,t,n)||null},h.prototype.validateAllOf=function(e,t,n){if(void 0===t.allOf)return null;for(var r,i=0;i<t.allOf.length;i++){var a=t.allOf[i];if(r=this.validateAll(e,a,[],["allOf",i],n))return r}return null},h.prototype.validateAnyOf=function(e,t,n){if(void 0===t.anyOf)return null;var r,i,a=[],o=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var s=!0,u=0;u<t.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var l=t.anyOf[u],c=this.errors.length,f=this.validateAll(e,l,[],["anyOf",u],n);if(null===f&&c===this.errors.length){if(this.errors=this.errors.slice(0,o),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)i[d]=!0,delete r[d];for(var h in this.unknownPropertyPaths)i[h]||(r[h]=!0);s=!1;continue}return null}f&&a.push(f.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),s?(a=a.concat(this.errors.slice(o)),this.errors=this.errors.slice(0,o),this.createError(m.ANY_OF_MISSING,{},"","/anyOf",a)):void 0},h.prototype.validateOneOf=function(e,t,n){if(void 0===t.oneOf)return null;var r,i,a=null,o=[],s=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths);for(var u=0;u<t.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var l=t.oneOf[u],c=this.errors.length,f=this.validateAll(e,l,[],["oneOf",u],n);if(null===f&&c===this.errors.length){if(null!==a)return this.errors=this.errors.slice(0,s),this.createError(m.ONE_OF_MULTIPLE,{index1:a,index2:u},"","/oneOf");if(a=u,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)i[d]=!0,delete r[d];for(var h in this.unknownPropertyPaths)i[h]||(r[h]=!0)}}else f&&o.push(f)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===a?(o=o.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(m.ONE_OF_MISSING,{},"","/oneOf",o)):(this.errors=this.errors.slice(0,s),null)},h.prototype.validateNot=function(e,t,n){if(void 0===t.not)return null;var r,i,a=this.errors.length;this.trackUnknownProperties&&(r=this.unknownPropertyPaths,i=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var o=this.validateAll(e,t.not,null,null,n),s=this.errors.slice(a);return this.errors=this.errors.slice(0,a),this.trackUnknownProperties&&(this.unknownPropertyPaths=r,this.knownPropertyPaths=i),null===o&&0===s.length?this.createError(m.NOT_PASSED,{},"","/not"):null},h.prototype.validateHypermedia=function(e,t,r){if(!t.links)return null;for(var i,a=0;a<t.links.length;a++){var o=t.links[a];if("describedby"===o.rel){for(var s=new n(o.href),u=!0,l=0;l<s.varNames.length;l++)if(!(s.varNames[l]in e)){u=!1;break}if(u){var c=s.fillFromObject(e),f={$ref:c};if(i=this.validateAll(e,f,[],["links",a],r))return i}}}};var m={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},v={};for(var y in m)v[m[y]]=y;var b={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",
NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="ValidationError",u.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var n=0;n<this.subErrors.length;n++)this.subErrors[n].prefixWith(e,t);return this};var x={},w=c();return w.addLanguage("en-gb",b),w.tv4=w,w}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function r(e){return null===e?0/0:+e}function i(e){return!isNaN(e)}function a(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function o(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function u(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function l(){this._=Object.create(null)}function c(e){return(e+="")===go||e[0]===mo?mo+e:e}function f(e){return(e+="")[0]===mo?e.slice(1):e}function d(e){return c(e)in this._}function h(e){return(e=c(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(f(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function m(){for(var e in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(e){return e}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function x(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=vo.length;r>n;++n){var i=vo[n]+t;if(i in e)return i}}function w(){}function _(){}function k(e){function t(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new l;return t.on=function(t,i){var a,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function $(){to.event.preventDefault()}function S(){for(var e,t=to.event;e=t.sourceEvent;)t=e;return t}function M(e){for(var t=new _,n=0,r=arguments.length;++n<r;)t[arguments[n]]=k(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=to.event;i.target=e,to.event=i,t[i.type].apply(n,r)}finally{to.event=a}}},t}function T(e){return bo(e,ko),e}function C(e){return"function"==typeof e?e:function(){return xo(e,this)}}function E(e){return"function"==typeof e?e:function(){return wo(e,this)}}function A(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=to.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:o:e.local?a:i}function O(e){return e.trim().replace(/\s+/g," ")}function D(e){return new RegExp("(?:^|\\s+)"+to.requote(e)+"(?:\\s+|$)","g")}function L(e){return(e+"").trim().split(/^|\s+/)}function N(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=L(e).map(j);var i=e.length;return"function"==typeof t?r:n}function j(e){var t=D(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",O(i+" "+e))):n.setAttribute("class",O(i.replace(t," ")))}}function P(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?a:i}function R(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function I(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n?t.createElementNS(n,e):t.createElement(e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=to.ns.qualify(e)).local?n:t}function F(){var e=this.parentNode;e&&e.removeChild(this)}function U(e){return{__data__:e}}function z(e){return function(){return _o(this,e)}}function q(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function H(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,a=e[n],o=0,s=a.length;s>o;o++)(i=a[o])&&t(i,o,n);return e}function B(e){return bo(e,So),e}function Y(e){var t,n;return function(r,i,a){var o,s=e[a].update,u=s.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(o=s[t])&&++t<u;);return o}}function V(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=u(t,ro(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+to.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,s=e.indexOf("."),u=W;s>0&&(e=e.slice(0,s));var l=Mo.get(e);return l&&(e=l,u=G),s?t?i:r:t?w:a}function W(e,t){return function(n){var r=to.event;to.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{to.event=r}}}function G(e,t){var n=W(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function X(n){var r=".dragsuppress-"+ ++Co,i="click"+r,a=to.select(t(n)).on("touchmove"+r,$).on("dragstart"+r,$).on("selectstart"+r,$);if(null==To&&(To="onselectstart"in n?!1:x(n.style,"userSelect")),To){var o=e(n).style,s=o[To];o[To]="none"}return function(e){if(a.on(r,null),To&&(o[To]=s),e){var t=function(){a.on(i,null)};a.on(i,function(){$(),t()},!0),setTimeout(t,0)}}}function J(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Eo){var a=t(e);if(a.scrollX||a.scrollY){r=to.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Eo=!(o.f||o.e),r.remove()}}return Eo?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function K(){return to.event.changedTouches[0].identifier}function Z(e){return e>0?1:0>e?-1:0}function Q(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:-1>e?Do:Math.acos(e)}function te(e){return e>1?jo:-1>e?-jo:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function oe(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):we(""+e,_e,se):new se(e,t,n)}function ue(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?a+(o-a)*e/60:180>e?o:240>e?a+(o-a)*(240-e)/60:a}function i(e){return Math.round(255*r(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,a=2*n-o,new ve(i(e+120),i(e),i(e-120))}function le(e,t,n){return this instanceof le?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof le?new le(e.h,e.c,e.l):e instanceof fe?he(e.l,e.a,e.b):he((e=ke((e=to.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new le(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new fe(n,Math.cos(e*=Po)*t,Math.sin(e)*t)}function fe(e,t,n){return this instanceof fe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof fe?new fe(e.l,e.a,e.b):e instanceof le?ce(e.h,e.c,e.l):ke((e=ve(e)).r,e.g,e.b):new fe(e,t,n)}function de(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return i=pe(i)*Wo,r=pe(r)*Go,a=pe(a)*Xo,new ve(me(3.2404542*i-1.5371385*r-.4985314*a),me(-.969266*i+1.8760108*r+.041556*a),me(.0556434*i-.2040259*r+1.0572252*a))}function he(e,t,n){return e>0?new le(Math.atan2(n,t)*Ro,Math.sqrt(t*t+n*n),e):new le(0/0,0/0,e)}function pe(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function me(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ve(e,t,n){return this instanceof ve?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ve?new ve(e.r,e.g,e.b):we(""+e,ve,ue):new ve(e,t,n)}function ye(e){return new ve(e>>16,e>>8&255,255&e)}function be(e){return ye(e)+""}function xe(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){e=e.toLowerCase();var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Se(i[0]),Se(i[1]),Se(i[2]))}return(a=Zo.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o=o>>4|o,s=240&a,s=s>>4|s,u=15&a,u=u<<4|u):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),t(o,s,u))}function _e(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,u=(o+a)/2;return s?(i=.5>u?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(n>t?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=0/0,i=u>0&&1>u?0:r),new se(r,i,u)}function ke(e,t,n){e=$e(e),t=$e(t),n=$e(n);var r=ge((.4124564*e+.3575761*t+.1804375*n)/Wo),i=ge((.2126729*e+.7151522*t+.072175*n)/Go),a=ge((.0193339*e+.119192*t+.9503041*n)/Xo);return fe(116*i-16,500*(r-i),200*(i-a))}function $e(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Se(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Me(e){return"function"==typeof e?e:function(){return e}}function Te(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ce(t,n,e,r)}}function Ce(e,t,n,r){function i(){var e,t=u.status;if(!t&&Ae(u)||t>=200&&300>t||304===t){try{e=n.call(a,u)}catch(r){return void o.error.call(a,r)}o.load.call(a,e)}else o.error.call(a,u)}var a={},o=to.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(e)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=i:u.onreadystatechange=function(){u.readyState>3&&i()},u.onprogress=function(e){var t=to.event;to.event=e;try{o.progress.call(a,u)}finally{to.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(l=e,a):l},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(ro(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),u.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),u.setRequestHeader)for(var c in s)u.setRequestHeader(c,s[c]);return null!=t&&u.overrideMimeType&&u.overrideMimeType(t),null!=l&&(u.responseType=l),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(a,u),u.send(null==r?null:r),a},a.abort=function(){return u.abort(),a},to.rebind(a,o,"on"),null==r?a:a.get(Ee(r))}function Ee(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ae(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Oe(){var e=De(),t=Le()-e;t>24?(isFinite(t)&&(clearTimeout(ns),ns=setTimeout(Oe,t)),ts=0):(ts=1,is(Oe))}function De(){var e=Date.now();for(rs=Qo;rs;)e>=rs.t&&(rs.f=rs.c(e-rs.t)),rs=rs.n;return e}function Le(){for(var e,t=Qo,n=1/0;t;)t.f?t=e?e.n=t.n:Qo=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return es=e,n}function Ne(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function je(e,t){var n=Math.pow(10,3*po(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Pe(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,a=[],o=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>t&&(s=Math.max(1,t-u)),a.push(e.substring(i-=s,i+s)),!((u+=s+1)>t));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:y;return function(e){var n=os.exec(e),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",u=n[4]||"",l=n[5],c=+n[6],f=n[7],d=n[8],h=n[9],p=1,g="",m="",v=!1,y=!0;switch(d&&(d=+d.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),h){case"n":f=!0,h="g";break;case"%":p=100,m="%",h="f";break;case"p":p=100,m="%",h="r";break;case"b":case"o":case"x":case"X":"#"===u&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":v=!0,d=0;break;case"s":p=-1,h="r"}"$"===u&&(g=i[0],m=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):("e"==h||"f"==h)&&(d=Math.max(0,Math.min(20,d)))),h=ss.get(h)||Re;var b=l&&f;return function(e){var n=m;if(v&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>p){var u=to.formatPrefix(e,d);e=u.scale(e),n=u.symbol+m}else e*=p;e=h(e,d);var x,w,_=e.lastIndexOf(".");if(0>_){var k=y?e.lastIndexOf("e"):-1;0>k?(x=e,w=""):(x=e.substring(0,k),w=e.substring(k))}else x=e.substring(0,_),w=t+e.substring(_+1);!l&&f&&(x=a(x,1/0));var $=g.length+x.length+w.length+(b?0:i.length),S=c>$?new Array($=c-$+1).join(r):"";return b&&(x=a(S+x,S.length?c-w.length:1/0)),i+=g,e=x+w,("<"===o?i+e+S:">"===o?S+i+e:"^"===o?S.substring(0,$>>=1)+i+e+S.substring($):i+(b?e:S+e))+n}}}function Re(e){return e+""}function Ie(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Fe(e,t,n){function r(t){var n=e(t),r=a(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new ls(n-1)),1),n}function a(e,n){return t(e=new ls(+e),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;r>o;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;r>o;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,n){try{ls=Ie;var r=new Ie;return r._=e,o(r,t,n)}finally{ls=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var u=e.utc=Ue(e);return u.floor=u,u.round=Ue(r),u.ceil=Ue(i),u.offset=Ue(a),u.range=s,e}function Ue(e){return function(t,n){try{ls=Ie;var r=new Ie;return r._=t,e(r,n)._}finally{ls=Date}}}function ze(e){function t(e){function t(t){for(var n,i,a,o=[],s=-1,u=0;++s<r;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=fs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=C[n])&&(n=a(t,null==i?"e"===n?" ":"0":i)),o.push(n),u=s+1);return o.push(e.slice(u,s)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var a=null!=r.Z&&ls!==Ie,o=new(a?Ie:ls);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),a?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,a,o,s=0,u=t.length,l=n.length;u>s;){if(r>=l)return-1;if(i=t.charCodeAt(s++),37===i){if(o=t.charAt(s++),a=E[o in fs?t.charAt(s++):o],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.w=k.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){x.lastIndex=0;var r=x.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){M.lastIndex=0;var r=M.exec(t.slice(n));return r?(e.m=T.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){$.lastIndex=0;var r=$.exec(t.slice(n));return r?(e.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,C.c.toString(),t,r)}function u(e,t,r){return n(e,C.x.toString(),t,r)}function l(e,t,r){return n(e,C.X.toString(),t,r)}function c(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,d=e.date,h=e.time,p=e.periods,g=e.days,m=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{ls=Ie;var t=new ls;return t._=e,r(t)}finally{ls=Date}}var r=t(e);return n.parse=function(e){try{ls=Ie;var t=r.parse(e);return t&&t._}finally{ls=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=st;var b=to.map(),x=He(g),w=Be(g),_=He(m),k=Be(m),$=He(v),S=Be(v),M=He(y),T=Be(y);p.forEach(function(e,t){b.set(e.toLowerCase(),t)});var C={a:function(e){return m[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(f),d:function(e,t){return qe(e.getDate(),t,2)},e:function(e,t){return qe(e.getDate(),t,2)},H:function(e,t){return qe(e.getHours(),t,2)},I:function(e,t){return qe(e.getHours()%12||12,t,2)},j:function(e,t){return qe(1+us.dayOfYear(e),t,3)},L:function(e,t){return qe(e.getMilliseconds(),t,3)},m:function(e,t){return qe(e.getMonth()+1,t,2)},M:function(e,t){return qe(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return qe(e.getSeconds(),t,2)},U:function(e,t){return qe(us.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return qe(us.mondayOfYear(e),t,2)},x:t(d),X:t(h),y:function(e,t){return qe(e.getFullYear()%100,t,2)},Y:function(e,t){return qe(e.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},E={a:r,A:i,b:a,B:o,c:s,d:Qe,e:Qe,H:tt,I:tt,j:et,L:it,m:Ze,M:nt,p:c,S:rt,U:Ve,w:Ye,W:We,x:u,X:l,y:Xe,Y:Ge,Z:Je,"%":ot};return t}function qe(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function He(e){return new RegExp("^(?:"+e.map(to.requote).join("|")+")","i")}function Be(e){for(var t=new l,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ye(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ve(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function We(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Ge(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xe(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.y=Ke(+r[0]),n+r[0].length):-1}function Je(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Ke(e){return e+(e>68?1900:2e3)}function Ze(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Qe(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function et(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function tt(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nt(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rt(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function it(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function at(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=po(t)/60|0,i=po(t)%60;return n+qe(r,"0",2)+qe(i,"0",2)}function ot(e,t,n){hs.lastIndex=0;var r=hs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function st(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ut(){}function lt(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function ct(e,t){e&&vs.hasOwnProperty(e.type)&&vs[e.type](e,t)}function ft(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function dt(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ft(e[n],t,1);t.polygonEnd()}function ht(){function e(e,t){e*=Po,t=t*Po/2+Do/4;var n=e-r,o=n>=0?1:-1,s=o*n,u=Math.cos(t),l=Math.sin(t),c=a*l,f=i*u+c*Math.cos(s),d=c*o*Math.sin(s);bs.add(Math.atan2(d,f)),r=e,i=u,a=l}var t,n,r,i,a;xs.point=function(o,s){xs.point=e,r=(t=o)*Po,i=Math.cos(s=(n=s)*Po/2+Do/4),a=Math.sin(s)},xs.lineEnd=function(){e(t,n)}}function pt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function mt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function vt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function xt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function wt(e,t){return po(e[0]-t[0])<Ao&&po(e[1]-t[1])<Ao}function _t(e,t){e*=Po;var n=Math.cos(t*=Po);kt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function kt(e,t,n){++ws,ks+=(e-ks)/ws,$s+=(t-$s)/ws,Ss+=(n-Ss)/ws}function $t(){function e(e,i){e*=Po;var a=Math.cos(i*=Po),o=a*Math.cos(e),s=a*Math.sin(e),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=n*u-r*s)*l+(l=r*o-t*u)*l+(l=t*s-n*o)*l),t*o+n*s+r*u);_s+=l,Ms+=l*(t+(t=o)),Ts+=l*(n+(n=s)),Cs+=l*(r+(r=u)),kt(t,n,r)}var t,n,r;Ds.point=function(i,a){i*=Po;var o=Math.cos(a*=Po);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),Ds.point=e,kt(t,n,r)}}function St(){Ds.point=_t}function Mt(){function e(e,t){e*=Po;var n=Math.cos(t*=Po),o=n*Math.cos(e),s=n*Math.sin(e),u=Math.sin(t),l=i*u-a*s,c=a*o-r*u,f=r*s-i*o,d=Math.sqrt(l*l+c*c+f*f),h=r*o+i*s+a*u,p=d&&-ee(h)/d,g=Math.atan2(d,h);Es+=p*l,As+=p*c,Os+=p*f,_s+=g,Ms+=g*(r+(r=o)),Ts+=g*(i+(i=s)),Cs+=g*(a+(a=u)),kt(r,i,a)}var t,n,r,i,a;Ds.point=function(o,s){t=o,n=s,Ds.point=e,o*=Po;var u=Math.cos(s*=Po);r=u*Math.cos(o),i=u*Math.sin(o),a=Math.sin(s),kt(r,i,a)},Ds.lineEnd=function(){e(t,n),Ds.lineEnd=St,Ds.point=_t}}function Tt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Ct(){return!0}function Et(e,t,n,r,i){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(wt(n,r)){i.lineStart();for(var s=0;t>s;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var u=new Ot(n,e,null,!0),l=new Ot(n,null,u,!1);u.o=l,a.push(u),o.push(l),u=new Ot(r,e,null,!1),l=new Ot(r,null,u,!0),u.o=l,a.push(u),o.push(l)}}),o.sort(t),At(a),At(o),a.length){for(var s=0,u=n,l=o.length;l>s;++s)o[s].e=u=!u;for(var c,f,d=a[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,l=c.length;l>s;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function At(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Ot(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Dt(e,t,n,r){return function(i,a){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function s(e,t){var n=i(e,t);m.point(n[0],n[1])}function u(){y.point=s,m.lineStart()}function l(){y.point=o,m.lineEnd()}function c(e,t){g.push([e,t]);var n=i(e,t);x.point(n[0],n[1])}function f(){x.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),x.lineEnd();var e,t=x.clean(),n=b.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(w||(a.polygonStart(),w=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Lt))}var h,p,g,m=t(a),v=i.invert(r[0],r[1]),y={point:o,lineStart:u,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=d,h=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=u,y.lineEnd=l,h=to.merge(h);var e=Ft(v,p);h.length?(w||(a.polygonStart(),w=!0),Et(h,jt,e,n,a)):e&&(w||(a.polygonStart(),w=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),w&&(a.polygonEnd(),w=!1),h=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},b=Nt(),x=t(b),w=!1;return y}}function Lt(e){return e.length>1}function Nt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function jt(e,t){return((e=e.x)[0]<0?e[1]-jo-Ao:jo-e[1])-((t=t.x)[0]<0?t[1]-jo-Ao:jo-t[1])}function Pt(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?Do:-Do,u=po(a-n);po(u-Do)<Ao?(e.point(n,r=(r+o)/2>0?jo:-jo),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&u>=Do&&(po(n-i)<Ao&&(n-=i*Ao),po(a-s)<Ao&&(a-=s*Ao),r=Rt(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Rt(e,t,n,r){var i,a,o=Math.sin(e-n);return po(o)>Ao?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function It(e,t,n,r){var i;if(null==e)i=n*jo,r.point(-Do,i),r.point(0,i),r.point(Do,i),r.point(Do,0),r.point(Do,-i),r.point(0,-i),r.point(-Do,-i),r.point(-Do,0),r.point(-Do,i);else if(po(e[0]-t[0])>Ao){var a=e[0]<t[0]?Do:-Do;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Ft(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;bs.reset();for(var s=0,u=t.length;u>s;++s){var l=t[s],c=l.length;if(c)for(var f=l[0],d=f[0],h=f[1]/2+Do/4,p=Math.sin(h),g=Math.cos(h),m=1;;){m===c&&(m=0),e=l[m];var v=e[0],y=e[1]/2+Do/4,b=Math.sin(y),x=Math.cos(y),w=v-d,_=w>=0?1:-1,k=_*w,$=k>Do,S=p*b;if(bs.add(Math.atan2(S*_*Math.sin(k),g*x+S*Math.cos(k))),a+=$?w+_*Lo:w,$^d>=n^v>=n){var M=mt(pt(f),pt(e));bt(M);var T=mt(i,M);bt(T);var C=($^w>=0?-1:1)*te(T[2]);(r>C||r===C&&(M[0]||M[1]))&&(o+=$^w>=0?1:-1)}if(!m++)break;d=v,p=b,g=x,f=e}}return(-Ao>a||Ao>a&&0>bs)^1&o}function Ut(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],g=t(f,d),m=o?g?0:i(f,d):g?i(f+(0>f?Do:-Do),d):0;if(!n&&(l=u=g)&&e.lineStart(),g!==u&&(h=r(n,p),(wt(n,h)||wt(p,h))&&(p[0]+=Ao,p[1]+=Ao,g=t(p[0],p[1]))),g!==u)c=0,g?(e.lineStart(),h=r(p,n),e.point(h[0],h[1])):(h=r(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&o^g){var v;m&a||!(v=r(p,n,!0))||(c=0,o?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&wt(n,p)||e.point(p[0],p[1]),n=p,u=g,a=m},lineEnd:function(){u&&e.lineEnd(),n=null},clean:function(){return c|(l&&u)<<1}}}function r(e,t,n){var r=pt(e),i=pt(t),o=[1,0,0],s=mt(r,i),u=gt(s,s),l=s[0],c=u-l*l;if(!c)return!n&&e;var f=a*u/c,d=-a*l/c,h=mt(o,s),p=yt(o,f),g=yt(s,d);vt(p,g);var m=h,v=gt(p,m),y=gt(m,m),b=v*v-y*(gt(p,p)-1);if(!(0>b)){var x=Math.sqrt(b),w=yt(m,(-v-x)/y);if(vt(w,p),w=xt(w),!n)return w;var _,k=e[0],$=t[0],S=e[1],M=t[1];k>$&&(_=k,k=$,$=_);var T=$-k,C=po(T-Do)<Ao,E=C||Ao>T;if(!C&&S>M&&(_=S,S=M,M=_),E?C?S+M>0^w[1]<(po(w[0]-k)<Ao?S:M):S<=w[1]&&w[1]<=M:T>Do^(k<=w[0]&&w[0]<=$)){var A=yt(m,(-v+x)/y);return vt(A,p),[w,xt(A)]}}}function i(t,n){var r=o?e:Do-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var a=Math.cos(e),o=a>0,s=po(a)>Ao,u=pn(e,6*Po);return Dt(t,n,u,o?[0,-e]:[-Do,e-Do])}function zt(e,t,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,l=o.y,c=s.x,f=s.y,d=0,h=1,p=c-u,g=f-l;if(a=e-u,p||!(a>0)){if(a/=p,0>p){if(d>a)return;h>a&&(h=a)}else if(p>0){if(a>h)return;a>d&&(d=a)}if(a=n-u,p||!(0>a)){if(a/=p,0>p){if(a>h)return;a>d&&(d=a)}else if(p>0){if(d>a)return;h>a&&(h=a)}if(a=t-l,g||!(a>0)){if(a/=g,0>g){if(d>a)return;h>a&&(h=a)}else if(g>0){if(a>h)return;a>d&&(d=a)}if(a=r-l,g||!(0>a)){if(a/=g,0>g){if(a>h)return;a>d&&(d=a)}else if(g>0){if(d>a)return;h>a&&(h=a)}return d>0&&(i.a={x:u+d*p,y:l+d*g}),1>h&&(i.b={x:u+h*p,y:l+h*g}),i}}}}}}function qt(e,t,n,r){function i(r,i){return po(r[0]-e)<Ao?i>0?0:3:po(r[0]-n)<Ao?i>0?2:1:po(r[1]-t)<Ao?i>0?1:0:i>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function u(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var a,o=1,s=m[i],u=s.length,l=s[0];u>o;++o)a=s[o],l[1]<=r?a[1]>r&&Q(l,a,e)>0&&++t:a[1]<=r&&Q(l,a,e)<0&&--t,l=a;return 0!==t}function l(a,s,u,l){var c=0,f=0;if(null==a||(c=i(a,u))!==(f=i(s,u))||o(a,s)<0^u>0){do l.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+u+4)%4)!==f)}else l.point(s[0],s[1])}function c(i,a){return i>=e&&n>=i&&a>=t&&r>=a}function f(e,t){c(e,t)&&s.point(e,t)}function d(){E.point=p,m&&m.push(v=[]),$=!0,k=!1,w=_=0/0}function h(){g&&(p(y,b),x&&k&&T.rejoin(),g.push(T.buffer())),E.point=f,k&&s.lineEnd()}function p(e,t){e=Math.max(-Ns,Math.min(Ns,e)),t=Math.max(-Ns,Math.min(Ns,t));var n=c(e,t);if(m&&v.push([e,t]),$)y=e,b=t,x=n,$=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&k)s.point(e,t);else{var r={a:{x:w,y:_},b:{x:e,y:t}};C(r)?(k||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(e,t),S=!1)}w=e,_=t,k=n}var g,m,v,y,b,x,w,_,k,$,S,M=s,T=Nt(),C=zt(e,t,n,r),E={point:f,lineStart:d,lineEnd:h,polygonStart:function(){s=T,g=[],m=[],S=!0},polygonEnd:function(){s=M,g=to.merge(g);var t=u([e,r]),n=S&&t,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),l(null,null,1,s),s.lineEnd()),i&&Et(g,a,t,l,s),s.polygonEnd()),g=m=v=null}};return E}}function Ht(e){var t=0,n=Do/3,r=on(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Do/180,n=e[1]*Do/180):[t/Do*180,n/Do*180]},i}function Bt(e,t){function n(e,t){var n=Math.sqrt(a-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,te((a-(e*e+n*n)*i*i)/(2*i))]},n}function Yt(){function e(e,t){Ps+=i*e-r*t,r=e,i=t}var t,n,r,i;zs.point=function(a,o){zs.point=e,t=r=a,n=i=o},zs.lineEnd=function(){e(t,n)}}function Vt(e,t){Rs>e&&(Rs=e),e>Fs&&(Fs=e),Is>t&&(Is=t),t>Us&&(Us=t)}function Wt(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),
s.point=n}function n(e,t){o.push("L",e,",",t)}function r(){s.point=e}function i(){o.push("Z")}var a=Gt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return a=Gt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Gt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Xt(e,t){ks+=e,$s+=t,++Ss}function Jt(){function e(e,r){var i=e-t,a=r-n,o=Math.sqrt(i*i+a*a);Ms+=o*(t+e)/2,Ts+=o*(n+r)/2,Cs+=o,Xt(t=e,n=r)}var t,n;Hs.point=function(r,i){Hs.point=e,Xt(t=r,n=i)}}function Kt(){Hs.point=Xt}function Zt(){function e(e,t){var n=e-r,a=t-i,o=Math.sqrt(n*n+a*a);Ms+=o*(r+e)/2,Ts+=o*(i+t)/2,Cs+=o,o=i*e-r*t,Es+=o*(r+e),As+=o*(i+t),Os+=3*o,Xt(r=e,i=t)}var t,n,r,i;Hs.point=function(a,o){Hs.point=e,Xt(t=r=a,n=i=o)},Hs.lineEnd=function(){e(t,n)}}function Qt(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Lo)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return o=e,s},result:w};return s}function en(e){function t(e){return(s?r:n)(e)}function n(t){return rn(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=0/0,$.point=a,t.lineStart()}function a(n,r){var a=pt([n,r]),o=e(n,r);i(b,x,y,w,_,k,b=o[0],x=o[1],y=n,w=a[0],_=a[1],k=a[2],s,t),t.point(b,x)}function o(){$.point=n,t.lineEnd()}function u(){r(),$.point=l,$.lineEnd=c}function l(e,t){a(f=e,d=t),h=b,p=x,g=w,m=_,v=k,$.point=a}function c(){i(b,x,y,w,_,k,h,p,f,g,m,v,s,t),$.lineEnd=o,o()}var f,d,h,p,g,m,v,y,b,x,w,_,k,$={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),$.lineStart=u},polygonEnd:function(){t.polygonEnd(),$.lineStart=r}};return $}function i(t,n,r,s,u,l,c,f,d,h,p,g,m,v){var y=c-t,b=f-n,x=y*y+b*b;if(x>4*a&&m--){var w=s+h,_=u+p,k=l+g,$=Math.sqrt(w*w+_*_+k*k),S=Math.asin(k/=$),M=po(po(k)-1)<Ao||po(r-d)<Ao?(r+d)/2:Math.atan2(_,w),T=e(M,S),C=T[0],E=T[1],A=C-t,O=E-n,D=b*A-y*O;(D*D/x>a||po((y*A+b*O)/x-.5)>.3||o>s*h+u*p+l*g)&&(i(t,n,r,s,u,l,C,E,M,w/=$,_/=$,k,m,v),v.point(C,E),i(C,E,M,w,_,k,c,f,d,h,p,g,m,v))}}var a=.5,o=Math.cos(30*Po),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function tn(e){var t=en(function(t,n){return e([t*Ro,n*Ro])});return function(e){return sn(t(e))}}function nn(e){this.stream=e}function rn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function an(e){return on(function(){return e})()}function on(e){function t(e){return e=s(e[0]*Po,e[1]*Po),[e[0]*d+u,l-e[1]*d]}function n(e){return e=s.invert((e[0]-u)/d,(l-e[1])/d),e&&[e[0]*Ro,e[1]*Ro]}function r(){s=Tt(o=cn(v,b,x),a);var e=a(g,m);return u=h-e[0]*d,l=p+e[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),t}var a,o,s,u,l,c,f=en(function(e,t){return e=a(e,t),[e[0]*d+u,l-e[1]*d]}),d=150,h=480,p=250,g=0,m=0,v=0,b=0,x=0,w=Ls,_=y,k=null,$=null;return t.stream=function(e){return c&&(c.valid=!1),c=sn(w(o,f(_(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(k=e,Ls):Ut((k=+e)*Po),i()):k},t.clipExtent=function(e){return arguments.length?($=e,_=e?qt(e[0][0],e[0][1],e[1][0],e[1][1]):y,i()):$},t.scale=function(e){return arguments.length?(d=+e,r()):d},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(g=e[0]%360*Po,m=e[1]%360*Po,r()):[g*Ro,m*Ro]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Po,b=e[1]%360*Po,x=e.length>2?e[2]%360*Po:0,r()):[v*Ro,b*Ro,x*Ro]},to.rebind(t,f,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function sn(e){return rn(e,function(t,n){e.point(t*Po,n*Po)})}function un(e,t){return[e,t]}function ln(e,t){return[e>Do?e-Lo:-Do>e?e+Lo:e,t]}function cn(e,t,n){return e?t||n?Tt(dn(e),hn(t,n)):dn(e):t||n?hn(t,n):ln}function fn(e){return function(t,n){return t+=e,[t>Do?t-Lo:-Do>t?t+Lo:t,n]}}function dn(e){var t=fn(e);return t.invert=fn(-e),t}function hn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*r+s*i;return[Math.atan2(u*a-c*o,s*r-l*i),te(c*a+u*o)]}var r=Math.cos(e),i=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,u=Math.sin(e)*n,l=Math.sin(t),c=l*a-u*o;return[Math.atan2(u*a+l*o,s*r+c*i),te(c*r-s*i)]},n}function pn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var u=o*t;null!=i?(i=gn(n,i),a=gn(n,a),(o>0?a>i:i>a)&&(i+=o*Lo)):(i=e+o*Lo,a=e-.5*u);for(var l,c=i;o>0?c>a:a>c;c-=u)s.point((l=xt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function gn(e,t){var n=pt(t);n[0]-=e,bt(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ao)%(2*Math.PI)}function mn(e,t,n){var r=to.range(e,t-Ao,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function vn(e,t,n){var r=to.range(e,t-Ao,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function yn(e){return e.source}function bn(e){return e.target}function xn(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(e),l=i*Math.sin(e),c=o*Math.cos(n),f=o*Math.sin(n),d=2*Math.asin(Math.sqrt(ae(r-t)+i*o*ae(n-e))),h=1/Math.sin(d),p=d?function(e){var t=Math.sin(e*=d)*h,n=Math.sin(d-e)*h,r=n*u+t*c,i=n*l+t*f,o=n*a+t*s;return[Math.atan2(i,r)*Ro,Math.atan2(o,Math.sqrt(r*r+i*i))*Ro]}:function(){return[e*Ro,t*Ro]};return p.distance=d,p}function wn(){function e(e,i){var a=Math.sin(i*=Po),o=Math.cos(i),s=po((e*=Po)-t),u=Math.cos(s);Bs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*u)*s),n*a+r*o*u),t=e,n=a,r=o}var t,n,r;Ys.point=function(i,a){t=i*Po,n=Math.sin(a*=Po),r=Math.cos(a),Ys.point=e},Ys.lineEnd=function(){Ys.point=Ys.lineEnd=w}}function _n(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}function kn(e,t){function n(e,t){o>0?-jo+Ao>t&&(t=-jo+Ao):t>jo-Ao&&(t=jo-Ao);var n=o/Math.pow(i(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Do/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,r=Z(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/r,1/a))-jo]},n):Sn}function $n(e,t){function n(e,t){var n=a-t;return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/i+e;return po(i)<Ao?un:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,a-Z(i)*Math.sqrt(e*e+n*n)]},n)}function Sn(e,t){return[e,Math.log(Math.tan(Do/4+t/2))]}function Mn(e){var t,n=an(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=Do*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function Tn(e,t){return[Math.log(Math.tan(Do/4+t/2)),-e]}function Cn(e){return e[0]}function En(e){return e[1]}function An(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&Q(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function On(e,t){return e[0]-t[0]||e[1]-t[1]}function Dn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Ln(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,u=e[1],l=n[1],c=t[1]-u,f=r[1]-l,d=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+d*o,u+d*c]}function Nn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function jn(){nr(this),this.edge=this.site=this.circle=null}function Pn(e){var t=ru.pop()||new jn;return t.site=e,t}function Rn(e){Wn(e),eu.remove(e),ru.push(e),nr(e)}function In(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Rn(e);for(var u=a;u.circle&&po(n-u.circle.x)<Ao&&po(r-u.circle.cy)<Ao;)a=u.P,s.unshift(u),Rn(u),u=a;s.unshift(u),Wn(u);for(var l=o;l.circle&&po(n-l.circle.x)<Ao&&po(r-l.circle.cy)<Ao;)o=l.N,s.push(l),Rn(l),l=o;s.push(l),Wn(l);var c,f=s.length;for(c=1;f>c;++c)l=s[c],u=s[c-1],Qn(l.edge,u.site,l.site,i);u=s[0],l=s[f-1],l.edge=Kn(u.site,l.site,null,i),Vn(u),Vn(l)}function Fn(e){for(var t,n,r,i,a=e.x,o=e.y,s=eu._;s;)if(r=Un(s,o)-a,r>Ao)s=s.L;else{if(i=a-zn(s,o),!(i>Ao)){r>-Ao?(t=s.P,n=s):i>-Ao?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var u=Pn(e);if(eu.insert(t,u),t||n){if(t===n)return Wn(t),n=Pn(t.site),eu.insert(u,n),u.edge=n.edge=Kn(t.site,u.site),Vn(t),void Vn(n);if(!n)return void(u.edge=Kn(t.site,u.site));Wn(t),Wn(n);var l=t.site,c=l.x,f=l.y,d=e.x-c,h=e.y-f,p=n.site,g=p.x-c,m=p.y-f,v=2*(d*m-h*g),y=d*d+h*h,b=g*g+m*m,x={x:(m*y-h*b)/v+c,y:(d*b-g*y)/v+f};Qn(n.edge,l,p,x),u.edge=Kn(l,e,null,x),n.edge=Kn(e,p,null,x),Vn(t),Vn(n)}}function Un(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-(1/0);n=o.site;var s=n.x,u=n.y,l=u-t;if(!l)return s;var c=s-r,f=1/a-1/l,d=c/l;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function zn(e,t){var n=e.N;if(n)return Un(n,t);var r=e.site;return r.y===t?r.x:1/0}function qn(e){this.site=e,this.edges=[]}function Hn(e){for(var t,n,r,i,a,o,s,u,l,c,f=e[0][0],d=e[1][0],h=e[0][1],p=e[1][1],g=Qs,m=g.length;m--;)if(a=g[m],a&&a.prepare())for(s=a.edges,u=s.length,o=0;u>o;)c=s[o].end(),r=c.x,i=c.y,l=s[++o%u].start(),t=l.x,n=l.y,(po(r-t)>Ao||po(i-n)>Ao)&&(s.splice(o,0,new er(Zn(a.site,c,po(r-f)<Ao&&p-i>Ao?{x:f,y:po(t-f)<Ao?n:p}:po(i-p)<Ao&&d-r>Ao?{x:po(n-p)<Ao?t:d,y:p}:po(r-d)<Ao&&i-h>Ao?{x:d,y:po(t-d)<Ao?n:h}:po(i-h)<Ao&&r-f>Ao?{x:po(n-h)<Ao?t:f,y:h}:null),a.site,null)),++u)}function Bn(e,t){return t.angle-e.angle}function Yn(){nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=a.y-s,d=2*(u*f-l*c);if(!(d>=-Oo)){var h=u*u+l*l,p=c*c+f*f,g=(f*h-l*p)/d,m=(u*p-c*h)/d,f=m+s,v=iu.pop()||new Yn;v.arc=e,v.site=i,v.x=g+o,v.y=f+Math.sqrt(g*g+m*m),v.cy=f,e.circle=v;for(var y=null,b=nu._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}nu.insert(y,v),y||(tu=v)}}}}function Wn(e){var t=e.circle;t&&(t.P||(tu=t.N),nu.remove(t),iu.push(t),nr(t),e.circle=null)}function Gn(e){for(var t,n=Zs,r=zt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Xn(t,e)||!r(t)||po(t.a.x-t.b.x)<Ao&&po(t.a.y-t.b.y)<Ao)&&(t.a=t.b=null,n.splice(i,1))}function Xn(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],u=t[0][1],l=t[1][1],c=e.l,f=e.r,d=c.x,h=c.y,p=f.x,g=f.y,m=(d+p)/2,v=(h+g)/2;if(g===h){if(o>m||m>=s)return;if(d>p){if(a){if(a.y>=l)return}else a={x:m,y:u};n={x:m,y:l}}else{if(a){if(a.y<u)return}else a={x:m,y:l};n={x:m,y:u}}}else if(r=(d-p)/(g-h),i=v-r*m,-1>r||r>1)if(d>p){if(a){if(a.y>=l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(g>h){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function Jn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Kn(e,t,n,r){var i=new Jn(e,t);return Zs.push(i),n&&Qn(i,e,t,n),r&&Qn(i,t,e,r),Qs[e.i].edges.push(new er(i,e,t)),Qs[t.i].edges.push(new er(i,t,e)),i}function Zn(e,t,n){var r=new Jn(e,null);return r.a=t,r.b=n,Zs.push(r),r}function Qn(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function er(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function tr(){this._=null}function nr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function rr(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ir(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(e){for(;e.L;)e=e.L;return e}function or(e,t){var n,r,i,a=e.sort(sr).pop();for(Zs=[],Qs=new Array(e.length),eu=new tr,nu=new tr;;)if(i=tu,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))(a.x!==n||a.y!==r)&&(Qs[a.i]=new qn(a),Fn(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;In(i.arc)}t&&(Gn(t),Hn(t));var o={cells:Qs,edges:Zs};return eu=nu=Zs=Qs=null,o}function sr(e,t){return t.y-e.y||t.x-e.x}function ur(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function lr(e){return e.x}function cr(e){return e.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dr(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),u=t.nodes;u[0]&&dr(e,u[0],n,r,o,s),u[1]&&dr(e,u[1],o,r,i,s),u[2]&&dr(e,u[2],n,s,o,a),u[3]&&dr(e,u[3],o,s,i,a)}}function hr(e,t,n,r,i,a,o){var s,u=1/0;return function l(e,c,f,d,h){if(!(c>a||f>o||r>d||i>h)){if(p=e.point){var p,g=t-e.x,m=n-e.y,v=g*g+m*m;if(u>v){var y=Math.sqrt(u=v);r=t-y,i=n-y,a=t+y,o=n+y,s=p}}for(var b=e.nodes,x=.5*(c+d),w=.5*(f+h),_=t>=x,k=n>=w,$=k<<1|_,S=$+4;S>$;++$)if(e=b[3&$])switch(3&$){case 0:l(e,c,f,x,w);break;case 1:l(e,x,f,d,w);break;case 2:l(e,c,w,x,h);break;case 3:l(e,x,w,d,h)}}}(e,r,i,a,o),s}function pr(e,t){e=to.rgb(e),t=to.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,s=t.b-i;return function(e){return"#"+xe(Math.round(n+a*e))+xe(Math.round(r+o*e))+xe(Math.round(i+s*e))}}function gr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=yr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function mr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vr(e,t){var n,r,i,a=ou.lastIndex=su.lastIndex=0,o=-1,s=[],u=[];for(e+="",t+="";(n=ou.exec(e))&&(r=su.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:mr(n,r)})),a=su.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(t=u[0].x,function(e){return t(e)+""}):function(){return t}:(t=u.length,function(e){for(var n,r=0;t>r;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})}function yr(e,t){for(var n,r=to.interpolators.length;--r>=0&&!(n=to.interpolators[r](e,t)););return n}function br(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(yr(e[n],t[n]));for(;a>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;s>n;++n)i[n]=r[n](e);return i}}function xr(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function wr(e){return function(t){return 1-e(1-t)}}function _r(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function kr(e){return e*e}function $r(e){return e*e*e}function Sr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Mr(e){return function(t){return Math.pow(t,e)}}function Tr(e){return 1-Math.cos(e*jo)}function Cr(e){return Math.pow(2,10*(e-1))}function Er(e){return 1-Math.sqrt(1-e*e)}function Ar(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Lo*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Lo/t)}}function Or(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Dr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Lr(e,t){e=to.hcl(e),t=to.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return ce(n+a*e,r+o*e,i+s*e)+""}}function Nr(e,t){e=to.hsl(e),t=to.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:-180>a&&(a+=360),function(e){return ue(n+a*e,r+o*e,i+s*e)+""}}function jr(e,t){e=to.lab(e),t=to.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(e){return de(n+a*e,r+o*e,i+s*e)+""}}function Pr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Rr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Fr(t),i=Ir(t,n),a=Fr(Ur(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ro,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Ro:0}function Ir(e,t){return e[0]*t[0]+e[1]*t[1]}function Fr(e){var t=Math.sqrt(Ir(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Ur(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function zr(e,t){var n,r=[],i=[],a=to.transform(e),o=to.transform(t),s=a.translate,u=o.translate,l=a.rotate,c=o.rotate,f=a.skew,d=o.skew,h=a.scale,p=o.scale;return s[0]!=u[0]||s[1]!=u[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:mr(s[0],u[0])},{i:3,x:mr(s[1],u[1])})):r.push(u[0]||u[1]?"translate("+u+")":""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:mr(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=d?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:mr(f,d)}):d&&r.push(r.pop()+"skewX("+d+")"),h[0]!=p[0]||h[1]!=p[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:mr(h[0],p[0])},{i:n-2,x:mr(h[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),n=i.length,function(e){for(var t,a=-1;++a<n;)r[(t=i[a]).i]=t.x(e);return r.join("")}}function qr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Hr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Br(e){for(var t=e.source,n=e.target,r=Vr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Yr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Vr(e,t){if(e===t)return e;for(var n=Yr(e),r=Yr(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function Wr(e){e.fixed|=2}function Gr(e){e.fixed&=-7}function Xr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Jr(e){e.fixed&=-5}function Kr(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,u=-1;++u<s;)a=o[u],null!=a&&(Kr(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var l=t*n[e.point.index];e.charge+=e.pointCharge=l,r+=l*e.point.x,i+=l*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function Zr(e,t){return to.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ii,e}function Qr(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ei(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function ti(e){return e.children}function ni(e){return e.value}function ri(e,t){return t.value-e.value}function ii(e){return to.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ai(e){return e.x}function oi(e){return e.y}function si(e,t,n){e.y0=t,e.y=n}function ui(e){return to.range(e.length)}function li(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ci(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;a>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function fi(e){return e.reduce(di,0)}function di(e,t){return e+t[1]}function hi(e,t){return pi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function pi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function gi(e){return[to.min(e),to.max(e)]}function mi(e,t){return e.value-t.value}function vi(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function yi(e,t){e._pack_next=t,t._pack_prev=e}function bi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function xi(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),d=Math.min(e.y-e.r,d),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(l=n.length)){var n,r,i,a,o,s,u,l,c=1/0,f=-(1/0),d=1/0,h=-(1/0);if(n.forEach(wi),r=n[0],r.x=-r.r,r.y=0,t(r),l>1&&(i=n[1],i.x=i.r,i.y=0,t(i),l>2))for(a=n[2],$i(r,i,a),t(a),vi(r,a),r._pack_prev=a,vi(a,i),i=r._pack_next,o=3;l>o;o++){$i(r,i,a=n[o]);var p=0,g=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(bi(s,a)){p=1;break}if(1==p)for(u=r._pack_prev;u!==s._pack_prev&&!bi(u,a);u=u._pack_prev,m++);p?(m>g||g==m&&i.r<r.r?yi(r,i=s):yi(r=u,i),o--):(vi(r,a),i=a,t(a))}var v=(c+f)/2,y=(d+h)/2,b=0;for(o=0;l>o;o++)a=n[o],a.x-=v,a.y-=y,b=Math.max(b,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=b,n.forEach(_i)}}function wi(e){e._pack_next=e._pack_prev=e}function _i(e){delete e._pack_next,delete e._pack_prev}function ki(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,o=i.length;++a<o;)ki(i[a],t,n,r)}function $i(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o,r*=r;var u=.5+(r-o)/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+u*i+l*a,n.y=e.y+u*a-l*i}else n.x=e.x+r,n.y=e.y}function Si(e,t){return e.parent==t.parent?1:2}function Mi(e){var t=e.children;return t.length?t[0]:e.t}function Ti(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ci(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ei(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Ai(e,t,n){return e.a.parent===t.parent?e.a:n}function Oi(e){return 1+to.max(e,function(e){return e.y})}function Di(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Li(e){var t=e.children;return t&&t.length?Li(t[0]):e}function Ni(e){var t,n=e.children;return n&&(t=n.length)?Ni(n[t-1]):e}function ji(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Pi(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>a&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Ri(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Ii(e){return e.rangeExtent?e.rangeExtent():Ri(e.range())}function Fi(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function Ui(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return a>o&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function zi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:yu}function qi(e,t,n,r){var i=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)i.push(n(e[o-1],e[o])),a.push(r(t[o-1],t[o]));return function(t){var n=to.bisect(e,t,1,s)-1;return a[n](i[n](t))}}function Hi(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?qi:Fi,u=r?Hr:qr;return o=i(e,t,u,n),s=i(t,e,u,yr),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},a.range=function(e){return arguments.length?(t=e,i()):t},a.rangeRound=function(e){return a.range(e).interpolate(Pr)},a.clamp=function(e){return arguments.length?(r=e,i()):r},a.interpolate=function(e){return arguments.length?(n=e,i()):n},a.ticks=function(t){return Wi(e,t)},a.tickFormat=function(t,n){return Gi(e,t,n)},a.nice=function(t){return Yi(e,t),i()},a.copy=function(){return Hi(e,t,n,r)},i()}function Bi(e,t){return to.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Yi(e,t){return Ui(e,zi(Vi(e,t)[2]))}function Vi(e,t){null==t&&(t=10);var n=Ri(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return.15>=a?i*=10:.35>=a?i*=5:.75>=a&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Wi(e,t){return to.range.apply(to,Vi(e,t))}function Gi(e,t,n){var r=Vi(e,t);if(n){var i=os.exec(n);if(i.shift(),"s"===i[8]){var a=to.formatPrefix(Math.max(po(r[0]),po(r[1])));return i[7]||(i[7]="."+Xi(a.scale(r[2]))),i[8]="f",n=to.format(i.join("")),function(e){return n(a.scale(e))+a.symbol}}i[7]||(i[7]="."+Ji(i[8],r)),n=i.join("")}else n=",."+Xi(r[2])+"f";return to.format(n)}function Xi(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Ji(e,t){var n=Xi(t[2]);return e in bu?Math.abs(n-Xi(Math.max(po(t[0]),po(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Ki(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Ui(r.map(i),n?Math:wu);return e.domain(t),r=t.map(a),o},o.ticks=function(){var e=Ri(r),o=[],s=e[0],u=e[1],l=Math.floor(i(s)),c=Math.ceil(i(u)),f=t%1?2:t;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var d=1;f>d;d++)o.push(a(l)*d);o.push(a(l))}else for(o.push(a(l));l++<c;)for(var d=f-1;d>0;d--)o.push(a(l)*d);for(l=0;o[l]<s;l++);for(c=o.length;o[c-1]>u;c--);o=o.slice(l,c)}return o},o.tickFormat=function(e,t){if(!arguments.length)return xu;arguments.length<2?t=xu:"function"!=typeof t&&(t=to.format(t));var r,s=Math.max(.1,e/o.ticks().length),u=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/a(u(i(e)+r))<=s?t(e):""}},o.copy=function(){return Ki(e.copy(),t,n,r)},Bi(o,e)}function Zi(e,t,n){function r(t){return e(i(t))}var i=Qi(t),a=Qi(1/t);return r.invert=function(t){return a(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Wi(n,e)},r.tickFormat=function(e,t){return Gi(n,e,t)},r.nice=function(e){return r.domain(Yi(n,e))},r.exponent=function(o){return arguments.length?(i=Qi(t=o),a=Qi(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return Zi(e.copy(),t,n)},Bi(r,e)}function Qi(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ea(e,t){function n(n){return a[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):0/0))-1)%a.length]}function r(t,n){return to.range(e.length).map(function(e){return t+n*e})}var i,a,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new l;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=(u+l)/2,0):(l-u)/(e.length-1+s);return a=r(u+c*s/2,c),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var u=i[0],l=i[1],c=e.length<2?(u=l=Math.round((u+l)/2),0):(l-u)/(e.length-1+s)|0;return a=r(u+Math.round(c*s/2+(l-u-(e.length-1+s)*c)/2),c),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],d=(f-c)/(e.length-s+2*u);return a=r(c+d*u,d),l&&a.reverse(),o=d*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,u){arguments.length<2&&(s=0),arguments.length<3&&(u=s);var l=i[1]<i[0],c=i[l-0],f=i[1-l],d=Math.floor((f-c)/(e.length-s+2*u));return a=r(c+Math.round((f-c-(e.length-s)*d)/2),d),l&&a.reverse(),o=Math.round(d*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Ri(t.a[0])},n.copy=function(){return ea(e,t)},n.domain(e)}function ta(e,t){function a(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=to.quantile(e,n/r);return o}function o(e){return isNaN(e=+e)?void 0:t[to.bisect(s,e)]}var s;return o.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),a()):e},o.range=function(e){return arguments.length?(t=e,a()):t},o.quantiles=function(){return s},o.invertExtent=function(n){return n=t.indexOf(n),0>n?[0/0,0/0]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},o.copy=function(){return ta(e,t)},a()}function na(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function i(){return a=n.length/(t-e),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/a+e,[t,t+1/a]},r.copy=function(){return na(e,t,n)},i()}function ra(e,t){function n(n){return n>=n?t[to.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ra(e,t)},n}function ia(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Wi(e,t)},t.tickFormat=function(t,n){return Gi(e,t,n)},t.copy=function(){return ia(e)},t}function aa(){return 0}function oa(e){return e.innerRadius}function sa(e){return e.outerRadius}function ua(e){return e.startAngle}function la(e){return e.endAngle}function ca(e){return e&&e.padAngle}function fa(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function da(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=e[0]+u,f=e[1]+l,d=t[0]+u,h=t[1]+l,p=(c+d)/2,g=(f+h)/2,m=d-c,v=h-f,y=m*m+v*v,b=n-r,x=c*h-d*f,w=(0>v?-1:1)*Math.sqrt(b*b*y-x*x),_=(x*v-m*w)/y,k=(-x*m-v*w)/y,$=(x*v+m*w)/y,S=(-x*m+v*w)/y,M=_-p,T=k-g,C=$-p,E=S-g;return M*M+T*T>C*C+E*E&&(_=$,k=S),[[_-u,k-l],[_*n/b,k*n/b]]}function ha(e){function t(t){function o(){l.push("M",a(e(c),s))}for(var u,l=[],c=[],f=-1,d=t.length,h=Me(n),p=Me(r);++f<d;)i.call(this,u=t[f],f)?c.push([+h.call(this,u,f),+p.call(this,u,f)]):c.length&&(o(),c=[]);return c.length&&o(),l.length?l.join(""):null}var n=Cn,r=En,i=Ct,a=pa,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?a=e:(a=Tu.get(e)||pa).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function pa(e){return e.join("L")}function ga(e){return pa(e)+"Z"}function ma(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function va(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function ya(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function ba(e,t){return e.length<4?pa(e):e[1]+_a(e.slice(1,-1),ka(e,t))}function xa(e,t){return e.length<3?pa(e):e[0]+_a((e.push(e[0]),e),ka([e[e.length-2]].concat(e,[e[1]]),t))}function wa(e,t){return e.length<3?pa(e):e[0]+_a(e,ka(e,t))}function _a(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return pa(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],u=2),t.length>1){s=t[1],a=e[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<t.length;l++,u++)a=e[u],s=t[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function ka(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,u=e.length;++s<u;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function $a(e){if(e.length<3)return pa(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",Ca(Au,o),",",Ca(Au,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ea(u,o,s);return e.pop(),u.push("L",r),u.join("")}function Sa(e){if(e.length<4)return pa(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(Ca(Au,a)+","+Ca(Au,o)),
--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Ea(n,a,o);return n.join("")}function Ma(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);for(t=[Ca(Au,o),",",Ca(Au,s)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ea(t,o,s);return t.join("")}function Ta(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,u=e[n][1]-o,l=-1;++l<=n;)r=e[l],i=l/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*u);return $a(e)}function Ca(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Ea(e,t,n){e.push("C",Ca(Cu,t),",",Ca(Cu,n),",",Ca(Eu,t),",",Ca(Eu,n),",",Ca(Au,t),",",Ca(Au,n))}function Aa(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Oa(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=Aa(i,a);++t<n;)r[t]=(o+(o=Aa(i=a,a=e[t+1])))/2;return r[t]=o,r}function Da(e){for(var t,n,r,i,a=[],o=Oa(e),s=-1,u=e.length-1;++s<u;)t=Aa(e[s],e[s+1]),po(t)<Ao?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=u;)i=(e[Math.min(u,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function La(e){return e.length<3?pa(e):e[0]+_a(e,Da(e))}function Na(e){for(var t,n,r,i=-1,a=e.length;++i<a;)t=e[i],n=t[0],r=t[1]-jo,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function ja(e){function t(t){function u(){g.push("M",s(e(v),f),c,l(e(m.reverse()),f),"Z")}for(var d,h,p,g=[],m=[],v=[],y=-1,b=t.length,x=Me(n),w=Me(i),_=n===r?function(){return h}:Me(r),k=i===a?function(){return p}:Me(a);++y<b;)o.call(this,d=t[y],y)?(m.push([h=+x.call(this,d,y),p=+w.call(this,d,y)]),v.push([+_.call(this,d,y),+k.call(this,d,y)])):m.length&&(u(),m=[],v=[]);return m.length&&u(),g.length?g.join(""):null}var n=Cn,r=Cn,i=0,a=En,o=Ct,s=pa,u=s.key,l=s,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=a=e,t):a},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(u="function"==typeof e?s=e:(s=Tu.get(e)||pa).key,l=s.reverse||s,c=s.closed?"M":"L",t):u},t.tension=function(e){return arguments.length?(f=e,t):f},t}function Pa(e){return e.radius}function Ra(e){return[e.x,e.y]}function Ia(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-jo;return[n*Math.cos(r),n*Math.sin(r)]}}function Fa(){return 64}function Ua(){return"circle"}function za(e){var t=Math.sqrt(e/Do);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function qa(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?delete t[t.active]:delete this[e],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Ha(e,t,n){return bo(e,Ru),e.namespace=t,e.id=n,e}function Ba(e,t,n,r){var i=e.id,a=e.namespace;return H(e,"function"==typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function Ya(e){return null==e&&(e=""),function(){this.textContent=e}}function Va(e){return null==e?"__transition__":"__transition_"+e+"__"}function Wa(e,t,n,r,i){var a=e[n]||(e[n]={active:0,count:0}),o=a[r];if(!o){var s=i.time;o=a[r]={tween:new l,time:s,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++a.count,to.timer(function(i){function u(n){if(a.active>r)return c();var i=a[a.active];i&&(--a.count,delete a[a.active],i.event&&i.event.interrupt.call(e,e.__data__,i.index)),a.active=r,o.event&&o.event.start.call(e,e.__data__,t),o.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&g.push(r)}),d=o.ease,f=o.duration,to.timer(function(){return p.c=l(n||1)?Ct:l,1},0,s)}function l(n){if(a.active!==r)return 1;for(var i=n/f,s=d(i),u=g.length;u>0;)g[--u].call(e,s);return i>=1?(o.event&&o.event.end.call(e,e.__data__,t),c()):void 0}function c(){return--a.count?delete a[r]:delete e[n],1}var f,d,h=o.delay,p=rs,g=[];return p.t=h+s,i>=h?u(i-h):void(p.c=u)},0,s)}}function Ga(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Xa(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function Ja(e){return e.toISOString()}function Ka(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,a=to.bisect(Vu,i);return a==Vu.length?[t.year,Vi(e.map(function(e){return e/31536e6}),n)[2]]:a?t[i/Vu[a-1]<Vu[a]/i?a-1:a]:[Xu,Vi(e,n)[2]]}return r.invert=function(t){return Za(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Za)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Za(+n+1),t).length}var a=r.domain(),o=Ri(a),s=null==e?i(o,10):"number"==typeof e&&i(o,e);return s&&(e=s[0],t=s[1]),r.domain(Ui(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Za(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Za(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Ri(r.domain()),a=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],Za(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Ka(e.copy(),t,n)},Bi(r,e)}function Za(e){return new Date(e)}function Qa(e){return JSON.parse(e.responseText)}function eo(e){var t=io.createRange();return t.selectNode(io.body),t.createContextualFragment(e.responseText)}var to={version:"3.5.6"},no=[].slice,ro=function(e){return no.call(e)},io=this.document;if(io)try{ro(io.documentElement.childNodes)[0].nodeType}catch(ao){ro=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),io)try{io.createElement("DIV").style.setProperty("opacity",0,"")}catch(oo){var so=this.Element.prototype,uo=so.setAttribute,lo=so.setAttributeNS,co=this.CSSStyleDeclaration.prototype,fo=co.setProperty;so.setAttribute=function(e,t){uo.call(this,e,t+"")},so.setAttributeNS=function(e,t,n){lo.call(this,e,t,n+"")},co.setProperty=function(e,t,n){fo.call(this,e,t+"",n)}}to.ascending=n,to.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},to.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},to.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},to.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},to.sum=function(e,t){var n,r=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)i(n=+e[o])&&(r+=n);else for(;++o<a;)i(n=+t.call(e,e[o],o))&&(r+=n);return r},to.mean=function(e,t){var n,a=0,o=e.length,s=-1,u=o;if(1===arguments.length)for(;++s<o;)i(n=r(e[s]))?a+=n:--u;else for(;++s<o;)i(n=r(t.call(e,e[s],s)))?a+=n:--u;return u?a/u:void 0},to.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},to.median=function(e,t){var a,o=[],s=e.length,u=-1;if(1===arguments.length)for(;++u<s;)i(a=r(e[u]))&&o.push(a);else for(;++u<s;)i(a=r(t.call(e,e[u],u)))&&o.push(a);return o.length?to.quantile(o.sort(n),.5):void 0},to.variance=function(e,t){var n,a,o=e.length,s=0,u=0,l=-1,c=0;if(1===arguments.length)for(;++l<o;)i(n=r(e[l]))&&(a=n-s,s+=a/++c,u+=a*(n-s));else for(;++l<o;)i(n=r(t.call(e,e[l],l)))&&(a=n-s,s+=a/++c,u+=a*(n-s));return c>1?u/(c-1):void 0},to.deviation=function(){var e=to.variance.apply(this,arguments);return e?Math.sqrt(e):e};var ho=a(n);to.bisectLeft=ho.left,to.bisect=to.bisectRight=ho.right,to.bisector=function(e){return a(1===e.length?function(t,r){return n(e(t),r)}:e)},to.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,2>a&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},to.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},to.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],a=new Array(0>r?0:r);r>n;)a[n]=[t=i,i=e[++n]];return a},to.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=to.min(arguments,o),n=new Array(t);++e<t;)for(var r,i=-1,a=n[e]=new Array(r);++i<r;)a[i]=arguments[i][e];return n},to.transpose=function(e){return to.zip.apply(to,e)},to.keys=function(e){var t=[];for(var n in e)t.push(n);return t},to.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},to.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},to.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var po=Math.abs;to.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],a=s(po(n)),o=-1;if(e*=a,t*=a,n*=a,0>n)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},to.map=function(e,t){var n=new l;if(e instanceof l)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var go="__proto__",mo="\x00";u(l,{has:d,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:h,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:f(t),value:this._[t]});return e},size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,f(t),this._[t])}}),to.nest=function(){function e(t,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var u,c,f,d,h=-1,p=o.length,g=a[s++],m=new l;++h<p;)(d=m.get(u=g(c=o[h])))?d.push(c):m.set(u,[c]);return t?(c=t(),f=function(n,r){c.set(n,e(t,r,s))}):(c={},f=function(n,r){c[n]=e(t,r,s)}),m.forEach(f),c}function t(e,n){if(n>=a.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(to.map,n,0),0)},i.key=function(e){return a.push(e),i},i.sortKeys=function(e){return o[a.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},to.set=function(e){var t=new v;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},u(v,{has:d,add:function(e){return this._[c(e+="")]=!0,e},remove:h,values:p,size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,f(t))}}),to.behavior={},to.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=b(e,t,t[n]);return e};var vo=["webkit","ms","moz","Moz","o","O"];to.dispatch=function(){for(var e=new _,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=k(e);return e},_.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},to.event=null,to.requote=function(e){return e.replace(yo,"\\$&")};var yo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,bo={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},xo=function(e,t){return t.querySelector(e)},wo=function(e,t){return t.querySelectorAll(e)},_o=function(e,t){var n=e.matches||e[x(e,"matchesSelector")];return(_o=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(xo=function(e,t){return Sizzle(e,t)[0]||null},wo=Sizzle,_o=Sizzle.matchesSelector),to.selection=function(){return to.select(io.documentElement)};var ko=to.selection.prototype=[];ko.select=function(e){var t,n,r,i,a=[];e=C(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(t.push(n=e.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return T(a)},ko.selectAll=function(e){var t,n,r=[];e=E(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,u=o.length;++s<u;)(n=o[s])&&(r.push(t=ro(e.call(n,n.__data__,s,i))),t.parentNode=n);return T(r)};var $o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};to.ns={prefix:$o,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),$o.hasOwnProperty(n)?{space:$o[n],local:e}:e}},ko.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=to.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(A(t,e[t]));return this}return this.each(A(e,t))},ko.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=L(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!D(e[i]).test(t))return!1;return!0}for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},ko.style=function(e,n,r){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(n="");for(r in e)this.each(P(r,e[r],n));return this}if(2>i){var a=this.node();return t(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(P(e,n,r))},ko.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(R(t,e[t]));return this}return this.each(R(e,t))},ko.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},ko.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},ko.append=function(e){return e=I(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},ko.insert=function(e,t){return e=I(e),t=C(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},ko.remove=function(){return this.each(F)},ko.data=function(e,t){function n(e,n){var r,i,a,o=e.length,f=n.length,d=Math.min(o,f),h=new Array(f),p=new Array(f),g=new Array(o);if(t){var m,v=new l,y=new Array(o);for(r=-1;++r<o;)v.has(m=t.call(i=e[r],i.__data__,r))?g[r]=i:v.set(m,i),y[r]=m;for(r=-1;++r<f;)(i=v.get(m=t.call(n,a=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=a):p[r]=U(a),v.set(m,!0);for(r=-1;++r<o;)v.get(y[r])!==!0&&(g[r]=e[r])}else{for(r=-1;++r<d;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=U(a);for(;f>r;++r)p[r]=U(n[r]);for(;o>r;++r)g[r]=e[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=e.parentNode,s.push(p),u.push(h),c.push(g)}var r,i,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(e[a]=i.__data__);return e}var s=B([]),u=T([]),c=T([]);if("function"==typeof e)for(;++a<o;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],e);return u.enter=function(){return s},u.exit=function(){return c},u},ko.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},ko.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var a=0,o=this.length;o>a;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return T(i)},ko.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},ko.sort=function(e){e=q.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},ko.each=function(e){return H(this,function(t,n,r){e.call(t,t.__data__,n,r)})},ko.call=function(e){var t=ro(arguments);return e.apply(t[0]=this,t),this},ko.empty=function(){return!this.node()},ko.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var a=n[r];if(a)return a}return null},ko.size=function(){var e=0;return H(this,function(){++e}),e};var So=[];to.selection.enter=B,to.selection.enter.prototype=So,So.append=ko.append,So.empty=ko.empty,So.node=ko.node,So.call=ko.call,So.size=ko.size,So.select=function(e){for(var t,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(t.push(r[l]=n=e.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):t.push(null)}return T(o)},So.insert=function(e,t){return arguments.length<2&&(t=Y(this)),ko.insert.call(this,e,t)},to.select=function(t){var n;return"string"==typeof t?(n=[xo(t,io)],n.parentNode=io.documentElement):(n=[t],n.parentNode=e(t)),T([n])},to.selectAll=function(e){var t;return"string"==typeof e?(t=ro(wo(e,io)),t.parentNode=io.documentElement):(t=e,t.parentNode=null),T([t])},ko.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(V(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(V(e,t,n))};var Mo=to.map({mouseenter:"mouseover",mouseleave:"mouseout"});io&&Mo.forEach(function(e){"on"+e in io&&Mo.remove(e)});var To,Co=0;to.mouse=function(e){return J(e,S())};var Eo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;to.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=S().changedTouches),t)for(var r,i=0,a=t.length;a>i;++i)if((r=t[i]).identifier===n)return J(e,r)},to.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(e,t,n,a,o){return function(){function s(){var e,n,r=t(d,g);r&&(e=r[0]-b[0],n=r[1]-b[1],p|=e|n,b=r,h({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:e,dy:n}))}function u(){t(d,g)&&(v.on(a+m,null).on(o+m,null),y(p&&to.event.target===f),h({type:"dragend"}))}var l,c=this,f=to.event.target,d=c.parentNode,h=r.of(c,arguments),p=0,g=e(),m=".drag"+(null==g?"":"-"+g),v=to.select(n(f)).on(a+m,s).on(o+m,u),y=X(f),b=t(d,g);i?(l=i.apply(c,arguments),l=[l.x-b[0],l.y-b[1]]):l=[0,0],h({type:"dragstart"})}}var r=M(e,"drag","dragstart","dragend"),i=null,a=n(w,to.mouse,t,"mousemove","mouseup"),o=n(K,to.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},to.rebind(e,r,"on")},to.touches=function(e,t){return arguments.length<2&&(t=S().touches),t?ro(t).map(function(t){var n=J(e,t);return n.identifier=t.identifier,n}):[]};var Ao=1e-6,Oo=Ao*Ao,Do=Math.PI,Lo=2*Do,No=Lo-Ao,jo=Do/2,Po=Do/180,Ro=180/Do,Io=Math.SQRT2,Fo=2,Uo=4;to.interpolateZoom=function(e,t){function n(e){var t=e*y;if(v){var n=re(g),o=a/(Fo*d)*(n*ie(Io*t+g)-ne(g));return[r+o*l,i+o*c,a*n/re(Io*t+g)]}return[r+e*l,i+e*c,a*Math.exp(Io*t)]}var r=e[0],i=e[1],a=e[2],o=t[0],s=t[1],u=t[2],l=o-r,c=s-i,f=l*l+c*c,d=Math.sqrt(f),h=(u*u-a*a+Uo*f)/(2*a*Fo*d),p=(u*u-a*a-Uo*f)/(2*u*Fo*d),g=Math.log(Math.sqrt(h*h+1)-h),m=Math.log(Math.sqrt(p*p+1)-p),v=m-g,y=(v||Math.log(u/a))/Io;return n.duration=1e3*y,n},to.behavior.zoom=function(){function e(e){e.on(O,f).on(qo+".zoom",h).on("dblclick.zoom",p).on(N,d)}function n(e){return[(e[0]-S.x)/S.k,(e[1]-S.y)/S.k]}function r(e){return[e[0]*S.k+S.x,e[1]*S.k+S.y]}function i(e){S.k=Math.max(C[0],Math.min(C[1],e))}function a(e,t){t=r(t),S.x+=e[0]-t[0],S.y+=e[1]-t[1]}function o(t,n,r,o){t.__chart__={x:S.x,y:S.y,k:S.k},i(Math.pow(2,o)),a(m=n,r),t=to.select(t),E>0&&(t=t.transition().duration(E)),t.call(e.event)}function s(){w&&w.domain(x.range().map(function(e){return(e-S.x)/S.k}).map(x.invert)),k&&k.domain(_.range().map(function(e){return(e-S.y)/S.k}).map(_.invert))}function u(e){A++||e({type:"zoomstart"})}function l(e){s(),e({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(e){--A||(e({type:"zoomend"}),m=null)}function f(){function e(){f=1,a(to.mouse(i),h),l(s)}function r(){d.on(D,null).on(L,null),p(f&&to.event.target===o),c(s)}var i=this,o=to.event.target,s=j.of(i,arguments),f=0,d=to.select(t(i)).on(D,e).on(L,r),h=n(to.mouse(i)),p=X(i);Pu.call(i),u(s)}function d(){function e(){var e=to.touches(p);return h=S.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=n(e))}),e}function t(){var t=to.event.target;to.select(t).on(x,r).on(w,s),_.push(t);for(var n=to.event.changedTouches,i=0,a=n.length;a>i;++i)m[n[i].identifier]=null;var u=e(),l=Date.now();if(1===u.length){if(500>l-b){var c=u[0];o(p,c,m[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),$()}b=l}else if(u.length>1){var c=u[0],f=u[1],d=c[0]-f[0],h=c[1]-f[1];v=d*d+h*h}}function r(){var e,t,n,r,o=to.touches(p);Pu.call(p);for(var s=0,u=o.length;u>s;++s,r=null)if(n=o[s],r=m[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(f*h)}b=null,a(e,t),l(g)}function s(){if(to.event.touches.length){for(var t=to.event.changedTouches,n=0,r=t.length;r>n;++n)delete m[t[n].identifier];for(var i in m)return void e()}to.selectAll(_).on(y,null),k.on(O,f).on(N,d),M(),c(g)}var h,p=this,g=j.of(p,arguments),m={},v=0,y=".zoom-"+to.event.changedTouches[0].identifier,x="touchmove"+y,w="touchend"+y,_=[],k=to.select(p),M=X(p);t(),u(g),k.on(O,null).on(N,t)}function h(){var e=j.of(this,arguments);y?clearTimeout(y):(Pu.call(this),g=n(m=v||to.mouse(this)),u(e)),y=setTimeout(function(){y=null,c(e)},50),$(),i(Math.pow(2,.002*zo())*S.k),a(m,g),l(e)}function p(){var e=to.mouse(this),t=Math.log(S.k)/Math.LN2;o(this,e,n(e),to.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var g,m,v,y,b,x,w,_,k,S={x:0,y:0,k:1},T=[960,500],C=Ho,E=250,A=0,O="mousedown.zoom",D="mousemove.zoom",L="mouseup.zoom",N="touchstart.zoom",j=M(e,"zoomstart","zoom","zoomend");return qo||(qo="onwheel"in io?(zo=function(){return-to.event.deltaY*(to.event.deltaMode?120:1)},"wheel"):"onmousewheel"in io?(zo=function(){return to.event.wheelDelta},"mousewheel"):(zo=function(){return-to.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=j.of(this,arguments),t=S;Nu?to.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},u(e)}).tween("zoom:zoom",function(){var n=T[0],r=T[1],i=m?m[0]:n/2,a=m?m[1]:r/2,o=to.interpolateZoom([(i-S.x)/S.k,(a-S.y)/S.k,n/S.k],[(i-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var r=o(t),s=n/r[2];this.__chart__=S={x:i-r[0]*s,y:a-r[1]*s,k:s},l(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=S,u(e),l(e),c(e))})},e.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},s(),e):[S.x,S.y]},e.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},s(),e):S.k},e.scaleExtent=function(t){return arguments.length?(C=null==t?Ho:[+t[0],+t[1]],e):C},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(T=t&&[+t[0],+t[1]],e):T},e.duration=function(t){return arguments.length?(E=+t,e):E},e.x=function(t){return arguments.length?(w=t,x=t.copy(),S={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(k=t,_=t.copy(),S={x:0,y:0,k:1},e):k},to.rebind(e,j,"on")};var zo,qo,Ho=[0,1/0];to.color=oe,oe.prototype.toString=function(){return this.rgb()+""},to.hsl=se;var Bo=se.prototype=new oe;Bo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Bo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Bo.rgb=function(){return ue(this.h,this.s,this.l)},to.hcl=le;var Yo=le.prototype=new oe;Yo.brighter=function(e){return new le(this.h,this.c,Math.min(100,this.l+Vo*(arguments.length?e:1)))},Yo.darker=function(e){return new le(this.h,this.c,Math.max(0,this.l-Vo*(arguments.length?e:1)))},Yo.rgb=function(){return ce(this.h,this.c,this.l).rgb()},to.lab=fe;var Vo=18,Wo=.95047,Go=1,Xo=1.08883,Jo=fe.prototype=new oe;Jo.brighter=function(e){return new fe(Math.min(100,this.l+Vo*(arguments.length?e:1)),this.a,this.b)},Jo.darker=function(e){return new fe(Math.max(0,this.l-Vo*(arguments.length?e:1)),this.a,this.b)},Jo.rgb=function(){return de(this.l,this.a,this.b)},to.rgb=ve;var Ko=ve.prototype=new oe;Ko.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new ve(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ve(i,i,i)},Ko.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ve(e*this.r,e*this.g,e*this.b)},Ko.hsl=function(){return _e(this.r,this.g,this.b)},Ko.toString=function(){return"#"+xe(this.r)+xe(this.g)+xe(this.b)};var Zo=to.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Zo.forEach(function(e,t){Zo.set(e,ye(t))}),to.functor=Me,to.xhr=Te(y),to.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=Ce(e,t,null==n?r:i(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],l=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new v,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},to.csv=to.dsv(",","text/csv"),to.tsv=to.dsv("	","text/tab-separated-values");var Qo,es,ts,ns,rs,is=this[x(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};to.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,a={c:e,t:i,f:!1,n:null};es?es.n=a:Qo=a,es=a,ts||(ns=clearTimeout(ns),ts=1,is(Oe))},to.timer.flush=function(){De(),Le()},to.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var as=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(je);to.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=to.round(e,Ne(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),as[8+n/3]};var os=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ss=to.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=to.round(e,Ne(e,t))).toFixed(Math.max(0,Math.min(20,Ne(e*(1+1e-15),t))))}}),us=to.time={},ls=Date;Ie.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){cs.setUTCDate.apply(this._,arguments)},setDay:function(){cs.setUTCDay.apply(this._,arguments)},setFullYear:function(){cs.setUTCFullYear.apply(this._,arguments)},setHours:function(){cs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){cs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){cs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){cs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){cs.setUTCSeconds.apply(this._,arguments);

},setTime:function(){cs.setTime.apply(this._,arguments)}};var cs=Date.prototype;us.year=Fe(function(e){return e=us.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),us.years=us.year.range,us.years.utc=us.year.utc.range,us.day=Fe(function(e){var t=new ls(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),us.days=us.day.range,us.days.utc=us.day.utc.range,us.dayOfYear=function(e){var t=us.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=us[e]=Fe(function(e){return(e=us.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=us.year(e).getDay();return Math.floor((us.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});us[e+"s"]=n.range,us[e+"s"].utc=n.utc.range,us[e+"OfYear"]=function(e){var n=us.year(e).getDay();return Math.floor((us.dayOfYear(e)+(n+t)%7)/7)}}),us.week=us.sunday,us.weeks=us.sunday.range,us.weeks.utc=us.sunday.utc.range,us.weekOfYear=us.sundayOfYear;var fs={"-":"",_:" ",0:"0"},ds=/^\s*\d+/,hs=/^%/;to.locale=function(e){return{numberFormat:Pe(e),timeFormat:ze(e)}};var ps=to.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});to.format=ps.numberFormat,to.geo={},ut.prototype={s:0,t:0,add:function(e){lt(e,this.t,gs),lt(gs.s,this.s,this),this.s?this.t+=gs.t:this.s=gs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gs=new ut;to.geo.stream=function(e,t){e&&ms.hasOwnProperty(e.type)?ms[e.type](e,t):ct(e,t)};var ms={Feature:function(e,t){ct(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ct(n[r].geometry,t)}},vs={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ft(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ft(n[r],t,0)},Polygon:function(e,t){dt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)dt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ct(n[r],t)}};to.geo.area=function(e){return ys=0,to.geo.stream(e,xs),ys};var ys,bs=new ut,xs={sphere:function(){ys+=4*Do},point:w,lineStart:w,lineEnd:w,polygonStart:function(){bs.reset(),xs.lineStart=ht},polygonEnd:function(){var e=2*bs;ys+=0>e?4*Do+e:e,xs.lineStart=xs.lineEnd=xs.point=w}};to.geo.bounds=function(){function e(e,t){b.push(x=[c=e,d=e]),f>t&&(f=t),t>h&&(h=t)}function t(t,n){var r=pt([t*Po,n*Po]);if(v){var i=mt(v,r),a=[i[1],-i[0],0],o=mt(a,i);bt(o),o=xt(o);var u=t-p,l=u>0?1:-1,g=o[0]*Ro*l,m=po(u)>180;if(m^(g>l*p&&l*t>g)){var y=o[1]*Ro;y>h&&(h=y)}else if(g=(g+360)%360-180,m^(g>l*p&&l*t>g)){var y=-o[1]*Ro;f>y&&(f=y)}else f>n&&(f=n),n>h&&(h=n);m?p>t?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t):d>=c?(c>t&&(c=t),t>d&&(d=t)):t>p?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t)}else e(t,n);v=r,p=t}function n(){w.point=t}function r(){x[0]=c,x[1]=d,w.point=e,v=null}function i(e,n){if(v){var r=e-p;y+=po(r)>180?r+(r>0?360:-360):r}else g=e,m=n;xs.point(e,n),t(e,n)}function a(){xs.lineStart()}function o(){i(g,m),xs.lineEnd(),po(y)>Ao&&(c=-(d=180)),x[0]=c,x[1]=d,v=null}function s(e,t){return(t-=e)<0?t+360:t}function u(e,t){return e[0]-t[0]}function l(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,d,h,p,g,m,v,y,b,x,w={point:e,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=a,w.lineEnd=o,y=0,xs.polygonStart()},polygonEnd:function(){xs.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=r,0>bs?(c=-(d=180),f=-(h=90)):y>Ao?h=90:-Ao>y&&(f=-90),x[0]=c,x[1]=d}};return function(e){h=d=-(c=f=1/0),b=[],to.geo.stream(e,w);var t=b.length;if(t){b.sort(u);for(var n,r=1,i=b[0],a=[i];t>r;++r)n=b[r],l(n[0],i)||l(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,p=-(1/0),t=a.length-1,r=0,i=a[t];t>=r;i=n,++r)n=a[r],(o=s(i[1],n[0]))>p&&(p=o,c=n[0],d=i[1])}return b=x=null,c===1/0||f===1/0?[[0/0,0/0],[0/0,0/0]]:[[c,f],[d,h]]}}(),to.geo.centroid=function(e){ws=_s=ks=$s=Ss=Ms=Ts=Cs=Es=As=Os=0,to.geo.stream(e,Ds);var t=Es,n=As,r=Os,i=t*t+n*n+r*r;return Oo>i&&(t=Ms,n=Ts,r=Cs,Ao>_s&&(t=ks,n=$s,r=Ss),i=t*t+n*n+r*r,Oo>i)?[0/0,0/0]:[Math.atan2(n,t)*Ro,te(r/Math.sqrt(i))*Ro]};var ws,_s,ks,$s,Ss,Ms,Ts,Cs,Es,As,Os,Ds={sphere:w,point:_t,lineStart:$t,lineEnd:St,polygonStart:function(){Ds.lineStart=Mt},polygonEnd:function(){Ds.lineStart=$t}},Ls=Dt(Ct,Pt,It,[-Do,-Do/2]),Ns=1e9;to.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),i=a(e),i.valid=!0,i},extent:function(s){return arguments.length?(a=qt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(to.geo.conicEqualArea=function(){return Ht(Bt)}).raw=Bt,to.geo.albers=function(){return to.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},to.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(r(a,o),t)||i(a,o),t}var t,n,r,i,a=to.geo.albers(),o=to.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=to.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?o:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var l=a.scale(),c=+t[0],f=+t[1];return n=a.translate(t).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(u).point,r=o.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+Ao,f+.12*l+Ao],[c-.214*l-Ao,f+.234*l-Ao]]).stream(u).point,i=s.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+Ao,f+.166*l+Ao],[c-.115*l-Ao,f+.234*l-Ao]]).stream(u).point,e},e.scale(1070)};var js,Ps,Rs,Is,Fs,Us,zs={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Ps=0,zs.lineStart=Yt},polygonEnd:function(){zs.lineStart=zs.lineEnd=zs.point=w,js+=po(Ps/2)}},qs={point:Vt,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Hs={point:Xt,lineStart:Jt,lineEnd:Kt,polygonStart:function(){Hs.lineStart=Zt},polygonEnd:function(){Hs.point=Xt,Hs.lineStart=Jt,Hs.lineEnd=Kt}};to.geo.path=function(){function e(e){return e&&("function"==typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),to.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,r,i,a,o,s=4.5;return e.area=function(e){return js=0,to.geo.stream(e,i(zs)),js},e.centroid=function(e){return ks=$s=Ss=Ms=Ts=Cs=Es=As=Os=0,to.geo.stream(e,i(Hs)),Os?[Es/Os,As/Os]:Cs?[Ms/Cs,Ts/Cs]:Ss?[ks/Ss,$s/Ss]:[0/0,0/0]},e.bounds=function(e){return Fs=Us=-(Rs=Is=1/0),to.geo.stream(e,i(qs)),[[Rs,Is],[Fs,Us]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||tn(e):y,t()):n},e.context=function(e){return arguments.length?(a=null==(r=e)?new Wt:new Qt(e),"function"!=typeof s&&a.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(to.geo.albersUsa()).context(null)},to.geo.transform=function(e){return{stream:function(t){var n=new nn(t);for(var r in e)n[r]=e[r];return n}}},nn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},to.geo.projection=an,to.geo.projectionMutator=on,(to.geo.equirectangular=function(){return an(un)}).raw=un.invert=un,to.geo.rotation=function(e){function t(t){return t=e(t[0]*Po,t[1]*Po),t[0]*=Ro,t[1]*=Ro,t}return e=cn(e[0]%360*Po,e[1]*Po,e.length>2?e[2]*Po:0),t.invert=function(t){return t=e.invert(t[0]*Po,t[1]*Po),t[0]*=Ro,t[1]*=Ro,t},t},ln.invert=un,to.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=cn(-e[0]*Po,-e[1]*Po,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Ro,e[1]*=Ro}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=pn((t=+r)*Po,i*Po),e):t},e.precision=function(r){return arguments.length?(n=pn(t*Po,(i=+r)*Po),e):i},e.angle(90)},to.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Po,i=e[1]*Po,a=t[1]*Po,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},to.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return to.range(Math.ceil(a/m)*m,i,m).map(d).concat(to.range(Math.ceil(l/v)*v,u,v).map(h)).concat(to.range(Math.ceil(r/p)*p,n,p).filter(function(e){return po(e%m)>Ao}).map(c)).concat(to.range(Math.ceil(s/g)*g,o,g).filter(function(e){return po(e%v)>Ao}).map(f))}var n,r,i,a,o,s,u,l,c,f,d,h,p=10,g=p,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(h(u).slice(1),d(i).reverse().slice(1),h(l).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],l=+t[0][1],u=+t[1][1],a>i&&(t=a,a=i,i=t),l>u&&(t=l,l=u,u=t),e.precision(y)):[[a,l],[i,u]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(y)):[[r,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(p=+t[0],g=+t[1],e):[p,g]},e.precision=function(t){return arguments.length?(y=+t,c=mn(s,o,90),f=vn(r,n,y),d=mn(l,u,90),h=vn(a,i,y),e):y},e.majorExtent([[-180,-90+Ao],[180,90-Ao]]).minorExtent([[-180,-80-Ao],[180,80+Ao]])},to.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=yn,i=bn;return e.distance=function(){return to.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},to.geo.interpolate=function(e,t){return xn(e[0]*Po,e[1]*Po,t[0]*Po,t[1]*Po)},to.geo.length=function(e){return Bs=0,to.geo.stream(e,Ys),Bs};var Bs,Ys={sphere:w,point:w,lineStart:wn,lineEnd:w,polygonStart:w,polygonEnd:w},Vs=_n(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(to.geo.azimuthalEqualArea=function(){return an(Vs)}).raw=Vs;var Ws=_n(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(to.geo.azimuthalEquidistant=function(){return an(Ws)}).raw=Ws,(to.geo.conicConformal=function(){return Ht(kn)}).raw=kn,(to.geo.conicEquidistant=function(){return Ht($n)}).raw=$n;var Gs=_n(function(e){return 1/e},Math.atan);(to.geo.gnomonic=function(){return an(Gs)}).raw=Gs,Sn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-jo]},(to.geo.mercator=function(){return Mn(Sn)}).raw=Sn;var Xs=_n(function(){return 1},Math.asin);(to.geo.orthographic=function(){return an(Xs)}).raw=Xs;var Js=_n(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(to.geo.stereographic=function(){return an(Js)}).raw=Js,Tn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-jo]},(to.geo.transverseMercator=function(){var e=Mn(Tn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Tn,to.geom={},to.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Me(n),a=Me(r),o=e.length,s=[],u=[];for(t=0;o>t;t++)s.push([+i.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(On),t=0;o>t;t++)u.push([s[t][0],-s[t][1]]);var l=An(s),c=An(u),f=c[0]===l[0],d=c[c.length-1]===l[l.length-1],h=[];for(t=l.length-1;t>=0;--t)h.push(e[s[l[t]][2]]);for(t=+f;t<c.length-d;++t)h.push(e[s[c[t]][2]]);return h}var n=Cn,r=En;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},to.geom.polygon=function(e){return bo(e,Ks),e};var Ks=to.geom.polygon.prototype=[];Ks.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},Ks.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},Ks.clip=function(e){for(var t,n,r,i,a,o,s=Nn(e),u=-1,l=this.length-Nn(this),c=this[l-1];++u<l;){for(t=e.slice(),e.length=0,i=this[u],a=t[(r=t.length-s)-1],n=-1;++n<r;)o=t[n],Dn(o,c,i)?(Dn(a,c,i)||e.push(Ln(a,o,c,i)),e.push(o)):Dn(a,c,i)&&e.push(Ln(a,o,c,i)),a=o;s&&e.push(e[0]),c=i}return e};var Zs,Qs,eu,tu,nu,ru=[],iu=[];qn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Bn),t.length},er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},tr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ar(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(rr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ir(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ir(this,n),e=n,n=e.U),n.C=!1,r.C=!0,rr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?ar(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,rr(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ir(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,rr(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,rr(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ir(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},to.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return or(n(e),s).cells.forEach(function(n,s){var u=n.edges,l=n.site,c=t[s]=u.length?u.map(function(e){var t=e.start();return[t.x,t.y]}):l.x>=r&&l.x<=a&&l.y>=i&&l.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Ao)*Ao,y:Math.round(o(e,t)/Ao)*Ao,i:t}})}var r=Cn,i=En,a=r,o=i,s=au;return e?t(e):(t.links=function(e){return or(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return or(n(e)).cells.forEach(function(n,r){for(var i,a,o=n.site,s=n.edges.sort(Bn),u=-1,l=s.length,c=s[l-1].edge,f=c.l===o?c.r:c.l;++u<l;)i=c,a=f,c=s[u].edge,f=c.l===o?c.r:c.l,r<a.i&&r<f.i&&ur(o,a,f)<0&&t.push([e[r],e[a.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(a=Me(r=e),t):r},t.y=function(e){return arguments.length?(o=Me(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?au:e,t):s===au?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===au?null:s&&s[1]},t)};var au=[[-1e6,-1e6],[1e6,1e6]];to.geom.delaunay=function(e){return to.geom.voronoi().triangles(e)},to.geom.quadtree=function(e,t,n,r,i){function a(e){function a(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var u=e.x,c=e.y;if(null!=u)if(po(u-n)+po(c-r)<.01)l(e,t,n,r,i,a,o,s);else{var f=e.point;e.x=e.y=e.point=null,l(e,f,u,c,i,a,o,s),l(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else l(e,t,n,r,i,a,o,s)}function l(e,t,n,r,i,o,s,u){var l=.5*(i+s),c=.5*(o+u),f=n>=l,d=r>=c,h=d<<1|f;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=fr()),f?i=l:s=l,d?o=c:u=c,a(e,t,n,r,i,o,s,u)}var c,f,d,h,p,g,m,v,y,b=Me(s),x=Me(u);if(null!=t)g=t,m=n,v=r,y=i;else if(v=y=-(g=m=1/0),f=[],d=[],p=e.length,o)for(h=0;p>h;++h)c=e[h],c.x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),f.push(c.x),d.push(c.y);else for(h=0;p>h;++h){var w=+b(c=e[h],h),_=+x(c,h);g>w&&(g=w),m>_&&(m=_),w>v&&(v=w),_>y&&(y=_),f.push(w),d.push(_)}var k=v-g,$=y-m;k>$?y=m+k:v=g+$;var S=fr();if(S.add=function(e){a(S,e,+b(e,++h),+x(e,h),g,m,v,y)},S.visit=function(e){dr(e,S,g,m,v,y)},S.find=function(e){return hr(S,e[0],e[1],g,m,v,y)},h=-1,null==t){for(;++h<p;)a(S,e[h],f[h],d[h],g,m,v,y);--h}else e.forEach(S.add);return f=d=e=c=null,S}var o,s=Cn,u=En;return(o=arguments.length)?(s=lr,u=cr,3===o&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(u=e,a):u},a.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):null==t?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):null==t?null:[r-t,i-n]},a)},to.interpolateRgb=pr,to.interpolateObject=gr,to.interpolateNumber=mr,to.interpolateString=vr;var ou=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,su=new RegExp(ou.source,"g");to.interpolate=yr,to.interpolators=[function(e,t){var n=typeof t;return("string"===n?Zo.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?pr:vr:t instanceof oe?pr:Array.isArray(t)?br:"object"===n&&isNaN(t)?gr:mr)(e,t)}],to.interpolateArray=br;var uu=function(){return y},lu=to.map({linear:uu,poly:Mr,quad:function(){return kr},cubic:function(){return $r},sin:function(){return Tr},exp:function(){return Cr},circle:function(){return Er},elastic:Ar,back:Or,bounce:function(){return Dr}}),cu=to.map({"in":y,out:wr,"in-out":_r,"out-in":function(e){return _r(wr(e))}});to.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=lu.get(n)||uu,r=cu.get(r)||y,xr(r(n.apply(null,no.call(arguments,1))))},to.interpolateHcl=Lr,to.interpolateHsl=Nr,to.interpolateLab=jr,to.interpolateRound=Pr,to.transform=function(e){var t=io.createElementNS(to.ns.prefix.svg,"g");return(to.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Rr(n?n.matrix:fu)})(e)},Rr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fu={a:1,b:0,c:0,d:1,e:0,f:0};to.interpolateTransform=zr,to.layout={},to.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Br(e[n]));return t}},to.layout.chord=function(){function e(){var e,l,f,d,h,p={},g=[],m=to.range(a),v=[];for(n=[],r=[],e=0,d=-1;++d<a;){for(l=0,h=-1;++h<a;)l+=i[d][h];g.push(l),v.push(to.range(a)),e+=l}for(o&&m.sort(function(e,t){return o(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Lo-c*a)/e,l=0,d=-1;++d<a;){for(f=l,h=-1;++h<a;){var y=m[d],b=v[y][h],x=i[y][b],w=l,_=l+=x*e;p[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/e},l+=c}for(d=-1;++d<a;)for(h=d-1;++h<a;){var k=p[d+"-"+h],$=p[h+"-"+d];(k.value||$.value)&&n.push(k.value<$.value?{source:$,target:k}:{source:k,target:$})}u&&t()}function t(){n.sort(function(e,t){return u((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,a,o,s,u,l={},c=0;return l.matrix=function(e){return arguments.length?(a=(i=e)&&i.length,n=r=null,l):i},l.padding=function(e){return arguments.length?(c=e,n=r=null,l):c},l.sortGroups=function(e){return arguments.length?(o=e,n=r=null,l):o},l.sortSubgroups=function(e){return arguments.length?(s=e,n=null,l):s},l.sortChords=function(e){return arguments.length?(u=e,n&&t(),l):u},l.chords=function(){return n||e(),n},l.groups=function(){return r||e(),r},l},to.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,u=a*a+o*o;if(u>s*s/m){if(p>u){var l=t.charge/u;e.px-=a*l,e.py-=o*l}return!0}if(t.point&&u&&p>u){var l=t.pointCharge/u;e.px-=a*l,e.py-=o*l}}return!t.charge}}function t(e){e.px=to.event.x,e.py=to.event.y,s.resume()}var n,r,i,a,o,s={},u=to.dispatch("start","tick","end"),l=[1,1],c=.9,f=du,d=hu,h=-30,p=pu,g=.1,m=.64,v=[],b=[];return s.tick=function(){if((r*=.99)<.005)return u.end({type:"end",alpha:r=0}),!0;var t,n,s,f,d,p,m,y,x,w=v.length,_=b.length;for(n=0;_>n;++n)s=b[n],f=s.source,d=s.target,y=d.x-f.x,x=d.y-f.y,(p=y*y+x*x)&&(p=r*a[n]*((p=Math.sqrt(p))-i[n])/p,y*=p,x*=p,d.x-=y*(m=f.weight/(d.weight+f.weight)),d.y-=x*m,f.x+=y*(m=1-m),f.y+=x*m);if((m=r*g)&&(y=l[0]/2,x=l[1]/2,n=-1,m))for(;++n<w;)s=v[n],s.x+=(y-s.x)*m,s.y+=(x-s.y)*m;if(h)for(Kr(t=to.geom.quadtree(v),r,o),n=-1;++n<w;)(s=v[n]).fixed||t.visit(e(s));for(n=-1;++n<w;)s=v[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);u.tick({type:"tick",alpha:r})},s.nodes=function(e){return arguments.length?(v=e,s):v},s.links=function(e){return arguments.length?(b=e,s):b},s.size=function(e){return arguments.length?(l=e,s):l},s.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,s):h},s.chargeDistance=function(e){return arguments.length?(p=e*e,s):Math.sqrt(p)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(m=e*e,s):Math.sqrt(m)},s.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(u.start({type:"start",alpha:r=e}),to.timer(s.tick)),s):r},s.start=function(){function e(e,r){if(!n){for(n=new Array(u),s=0;u>s;++s)n[s]=[];for(s=0;c>s;++s){var i=b[s];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var a,o=n[t],s=-1,l=o.length;++s<l;)if(!isNaN(a=o[s][e]))return a;return Math.random()*r}var t,n,r,u=v.length,c=b.length,p=l[0],g=l[1];for(t=0;u>t;++t)(r=v[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=b[t],"number"==typeof r.source&&(r.source=v[r.source]),"number"==typeof r.target&&(r.target=v[r.target]),++r.source.weight,++r.target.weight;for(t=0;u>t;++t)r=v[t],isNaN(r.x)&&(r.x=e("x",p)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof f)for(t=0;c>t;++t)i[t]=+f.call(this,b[t],t);else for(t=0;c>t;++t)i[t]=f;if(a=[],"function"==typeof d)for(t=0;c>t;++t)a[t]=+d.call(this,b[t],t);else for(t=0;c>t;++t)a[t]=d;if(o=[],"function"==typeof h)for(t=0;u>t;++t)o[t]=+h.call(this,v[t],t);else for(t=0;u>t;++t)o[t]=h;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=to.behavior.drag().origin(y).on("dragstart.force",Wr).on("drag.force",t).on("dragend.force",Gr)),arguments.length?void this.on("mouseover.force",Xr).on("mouseout.force",Jr).call(n):n},to.rebind(s,u,"on")};var du=20,hu=1,pu=1/0;to.layout.hierarchy=function(){function e(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=n.call(e,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=l}else r&&(a.value=+r.call(e,a,a.depth)||0),delete a.children;return ei(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=ri,n=ti,r=ni;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Qr(t,function(e){e.children&&(e.value=0)}),ei(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},to.layout.partition=function(){function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=t.value?r/t.value:0;++l<o;)e(s=a[l],n,u=s.value*r,i),n+=u}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=to.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},Zr(n,r)},to.layout.pie=function(){function e(o){var s,u=o.length,l=o.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/u,+("function"==typeof a?a.apply(this,arguments):a)),h=d*(0>f?-1:1),p=(f-u*h)/to.sum(l),g=to.range(u),m=[];return null!=n&&g.sort(n===gu?function(e,t){return l[t]-l[e]}:function(e,t){return n(o[e],o[t])}),g.forEach(function(e){m[e]={data:o[e],value:s=l[e],startAngle:c,endAngle:c+=s*p+h,padAngle:d}}),m}var t=Number,n=gu,r=0,i=Lo,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var gu={};to.layout.stack=function(){function e(s,u){if(!(d=s.length))return s;var l=s.map(function(n,r){return t.call(e,n,r)}),c=l.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),f=n.call(e,c,u);l=to.permute(l,f),c=to.permute(c,f);var d,h,p,g,m=r.call(e,c,u),v=l[0].length;for(p=0;v>p;++p)for(i.call(e,l[0][p],g=m[p],c[0][p][1]),h=1;d>h;++h)i.call(e,l[h][p],g+=c[h-1][p][1],c[h][p][1]);return s}var t=y,n=ui,r=li,i=si,a=ai,o=oi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:mu.get(t)||ui,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:vu.get(t)||li,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var mu=to.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ci),a=e.map(fi),o=to.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,u=0,l=[],c=[];for(t=0;r>t;++t)n=o[t],u>s?(s+=a[n],l.push(n)):(u+=a[n],c.push(n));return c.reverse().concat(l)},reverse:function(e){return to.range(e.length).reverse()},"default":ui}),vu=to.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,u=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;a>n;++n)u[n]=(s-o[n])/2;return u},wiggle:function(e){var t,n,r,i,a,o,s,u,l,c=e.length,f=e[0],d=f.length,h=[];for(h[0]=u=l=0,n=1;d>n;++n){for(t=0,i=0;c>t;++t)i+=e[t][n][1];for(t=0,a=0,s=f[n][0]-f[n-1][0];c>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}h[n]=u-=i?a/i*s:0,l>u&&(l=u)}for(n=0;d>n;++n)h[n]-=l;return h},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;a>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;a>n;++n)s[n]=0;return s},zero:li});to.layout.histogram=function(){function e(e,a){for(var o,s,u=[],l=e.map(n,this),c=r.call(this,l,a),f=i.call(this,c,l,a),a=-1,d=l.length,h=f.length-1,p=t?1:1/d;++a<h;)o=u[a]=[],o.dx=f[a+1]-(o.x=f[a]),o.y=0;if(h>0)for(a=-1;++a<d;)s=l[a],s>=c[0]&&s<=c[1]&&(o=u[to.bisect(f,s,1,h)-1],o.y+=p,o.push(e[a]));return u}var t=!0,n=Number,r=gi,i=hi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Me(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return pi(e,t)}:Me(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},to.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],u=i[0],l=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,ei(s,function(e){e.r=+c(e.value)}),ei(s,xi),r){var f=r*(t?1:Math.max(2*s.r/u,2*s.r/l))/2;ei(s,function(e){e.r+=f}),ei(s,xi),ei(s,function(e){e.r-=f})}return ki(s,u/2,l/2,t?1:1/Math.max(2*s.r/u,2*s.r/l)),o}var t,n=to.layout.hierarchy().sort(mi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},Zr(e,n)},to.layout.tree=function(){function e(e,i){var c=o.call(this,e,i),f=c[0],d=t(f);if(ei(d,n),d.parent.m=-d.z,Qr(d,r),l)Qr(f,a);else{var h=f,p=f,g=f;Qr(f,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>g.depth&&(g=e)});var m=s(h,p)/2-h.x,v=u[0]/(p.x+s(p,h)/2+m),y=u[1]/(g.depth||1);Qr(f,function(e){e.x=(e.x+m)*v,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;s>o;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Ei(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,a=e,o=t,u=i.parent.children[0],l=i.m,c=a.m,f=o.m,d=u.m;o=Ti(o),i=Mi(i),o&&i;)u=Mi(u),a=Ti(a),a.a=e,r=o.z+f-i.z-l+s(o._,i._),r>0&&(Ci(Ai(o,e,n),e,r),l+=r,c+=r),f+=o.m,l+=i.m,d+=u.m,c+=a.m;o&&!Ti(a)&&(a.t=o,a.m+=f-c),i&&!Mi(u)&&(u.t=i,u.m+=l-d,n=e)}return n}function a(e){e.x*=u[0],e.y=e.depth*u[1]}var o=to.layout.hierarchy().sort(null).value(null),s=Si,u=[1,1],l=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(l=null==(u=t)?a:null,e):l?null:u},e.nodeSize=function(t){return arguments.length?(l=null==(u=t)?null:a,e):l?u:null},Zr(e,o)},to.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),u=s[0],l=0;ei(u,function(e){var t=e.children;t&&t.length?(e.x=Di(t),e.y=Oi(t)):(e.x=o?l+=n(e,o):0,
e.y=0,o=e)});var c=Li(u),f=Ni(u),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return ei(u,i?function(e){e.x=(e.x-u.x)*r[0],e.y=(u.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(h-d)*r[0],e.y=(1-(u.y?e.y/u.y:1))*r[1]}),s}var t=to.layout.hierarchy().sort(null).value(null),n=Si,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},Zr(e,t)},to.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var a=n.children;if(a&&a.length){var o,s,u,l=f(n),c=[],d=a.slice(),p=1/0,g="slice"===h?l.dx:"dice"===h?l.dy:"slice-dice"===h?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(e(d,l.dx*l.dy/n.value),c.area=0;(u=d.length)>0;)c.push(o=d[u-1]),c.area+=o.area,"squarify"!==h||(s=r(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,i(c,g,l,!1),g=Math.min(l.dx,l.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,l,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var a,o=f(t),s=r.slice(),u=[];for(e(s,o.dx*o.dy/t.value),u.area=0;a=s.pop();)u.push(a),u.area+=a.area,null!=a.z&&(i(u,a.z?o.dx:o.dy,o,!s.length),u.length=u.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(a>n&&(a=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*p/r,r/(t*a*p)):1/0}function i(e,t,n,r){var i,a=-1,o=e.length,s=n.x,l=n.y,c=t?u(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=e[a],i.x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=e[a],i.x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(n.y+n.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function a(r){var i=o||s(r),a=i[0];return a.x=0,a.y=0,a.dx=l[0],a.dy=l[1],o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),d&&(o=i),i}var o,s=to.layout.hierarchy(),u=Math.round,l=[1,1],c=null,f=ji,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(l=e,a):l},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?ji(t):Pi(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Pi(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?ji:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(u=e?Math.round:Number,a):u!=Number},a.sticky=function(e){return arguments.length?(d=e,o=null,a):d},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(h=e+"",a):h},Zr(a,s)},to.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=to.random.normal.apply(to,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=to.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},to.scale={};var yu={floor:y,ceil:y};to.scale.linear=function(){return Hi([0,1],[0,1],yr,!1)};var bu={s:1,g:1,p:1,r:1,e:1};to.scale.log=function(){return Ki(to.scale.linear().domain([0,1]),10,!0,[1,10])};var xu=to.format(".0e"),wu={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};to.scale.pow=function(){return Zi(to.scale.linear(),1,[0,1])},to.scale.sqrt=function(){return to.scale.pow().exponent(.5)},to.scale.ordinal=function(){return ea([],{t:"range",a:[[]]})},to.scale.category10=function(){return to.scale.ordinal().range(_u)},to.scale.category20=function(){return to.scale.ordinal().range(ku)},to.scale.category20b=function(){return to.scale.ordinal().range($u)},to.scale.category20c=function(){return to.scale.ordinal().range(Su)};var _u=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(be),ku=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(be),$u=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(be),Su=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(be);to.scale.quantile=function(){return ta([],[])},to.scale.quantize=function(){return na(0,1,[0,1])},to.scale.threshold=function(){return ra([.5],[0,1])},to.scale.identity=function(){return ia([0,1])},to.svg={},to.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-jo,f=s.apply(this,arguments)-jo,d=Math.abs(f-c),h=c>f?0:1;if(e>l&&(p=l,l=e,e=p),d>=No)return t(l,h)+(e?t(e,1-h):"")+"Z";var p,g,m,v,y,b,x,w,_,k,$,S,M=0,T=0,C=[];if((v=(+u.apply(this,arguments)||0)/2)&&(m=a===Mu?Math.sqrt(e*e+l*l):+a.apply(this,arguments),h||(T*=-1),l&&(T=te(m/l*Math.sin(v))),e&&(M=te(m/e*Math.sin(v)))),l){y=l*Math.cos(c+T),b=l*Math.sin(c+T),x=l*Math.cos(f-T),w=l*Math.sin(f-T);var E=Math.abs(f-c-2*T)<=Do?0:1;if(T&&fa(y,b,x,w)===h^E){var A=(c+f)/2;y=l*Math.cos(A),b=l*Math.sin(A),x=w=null}}else y=b=0;if(e){_=e*Math.cos(f-M),k=e*Math.sin(f-M),$=e*Math.cos(c+M),S=e*Math.sin(c+M);var O=Math.abs(c-f+2*M)<=Do?0:1;if(M&&fa(_,k,$,S)===1-h^O){var D=(c+f)/2;_=e*Math.cos(D),k=e*Math.sin(D),$=S=null}}else _=k=0;if((p=Math.min(Math.abs(l-e)/2,+i.apply(this,arguments)))>.001){g=l>e^h?0:1;var L=null==$?[_,k]:null==x?[y,b]:Ln([y,b],[$,S],[x,w],[_,k]),N=y-L[0],j=b-L[1],P=x-L[0],R=w-L[1],I=1/Math.sin(Math.acos((N*P+j*R)/(Math.sqrt(N*N+j*j)*Math.sqrt(P*P+R*R)))/2),F=Math.sqrt(L[0]*L[0]+L[1]*L[1]);if(null!=x){var U=Math.min(p,(l-F)/(I+1)),z=da(null==$?[_,k]:[$,S],[y,b],l,U,h),q=da([x,w],[_,k],l,U,h);p===U?C.push("M",z[0],"A",U,",",U," 0 0,",g," ",z[1],"A",l,",",l," 0 ",1-h^fa(z[1][0],z[1][1],q[1][0],q[1][1]),",",h," ",q[1],"A",U,",",U," 0 0,",g," ",q[0]):C.push("M",z[0],"A",U,",",U," 0 1,",g," ",q[0])}else C.push("M",y,",",b);if(null!=$){var H=Math.min(p,(e-F)/(I-1)),B=da([y,b],[$,S],e,-H,h),Y=da([_,k],null==x?[y,b]:[x,w],e,-H,h);p===H?C.push("L",Y[0],"A",H,",",H," 0 0,",g," ",Y[1],"A",e,",",e," 0 ",h^fa(Y[1][0],Y[1][1],B[1][0],B[1][1]),",",1-h," ",B[1],"A",H,",",H," 0 0,",g," ",B[0]):C.push("L",Y[0],"A",H,",",H," 0 0,",g," ",B[0])}else C.push("L",_,",",k)}else C.push("M",y,",",b),null!=x&&C.push("A",l,",",l," 0 ",E,",",h," ",x,",",w),C.push("L",_,",",k),null!=$&&C.push("A",e,",",e," 0 ",O,",",1-h," ",$,",",S);return C.push("Z"),C.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=oa,r=sa,i=aa,a=Mu,o=ua,s=la,u=ca;return e.innerRadius=function(t){return arguments.length?(n=Me(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Me(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Me(t),e):i},e.padRadius=function(t){return arguments.length?(a=t==Mu?Mu:Me(t),e):a},e.startAngle=function(t){return arguments.length?(o=Me(t),e):o},e.endAngle=function(t){return arguments.length?(s=Me(t),e):s},e.padAngle=function(t){return arguments.length?(u=Me(t),e):u},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-jo;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Mu="auto";to.svg.line=function(){return ha(y)};var Tu=to.map({linear:pa,"linear-closed":ga,step:ma,"step-before":va,"step-after":ya,basis:$a,"basis-open":Sa,"basis-closed":Ma,bundle:Ta,cardinal:wa,"cardinal-open":ba,"cardinal-closed":xa,monotone:La});Tu.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Cu=[0,2/3,1/3,0],Eu=[0,1/3,2/3,0],Au=[0,1/6,2/3,1/6];to.svg.line.radial=function(){var e=ha(Na);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},va.reverse=ya,ya.reverse=va,to.svg.area=function(){return ja(y)},to.svg.area.radial=function(){var e=ja(Na);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},to.svg.chord=function(){function e(e,s){var u=t(this,a,e,s),l=t(this,o,e,s);return"M"+u.p0+r(u.r,u.p1,u.a1-u.a0)+(n(u,l)?i(u.r,u.p1,u.r,u.p0):i(u.r,u.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,u.r,u.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),a=s.call(e,i,r),o=u.call(e,i,r)-jo,c=l.call(e,i,r)-jo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Do)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var a=yn,o=bn,s=Pa,u=ua,l=la;return e.radius=function(t){return arguments.length?(s=Me(t),e):s},e.source=function(t){return arguments.length?(a=Me(t),e):a},e.target=function(t){return arguments.length?(o=Me(t),e):o},e.startAngle=function(t){return arguments.length?(u=Me(t),e):u},e.endAngle=function(t){return arguments.length?(l=Me(t),e):l},e},to.svg.diagonal=function(){function e(e,i){var a=t.call(this,e,i),o=n.call(this,e,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return u=u.map(r),"M"+u[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var t=yn,n=bn,r=Ra;return e.source=function(n){return arguments.length?(t=Me(n),e):t},e.target=function(t){return arguments.length?(n=Me(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},to.svg.diagonal.radial=function(){var e=to.svg.diagonal(),t=Ra,n=e.projection;return e.projection=function(e){return arguments.length?n(Ia(t=e)):t},e},to.svg.symbol=function(){function e(e,r){return(Ou.get(t.call(this,e,r))||za)(n.call(this,e,r))}var t=Ua,n=Fa;return e.type=function(n){return arguments.length?(t=Me(n),e):t},e.size=function(t){return arguments.length?(n=Me(t),e):n},e};var Ou=to.map({circle:za,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Lu)),n=t*Lu;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Du),n=t*Du/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Du),n=t*Du/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});to.svg.symbolTypes=Ou.keys();var Du=Math.sqrt(3),Lu=Math.tan(30*Po);ko.transition=function(e){for(var t,n,r=Nu||++Iu,i=Va(e),a=[],o=ju||{time:Date.now(),ease:Sr,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&Wa(n,c,i,r,o),t.push(n)}return Ha(a,i,r)},ko.interrupt=function(e){return this.each(null==e?Pu:qa(Va(e)))};var Nu,ju,Pu=qa(Va()),Ru=[],Iu=0;Ru.call=ko.call,Ru.empty=ko.empty,Ru.node=ko.node,Ru.size=ko.size,to.transition=function(e,t){return e&&e.transition?Nu?e.transition(t):e:to.selection().transition(e)},to.transition.prototype=Ru,Ru.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=C(e);for(var s=-1,u=this.length;++s<u;){o.push(t=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Wa(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return Ha(o,a,i)},Ru.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,u=[];e=E(e);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],d=-1,h=f.length;++d<h;)if(r=f[d]){a=r[s][o],n=e.call(r,r.__data__,d,l),u.push(t=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Wa(i,p,s,o,a),t.push(i)}return Ha(u,s,o)},Ru.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var a=0,o=this.length;o>a;a++){i.push(t=[]);for(var n=this[a],s=0,u=n.length;u>s;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return Ha(i,this.namespace,this.id)},Ru.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):H(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Ru.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?zr:yr,s=to.ns.qualify(e);return Ba(this,"attr."+e,t,s.local?a:i)},Ru.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=to.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Ru.style=function(e,n,r){function i(){this.style.removeProperty(e)}function a(n){return null==n?i:(n+="",function(){var i,a=t(this).getComputedStyle(this,null).getPropertyValue(e);return a!==n&&(i=yr(a,n),function(t){this.style.setProperty(e,i(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Ba(this,"style."+e,n,a)},Ru.styleTween=function(e,n,r){function i(i,a){var o=n.call(this,i,a,t(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Ru.text=function(e){return Ba(this,"text",e,Ya)},Ru.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ru.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=to.ease.apply(to,arguments)),H(this,function(r){r[n][t].ease=e}))},Ru.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:H(this,"function"==typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},Ru.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:H(this,"function"==typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Ru.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=ju,a=Nu;try{Nu=n,H(this,function(t,i,a){ju=t[r][n],e.call(t,t.__data__,i,a)})}finally{ju=i,Nu=a}}else H(this,function(i){var a=i[r][n];(a.event||(a.event=to.dispatch("start","end","interrupt"))).on(e,t)});return this},Ru.transition=function(){for(var e,t,n,r,i=this.id,a=++Iu,o=this.namespace,s=[],u=0,l=this.length;l>u;u++){s.push(e=[]);for(var t=this[u],c=0,f=t.length;f>c;c++)(n=t[c])&&(r=n[o][i],Wa(n,c,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Ha(s,o,a)},to.svg.axis=function(){function e(e){e.each(function(){var e,l=to.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==u?f.ticks?f.ticks.apply(f,s):f.domain():u,h=null==t?f.tickFormat?f.tickFormat.apply(f,s):y:t,p=l.selectAll(".tick").data(d,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ao),m=to.transition(p.exit()).style("opacity",Ao).remove(),v=to.transition(p.order()).style("opacity",1),b=Math.max(i,0)+o,x=Ii(f),w=l.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),to.transition(w));g.append("line"),g.append("text");var k,$,S,M,T=g.select("line"),C=v.select("line"),E=p.select("text").text(h),A=g.select("text"),O=v.select("text"),D="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=Ga,k="x",S="y",$="x2",M="y2",E.attr("dy",0>D?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+D*a+"V0H"+x[1]+"V"+D*a)):(e=Xa,k="y",S="x",$="y2",M="x2",E.attr("dy",".32em").style("text-anchor",0>D?"end":"start"),_.attr("d","M"+D*a+","+x[0]+"H0V"+x[1]+"H"+D*a)),T.attr(M,D*i),A.attr(S,D*b),C.attr($,0).attr(M,D*i),O.attr(k,0).attr(S,D*b),f.rangeBand){var L=f,N=L.rangeBand()/2;c=f=function(e){return L(e)+N}}else c.rangeBand?c=f:m.call(e,f,c);g.call(e,c,f),v.call(e,f,f)})}var t,n=to.scale.linear(),r=Fu,i=6,a=6,o=3,s=[10],u=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Uu?t+"":Fu,e):r},e.ticks=function(){return arguments.length?(s=arguments,e):s},e.tickValues=function(t){return arguments.length?(u=t,e):u},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,a=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Fu="bottom",Uu={top:1,right:1,bottom:1,left:1};to.svg.brush=function(){function e(t){t.each(function(){var t=to.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return zu[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var u,f=to.transition(t),d=to.transition(o);l&&(u=Ii(l),d.attr("x",u[0]).attr("width",u[1]-u[0]),r(f)),c&&(u=Ii(c),d.attr("y",u[0]).attr("height",u[1]-u[0]),i(f)),n(f)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",f[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function a(){function a(){32==to.event.keyCode&&(E||(b=null,O[0]-=f[1],O[1]-=d[1],E=2),$())}function g(){32==to.event.keyCode&&2==E&&(O[0]+=f[1],O[1]+=d[1],E=0,$())}function m(){var e=to.mouse(w),t=!1;x&&(e[0]+=x[0],e[1]+=x[1]),E||(to.event.altKey?(b||(b=[(f[0]+f[1])/2,(d[0]+d[1])/2]),O[0]=f[+(e[0]<b[0])],O[1]=d[+(e[1]<b[1])]):b=null),T&&v(e,l,0)&&(r(S),t=!0),C&&v(e,c,1)&&(i(S),t=!0),t&&(n(S),k({type:"brush",mode:E?"move":"resize"}))}function v(e,t,n){var r,i,a=Ii(t),u=a[0],l=a[1],c=O[n],g=n?d:f,m=g[1]-g[0];return E&&(u-=c,l-=m+c),r=(n?p:h)?Math.max(u,Math.min(l,e[n])):e[n],E?i=(r+=c)+m:(b&&(c=Math.max(u,Math.min(l,2*b[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:o=null,g[0]=r,g[1]=i,!0):void 0}function y(){m(),S.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),to.select("body").style("cursor",null),D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),A(),k({type:"brushend"})}var b,x,w=this,_=to.select(to.event.target),k=u.of(w,arguments),S=to.select(w),M=_.datum(),T=!/^(n|s)$/.test(M)&&l,C=!/^(e|w)$/.test(M)&&c,E=_.classed("extent"),A=X(w),O=to.mouse(w),D=to.select(t(w)).on("keydown.brush",a).on("keyup.brush",g);if(to.event.changedTouches?D.on("touchmove.brush",m).on("touchend.brush",y):D.on("mousemove.brush",m).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),E)O[0]=f[0]-O[0],O[1]=d[0]-O[1];else if(M){var L=+/w$/.test(M),N=+/^n/.test(M);x=[f[1-L]-O[0],d[1-N]-O[1]],O[0]=f[L],O[1]=d[N]}else to.event.altKey&&(b=O.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),to.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),m()}var o,s,u=M(e,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],d=[0,0],h=!0,p=!0,g=qu[0];return e.event=function(e){e.each(function(){var e=u.of(this,arguments),t={x:f,y:d,i:o,j:s},n=this.__chart__||t;this.__chart__=t,Nu?to.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,f=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=br(f,t.x),r=br(d,t.y);return o=s=null,function(i){f=t.x=n(i),d=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(l=t,g=qu[!l<<1|!c],e):l},e.y=function(t){return arguments.length?(c=t,g=qu[!l<<1|!c],e):c},e.clamp=function(t){return arguments.length?(l&&c?(h=!!t[0],p=!!t[1]):l?h=!!t:c&&(p=!!t),e):l&&c?[h,p]:l?h:c?p:null},e.extent=function(t){var n,r,i,a,u;return arguments.length?(l&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),o=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(u=n,n=r,r=u),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=t[0],a=t[1],l&&(i=i[1],a=a[1]),s=[i,a],c.invert&&(i=c(i),a=c(a)),i>a&&(u=i,i=a,a=u),(i!=d[0]||a!=d[1])&&(d=[i,a])),e):(l&&(o?(n=o[0],r=o[1]):(n=f[0],r=f[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(u=n,n=r,r=u))),c&&(s?(i=s[0],a=s[1]):(i=d[0],a=d[1],c.invert&&(i=c.invert(i),a=c.invert(a)),i>a&&(u=i,i=a,a=u))),l&&c?[[n,i],[r,a]]:l?[n,r]:c&&[i,a])},e.clear=function(){return e.empty()||(f=[0,0],d=[0,0],o=s=null),e},e.empty=function(){return!!l&&f[0]==f[1]||!!c&&d[0]==d[1]},to.rebind(e,u,"on")};var zu={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},qu=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Hu=us.format=ps.timeFormat,Bu=Hu.utc,Yu=Bu("%Y-%m-%dT%H:%M:%S.%LZ");Hu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ja:Yu,Ja.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ja.toString=Yu.toString,us.second=Fe(function(e){return new ls(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),us.seconds=us.second.range,us.seconds.utc=us.second.utc.range,us.minute=Fe(function(e){return new ls(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),us.minutes=us.minute.range,us.minutes.utc=us.minute.utc.range,us.hour=Fe(function(e){var t=e.getTimezoneOffset()/60;return new ls(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),us.hours=us.hour.range,us.hours.utc=us.hour.utc.range,us.month=Fe(function(e){return e=us.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),us.months=us.month.range,us.months.utc=us.month.utc.range;var Vu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wu=[[us.second,1],[us.second,5],[us.second,15],[us.second,30],[us.minute,1],[us.minute,5],[us.minute,15],[us.minute,30],[us.hour,1],[us.hour,3],[us.hour,6],[us.hour,12],[us.day,1],[us.day,2],[us.week,1],[us.month,1],[us.month,3],[us.year,1]],Gu=Hu.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Ct]]),Xu={range:function(e,t,n){return to.range(Math.ceil(e/n)*n,+t,n).map(Za)},floor:y,ceil:y};Wu.year=us.year,us.scale=function(){return Ka(to.scale.linear(),Wu,Gu)};var Ju=Wu.map(function(e){return[e[0].utc,e[1]]}),Ku=Bu.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Ct]]);Ju.year=us.year.utc,us.scale.utc=function(){return Ka(to.scale.linear(),Ju,Ku)},to.text=Te(function(e){return e.responseText}),to.json=function(e,t){return Ce(e,"application/json",Qa,t)},to.html=function(e,t){return Ce(e,"text/html",eo,t)},to.xml=Te(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define(to):"object"==typeof module&&module.exports&&(module.exports=to),this.d3=to}(),/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
 * Copyright (c) 2009-2014 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.2.0
 */
function(e,t){"use strict";var n,r,i,a=e,o=a.document,s=a.navigator,u=a.setTimeout,l=a.clearTimeout,c=a.setInterval,f=a.clearInterval,d=a.getComputedStyle,h=a.encodeURIComponent,p=a.ActiveXObject,g=a.Error,m=a.Number.parseInt||a.parseInt,v=a.Number.parseFloat||a.parseFloat,y=a.Number.isNaN||a.isNaN,b=a.Date.now,x=a.Object.keys,w=a.Object.defineProperty,_=a.Object.prototype.hasOwnProperty,k=a.Array.prototype.slice,$=function(){var e=function(e){return e};if("function"==typeof a.wrap&&"function"==typeof a.unwrap)try{var t=o.createElement("div"),n=a.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=a.unwrap)}catch(r){}return e}(),S=function(e){return k.call(e,0)},M=function(){var e,n,r,i,a,o,s=S(arguments),u=s[0]||{};for(e=1,n=s.length;n>e;e++)if(null!=(r=s[e]))for(i in r)_.call(r,i)&&(a=u[i],o=r[i],u!==o&&o!==t&&(u[i]=o));return u},T=function(e){var t,n,r,i;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;r>n;n++)_.call(e,n)&&(t[n]=T(e[n]));else{t={};for(i in e)_.call(e,i)&&(t[i]=T(e[i]))}return t},C=function(e,t){for(var n={},r=0,i=t.length;i>r;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},E=function(e,t){var n={};for(var r in e)-1===t.indexOf(r)&&(n[r]=e[r]);return n},A=function(e){if(e)for(var t in e)_.call(e,t)&&delete e[t];return e},O=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},D=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},L=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},N=function(){var e,t;try{throw new g}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||L(t.stack)),e},j=function(){var e,n,r;if(o.currentScript&&(e=o.currentScript.src))return e;if(n=o.getElementsByTagName("script"),1===n.length)return n[0].src||t;if("readyState"in n[0])for(r=n.length;r--;)if("interactive"===n[r].readyState&&(e=n[r].src))return e;return"loading"===o.readyState&&(e=n[n.length-1].src)?e:(e=N())?e:t},P=function(){var e,n,r,i=o.getElementsByTagName("script");for(e=i.length;e--;){if(!(r=i[e].src)){n=null;break}if(r=D(r),null==n)n=r;else if(n!==r){n=null;break}}return n||t},R=function(){var e=D(j())||P()||"";return e+"ZeroClipboard.swf"},I=function(){return null==e.opener&&(!!e.top&&e!=e.top||!!e.parent&&e!=e.parent)}(),F={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},U="11.0.0",z={},q={},H=null,B=0,Y=0,V={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},W=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],G=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],X=new RegExp("^flash-("+G.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),J=new RegExp("^flash-("+G.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),K={swfPath:R(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},Z=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(_.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))K[t]=e[t];else if(null==F.bridge)if("containerId"===t||"swfObjectId"===t){if(!he(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");K[t]=e[t]}else K[t]=e[t];{if("string"!=typeof e||!e)return T(K);if(_.call(K,e))return K[e]}},Q=function(){return Ye(),{browser:C(s,["userAgent","platform","appName"]),flash:E(F,["bridge"]),zeroclipboard:{version:We.version,config:We.config()}}},ee=function(){return!!(F.disabled||F.outdated||F.sandboxed||F.unavailable||F.degraded||F.deactivated)},te=function(e,r){var i,a,o,s={};if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof r)for(i in e)_.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i]&&We.on(i,e[i]);if(o&&o.length){for(i=0,a=o.length;a>i;i++)e=o[i].replace(/^on/,""),s[e]=!0,z[e]||(z[e]=[]),z[e].push(r);if(s.ready&&F.ready&&We.emit({type:"ready"}),s.error){for(i=0,a=G.length;a>i;i++)if(F[G[i].replace(/^flash-/,"")]===!0){We.emit({type:"error",name:G[i]});break}n!==t&&We.version!==n&&We.emit({type:"error",name:"version-mismatch",jsVersion:We.version,swfVersion:n})}}return We},ne=function(e,t){var n,r,i,a,o;if(0===arguments.length)a=x(z);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)_.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&We.off(n,e[n]);if(a&&a.length)for(n=0,r=a.length;r>n;n++)if(e=a[n].toLowerCase().replace(/^on/,""),o=z[e],o&&o.length)if(t)for(i=o.indexOf(t);-1!==i;)o.splice(i,1),i=o.indexOf(t,i);else o.length=0;return We},re=function(e){var t;return t="string"==typeof e&&e?T(z[e])||null:T(z)},ie=function(e){var t,n,r;return e=pe(e),e&&!we(e)?"ready"===e.type&&F.overdue===!0?We.emit({type:"error",name:"flash-overdue"}):(t=M({},e),be.call(this,t),"copy"===e.type&&(r=Ee(q),n=r.data,H=r.formatMap),n):void 0},ae=function(){var e=F.sandboxed;if(Ye(),"boolean"!=typeof F.ready&&(F.ready=!1),F.sandboxed!==e&&F.sandboxed===!0)F.ready=!1,We.emit({type:"error",name:"flash-sandboxed"});else if(!We.isFlashUnusable()&&null===F.bridge){var t=K.flashLoadTimeout;"number"==typeof t&&t>=0&&(B=u(function(){"boolean"!=typeof F.deactivated&&(F.deactivated=!0),F.deactivated===!0&&We.emit({type:"error",name:"flash-deactivated"})},t)),F.overdue=!1,Te()}},oe=function(){We.clearData(),We.blur(),We.emit("destroy"),Ce(),We.off()},se=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,We.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var r in n)"string"==typeof r&&r&&_.call(n,r)&&"string"==typeof n[r]&&n[r]&&(q[r]=n[r])},ue=function(e){"undefined"==typeof e?(A(q),H=null):"string"==typeof e&&_.call(q,e)&&delete q[e]},le=function(e){return"undefined"==typeof e?T(q):"string"==typeof e&&_.call(q,e)?q[e]:void 0},ce=function(e){if(e&&1===e.nodeType){r&&(Re(r,K.activeClass),r!==e&&Re(r,K.hoverClass)),r=e,Pe(e,K.hoverClass);var t=e.getAttribute("title")||K.title;if("string"==typeof t&&t){var n=Me(F.bridge);n&&n.setAttribute("title",t)}var i=K.forceHandCursor===!0||"pointer"===Ie(e,"cursor");He(i),qe()}},fe=function(){var e=Me(F.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),r&&(Re(r,K.hoverClass),Re(r,K.activeClass),r=null)},de=function(){return r||null},he=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},pe=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=i),M(e,{type:t,target:e.target||r||null,relatedTarget:e.relatedTarget||null,currentTarget:F&&F.bridge||null,timeStamp:e.timeStamp||b()||null});var n=V[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&M(e,{target:null,version:F.version}),"error"===e.type&&(X.test(e.name)&&M(e,{target:null,minimumVersion:U}),J.test(e.name)&&M(e,{version:F.version})),"copy"===e.type&&(e.clipboardData={setData:We.setData,clearData:We.clearData}),"aftercopy"===e.type&&(e=Ae(e,H)),e.target&&!e.relatedTarget&&(e.relatedTarget=ge(e.target)),me(e)}},ge=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?o.getElementById(t):null},me=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,r="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,i="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=Fe(n),u=a.screenLeft||a.screenX||0,l=a.screenTop||a.screenY||0,c=o.body.scrollLeft+o.documentElement.scrollLeft,f=o.body.scrollTop+o.documentElement.scrollTop,d=s.left+("number"==typeof e._stageX?e._stageX:0),h=s.top+("number"==typeof e._stageY?e._stageY:0),p=d-c,g=h-f,m=u+p,v=l+g,y="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,M(e,{srcElement:n,fromElement:r,toElement:i,screenX:m,screenY:v,pageX:d,pageY:h,clientX:p,clientY:g,x:p,y:g,movementX:y,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ve=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},ye=function(e,t,n,r){r?u(function(){e.apply(t,n)},0):e.apply(t,n)},be=function(e){if("object"==typeof e&&e&&e.type){var t=ve(e),n=z["*"]||[],r=z[e.type]||[],i=n.concat(r);if(i&&i.length){var o,s,u,l,c,f=this;for(o=0,s=i.length;s>o;o++)u=i[o],l=f,"string"==typeof u&&"function"==typeof a[u]&&(u=a[u]),"object"==typeof u&&u&&"function"==typeof u.handleEvent&&(l=u,u=u.handleEvent),"function"==typeof u&&(c=M({},e),ye(u,l,[c],t))}return this}},xe=function(e){var t=null;return(I===!1||e&&"error"===e.type&&e.name&&-1!==W.indexOf(e.name))&&(t=!1),t},we=function(e){var t=e.target||r||null,a="swf"===e._source;switch(delete e._source,e.type){case"error":var o="flash-sandboxed"===e.name||xe(e);"boolean"==typeof o&&(F.sandboxed=o),-1!==G.indexOf(e.name)?M(F,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(n=e.swfVersion,M(F,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),ze();break;case"ready":n=e.swfVersion;var s=F.deactivated===!0;M(F,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),ze();break;case"beforecopy":i=t;break;case"copy":var u,l,c=e.relatedTarget;!q["text/html"]&&!q["text/plain"]&&c&&(l=c.value||c.outerHTML||c.innerHTML)&&(u=c.value||c.textContent||c.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",u),l!==u&&e.clipboardData.setData("text/html",l)):!q["text/plain"]&&e.target&&(u=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",u));break;case"aftercopy":_e(e),We.clearData(),t&&t!==je()&&t.focus&&t.focus();break;case"_mouseover":We.focus(t),K.bubbleEvents===!0&&a&&(t&&t!==e.relatedTarget&&!O(e.relatedTarget,t)&&ke(M({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),ke(M({},e,{type:"mouseover"})));break;case"_mouseout":We.blur(),K.bubbleEvents===!0&&a&&(t&&t!==e.relatedTarget&&!O(e.relatedTarget,t)&&ke(M({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),ke(M({},e,{type:"mouseout"})));break;case"_mousedown":Pe(t,K.activeClass),K.bubbleEvents===!0&&a&&ke(M({},e,{type:e.type.slice(1)}));break;case"_mouseup":Re(t,K.activeClass),K.bubbleEvents===!0&&a&&ke(M({},e,{type:e.type.slice(1)}));break;case"_click":i=null,K.bubbleEvents===!0&&a&&ke(M({},e,{type:e.type.slice(1)}));break;case"_mousemove":K.bubbleEvents===!0&&a&&ke(M({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},_e=function(e){if(e.errors&&e.errors.length>0){var t=T(e);M(t,{type:"error",name:"clipboard-error"}),delete t.success,u(function(){We.emit(t)},0)}},ke=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,r=n&&n.ownerDocument||o,i={view:r.defaultView||a,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:r.createEvent?0:1},s=M(i,e);n&&r.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=r.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},$e=function(){var e=K.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=K.swfObjectId+"_fallbackContent";Y=c(function(){var e=o.getElementById(n);Ue(e)&&(ze(),F.deactivated=null,We.emit({type:"error",name:"swf-not-found"}))},t)}},Se=function(){var e=o.createElement("div");return e.id=K.containerId,e.className=K.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+Be(K.zIndex),e},Me=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Te=function(){var e,t=F.bridge,n=Me(t);if(!t){var r=Ne(a.location.host,K),i="never"===r?"none":"all",s=De(M({jsVersion:We.version},K)),u=K.swfPath+Oe(K.swfPath,K);n=Se();var l=o.createElement("div");n.appendChild(l),o.body.appendChild(n);var c=o.createElement("div"),f="activex"===F.pluginType;c.innerHTML='<object id="'+K.swfObjectId+'" name="'+K.swfObjectId+'" width="100%" height="100%" '+(f?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+u+'"')+">"+(f?'<param name="movie" value="'+u+'"/>':"")+'<param name="allowScriptAccess" value="'+r+'"/><param name="allowNetworking" value="'+i+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/><div id="'+K.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=c.firstChild,c=null,$(t).ZeroClipboard=We,n.replaceChild(t,l),$e()}return t||(t=o[K.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),F.bridge=t||null,t},Ce=function(){var e=F.bridge;if(e){var r=Me(e);r&&("activex"===F.pluginType&&"readyState"in e?(e.style.display="none",function i(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),r.parentNode&&r.parentNode.removeChild(r)}else u(i,10)}()):(e.parentNode&&e.parentNode.removeChild(e),r.parentNode&&r.parentNode.removeChild(r))),ze(),F.ready=null,F.bridge=null,F.deactivated=null,n=t}},Ee=function(e){var t={},n={};if("object"==typeof e&&e){for(var r in e)if(r&&_.call(e,r)&&"string"==typeof e[r]&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r}return{data:t,formatMap:n}}},Ae=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var r in e)if(_.call(e,r))if("errors"===r){n[r]=e[r]?e[r].slice():[];for(var i=0,a=n[r].length;a>i;i++)n[r][i].format=t[n[r][i].format]}else if("success"!==r&&"data"!==r)n[r]=e[r];else{n[r]={};var o=e[r];for(var s in o)s&&_.call(o,s)&&_.call(t,s)&&(n[r][t[s]]=o[s])}return n},Oe=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+b():""},De=function(e){var t,n,r,i,o="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?i=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(i=e.trustedDomains)),i&&i.length)for(t=0,n=i.length;n>t;t++)if(_.call(i,t)&&i[t]&&"string"==typeof i[t]){if(r=Le(i[t]),!r)continue;if("*"===r){s.length=0,s.push(r);break}s.push.apply(s,[r,"//"+r,a.location.protocol+"//"+r])}return s.length&&(o+="trustedOrigins="+h(s.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+h(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(o+=(o?"&":"")+"jsVersion="+h(e.jsVersion)),o},Le=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},Ne=function(){var e=function(e){var t,n,r,i=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return i;for(t=0,n=e.length;n>t;t++)if(_.call(e,t)&&(r=Le(e[t]))){if("*"===r){i.length=0,i.push("*");break}-1===i.indexOf(r)&&i.push(r)}return i};return function(t,n){var r=Le(n.swfPath);null===r&&(r=t);var i=e(n.trustedDomains),a=i.length;if(a>0){if(1===a&&"*"===i[0])return"always";if(-1!==i.indexOf(t))return 1===a&&t===r?"sameDomain":"always"}return"never"}}(),je=function(){try{return o.activeElement}catch(e){return null}},Pe=function(e,t){var n,r,i,a=[];if("string"==typeof t&&t&&(a=t.split(/\s+/)),e&&1===e.nodeType&&a.length>0)if(e.classList)for(n=0,r=a.length;r>n;n++)e.classList.add(a[n]);else if(e.hasOwnProperty("className")){for(i=" "+e.className+" ",n=0,r=a.length;r>n;n++)-1===i.indexOf(" "+a[n]+" ")&&(i+=a[n]+" ");e.className=i.replace(/^\s+|\s+$/g,"")}return e},Re=function(e,t){var n,r,i,a=[];if("string"==typeof t&&t&&(a=t.split(/\s+/)),e&&1===e.nodeType&&a.length>0)if(e.classList&&e.classList.length>0)for(n=0,r=a.length;r>n;n++)e.classList.remove(a[n]);else if(e.className){for(i=(" "+e.className+" ").replace(/[\r\n\t]/g," "),n=0,r=a.length;r>n;n++)i=i.replace(" "+a[n]+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}return e},Ie=function(e,t){var n=d(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Fe=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),r=a.pageXOffset,i=a.pageYOffset,s=o.documentElement.clientLeft||0,u=o.documentElement.clientTop||0,l=0,c=0;if("relative"===Ie(o.body,"position")){var f=o.body.getBoundingClientRect(),d=o.documentElement.getBoundingClientRect();l=f.left-d.left||0,c=f.top-d.top||0}t.left=n.left+r-s-l,t.top=n.top+i-u-c,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},Ue=function(e){if(!e)return!1;var t=d(e,null),n=v(t.height)>0,r=v(t.width)>0,i=v(t.top)>=0,a=v(t.left)>=0,o=n&&r&&i&&a,s=o?null:Fe(e),u="none"!==t.display&&"collapse"!==t.visibility&&(o||!!s&&(n||s.height>0)&&(r||s.width>0)&&(i||s.top>=0)&&(a||s.left>=0));return u},ze=function(){l(B),B=0,f(Y),Y=0},qe=function(){var e;if(r&&(e=Me(F.bridge))){var t=Fe(r);M(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+Be(K.zIndex)})}},He=function(e){F.ready===!0&&(F.bridge&&"function"==typeof F.bridge.setHandCursor?F.bridge.setHandCursor(e):F.ready=!1)},Be=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||y(e)?"string"==typeof e&&(t=Be(m(e,10))):t=e,"number"==typeof t?t:"auto"},Ye=function(t){var n,r,i,a=F.sandboxed,o=null;if(t=t===!0,I===!1)o=!1;else{try{r=e.frameElement||null}catch(s){i={name:s.name,message:s.message}}if(r&&1===r.nodeType&&"IFRAME"===r.nodeName)try{o=r.hasAttribute("sandbox")}catch(s){o=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||i&&"SecurityError"===i.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(i.message.toLowerCase()))&&(o=!0)}}return F.sandboxed=o,a===o||t||Ve(p),o},Ve=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){e&&(u=!0,e.version&&(f=t(e.version)),!f&&e.description&&(f=t(e.description)),e.filename&&(c=n(e.filename)))}var i,a,o,u=!1,l=!1,c=!1,f="";if(s.plugins&&s.plugins.length)i=s.plugins["Shockwave Flash"],r(i),s.plugins["Shockwave Flash 2.0"]&&(u=!0,f="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)o=s.mimeTypes["application/x-shockwave-flash"],i=o&&o.enabledPlugin,r(i);else if("undefined"!=typeof e){l=!0;try{a=new e("ShockwaveFlash.ShockwaveFlash.7"),u=!0,f=t(a.GetVariable("$version"))}catch(d){try{a=new e("ShockwaveFlash.ShockwaveFlash.6"),u=!0,f="6.0.21"}catch(h){try{a=new e("ShockwaveFlash.ShockwaveFlash"),u=!0,f=t(a.GetVariable("$version"))}catch(p){l=!1}}}}F.disabled=u!==!0,F.outdated=f&&v(f)<v(U),F.version=f||"0.0.0",F.pluginType=c?"pepper":l?"activex":u?"netscape":"unknown"};Ve(p),Ye(!0);var We=function(){return this instanceof We?void("function"==typeof We._createClient&&We._createClient.apply(this,S(arguments))):new We};w(We,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),We.config=function(){return Z.apply(this,S(arguments))},We.state=function(){return Q.apply(this,S(arguments))},We.isFlashUnusable=function(){return ee.apply(this,S(arguments))},We.on=function(){return te.apply(this,S(arguments))},We.off=function(){return ne.apply(this,S(arguments))},We.handlers=function(){return re.apply(this,S(arguments))},We.emit=function(){return ie.apply(this,S(arguments))},We.create=function(){return ae.apply(this,S(arguments))},We.destroy=function(){return oe.apply(this,S(arguments))},We.setData=function(){return se.apply(this,S(arguments))},We.clearData=function(){return ue.apply(this,S(arguments))},We.getData=function(){return le.apply(this,S(arguments))},We.focus=We.activate=function(){return ce.apply(this,S(arguments))},We.blur=We.deactivate=function(){return fe.apply(this,S(arguments))},We.activeElement=function(){return de.apply(this,S(arguments))};var Ge=0,Xe={},Je=0,Ke={},Ze={};M(K,{autoActivate:!0});var Qe=function(e){var t=this;t.id=""+Ge++,Xe[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),We.on("*",function(e){return t.emit(e)}),We.on("destroy",function(){t.destroy()}),We.create()},et=function(e,r){var i,a,o,s={},u=Xe[this.id],l=u&&u.handlers;if(!u)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof r)for(i in e)_.call(e,i)&&"string"==typeof i&&i&&"function"==typeof e[i]&&this.on(i,e[i]);if(o&&o.length){for(i=0,a=o.length;a>i;i++)e=o[i].replace(/^on/,""),s[e]=!0,l[e]||(l[e]=[]),l[e].push(r);if(s.ready&&F.ready&&this.emit({type:"ready",client:this}),s.error){for(i=0,a=G.length;a>i;i++)if(F[G[i].replace(/^flash-/,"")]){this.emit({type:"error",name:G[i],client:this});break}n!==t&&We.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:We.version,swfVersion:n})}}return this},tt=function(e,t){var n,r,i,a,o,s=Xe[this.id],u=s&&s.handlers;if(!u)return this;if(0===arguments.length)a=x(u);else if("string"==typeof e&&e)a=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)_.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(a&&a.length)for(n=0,r=a.length;r>n;n++)if(e=a[n].toLowerCase().replace(/^on/,""),o=u[e],o&&o.length)if(t)for(i=o.indexOf(t);-1!==i;)o.splice(i,1),i=o.indexOf(t,i);else o.length=0;return this},nt=function(e){var t=null,n=Xe[this.id]&&Xe[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:T(n)),t},rt=function(e){if(ut.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=M({},e));var t=M({},pe(e),{client:this});lt.call(this,t)}return this},it=function(e){if(!Xe[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=ct(e);for(var t=0;t<e.length;t++)if(_.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Ke[e[t].zcClippingId].indexOf(this.id)&&Ke[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Je++,Ke[e[t].zcClippingId]=[this.id],K.autoActivate===!0&&ft(e[t]));var n=Xe[this.id]&&Xe[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},at=function(e){var t=Xe[this.id];if(!t)return this;var n,r=t.elements;e="undefined"==typeof e?r.slice(0):ct(e);for(var i=e.length;i--;)if(_.call(e,i)&&e[i]&&1===e[i].nodeType){for(n=0;-1!==(n=r.indexOf(e[i],n));)r.splice(n,1);var a=Ke[e[i].zcClippingId];if(a){for(n=0;-1!==(n=a.indexOf(this.id,n));)a.splice(n,1);0===a.length&&(K.autoActivate===!0&&dt(e[i]),delete e[i].zcClippingId)}}return this},ot=function(){var e=Xe[this.id];return e&&e.elements?e.elements.slice(0):[]},st=function(){Xe[this.id]&&(this.unclip(),this.off(),delete Xe[this.id])},ut=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Xe[this.id],n=t&&t.elements,r=!!n&&n.length>0,i=!e.target||r&&-1!==n.indexOf(e.target),a=e.relatedTarget&&r&&-1!==n.indexOf(e.relatedTarget),o=e.client&&e.client===this;return t&&(i||a||o)?!0:!1},lt=function(e){var t=Xe[this.id];if("object"==typeof e&&e&&e.type&&t){var n=ve(e),r=t&&t.handlers["*"]||[],i=t&&t.handlers[e.type]||[],o=r.concat(i);if(o&&o.length){var s,u,l,c,f,d=this;for(s=0,u=o.length;u>s;s++)l=o[s],c=d,"string"==typeof l&&"function"==typeof a[l]&&(l=a[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(f=M({},e),ye(l,c,[f],n))}}},ct=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},ft=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=a.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=a.event))&&(t(n),We.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Ze[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},dt=function(e){if(e&&1===e.nodeType){var t=Ze[e.zcClippingId];if("object"==typeof t&&t){for(var n,r,i=["move","leave","enter","out","over"],a=0,o=i.length;o>a;a++)n="mouse"+i[a],r=t[n],"function"==typeof r&&e.removeEventListener(n,r,!1);delete Ze[e.zcClippingId]}}};We._createClient=function(){Qe.apply(this,S(arguments))},We.prototype.on=function(){return et.apply(this,S(arguments))},We.prototype.off=function(){return tt.apply(this,S(arguments))},We.prototype.handlers=function(){return nt.apply(this,S(arguments))},We.prototype.emit=function(){return rt.apply(this,S(arguments))},We.prototype.clip=function(){return it.apply(this,S(arguments))},We.prototype.unclip=function(){return at.apply(this,S(arguments))},We.prototype.elements=function(){return ot.apply(this,S(arguments))},We.prototype.destroy=function(){return st.apply(this,S(arguments))},We.prototype.setText=function(e){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData("text/plain",e),this},We.prototype.setHtml=function(e){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData("text/html",e),this},We.prototype.setRichText=function(e){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData("application/rtf",e),this},We.prototype.setData=function(){if(!Xe[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return We.setData.apply(this,S(arguments)),this},We.prototype.clearData=function(){if(!Xe[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return We.clearData.apply(this,S(arguments)),this},We.prototype.getData=function(){if(!Xe[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return We.getData.apply(this,S(arguments))},"function"==typeof define&&define.amd?define(function(){return We}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=We:e.ZeroClipboard=We}(function(){return this||window}()),angular.module("zeroclipboard",[]).provider("uiZeroclipConfig",function(){var e={buttonClass:"",swfPath:"ZeroClipboard.swf",trustedDomains:[window.location.host],cacheBust:!0,forceHandCursor:!1,zIndex:999999999,debug:!0,title:null,autoActivate:!0,flashLoadTimeout:3e4,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active"};this.setZcConf=function(t){angular.extend(e,t)},this.$get=function(){return{zeroclipConfig:e}}}).directive("uiZeroclip",["$document","$window","uiZeroclipConfig",function(e,t,n){var r=n.zeroclipConfig||{},i=t.ZeroClipboard;return{scope:{onCopied:"&zeroclipCopied",onError:"&?zeroclipOnError",onBeforeCopy:"&?zeroclipOnBeforeCopy",client:"=?uiZeroclip",value:"=zeroclipModel",text:"@zeroclipText"},link:function(e,t,n){var a,o=t[0];i.config(r),angular.isFunction(i)&&(e.client=new i(o)),e.$watch("value",function(e){void 0!==e&&t.attr("data-clipboard-text",e)}),e.$watch("text",function(e){t.attr("data-clipboard-text",e)}),e.client.on("aftercopy",a=function(t){e.$apply(function(){e.onCopied({$event:t})})}),e.client.on("error",function(t){e.onError&&e.$apply(function(){e.onError({$event:t})}),i.destroy()}),e.client.on("beforecopy",function(t){e.onBeforeCopy&&e.$apply(function(){e.onBeforeCopy({$event:t})})}),e.$on("$destroy",function(){e.client.off("complete",a)})}}}]),function(){"use strict";function e(e){return e instanceof RegExp}function t(e){return e&&e.window===e}function n(e){return e&&e.$evalAsync&&e.$watch}function r(i,a){if(i===a)return{isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(null===i||null===a)return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(i!==i&&a!==a)return{isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};var o,s,c,f=typeof i,h=typeof a;if(f==h){if("string"==f&&i!=a)return{isEqual:!1,unequalVariable:"",stringDiff:!0,o1:i,o2:a};if("object"==f){if(!l(i)){if(d(i))return{isEqual:d(a)&&i.getTime()==a.getTime(),unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(e(i)&&e(a))return{isEqual:i.toString()==a.toString(),unequalVariable:"",stringDiff:!1,o1:i,o2:a};if(n(i)||n(a)||t(i)||t(a)||l(a))return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};c={};var p={isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};for(s in i)if("$"!==s.charAt(0)&&!u(i[s])){var g=r(i[s],a[s]);if(!g.isEqual){if(g.unequalVariable="."+String(s)+g.unequalVariable,!g.stringDiff)return g;p=g}c[s]=!0}for(s in a)if(!c.hasOwnProperty(s)&&"$"!==s.charAt(0)&&void 0!==a[s]&&!u(a[s]))return{
isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};return p}if(!l(a))return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a};if((o=i.length)==a.length){var p={isEqual:!0,unequalVariable:"",stringDiff:!1,o1:i,o2:a};for(s=0;o>s;s++){var g=r(i[s],a[s]);if(!g.isEqual){if(g.unequalVariable="["+String(s)+"]"+g.unequalVariable,!g.stringDiff)return g;p=g}}return p}}}return{isEqual:!1,unequalVariable:"",stringDiff:!1,o1:i,o2:a}}function i(e,t){if(e&&t){var n,r;e.length>t.length?(r=e.split(""),n=t.split("")):(n=e.split(""),r=t.split(""));for(var i,a=0,o=[],s=0;s<n.length&&a<r.length;s++){for(i="";n[s]!=r[a]&&a<r.length;)i+=r[a],a++;i&&o.push(i),n[s]==r[a]&&a++}var u=s==n.length;if(a<r.length){for(i="";a<r.length;)i+=r[a],a++;o.push(i)}}else var u=!1,o=[];return{areSimilar:u,differences:o}}function a(e){var t=/\s/g;if(1!=e.length)return!1;for(var n in e[0])if(e[0][n].match(t))return!1;return!0}var o=15,s=(angular.isDefined,angular.isUndefined),u=angular.isFunction,l=angular.isArray,c=angular.isString,f=angular.isObject,d=angular.isDate,h=(angular.forEach,angular.copy),p=angular.bind;angular.module("Chronicle",[]).service("Chronicle",["$rootScope","$parse",function(e,t){this.record=function(e,t,n,r){var i=new d(e,t,n,r);return i};var d=function(e,r,i,a){if(!c(e))throw new Error("Watch variable that is not a string was passed to Chronicle.");if(this.watchVar=e,this.parsedWatchVar=t(e),s(this.parsedWatchVar(r)))throw new Error(e+", the watch variable passed to Chronicle, is not defined in the given scope.");if(s(r))throw new Error("Undefined scope passed to Chronicle.");if(n(r))this.isScope=!0;else{if(!f(r))throw new Error("Incorrect scope type passed to Chronicle.");this.isScope=!1}if(this.scope=r,this.stringHandling=i!==!0&&"true"!==i?!1:!0,this.parsedNoWatchVars=[],l(a))for(var o in a){if(!c(a[o]))throw new Error("Not all passed 'no watch' variables are in string format");if(this.parsedNoWatchVars.push(t(a[o])),s(this.parsedNoWatchVars[o](r)))throw new Error(a[o]+", a 'no watch' variable passed to Chronicle, is not defined in the given scope")}else if(c(a)){if(this.parsedNoWatchVars.push(t(a)),s(this.parsedNoWatchVars[0](r)))throw new Error(a+", the 'no watch' variable passed to Chronicle, is not defined in the given scope")}else if(!s(a))throw new Error("Incorect type for 'no watch' variables");this.archive=[],this.onAdjustFunctions=[],this.onRedoFunctions=[],this.onUndoFunctions=[],this.currArchivePos=null,this.addWatch()};d.prototype.addOnAdjustFunction=function(e){if(!u(e))throw new Error("Function added to run on adjustment is not a function");this.onAdjustFunctions.push(e)},d.prototype.removeOnAdjustFunction=function(e){this.onAdjustFunctions.splice(this.onAdjustFunctions.indexOf(e),1)},d.prototype.addOnUndoFunction=function(e){if(!u(e))throw new Error("Function added to run on undo is not a function");this.onUndoFunctions.push(e)},d.prototype.removeOnUndoFunction=function(e){this.onUndoFunctions.splice(this.onUndoFunctions.indexOf(e),1)},d.prototype.addOnRedoFunction=function(e){if(!u(e))throw new Error("Function added to run on redo is not a function");this.onRedoFunctions.push(e)},d.prototype.removeOnRedoFunction=function(e){this.onRedoFunctions.splice(this.onRedoFunctions.indexOf(e),1)},d.prototype.undo=function(){if(this.canUndo()){this.currArchivePos-=1,this.revert(this.currArchivePos);for(var e=0;e<this.onUndoFunctions.length;e++)this.onUndoFunctions[e]();return!0}return!1},d.prototype.redo=function(){if(this.canRedo()){this.currArchivePos+=1,this.revert(this.currArchivePos);for(var e=0;e<this.onRedoFunctions.length;e++)this.onRedoFunctions[e]();return!0}return!1},d.prototype.revert=function(e){this.parsedWatchVar.assign(this.scope,h(this.archive[e].watchVar));for(var t=0;t<this.parsedNoWatchVars.length;t++)this.parsedNoWatchVars[t].assign(this.scope,h(this.archive[e].noWatchVars[t]))},d.prototype.canRedo=function(){return this.currArchivePos<this.archive.length-1?!0:!1},d.prototype.canUndo=function(){return this.currArchivePos>0?!0:!1},d.prototype.addToArchive=function(){var e=!1;if(this.archive.length){var n=r(this.parsedWatchVar(this.scope),this.archive[this.currArchivePos].watchVar);if(!n.isEqual){e=!0;var s=t(this.watchVar+n.unequalVariable);if(this.stringHandling&&n.stringDiff){var u=!1,l=i(n.o1,n.o2);if(l.areSimilar&&this.archive[this.currArchivePos].parsedUnequalVariable==s){var u=a(l.differences);"string"!=typeof t("watchVar"+n.unequalVariable)(this.archive[this.currArchivePos-1])?u=!1:u&&Math.abs(t("watchVar"+n.unequalVariable)(this.archive[this.currArchivePos-1]).length-t("watchVar"+n.unequalVariable)(this.archive[this.currArchivePos]).length)>=o&&(u=!1)}}}}else e=!0;e&&this.newEntry(u,s)},d.prototype.newEntry=function(e,t){var n={};n.noWatchVars=[],n.parsedUnequalVariable=t,n.watchVar=h(this.parsedWatchVar(this.scope));for(var r=0;r<this.parsedNoWatchVars.length;r++)n.noWatchVars.push(h(this.parsedNoWatchVars[r](this.scope)));if(this.archive.length-1>this.currArchivePos){var i=this.archive.length-this.currArchivePos-1;this.archive.splice(this.currArchivePos+1,i)}for(e&&this.archive.splice(this.currArchivePos,1),this.archive.push(n),this.currArchivePos=this.archive.length-1,r=0;r<this.onAdjustFunctions.length;r++)this.onAdjustFunctions[r]()},d.prototype.addWatch=function(){var t=this;t.cancelWatch=t.isScope?t.scope.$watch(t.watchVar,function(){t.addToArchive.apply(t)},!0):e.$watch(p(t,function(){return t.parsedWatchVar(t.scope)}),function(){t.addToArchive.apply(t)},!0)}}])}(),/*!
 * Angular Tooltips v0.1.25
 *
 * Released under the MIT license
 * www.opensource.org/licenses/MIT
 *
 * Brought to you by 720kb.net
 *
 * 2015-10-18
 */
!function(e){"use strict";e.module("720kb.tooltips",[]).provider("tooltipsConfig",function(){var t={scroll:!1,showTrigger:"mouseover",hideTrigger:"mouseleave",hideTarget:"element",side:"top",size:"medium","try":!0,"class":"",speed:"medium",delay:0,lazy:!0,closeButton:null};this.options=function(){return 1===arguments.length&&e.extend(t,arguments[0]),e.copy(t)},this.$get=function(){return t}}).directive("tooltips",["$window","$compile","$interpolate","$interval","$sce","tooltipsConfig",function(t,n,r,i,a,o){var s=8,u=9,l=10,c=20,f="_720kb-tooltip-",d=r.startSymbol(),h=r.endSymbol();return{restrict:"A",scope:{tooltipViewModel:"="},link:function(r,p,g){function m(){V&&E||(E=!0,r.initTooltip(U)),q&&r.tooltipTryPosition(),r.showTooltip()}function v(){r.hideTooltip()}function y(){r.hideTooltip(),r.initTooltip(F)}var b,x,w,_,k,$,S,M,T,C,E=!1,A=e.element(p[0]),O=e.element(t.document.getElementsByTagName("body")[0]),D=g.tooltipTitle||g.title||"",L=g.tooltipScroll||o.scroll,N=g.tooltipContent||"",j=g.tooltipHtml||"",P=g.tooltipShowTrigger||o.showTrigger,R=g.tooltipHideTrigger||o.hideTrigger,I="undefined"!=typeof g.tooltipHideTarget&&null!==g.tooltipHideTarget?g.tooltipHideTarget:o.hideTarget,F=g.tooltipSide||o.side,U=F,z=g.tooltipSize||o.size,q="undefined"!=typeof g.tooltipTry&&null!==g.tooltipTry?r.$eval(g.tooltipTry):o["try"],H=g.tooltipClass||o["class"],B=(g.tooltipSpeed||o.speed).toLowerCase(),Y=g.tooltipDelay||o.delay,V="undefined"!=typeof g.tooltipLazy&&null!==g.tooltipLazy?r.$eval(g.tooltipLazy):o.lazy,W=g.tooltipCloseButton||o.closeButton,G="undefined"!=typeof W&&null!==W,X='<div class="_720kb-tooltip '+f+z+'">';"element"!==I&&"tooltip"!==I&&(I="element"),G&&(X=X+'<span class="'+f+'close-button" ng-click="hideTooltip()"> '+W+" </span>"),g.tooltipView&&(X=g.tooltipViewCtrl?X+'<div ng-controller="'+g.tooltipViewCtrl+'" ng-include="\''+g.tooltipView+"'\"></div>":X+"<div ng-include=\"'"+g.tooltipView+"'\"></div>"),X=X+'<div class="'+f+'title"> '+d+"title"+h+"</div>"+d+"content"+h+' <span class="'+f+'html_content" ng-bind-html="getHtml()"></span> <span class="'+f+'caret"></span></div>',r.title=D,r.content=N,r.html=j,r.getHtml=function(){return a.trustAsHtml(r.html)},r.parseSpeed=function(){switch(B){case"fast":B=100;break;case"medium":B=450;break;case"slow":B=800;break;default:B=Number(B)}},b=n(X)(r),b.addClass(H),O.append(b),r.isTooltipEmpty=function(){return r.title||r.content||r.html||g.tooltipView?void 0:!0},r.initTooltip=function(e){r.isTooltipEmpty()?b.css("visibility","hidden"):(b.css("visibility","visible"),k=A[0].offsetHeight,$=A[0].offsetWidth,x=b[0].offsetHeight,w=b[0].offsetWidth,r.parseSpeed(),r.tooltipPositioning(e))},r.getOffsets=function(){S=r.getOffsetTop(A[0]),M=r.getOffsetLeft(A[0])},r.getOffsetTop=function(e){var n=e.getBoundingClientRect().top+t.scrollY;return isNaN(n)&&(n=e.getBoundingClientRect().top+t.pageYOffset),n},r.getOffsetLeft=function(e){var n=e.getBoundingClientRect().left+t.scrollX;return isNaN(n)&&(n=e.getBoundingClientRect().left+t.pageXOffset),n},r.bindShowTriggers=function(){A.bind(P,m)},r.bindHideTriggers=function(){"tooltip"===I?b.bind(R,v):A.bind(R,v)},r.clearTriggers=function(){A.unbind(P,m),A.unbind(R,v)},r.bindShowTriggers(),r.showTooltip=function(){L&&(C=A[0].getBoundingClientRect(),T=i(function(){var t=A[0].getBoundingClientRect();e.equals(C,t)||r.tooltipPositioning(U),C=t},c)),b.addClass(f+"open"),b.css("transition","opacity "+B+"ms linear"),Y&&b.css("transition-delay",Y+"ms"),r.clearTriggers(),r.bindHideTriggers()},r.hideTooltip=function(){b.css("transition","opacity "+B+"ms linear, visibility 0s linear "+B+"ms"),b.removeClass(f+"open"),r.clearTriggers(),r.bindShowTriggers(),e.isDefined(r.positionInterval)&&(i.cancel(T),T=void 0)},r.removePosition=function(){b.removeClass(f+"left").removeClass(f+"right").removeClass(f+"top").removeClass(f+"bottom ")},r.tooltipPositioning=function(e){r.removePosition(),r.getOffsets();var t,n;"small"===z?_=s:"medium"===z?_=u:"large"===z&&(_=l),"left"===e&&(t=S+k/2-x/2,n=M-(w+_),b.css("top",t+"px"),b.css("left",n+"px"),b.addClass(f+"left")),"right"===e&&(t=S+k/2-x/2,n=M+$+_,b.css("top",t+"px"),b.css("left",n+"px"),b.addClass(f+"right")),"top"===e&&(t=S-_-x,n=M+$/2-w/2,b.css("top",t+"px"),b.css("left",n+"px"),b.addClass(f+"top")),"bottom"===e&&(t=S+k+_,n=M+$/2-w/2,b.css("top",t+"px"),b.css("left",n+"px"),b.addClass(f+"bottom"))},r.tooltipTryPosition=function(){var e=b[0].offsetHeight,n=b[0].offsetWidth,i=b[0].offsetTop,a=b[0].offsetLeft,o=t.innerWidth,s=t.innerHeight,u=o-(n+a),l=s-(e+i),c=A[0].offsetHeight,f=A[0].offsetWidth,d=A[0].offsetLeft,h=A[0].offsetTop,p=o-(d+f),g=s-(c+h),m={left:a,top:i,bottom:l,right:u},v={left:d,right:p,top:h,bottom:g},y=Object.keys(v).reduce(function(e,t){return v[e]>v[t]?e:t}),x=Object.keys(m).reduce(function(e,t){return m[e]<m[t]?e:t});F!==y&&m[x]<20&&(U=y,r.tooltipPositioning(U),r.initTooltip(y))},e.element(t).bind("resize",y),r.$on("$destroy",function(){e.element(t).unbind("resize",y),r.clearTriggers(),b.remove()}),g.tooltipTitle&&g.$observe("tooltipTitle",function(e){r.title=e,r.initTooltip(U)}),g.title&&g.$observe("title",function(e){r.title=e,r.initTooltip(U)}),g.tooltipContent&&g.$observe("tooltipContent",function(e){r.content=e,r.initTooltip(U)}),g.tooltipHtml&&g.$observe("tooltipHtml",function(e){r.html=e,r.initTooltip(U)})}}}])}(angular),function(e){return e.module("ngOrderObjectBy",[]).filter("orderObjectBy",function(){return function(t,n,r){function i(e,t){return e[t]}var a=[];return e.forEach(t,function(e){a.push(e)}),a.sort(function(e,t){var r,a=n.split(".").reduce(i,e),o=n.split(".").reduce(i,t);return r=a===o?0:a>o?1:-1}),r&&a.reverse(),a}})}(angular),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.dl=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){},{}],2:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.dsv={})}(this,function(e){"use strict";var t=function(e){function t(e,t){var r;return n(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})}function n(e,t){function n(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],l=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s}function r(t){if(Array.isArray(t[0]))return i(t);var n=Object.create(null),r=[];return t.forEach(function(e){for(var t in e)(t+="")in n||r.push(n[t]=t)}),[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")}function i(e){return e.map(a).join("\n")}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return{parse:t,parseRows:n,format:r,formatRows:i}};e.csv=t(","),e.tsv=t("	"),e.dsv=t})},{}],3:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.format={})}(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:0/0}function r(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1],o=a-(g=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+t(e,n+o-1)[0]}function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return 0>a?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function a(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,a=-1;r>i;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e}function o(e){return new s(e)}function s(e){if(!(t=j.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],u=!!t[7],l=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(u=!0,c="g"):N[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=u,this.precision=l,this.type=c}function u(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function l(e){return e}function c(e){function t(e){e=o(e);var t=e.fill,n=e.align,r=e.sign,u=e.symbol,l=e.zero,c=e.width,f=e.comma,d=e.precision,h=e.type,p="$"===u?a[0]:"#"===u&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",m="$"===u?a[1]:/[%p]/.test(h)?"%":"",v=N[h],y=!h||/[defgprs%]/.test(h);return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),function(e){var a=p,o=m;if("c"===h)o=v(e)+o,e="";else{e=+e;var u=(0>e||0>1/e)&&(e*=-1,!0);if(e=v(e,d),a=(u?"("===r?r:"-":"-"===r||"("===r?"":r)+a,o=o+("s"===h?P[8+g/3]:"")+(u&&"("===r?")":""),y)for(var b,x=-1,w=e.length;++x<w;)if(b=e.charCodeAt(x),48>b||b>57){o=(46===b?s+e.slice(x+1):e.slice(x))+o,e=e.slice(0,x);break}}f&&!l&&(e=i(e,1/0));var _=a.length+e.length+o.length,k=c>_?new Array(c-_+1).join(t):"";switch(f&&l&&(e=i(k+e,k.length?c-o.length:1/0),k=""),n){case"<":return a+e+o+k;case"=":return a+k+e+o;case"^":return k.slice(0,_=k.length>>1)+a+e+o+k.slice(_)}return k+a+e+o}}function r(e,r){var i=t((e=o(e),e.type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),s=Math.pow(10,-a),u=P[8+a/3];return function(e){return i(s*e)+u}}var i=e.grouping&&e.thousands?u(e.grouping,e.thousands):l,a=e.currency,s=e.decimal;return{format:t,formatPrefix:r}}function f(e,t){return Math.max(0,n(Math.abs(t))-n(Math.abs(e)))+1}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function h(e){return Math.max(0,-n(Math.abs(e)))}function p(e){if("string"==typeof e){if(!R.hasOwnProperty(e))return null;e=R[e]}return c(e)}var g,m={decimal:".",thousands:",",grouping:[3],currency:["",""]},v={decimal:",",thousands:"",grouping:[3],currency:["","."]},y={decimal:",",thousands:".",grouping:[3],currency:["R$",""]},b={decimal:",",thousands:".",grouping:[3],currency:["","z"]},x={decimal:",",thousands:".",grouping:[3],currency:["",""]},w={decimal:",",thousands:".",grouping:[3],currency:["","."]},_={decimal:".",thousands:",",grouping:[3],currency:["",""]},k={decimal:",",thousands:".",grouping:[3],currency:["",""]},$={decimal:".",thousands:",",grouping:[3],currency:["",""]},S={decimal:",",thousands:".",grouping:[3],currency:["",""]},M={decimal:",",thousands:"",grouping:[3],currency:["","$"]},T={decimal:",",thousands:"",grouping:[3],currency:["",""]},C={decimal:",",thousands:".",grouping:[3],currency:["",""]},E={decimal:".",thousands:",",grouping:[3],currency:["$",""]},A={decimal:".",thousands:",",grouping:[3],currency:["",""]},O={decimal:".",thousands:",",grouping:[3],currency:["$",""]},D={decimal:",",thousands:".",grouping:[3],currency:["",""]},L={decimal:",",thousands:".",grouping:[3],currency:["",""]},N={"":a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return i(100*e,t)},r:i,s:r,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},j=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var P=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],R={"ca-ES":L,"de-DE":D,"en-CA":O,"en-GB":A,"en-US":E,"es-ES":C,"fi-FI":T,"fr-CA":M,"fr-FR":S,"he-IL":$,"it-IT":k,"ja-JP":_,"mk-MK":w,"nl-NL":x,"pl-PL":b,"pt-BR":y,"ru-RU":v,"zh-CN":m},I=c(E);e.format=I.format,e.formatPrefix=I.formatPrefix,e.localeFormat=p,e.formatSpecifier=o,e.precisionFixed=h,e.precisionPrefix=d,e.precisionRound=f})},{}],4:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.timeFormat={})}(this,function(e){"use strict";function t(e,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},i.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},i.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},i.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},i.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(i.count=function(t,n){return we.setTime(+t),_e.setTime(+n),e(we),e(_e),Math.floor(r(we,_e))}),i}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}function i(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function s(e){function t(e,t){return function(n){for(var r,i,a,o=[],s=-1,u=0,l=e.length;++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=Oe[r=e.charAt(++s)])&&(r=e.charAt(++s)),(a=t[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function n(e,t){return function(n){var i=o(1900),s=r(i,e,n,0);if(s!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"Z"in i){if("w"in i&&("W"in i||"U"in i)){var u=a(o(i.y)).getUTCDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return i.H+=i.Z/100|0,i.M+=i.Z%100,a(i)}if("w"in i&&("W"in i||"U"in i)){var u=t(o(i.y)).getDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return t(i)}}function r(e,t,n,r){for(var i,a,o=0,s=t.length,u=n.length;s>o;){if(r>=u)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Pe[i in Oe?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=Te.exec(t.slice(n));return r?(e.w=Ce[r[0].toLowerCase()],n+r[0].length):-1}function u(e,t,n){var r=Se.exec(t.slice(n));return r?(e.w=Me[r[0].toLowerCase()],n+r[0].length):-1}function l(e,t,n){var r=De.exec(t.slice(n));return r?(e.m=Le[r[0].toLowerCase()],n+r[0].length):-1}function te(e,t,n){var r=Ee.exec(t.slice(n));return r?(e.m=Ae[r[0].toLowerCase()],n+r[0].length):-1}function ne(e,t,n){return r(e,me,t,n)}function re(e,t,n){return r(e,ve,t,n)}function ie(e,t,n){return r(e,ye,t,n)}function ae(e,t,n){var r=$e[t.slice(n,n+=2).toLowerCase()];return null==r?-1:(e.p=r,n)}function oe(e){return we[e.getDay()]}function se(e){return xe[e.getDay()]}function ue(e){return ke[e.getMonth()]}function le(e){return _e[e.getMonth()]}function ce(e){return be[+(e.getHours()>=12)]}function fe(e){return we[e.getUTCDay()]}function de(e){return xe[e.getUTCDay()]}function he(e){return ke[e.getUTCMonth()]}function pe(e){return _e[e.getUTCMonth()]}function ge(e){return be[+(e.getUTCHours()>=12)]}var me=e.dateTime,ve=e.date,ye=e.time,be=e.periods,xe=e.days,we=e.shortDays,_e=e.months,ke=e.shortMonths,$e=f(be),Se=c(xe),Me=f(xe),Te=c(we),Ce=f(we),Ee=c(_e),Ae=f(_e),De=c(ke),Le=f(ke),Ne={a:oe,A:se,b:ue,B:le,c:null,d:M,e:M,H:T,I:C,j:E,L:A,m:O,M:D,p:ce,S:L,U:N,w:j,W:P,x:null,X:null,y:R,Y:I,Z:F,"%":ee},je={a:fe,A:de,b:he,B:pe,c:null,d:U,e:U,H:z,I:q,j:H,L:B,m:Y,M:V,p:ge,S:W,U:G,w:X,W:J,x:null,X:null,y:K,Y:Z,Z:Q,"%":ee},Pe={a:s,A:u,b:l,B:te,c:ne,d:b,e:b,H:w,I:w,j:x,L:$,m:y,M:_,p:ae,S:k,U:h,w:d,W:p,x:re,X:ie,y:m,Y:g,Z:v,"%":S};return Ne.x=t(ve,Ne),Ne.X=t(ye,Ne),Ne.c=t(me,Ne),je.x=t(ve,je),je.X=t(ye,je),je.c=t(me,je),{format:function(e){var r=t(e+="",Ne);return r.parse=n(e,i),r.toString=function(){return e},r},utcFormat:function(e){var r=t(e+="",je);return r.parse=n(e,a),r.toString=function(){return e},r}}}function u(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function l(e){return e.replace(Ne,"\\$&")}function c(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function f(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function d(e,t,n){var r=De.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function h(e,t,n){var r=De.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function p(e,t,n){var r=De.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function g(e,t,n){var r=De.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function m(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function y(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function x(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function w(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function k(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=Le.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function M(e,t){return u(e.getDate(),t,2)}function T(e,t){return u(e.getHours(),t,2)}function C(e,t){return u(e.getHours()%12||12,t,2)}function E(e,t){return u(1+ke.count(Me(e),e),t,3)}function A(e,t){return u(e.getMilliseconds(),t,3)}function O(e,t){return u(e.getMonth()+1,t,2)}function D(e,t){return u(e.getMinutes(),t,2)}function L(e,t){return u(e.getSeconds(),t,2)}function N(e,t){return u($e.count(Me(e),e),t,2)}function j(e){return e.getDay()}function P(e,t){return u(Se.count(Me(e),e),t,2)}function R(e,t){return u(e.getFullYear()%100,t,2)}function I(e,t){return u(e.getFullYear()%1e4,t,4)}function F(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function U(e,t){return u(e.getUTCDate(),t,2)}function z(e,t){return u(e.getUTCHours(),t,2)}function q(e,t){return u(e.getUTCHours()%12||12,t,2)}function H(e,t){return u(1+Te.count(Ae(e),e),t,3)}function B(e,t){return u(e.getUTCMilliseconds(),t,3)}function Y(e,t){return u(e.getUTCMonth()+1,t,2)}function V(e,t){return u(e.getUTCMinutes(),t,2)}function W(e,t){return u(e.getUTCSeconds(),t,2)}function G(e,t){return u(Ce.count(Ae(e),e),t,2)}function X(e){return e.getUTCDay()}function J(e,t){return u(Ee.count(Ae(e),e),t,2)}function K(e,t){return u(e.getUTCFullYear()%100,t,2)}function Z(e,t){return u(e.getUTCFullYear()%1e4,t,4)}function Q(){return"+0000"}function ee(){return"%"}function te(e){return e.toISOString()}function ne(e){if("string"==typeof e){if(!Ie.hasOwnProperty(e))return null;e=Ie[e]}return s(e)}var re={dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ie={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ae={dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},oe={dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","r.","Czw.","Pt.","Sob."],months:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Padz.","Listop.","Grudz."]},se={dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]},ue={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},le={dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},ce={dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]},fe={dateTime:"%A, %e %B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},de={dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]},he={dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["jan","fv","mar","avr","mai","jui","jul","ao","sep","oct","nov","dc"]},pe={dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes","Hein","Elo","Syys","Loka","Marras","Joulu"]},ge={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},me={dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ve={dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ye={dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},be={dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},xe={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]},we=new Date,_e=new Date,ke=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),$e=n(0),Se=n(1),Me=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()}),Te=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5}),Ce=r(0),Ee=r(1),Ae=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),Oe={"-":"",_:" ",0:"0"},De=/^\s*\d+/,Le=/^%/,Ne=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,je="%Y-%m-%dT%H:%M:%S.%LZ";te.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},te.toString=function(){return je};var Pe=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?te:me.utcFormat(je),Re=Pe,Ie={"ca-ES":xe,"de-DE":be,"en-CA":ye,"en-GB":ve,"en-US":me,"es-ES":ge,"fi-FI":pe,"fr-CA":he,"fr-FR":de,"he-IL":fe,"it-IT":ce,"ja-JP":le,"mk-MK":ue,"nl-NL":se,"pl-PL":oe,"pt-BR":ae,"ru-RU":ie,"zh-CN":re},Fe=s(me);e.format=Fe.format,e.utcFormat=Fe.utcFormat,e.localeFormat=ne,e.isoFormat=Re})},{}],5:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.time={})}(this,function(e){"use strict";function t(e,n,r){function o(t){return e(t=new Date(+t)),t}return o.floor=o,o.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},o.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},o.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},o.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},o.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(o.count=function(t,n){return a.setTime(+t),i.setTime(+n),e(a),e(i),Math.floor(r(a,i))}),o}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3});e.seconds=o.range;var s=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4});e.minutes=s.range;var u=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5});e.hours=u.range;var l=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5});e.days=l.range,e.sunday=n(0),e.sundays=e.sunday.range,e.monday=n(1),e.mondays=e.monday.range,e.tuesday=n(2),e.tuesdays=e.tuesday.range,e.wednesday=n(3),e.wednesdays=e.wednesday.range,e.thursday=n(4),e.thursdays=e.thursday.range,e.friday=n(5),e.fridays=e.friday.range,e.saturday=n(6),e.saturdays=e.saturday.range;
var c=e.sunday;e.weeks=c.range;var f=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())});e.months=f.range;var d=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()});e.years=d.range;var h=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3});e.utcSeconds=h.range;var p=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4});e.utcMinutes=p.range;var g=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5});e.utcHours=g.range;var m=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5});e.utcDays=m.range,e.utcSunday=r(0),e.utcSundays=e.utcSunday.range,e.utcMonday=r(1),e.utcMondays=e.utcMonday.range,e.utcTuesday=r(2),e.utcTuesdays=e.utcTuesday.range,e.utcWednesday=r(3),e.utcWednesdays=e.utcWednesday.range,e.utcThursday=r(4),e.utcThursdays=e.utcThursday.range,e.utcFriday=r(5),e.utcFridays=e.utcFriday.range,e.utcSaturday=r(6),e.utcSaturdays=e.utcSaturday.range;var v=e.utcSunday;e.utcWeeks=v.range;var y=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())});e.utcMonths=y.range;var b=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()});e.utcYears=b.range,e.interval=t,e.second=o,e.minute=s,e.hour=u,e.day=l,e.week=c,e.month=f,e.year=d,e.utcSecond=h,e.utcMinute=p,e.utcHour=g,e.utcDay=m,e.utcWeek=v,e.utcMonth=y,e.utcYear=b})},{}],6:[function(e,t,n){function r(){this._cells={},this._aggr=[],this._stream=!1}function i(e){if(a.isArray(e))return e;if(null==e)return[];var t,n,r=[];for(t in e)n=a.array(e[t]),r.push({name:t,ops:n});return r}var a=e("../util"),o=e("./measures"),s=e("./collector"),u=r.Flags={ADD_CELL:1,MOD_CELL:2},l=r.prototype;l.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},l.key=function(e){return null==e?this._key:(this._key=a.$(e),this)},l.groupby=function(e){return this._dims=a.array(e).map(function(e,t){if(e=a.isString(e)?{name:e,get:a.$(e)}:a.isFunction(e)?{name:a.name(e)||e.name||"_"+t,get:e}:e.name&&a.isFunction(e.get)?e:null,null==e)throw"Invalid groupby argument: "+e;return e}),this.clear()},l.summarize=function(e){e=i(e),this._count=!0;var t,n,r,s,u,l,c,f=this._aggr=[];for(r=0;r<e.length;++r){for(s=0,t=[],n=e[r];s<n.ops.length;++s)u=n.ops[s],"count"!==u&&(this._count=!1),l=n.as&&n.as[s]||u+("*"===n.name?"":"_"+n.name),t.push(o[u](l));c=n.get&&a.$(n.get)||("*"===n.name?a.identity:a.$(n.name)),f.push({name:n.name,measures:o.create(t,this._stream,c,this._assign)})}return this.clear()},l.count=function(){return this.summarize({"*":"count"})},l._assign=function(e,t,n){e[t]=n},l.clear=function(){return this._cells={},this},l._cellkey=function(e){var t,n=this._dims,r=n.length,i=String(n[0].get(e));for(t=1;r>t;++t)i+="|"+n[t].get(e);return i},l._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},l._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:u.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new s(this._key)),r},l._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;n>t;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},l._ingest=a.identity,l._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=u.MOD_CELL,this._on_add&&this._on_add(e,n)},l._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=u.MOD_CELL,this._on_rem&&this._on_rem(e,n)},l._mod=function(e,t){var n,r=this._cell(t),i=this._cell(e),o=this._aggr;for(r!==i?(r.num-=1,i.num+=1,r.collect&&r.data.rem(t),i.collect&&i.data.add(e)):r.collect&&!a.isObject(e)&&(r.data.rem(t),r.data.add(e)),n=0;n<o.length;++n)r.aggs[o[n].name].rem(t),i.aggs[o[n].name].add(e);r.flag|=u.MOD_CELL,i.flag|=u.MOD_CELL,this._on_mod&&this._on_mod(e,t,r,i)},l.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if(e=this._cells[n],e.num>0){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},l.changes=function(e){var t,n,r,i,a=e||{add:[],rem:[],mod:[]},o=this._aggr;for(i in this._cells){for(t=this._cells[i],n=t.flag,t.collect&&t.data.values(),r=0;r<o.length;++r)t.aggs[o[r].name].set();t.num<=0?(a.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&u.ADD_CELL?a.add.push(t.tuple):n&u.MOD_CELL&&a.mod.push(t.tuple)),t.flag=0}return this._rems=!1,a},l.execute=function(e){return this.clear().insert(e).result()},l.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},l.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},l._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},t.exports=r},{"../util":28,"./collector":7,"./measures":9}],7:[function(e,t,n){function r(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var i=e("../util"),a=e("../stats"),o="__dl_rem__",s=r.prototype;s.add=function(e){this._add.push(e)},s.rem=function(e){this._rem.push(e)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r,s=this._add,u=this._rem,l=this._key,c=Array(s.length-u.length);if(i.isObject(u[0]))if(l)for(r=i.toMap(u,l),e=0,t=0,n=s.length;n>e;++e)r.hasOwnProperty(l(s[e]))||(c[t++]=s[e]);else{for(e=0,n=u.length;n>e;++e)u[e][o]=1;for(e=0,t=0,n=s.length;n>e;++e)s[e][o]||(c[t++]=s[e]);for(e=0,n=u.length;n>e;++e)delete u[e][o]}else for(r=a.count.map(u),e=0,t=0,n=s.length;n>e;++e)r[s[e]]>0?r[s[e]]-=1:c[t++]=s[e];return this._rem=[],this._add=c},s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=a.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},s.argmin=function(e){return this.extent(e)[0]},s.argmax=function(e){return this.extent(e)[1]},s.min=function(e){var t=this.extent(e)[0];return t?e(t):+(1/0)},s.max=function(e){var t=this.extent(e)[1];return t?e(t):-(1/0)},s.quartile=function(e){return this._get===e&&this._q||(this._q=a.quartile(this.values(),e),this._get=e),this._q},s.q1=function(e){return this.quartile(e)[0]},s.q2=function(e){return this.quartile(e)[1]},s.q3=function(e){return this.quartile(e)[2]},t.exports=r},{"../stats":25,"../util":28}],8:[function(e,t,n){var r=e("../util"),i=e("./aggregator");t.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},{"../util":28,"./aggregator":6}],9:[function(e,t,n){function r(e){return function(t){var n=o.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function i(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=s[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return o.vals(r).sort(function(e,t){return e.idx-t.idx})}function a(t,n,r,a){var s=i(t,n),u="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",l="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",c="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",f="var t = this.tuple; var cell = this.cell;";return s.forEach(function(e){e.idx<0?(u=e.init+u,l=e.add+l,c=e.rem+c):(u+=e.init,l+=e.add,c+=e.rem)}),t.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){f+="this.assign(t,'"+e.out+"',"+e.set+");"}),f+="return t;",u=Function("cell","t",u),u.prototype.assign=a,u.prototype.add=Function("t","var v = this.get(t);"+l),u.prototype.rem=Function("t","var v = this.get(t);"+c),u.prototype.set=Function(f),u.prototype.get=r,u.prototype.distinct=e("../stats").count.distinct,u.prototype.isValid=o.isValid,u.fields=t.map(o.$("out")),u}var o=e("../util"),s={values:r({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:r({name:"count",set:"cell.num"}),missing:r({name:"missing",set:"this.missing"}),valid:r({name:"valid",set:"this.valid"}),sum:r({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:r({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:r({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:r({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:r({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:r({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:r({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),median:r({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:r({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:r({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:r({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:r({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:r({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:r({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:r({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:r({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","stdev","median"],idx:5})};s.create=a,t.exports=s},{"../stats":25,"../util":28}],10:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,u,l,c,f=e.maxbins||15,d=e.base||10,h=Math.log(d),p=e.div||[5,2],g=e.min,m=e.max,v=m-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,v/f,0,e.steps.length))];else{n=Math.ceil(Math.log(f)/h),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(v)/h)-n));do t*=d;while(Math.ceil(v/t)>f);for(l=0;l<p.length;++l)u=t/p[l],u>=r&&f>=v/u&&(t=u)}return u=Math.log(t),s=u>=0?0:~~(-u/h)+1,c=Math.pow(d,-s-1),g=Math.min(g,Math.floor(g/t+c)*t),m=Math.ceil(m/t)*t,{start:g,stop:m,step:t,unit:{precision:s},value:a,index:o}}function i(e,t,n,r){for(;r>n;){var i=n+r>>>1;l.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(a.call(this,e))}function u(e){return o.call(this,this.unit.unit(e))}var l=e("../util"),c=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?c.utc:c,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,l=+i-+n,f=e.unit?t[e.unit]:t.find(l,o,a),d=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return d.unit=f,d.index=u,e.raw||(d.value=s),d},t.exports=r},{"../time":27,"../util":28}],11:[function(e,t,n){function r(e,t,n){n=o(e,t,n);var r=a(n);return r?d.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||d.identity}function i(e,t,n){n=o(e,t,n);var r=a(n);return r?s(e,n.accessor,r):u(e,n.accessor,n&&n.sort)}function a(e){var t=e.type,n=null;return(null==t||p[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?l.date(e):l(e)),n}function o(){var e=arguments,t=0,n=d.isArray(e[t])?e[t++]:null,r=d.isFunction(e[t])||d.isString(e[t])?d.$(e[t++]):null,i=d.extend({},e[t]);if(n&&(i.type=i.type||f(n,r),p[i.type])){var a=h.extent(n,r);i=d.extend({min:a[0],max:a[1]},i)}return r&&(i.accessor=r),i}function s(e,t,n){for(var r,i,a=c.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),o=0;o<e.length;++o)if(r=t?t(e[o]):e[o],d.isValid(r)){if(i=n.index(r),0>i||i>=a.length||!isFinite(i))continue;a[i].count+=1}return a.bins=n,a}function u(e,t,n){var r=h.unique(e,t),i=h.count.map(e,t);return r.map(function(e){return{value:e,count:i[e]}}).sort(d.comparator(n?"-count":"+value"))}var l=e("./bins"),c=e("../generate"),f=e("../import/type"),d=e("../util"),h=e("../stats"),p={integer:1,number:1,date:1};t.exports={$bin:r,histogram:i}},{"../generate":13,"../import/type":22,"../stats":25,"../util":28,"./bins":10}],12:[function(e,t,n){function r(e){var t=f.localeFormat(e);if(null==t)throw Error("Unrecognized locale: "+e);d=t}function i(e){var t=c.localeFormat(e);if(null==t)throw Error("Unrecognized locale: "+e);h=t}function a(e,t){e.length||(e=[0]),null==t&&(t=10);var n=e[0],r=e[e.length-1];n>r&&(o=r,r=n,n=o);var i=r-n||(t=1,n||r||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=i/t/a;return o>=p?a*=10:o>=g?a*=5:o>=m&&(a*=2),[Math.ceil(n/a)*a,Math.floor(r/a)*a+a/2,a]}function o(e,t,n){var r=a(e,t);if(null==n)n=",."+f.precisionFixed(r[2])+"f";else switch(n=f.formatSpecifier(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=f.precisionPrefix(r[2],i)),d.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=f.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=f.precisionFixed(r[2])-2*("%"===n.type))}return d.format(n)}function s(){var e=h.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var c=+e;return(l.second(e)<c?t:l.minute(e)<c?n:l.hour(e)<c?r:l.day(e)<c?i:l.month(e)<c?l.week(e)<c?a:o:l.year(e)<c?s:u)(e)}}function u(){var e=h.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var c=+e;return(l.utcSecond(e)<c?t:l.utcMinute(e)<c?n:l.utcHour(e)<c?r:l.utcDay(e)<c?i:l.utcMonth(e)<c?l.utcWeek(e)<c?a:o:l.utcYear(e)<c?s:u)(e)}}var l=e("d3-time"),c=e("d3-time-format"),f=e("d3-format"),d=f,h=c;t.exports={numberLocale:r,number:function(e){return d.format(e)},numberPrefix:function(e,t){return d.formatPrefix(e,t)},timeLocale:i,time:function(e){return h.format(e)},utc:function(e){return h.utcFormat(e)},locale:function(e){r(e),i(e)},auto:{number:o,time:function(){return s()},utc:function(){return u()}}};var p=Math.sqrt(50),g=Math.sqrt(10),m=Math.sqrt(2)},{"d3-format":3,"d3-time":5,"d3-time-format":4}],13:[function(e,t,n){var r=t.exports={};r.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},r.zeros=function(e){return r.repeat(0,e)},r.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(0>n)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},r.random={},r.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,i=function(){return e+n*Math.random()};return i.samples=function(e){return r.zeros(e).map(i)},i},r.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,i=function(){return e+Math.floor(n*Math.random())};return i.samples=function(e){return r.zeros(e).map(i)},i},r.random.normal=function(e,t){e=e||0,t=t||1;var n,i=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return i.samples=function(e){return r.zeros(e).map(i)},i}},{}],14:[function(e,t,n){function r(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return a.dsv(t.delimiter).parse(e)}var i=e("../../util"),a=e("d3-dsv");r.delimiter=function(e){var t={delimiter:e};return function(e,n){return r(e,n?i.extend(n,t):t)}},t.exports=r},{"../../util":28,"d3-dsv":2}],15:[function(e,t,n){var r=e("./dsv");t.exports={json:e("./json"),topojson:e("./topojson"),treejson:e("./treejson"),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("	")}},{"./dsv":14,"./json":16,"./topojson":17,"./treejson":18}],16:[function(e,t,n){var r=e("../../util");t.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=r.accessor(t.property)(n)),n}},{"../../util":28}],17:[function(e,t,n){(function(n){var r=e("./json"),i=function(e,t){var n=i.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var a,o=r(e,t);if(t&&t.feature){if(a=o.objects[t.feature])return n.feature(o,a).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(a=o.objects[t.mesh])return[n.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};i.topojson="undefined"!=typeof window?window.topojson:"undefined"!=typeof n?n.topojson:null,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./json":16}],18:[function(e,t,n){function r(e,t){function n(e){r.push(e);var i=e[t];if(i)for(var a=0;a<i.length;++a)n(i[a],e)}t=t||"children";var r=[];return n(e,null),r.root=e,r}var i=e("./json");t.exports=function(e,t){return e=i(e,t),r(e,t&&t.children)}},{"./json":16}],19:[function(e,t,n){function r(t){var n=t.url;if(!n&&t.file)return f+t.file;if(t.baseURL&&!c.test(n)&&(l(n,"/")||"/"===t.baseURL[t.baseURL.length-1]||(n="/"+n),n=t.baseURL+n),!i.useXHR&&l(n,"//")&&(n=(t.defaultProtocol||"http")+":"+n),t.domainWhiteList){var r,a;if(i.useXHR){var o=document.createElement("a");o.href=n,""===o.host&&(o.href=o.href),r=o.hostname.toLowerCase(),a=window.location.hostname}else{var s=e("url").parse(n);r=s.hostname,a=null}if(a!==r){var u=t.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t});if(!u)throw"URL is not whitelisted: "+n}}return n}function i(e,t){var n,r=t||function(e){throw e};try{n=i.sanitizeUrl(e)}catch(a){return void r(a)}return n?i.useXHR?o(n,t):l(n,f)?s(n.slice(f.length),t):n.indexOf("://")<0?s(n,t):u(n,t):void r("Invalid URL: "+e.url)}function a(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function o(e,t){function n(){var e=i.status;!e&&a(i)||e>=200&&300>e||304===e?t(null,i.responseText):t(i,null)}var r=!!t,i=new XMLHttpRequest;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(e)||(i=new XDomainRequest),r&&("onload"in i?i.onload=i.onerror=n:i.onreadystatechange=function(){i.readyState>3&&n()}),i.open("GET",e,r),i.send(),!r&&a(i)?i.responseText:void 0}function s(t,n){var r=e("fs");return n?void r.readFile(t,n):r.readFileSync(t,"utf8")}function u(t,n){if(!n)return e("sync-request")("GET",t).getBody();var r={url:t,encoding:null,gzip:!0};e("request")(r,function(e,t,r){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",n(e,null)):n(null,r)})}function l(e,t){return null==e?!1:0===e.lastIndexOf(t,0)}var c=/^([A-Za-z]+:)?\/\//,f="file://";i.sanitizeUrl=r,i.useXHR="undefined"!=typeof XMLHttpRequest,t.exports=i},{fs:1,request:1,"sync-request":1,url:1}],20:[function(e,t,n){function r(e,t){var n=t&&t.type||"json";return e=s[n](e,t),t&&t.parse&&i(e,t.parse),e}function i(e,t){var n,r,i,s,u,l,c=e.length;for(t="auto"===t?o.inferAll(e):a.duplicate(t),n=a.keys(t),r=n.map(function(e){return o.parsers[t[e]]}),s=0,l=n.length;c>s;++s)for(i=e[s],u=0;l>u;++u)i[n[u]]=r[u](i[n[u]]);o.annotation(e,t)}var a=e("../util"),o=e("./type"),s=e("./formats");r.formats=s,t.exports=r},{"../util":28,"./formats":15,"./type":22}],21:[function(e,t,n){var r=e("../util"),i=e("./load"),a=e("./read");t.exports=r.keys(a.formats).reduce(function(e,t){return e[t]=function(e,n,o){r.isString(e)&&(e={url:e}),2===arguments.length&&r.isFunction(n)&&(o=n,n=void 0),n=r.extend({parse:"auto"},n),n.type=t;var s=i(e,o?function(e,t){if(e)return void o(e,null);try{t=a(t,n),o(null,t)}catch(r){o(r,null)}}:void 0);return o?void 0:a(s,n)},e},{})},{"../util":28,"./load":19,"./read":20}],22:[function(e,t,n){function r(e,t){return t?void(e[l]=t):e&&e[l]||null}function i(e,t){t=u.$(t);var n,r,i;if(e[l]&&(n=t(e[l]),u.isString(n)))return n;for(r=0,i=e.length;!u.isValid(n)&&i>r;++r)n=t?t(e[r]):e[r];return u.isDate(n)?"date":u.isNumber(n)?"number":u.isBoolean(n)?"boolean":u.isString(n)?"string":null}function a(e,t){return e.length?(t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=i(e,n),t},{})):void 0}function o(e,t){t=u.$(t);var n,r,i,a=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(i=t?t(e[n]):e[n],r=0;r<a.length;++r)u.isValid(i)&&!f[a[r]](i)&&(a.splice(r,1),r-=1);if(0===a.length)return"string"}return a[0]}function s(e,t){return t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=o(e,n),t},{})}var u=e("../util"),l="__types__",c={"boolean":u["boolean"],integer:u.number,number:u.number,date:u.date,string:function(e){return""===e?null:e}},f={"boolean":function(e){return"true"===e||"false"===e||u.isBoolean(e)},integer:function(e){return f.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!u.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};i.annotation=r,i.all=a,i.infer=o,i.inferAll=s,i.parsers=c,t.exports=i},{"../util":28}],23:[function(e,t,n){var r=e("./util"),i={version:"1.4.6",load:e("./import/load"),read:e("./import/read"),type:e("./import/type"),Aggregator:e("./aggregate/aggregator"),groupby:e("./aggregate/groupby"),bins:e("./bins/bins"),$bin:e("./bins/histogram").$bin,histogram:e("./bins/histogram").histogram,format:e("./format"),print:e("./print"),template:e("./template"),time:e("./time")};r.extend(i,r),r.extend(i,e("./generate")),r.extend(i,e("./stats")),r.extend(i,e("./import/readers")),t.exports=i},{"./aggregate/aggregator":6,"./aggregate/groupby":8,"./bins/bins":10,"./bins/histogram":11,"./format":12,"./generate":13,"./import/load":19,"./import/read":20,"./import/readers":21,"./import/type":22,"./print":24,"./stats":25,"./template":26,"./time":27,"./util":28}],24:[function(e,t,n){function r(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function i(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=a.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(r).join("\n")}var a=e("./util"),o=e("./import/type"),s=e("./stats"),u=e("./template"),l={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},c={number:"left",integer:"left"};t.exports.table=function(e,t){t=a.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||a.keys(e[0]),r=o.all(e);if(t.start||t.limit){var i=t.start||0,f=t.limit?i+t.limit:e.length;e=e.slice(i,f)}var d=n.map(function(n){var i=l[r[n]]||"",a=u("{{"+n+i+"}}"),o=s.max(e,function(e){return a(e).length});return o=Math.max(Math.min(n.length,t.minwidth),o),t.maxwidth>0?Math.min(o,t.maxwidth):o}),h=n.map(function(e,t){return a.truncate(a.pad(e,d[t],"center"),d[t])}).join(t.separator),p=u(n.map(function(e,t){return"{{"+e+(l[r[e]]||"")+("|pad:"+d[t]+","+(c[r[e]]||"right"))+("|truncate:"+d[t])+"}}"}).join(t.separator));return h+"\n"+e.map(p).join("\n")},t.exports.summary=function(e){e=e?e.__summary__?e:s.summary(e):this;var t,n,a=[];for(t=0,n=e.length;n>t;++t)a.push("-- "+e[t].field+" --"),a.push("string"===e[t].type||e[t].distinct<10?i(e[t]):r(e[t])),a.push("");return a.join("\n")}},{"./import/type":22,"./stats":25,"./template":26,"./util":28}],25:[function(e,t,n){var r=e("./util"),i=e("./import/type"),a=e("./generate"),o={};o.unique=function(e,t,n){t=r.$(t),n=n||[];var i,a,o,s={};for(a=0,o=e.length;o>a;++a)i=t?t(e[a]):e[a],i in s||(s[i]=1,n.push(i));return n},o.count=function(e){return e&&e.length||0},o.count.valid=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],r.isValid(n)&&(o+=1);return o},o.count.missing=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],null==n&&(o+=1);return o},o.count.distinct=function(e,t){t=r.$(t);var n,i,a,o={},s=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],n in o||(o[n]=1,s+=1);return s},o.count.map=function(e,t){t=r.$(t);var n,i,a,o={};for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],o[n]=n in o?o[n]+1:1;return o},o.median=function(e,t){return t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp),o.quantile(e,.5)},o.quartile=function(e,t){t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp);var n=o.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},o.quantile=function(e,t,n){void 0===n&&(n=t,t=r.identity),t=r.$(t);var i=(e.length-1)*n+1,a=Math.floor(i),o=+t(e[a-1]),s=i-a;return s?o+s*(t(e[a])-o):o},o.sum=function(e,t){t=r.$(t);for(var n,i=0,a=0,o=e.length;o>a;++a)n=t?t(e[a]):e[a],r.isValid(n)&&(i+=n);return i},o.mean=function(e,t){t=r.$(t);var n,i,a,o,s,u=0;for(i=0,o=0,a=e.length;a>i;++i)s=t?t(e[i]):e[i],r.isValid(s)&&(n=s-u,u+=n/++o);return u},o.variance=function(e,t){if(t=r.$(t),!r.isArray(e)||e.length<2)return 0;var n,i,a,o,s=0,u=0;for(i=0,a=0;i<e.length;++i)o=t?t(e[i]):e[i],r.isValid(o)&&(n=o-s,s+=n/++a,u+=n*(o-s));return u/=a-1},o.stdev=function(e,t){return Math.sqrt(o.variance(e,t))},o.modeskew=function(e,t){var n=o.mean(e,t),r=o.median(e,t),i=o.stdev(e,t);return 0===i?0:(n-r)/i},o.min=function(e,t){return o.extent(e,t)[0]},o.max=function(e,t){return o.extent(e,t)[1]},o.extent=function(e,t){t=r.$(t);var n,i,a,o,s=e.length;for(o=0;s>o;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a;break}for(;s>o;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(n>a&&(n=a),a>i&&(i=a));return[n,i]},o.extent.index=function(e,t){t=r.$(t);var n,i,a,o,s=-1,u=-1,l=e.length;for(o=0;l>o;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a,s=u=o;break}for(;l>o;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(n>a&&(n=a,s=o),a>i&&(i=a,u=o));return[s,u]},o.dot=function(e,t,n){var i,a,o=0;if(n)for(t=r.$(t),n=r.$(n),i=0;i<e.length;++i)a=t(e[i])*n(e[i]),a===a&&(o+=a);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(i=0;i<e.length;++i)a=e[i]*t[i],a===a&&(o+=a)}return o},o.rank=function(e,t){t=r.$(t)||r.identity;var n,i,a,o=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(r.comparator("val")),s=e.length,u=Array(s),l=-1,c={};for(n=0;s>n;++n){if(i=o[n].val,0>l&&c===i)l=n-1;else if(l>-1&&c!==i){for(a=1+(n-1+l)/2;n>l;++l)u[o[l].idx]=a;l=-1}u[o[n].idx]=n+1,c=i}if(l>-1)for(a=1+(s-1+l)/2;s>l;++l)u[o[l].idx]=a;return u},o.cor=function(e,t,n){var i=n;n=i?e.map(r.$(n)):t,t=i?e.map(r.$(t)):e;var a=o.dot(t,n),s=o.mean(t),u=o.mean(n),l=o.stdev(t),c=o.stdev(n),f=e.length;return(a-f*s*u)/((f-1)*l*c)},o.cor.rank=function(e,t,n){var i,a,s,u=n?o.rank(e,r.$(t)):o.rank(e),l=n?o.rank(e,r.$(n)):o.rank(t),c=e.length;for(i=0,a=0;c>i;++i)s=u[i]-l[i],a+=s*s;return 1-6*a/(c*(c*c-1))},o.cor.dist=function(e,t,n){var i,a,s,u,l=n?e.map(r.$(t)):e,c=n?e.map(r.$(n)):t,f=o.dist.mat(l),d=o.dist.mat(c),h=f.length;for(i=0,a=0,s=0,u=0;h>i;++i)a+=f[i]*f[i],s+=d[i]*d[i],u+=f[i]*d[i];return Math.sqrt(u/Math.sqrt(a*s))},o.dist=function(e,t,n,i){var a,o,s=r.isFunction(n)||r.isString(n),u=e,l=s?e:t,c=s?i:n,f=2===c||null==c,d=e.length,h=0;for(s&&(t=r.$(t),n=r.$(n)),o=0;d>o;++o)a=s?t(u[o])-n(l[o]):u[o]-l[o],h+=f?a*a:Math.pow(Math.abs(a),c);return f?Math.sqrt(h):Math.pow(h,1/c)},o.dist.mat=function(e){var t,n,r,i=e.length,o=i*i,s=Array(o),u=a.zeros(i),l=0;for(n=0;i>n;++n)for(s[n*i+n]=0,r=n+1;i>r;++r)s[n*i+r]=t=Math.abs(e[n]-e[r]),s[r*i+n]=t,u[n]+=t,u[r]+=t;for(n=0;i>n;++n)l+=u[n],u[n]/=i;for(l/=o,n=0;i>n;++n)for(r=n;i>r;++r)s[n*i+r]+=l-u[n]-u[r],s[r*i+n]=s[n*i+r];return s},o.entropy=function(e,t){t=r.$(t);var n,i,a=0,o=0,s=e.length;for(n=0;s>n;++n)a+=t?t(e[n]):e[n];if(0===a)return 0;for(n=0;s>n;++n)i=(t?t(e[n]):e[n])/a,i&&(o+=i*Math.log(i));return-o/Math.LN2},o.mutual=function(e,t,n,i){var a,o,s,u=i?e.map(r.$(t)):e,l=i?e.map(r.$(n)):t,c=i?e.map(r.$(i)):n,f={},d={},h=c.length,p=0,g=0,m=0;for(s=0;h>s;++s)f[u[s]]=0,d[l[s]]=0;for(s=0;h>s;++s)f[u[s]]+=c[s],d[l[s]]+=c[s],p+=c[s];for(o=1/(p*Math.LN2),s=0;h>s;++s)0!==c[s]&&(a=p*c[s]/(f[u[s]]*d[l[s]]),g+=c[s]*o*Math.log(a),m+=c[s]*o*Math.log(c[s]/p));return[g,1+g/m]},o.mutual.info=function(e,t,n,r){return o.mutual(e,t,n,r)[0]},o.mutual.dist=function(e,t,n,r){return o.mutual(e,t,n,r)[1]},o.profile=function(e,t){var n,a,s,u,l,c=0,f=0,d=0,h=0,p=null,g=null,m=0,v=[],y={};for(s=0;s<e.length;++s)u=t?t(e[s]):e[s],y[u]=u in y?y[u]+1:(h+=1,1),null==u?++d:r.isValid(u)&&(l="string"==typeof u?u.length:u,(null===p||p>l)&&(p=l),(null===g||l>g)&&(g=l),n=l-c,c+=n/++f,m+=n*(l-c),v.push(l));return m/=f-1,a=Math.sqrt(m),v.sort(r.cmp),{type:i(e,t),unique:y,count:e.length,valid:f,missing:d,distinct:h,min:p,max:g,mean:c,stdev:a,median:u=o.quantile(v,.5),q1:o.quantile(v,.25),q3:o.quantile(v,.75),modeskew:0===a?0:(c-u)/a}},o.summary=function(e,t){t=t||r.keys(e[0]);var n=t.map(function(t){var n=o.profile(e,r.$(t));return n.field=t,n});return n.__summary__=!0,n},t.exports=o},{"./generate":13,"./import/type":22,"./util":28}],26:[function(e,t,n){function r(e){var t=i(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(c)}function i(e,t,n){t=t||"obj";var r=0,i="'",s=f;return e.replace(s,function(s,u,l){return i+=e.slice(r,l).replace(g,o),r=l+s.length,u&&(i+="'\n+((__t=("+a(u,t,n)+"))==null?'':__t)+\n'"),s}),i+"'"}function a(e,t,n){function i(e){return e=e||"",g?(g=!1,m="String("+m+")"+e):m+=e,m}function a(){return"(typeof "+m+'==="number"?new Date('+m+"):"+m+")"}function o(e,t){b=s(_[0],t,e),g=!1,m="this.formats["+b+"]("+m+")"}function c(e,t){b=s(_[0],t,e),g=!1,m="this.formats["+b+"]("+a()+")"}var f=e.match(d),p=f.shift().trim(),g=!0;n&&(n[p]=1);for(var m=r.property(t,p),v=0;v<f.length;++v){var y,b,x,w=f[v],_=null;switch((y=w.indexOf(":"))>0&&(w=w.slice(0,y),_=f[v].slice(y+1).match(h).map(function(e){return e.trim()})),w=w.trim()){case"length":i(".length");break;case"lower":i(".toLowerCase()");break;case"upper":i(".toUpperCase()");break;case"lower-locale":i(".toLocaleLowerCase()");break;case"upper-locale":i(".toLocaleUpperCase()");break;case"trim":i(".trim()");break;case"left":b=u.number(_[0]),i(".slice(0,"+b+")");break;case"right":b=u.number(_[0]),i(".slice(-"+b+")");break;case"mid":b=u.number(_[0]),x=b+u.number(_[1]),i(".slice(+"+b+","+x+")");break;case"slice":b=u.number(_[0]),i(".slice("+b+(_.length>1?","+u.number(_[1]):"")+")");break;case"truncate":b=u.number(_[0]),x=_[1],x="left"!==x&&"middle"!==x&&"center"!==x?"right":x,m="this.truncate("+i()+","+b+",'"+x+"')";break;case"pad":b=u.number(_[0]),x=_[1],x="left"!==x&&"middle"!==x&&"center"!==x?"right":x,m="this.pad("+i()+","+b+",'"+x+"')";

break;case"number":o(l.number,"number");break;case"time":c(l.time,"time");break;case"time-utc":c(l.utc,"time-utc");break;default:throw Error("Unrecognized template filter: "+w)}}return m}function o(e){return"\\"+p[e]}function s(e,t,n){if(!("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]))throw Error("Format pattern must be quoted: "+e);if(e=e.slice(1,-1),t=t+":"+e,!c.format_map[t]){var r=n(e),i=c.formats.length;c.formats.push(r),c.format_map[t]=i}return c.format_map[t]}var u=e("./util"),l=e("./format"),c={formats:[],format_map:{},truncate:u.truncate,pad:u.pad};r.source=i,r.context=c,t.exports=r,r.clearFormatCache=function(){c.formats=[],c.format_map={}},r.property=function(e,t){var n=u.field(t).map(u.str).join("][");return e+"["+n+"]"};var f=/\{\{(.+?)\}\}|$/g,d=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,h=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,p={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},g=/\\|'|\r|\n|\u2028|\u2029/g},{"./format":12,"./util":28}],27:[function(e,t,n){function r(e){return l.setTime(+e),l}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,s=p[0];for(i=1,a=p.length;a>i;++i)if(s=p[i],t>s[0]){if(o=t/s[0],o>r)return e[p[i-1][1]];if(o>=n)return e[s[1]]}return e[p[a-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var u=e("d3-time"),l=new Date,c=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),d=[a("second",u.second,c),a("minute",u.minute,c),a("hour",u.hour,c),a("day",u.day,c,[1,7]),a("month",u.month,c,[1,3,6]),a("year",u.year,c),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],h=[a("second",u.utcSecond,f),a("minute",u.utcMinute,f),a("hour",u.utcHour,f),a("day",u.utcDay,f,[1,7]),a("month",u.utcMonth,f,[1,3,6]),a("year",u.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],p=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=s(d),t.exports.utc=s(h)},{"d3-time":5}],28:[function(e,t,n){function r(e){return e.replace(d,"$1\\'")}function i(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function a(e,t,n){var r=0,i=e.split(p);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():i.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():i[0].slice(0,t)}var o=e("buffer"),s=e("./time"),u=s.utc,l=t.exports={},c="__name__";l.namedfunc=function(e,t){return t[c]=e,t},l.name=function(e){return null==e?null:e[c]},l.identity=function(e){return e},l["true"]=l.namedfunc("true",function(){return!0}),l["false"]=l.namedfunc("false",function(){return!1}),l.duplicate=function(e){return JSON.parse(JSON.stringify(e))},l.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},l.extend=function(e){for(var t,n,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},l.length=function(e){return null!=e&&null!=e.length?e.length:null},l.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},l.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},l.toMap=function(e,t){return(t=l.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},l.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var f=Object.prototype.toString;l.isObject=function(e){return e===Object(e)},l.isFunction=function(e){return"[object Function]"===f.call(e)},l.isString=function(e){return"string"==typeof value||"[object String]"===f.call(e)},l.isArray=Array.isArray||function(e){return"[object Array]"===f.call(e)},l.isNumber=function(e){return"number"==typeof e||"[object Number]"===f.call(e)},l.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},l.isDate=function(e){return"[object Date]"===f.call(e)},l.isValid=function(e){return null!=e&&e===e},l.isBuffer=o.Buffer&&o.Buffer.isBuffer||l["false"],l.number=function(e){return null==e||""===e?null:+e},l["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},l.date=function(e){return null==e||""===e?null:Date.parse(e)},l.array=function(e){return null!=e?l.isArray(e)?e:[e]:[]},l.str=function(e){return l.isArray(e)?"["+e.map(l.str)+"]":l.isObject(e)?JSON.stringify(e):l.isString(e)?"'"+r(e)+"'":e};var d=/(^|[^\\])'/g,h=/\[(.*?)\]|[^.\[]+/g;l.field=function(e){return String(e).match(h).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},l.accessor=function(e){var t;return null==e||l.isFunction(e)?e:l.namedfunc(e,(t=l.field(e)).length>1?function(e){return t.reduce(function(e,t){return e[t]},e)}:function(t){return t[e]})},l.$=l.accessor,l.mutator=function(e){var t;return l.isString(e)&&(t=l.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},l.$func=function(e,t){return function(n){n=l.$(n)||l.identity;var r=e+(l.name(n)?"_"+l.name(n):"");return l.namedfunc(r,function(e){return t(n(e))})}},l.$valid=l.$func("valid",l.isValid),l.$length=l.$func("length",l.length),l.$in=function(e,t){e=l.$(e);var n=l.isArray(t)?l.toMap(t):t;return function(t){return!!n[e(t)]}},l.$year=l.$func("year",s.year.unit),l.$month=l.$func("month",s.months.unit),l.$date=l.$func("date",s.dates.unit),l.$day=l.$func("day",s.weekdays.unit),l.$hour=l.$func("hour",s.hours.unit),l.$minute=l.$func("minute",s.minutes.unit),l.$second=l.$func("second",s.seconds.unit),l.$utcYear=l.$func("utcYear",u.year.unit),l.$utcMonth=l.$func("utcMonth",u.months.unit),l.$utcDate=l.$func("utcDate",u.dates.unit),l.$utcDay=l.$func("utcDay",u.weekdays.unit),l.$utcHour=l.$func("utcHour",u.hours.unit),l.$utcMinute=l.$func("utcMinute",u.minutes.unit),l.$utcSecond=l.$func("utcSecond",u.seconds.unit),l.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=l.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),l.accessor(e)}),function(n,r){var i,a,o,s,u;for(i=0,a=e.length;a>i;++i){if(o=e[i],s=o(n),u=o(r),u>s)return-1*t[i];if(s>u)return t[i]}return 0}},l.cmp=function(e,t){return t>e?-1:e>t?1:e>=t?0:null===e?-1:null===t?1:0/0},l.numcmp=function(e,t){return e-t},l.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return o>a?-1:a>o?1:r[n(e)]-r[n(i)]}),e},l.pad=function(e,t,n,r){r=r||" ";var a=t-e.length;if(0>=a)return e;switch(n){case"left":return i(a,r)+e;case"middle":case"center":return i(Math.floor(a/2),r)+e+i(Math.ceil(a/2),r);default:return e+i(a,r)}},l.truncate=function(e,t,n,r,i){var o=e.length;if(t>=o)return e;i=void 0!==i?String(i):"";var s=Math.max(0,t-i.length);switch(n){case"left":return i+(r?a(e,s,1):e.slice(o-s));case"middle":case"center":var u=Math.ceil(s/2),l=Math.floor(s/2);return(r?a(e,u):e.slice(0,u))+i+(r?a(e,l,1):e.slice(o-l));default:return(r?a(e,s):e.slice(0,s))+i}};var p=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/},{"./time":27,buffer:1}]},{},[23])(23)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.vl=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){},{}],2:[function(t,n,r){
// JavaScript specs as packaged in the D3 library (d3js.org). Please see license at http://colorbrewer.org/export/LICENSE.txt
!function(){var t={YlGn:{3:["#f7fcb9","#addd8e","#31a354"],4:["#ffffcc","#c2e699","#78c679","#238443"],5:["#ffffcc","#c2e699","#78c679","#31a354","#006837"],6:["#ffffcc","#d9f0a3","#addd8e","#78c679","#31a354","#006837"],7:["#ffffcc","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],8:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"],9:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"]},YlGnBu:{3:["#edf8b1","#7fcdbb","#2c7fb8"],4:["#ffffcc","#a1dab4","#41b6c4","#225ea8"],5:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"],6:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#2c7fb8","#253494"],7:["#ffffcc","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],8:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#0c2c84"],9:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"]},GnBu:{3:["#e0f3db","#a8ddb5","#43a2ca"],4:["#f0f9e8","#bae4bc","#7bccc4","#2b8cbe"],5:["#f0f9e8","#bae4bc","#7bccc4","#43a2ca","#0868ac"],6:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#43a2ca","#0868ac"],7:["#f0f9e8","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],8:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"],9:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"]},BuGn:{3:["#e5f5f9","#99d8c9","#2ca25f"],4:["#edf8fb","#b2e2e2","#66c2a4","#238b45"],5:["#edf8fb","#b2e2e2","#66c2a4","#2ca25f","#006d2c"],6:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#2ca25f","#006d2c"],7:["#edf8fb","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],8:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#005824"],9:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"]},PuBuGn:{3:["#ece2f0","#a6bddb","#1c9099"],4:["#f6eff7","#bdc9e1","#67a9cf","#02818a"],5:["#f6eff7","#bdc9e1","#67a9cf","#1c9099","#016c59"],6:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#1c9099","#016c59"],7:["#f6eff7","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],8:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016450"],9:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"]},PuBu:{3:["#ece7f2","#a6bddb","#2b8cbe"],4:["#f1eef6","#bdc9e1","#74a9cf","#0570b0"],5:["#f1eef6","#bdc9e1","#74a9cf","#2b8cbe","#045a8d"],6:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#2b8cbe","#045a8d"],7:["#f1eef6","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],8:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#034e7b"],9:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"]},BuPu:{3:["#e0ecf4","#9ebcda","#8856a7"],4:["#edf8fb","#b3cde3","#8c96c6","#88419d"],5:["#edf8fb","#b3cde3","#8c96c6","#8856a7","#810f7c"],6:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8856a7","#810f7c"],7:["#edf8fb","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],8:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#6e016b"],9:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"]},RdPu:{3:["#fde0dd","#fa9fb5","#c51b8a"],4:["#feebe2","#fbb4b9","#f768a1","#ae017e"],5:["#feebe2","#fbb4b9","#f768a1","#c51b8a","#7a0177"],6:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#c51b8a","#7a0177"],7:["#feebe2","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],8:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177"],9:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"]},PuRd:{3:["#e7e1ef","#c994c7","#dd1c77"],4:["#f1eef6","#d7b5d8","#df65b0","#ce1256"],5:["#f1eef6","#d7b5d8","#df65b0","#dd1c77","#980043"],6:["#f1eef6","#d4b9da","#c994c7","#df65b0","#dd1c77","#980043"],7:["#f1eef6","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],8:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#91003f"],9:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"]},OrRd:{3:["#fee8c8","#fdbb84","#e34a33"],4:["#fef0d9","#fdcc8a","#fc8d59","#d7301f"],5:["#fef0d9","#fdcc8a","#fc8d59","#e34a33","#b30000"],6:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#e34a33","#b30000"],7:["#fef0d9","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],8:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#990000"],9:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"]},YlOrRd:{3:["#ffeda0","#feb24c","#f03b20"],4:["#ffffb2","#fecc5c","#fd8d3c","#e31a1c"],5:["#ffffb2","#fecc5c","#fd8d3c","#f03b20","#bd0026"],6:["#ffffb2","#fed976","#feb24c","#fd8d3c","#f03b20","#bd0026"],7:["#ffffb2","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],8:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],9:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"]},YlOrBr:{3:["#fff7bc","#fec44f","#d95f0e"],4:["#ffffd4","#fed98e","#fe9929","#cc4c02"],5:["#ffffd4","#fed98e","#fe9929","#d95f0e","#993404"],6:["#ffffd4","#fee391","#fec44f","#fe9929","#d95f0e","#993404"],7:["#ffffd4","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],8:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#8c2d04"],9:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"]},Purples:{3:["#efedf5","#bcbddc","#756bb1"],4:["#f2f0f7","#cbc9e2","#9e9ac8","#6a51a3"],5:["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],6:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#756bb1","#54278f"],7:["#f2f0f7","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],8:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#4a1486"],9:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"]},Blues:{3:["#deebf7","#9ecae1","#3182bd"],4:["#eff3ff","#bdd7e7","#6baed6","#2171b5"],5:["#eff3ff","#bdd7e7","#6baed6","#3182bd","#08519c"],6:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#3182bd","#08519c"],7:["#eff3ff","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],8:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"],9:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"]},Greens:{3:["#e5f5e0","#a1d99b","#31a354"],4:["#edf8e9","#bae4b3","#74c476","#238b45"],5:["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"],6:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#31a354","#006d2c"],7:["#edf8e9","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],8:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"],9:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"]},Oranges:{3:["#fee6ce","#fdae6b","#e6550d"],4:["#feedde","#fdbe85","#fd8d3c","#d94701"],5:["#feedde","#fdbe85","#fd8d3c","#e6550d","#a63603"],6:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#e6550d","#a63603"],7:["#feedde","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],8:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#8c2d04"],9:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"]},Reds:{3:["#fee0d2","#fc9272","#de2d26"],4:["#fee5d9","#fcae91","#fb6a4a","#cb181d"],5:["#fee5d9","#fcae91","#fb6a4a","#de2d26","#a50f15"],6:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#de2d26","#a50f15"],7:["#fee5d9","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],8:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#99000d"],9:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"]},Greys:{3:["#f0f0f0","#bdbdbd","#636363"],4:["#f7f7f7","#cccccc","#969696","#525252"],5:["#f7f7f7","#cccccc","#969696","#636363","#252525"],6:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#636363","#252525"],7:["#f7f7f7","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],8:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525"],9:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"]},PuOr:{3:["#f1a340","#f7f7f7","#998ec3"],4:["#e66101","#fdb863","#b2abd2","#5e3c99"],5:["#e66101","#fdb863","#f7f7f7","#b2abd2","#5e3c99"],6:["#b35806","#f1a340","#fee0b6","#d8daeb","#998ec3","#542788"],7:["#b35806","#f1a340","#fee0b6","#f7f7f7","#d8daeb","#998ec3","#542788"],8:["#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788"],9:["#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788"],10:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],11:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"]},BrBG:{3:["#d8b365","#f5f5f5","#5ab4ac"],4:["#a6611a","#dfc27d","#80cdc1","#018571"],5:["#a6611a","#dfc27d","#f5f5f5","#80cdc1","#018571"],6:["#8c510a","#d8b365","#f6e8c3","#c7eae5","#5ab4ac","#01665e"],7:["#8c510a","#d8b365","#f6e8c3","#f5f5f5","#c7eae5","#5ab4ac","#01665e"],8:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e"],9:["#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e"],10:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],11:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"]},PRGn:{3:["#af8dc3","#f7f7f7","#7fbf7b"],4:["#7b3294","#c2a5cf","#a6dba0","#008837"],5:["#7b3294","#c2a5cf","#f7f7f7","#a6dba0","#008837"],6:["#762a83","#af8dc3","#e7d4e8","#d9f0d3","#7fbf7b","#1b7837"],7:["#762a83","#af8dc3","#e7d4e8","#f7f7f7","#d9f0d3","#7fbf7b","#1b7837"],8:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837"],9:["#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837"],10:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],11:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"]},PiYG:{3:["#e9a3c9","#f7f7f7","#a1d76a"],4:["#d01c8b","#f1b6da","#b8e186","#4dac26"],5:["#d01c8b","#f1b6da","#f7f7f7","#b8e186","#4dac26"],6:["#c51b7d","#e9a3c9","#fde0ef","#e6f5d0","#a1d76a","#4d9221"],7:["#c51b7d","#e9a3c9","#fde0ef","#f7f7f7","#e6f5d0","#a1d76a","#4d9221"],8:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221"],9:["#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221"],10:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],11:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"]},RdBu:{3:["#ef8a62","#f7f7f7","#67a9cf"],4:["#ca0020","#f4a582","#92c5de","#0571b0"],5:["#ca0020","#f4a582","#f7f7f7","#92c5de","#0571b0"],6:["#b2182b","#ef8a62","#fddbc7","#d1e5f0","#67a9cf","#2166ac"],7:["#b2182b","#ef8a62","#fddbc7","#f7f7f7","#d1e5f0","#67a9cf","#2166ac"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"]},RdGy:{3:["#ef8a62","#ffffff","#999999"],4:["#ca0020","#f4a582","#bababa","#404040"],5:["#ca0020","#f4a582","#ffffff","#bababa","#404040"],6:["#b2182b","#ef8a62","#fddbc7","#e0e0e0","#999999","#4d4d4d"],7:["#b2182b","#ef8a62","#fddbc7","#ffffff","#e0e0e0","#999999","#4d4d4d"],8:["#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d"],9:["#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d"],10:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],11:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"]},RdYlBu:{3:["#fc8d59","#ffffbf","#91bfdb"],4:["#d7191c","#fdae61","#abd9e9","#2c7bb6"],5:["#d7191c","#fdae61","#ffffbf","#abd9e9","#2c7bb6"],6:["#d73027","#fc8d59","#fee090","#e0f3f8","#91bfdb","#4575b4"],7:["#d73027","#fc8d59","#fee090","#ffffbf","#e0f3f8","#91bfdb","#4575b4"],8:["#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4"],9:["#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"]},Spectral:{3:["#fc8d59","#ffffbf","#99d594"],4:["#d7191c","#fdae61","#abdda4","#2b83ba"],5:["#d7191c","#fdae61","#ffffbf","#abdda4","#2b83ba"],6:["#d53e4f","#fc8d59","#fee08b","#e6f598","#99d594","#3288bd"],7:["#d53e4f","#fc8d59","#fee08b","#ffffbf","#e6f598","#99d594","#3288bd"],8:["#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd"],9:["#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd"],10:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],11:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"]},RdYlGn:{3:["#fc8d59","#ffffbf","#91cf60"],4:["#d7191c","#fdae61","#a6d96a","#1a9641"],5:["#d7191c","#fdae61","#ffffbf","#a6d96a","#1a9641"],6:["#d73027","#fc8d59","#fee08b","#d9ef8b","#91cf60","#1a9850"],7:["#d73027","#fc8d59","#fee08b","#ffffbf","#d9ef8b","#91cf60","#1a9850"],8:["#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850"],9:["#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850"],10:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],11:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"]},Accent:{3:["#7fc97f","#beaed4","#fdc086"],4:["#7fc97f","#beaed4","#fdc086","#ffff99"],5:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0"],6:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f"],7:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17"],8:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"]},Dark2:{3:["#1b9e77","#d95f02","#7570b3"],4:["#1b9e77","#d95f02","#7570b3","#e7298a"],5:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e"],6:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02"],7:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d"],8:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]},Paired:{3:["#a6cee3","#1f78b4","#b2df8a"],4:["#a6cee3","#1f78b4","#b2df8a","#33a02c"],5:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],6:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c"],7:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f"],8:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00"],9:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6"],10:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a"],11:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99"],12:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"]},Pastel1:{3:["#fbb4ae","#b3cde3","#ccebc5"],4:["#fbb4ae","#b3cde3","#ccebc5","#decbe4"],5:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6"],6:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc"],7:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd"],8:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"],9:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pastel2:{3:["#b3e2cd","#fdcdac","#cbd5e8"],4:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4"],5:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9"],6:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae"],7:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc"],8:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"]},Set1:{3:["#e41a1c","#377eb8","#4daf4a"],4:["#e41a1c","#377eb8","#4daf4a","#984ea3"],5:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],6:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33"],7:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628"],8:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf"],9:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"]},Set2:{3:["#66c2a5","#fc8d62","#8da0cb"],4:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"],5:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854"],6:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],7:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494"],8:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"]},Set3:{3:["#8dd3c7","#ffffb3","#bebada"],4:["#8dd3c7","#ffffb3","#bebada","#fb8072"],5:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3"],6:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462"],7:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69"],8:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5"],9:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9"],10:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],11:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5"],12:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"]}};"function"==typeof e&&e.amd?e(t):"object"==typeof n&&n.exports?n.exports=t:this.colorbrewer=t}()},{}],3:[function(e,t,n){t.exports=e("./colorbrewer.js")},{"./colorbrewer.js":2}],4:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.color={})}(this,function(e){"use strict";function t(e,t){var n=e-t;return n>180||-180>n?n-360*Math.round(n/360):n}function n(){}function r(e){var t;return e=(e+"").trim().toLowerCase(),(t=E.exec(e))?(t=parseInt(t[1],16),a(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t)):(t=A.exec(e))?i(parseInt(t[1],16)):(t=O.exec(e))?a(t[1],t[2],t[3]):(t=D.exec(e))?a(255*t[1]/100,255*t[2]/100,255*t[3]/100):(t=L.exec(e))?u(t[1],t[2]/100,t[3]/100):N.hasOwnProperty(e)?i(N[e]):null}function i(e){return a(e>>16&255,e>>8&255,255&e)}function a(e,t,i){return 1===arguments.length&&(e instanceof n||(e=r(e)),e?(e=e.rgb(),i=e.b,t=e.g,e=e.r):e=t=i=0/0),new o(e,t,i)}function o(e,t,n){this.r=+e,this.g=+t,this.b=+n}function s(e,t,n){return"#"+(isNaN(e)?"00":(e=Math.round(e))<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16))+(isNaN(t)?"00":(t=Math.round(t))<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16))+(isNaN(n)?"00":(n=Math.round(n))<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16))}function u(e,t,i){if(1===arguments.length)if(e instanceof l)i=e.l,t=e.s,e=e.h;else if(e instanceof n||(e=r(e)),e){if(e instanceof l)return e;e=e.rgb();var a=e.r/255,o=e.g/255,s=e.b/255,u=Math.min(a,o,s),c=Math.max(a,o,s),f=c-u;i=(c+u)/2,f?(t=.5>i?f/(c+u):f/(2-c-u),e=a===c?(o-s)/f+6*(s>o):o===c?(s-a)/f+2:(a-o)/f+4,e*=60):(e=0/0,t=i>0&&1>i?0:e)}else e=t=i=0/0;return new l(e,t,i)}function l(e,t,n){this.h=+e,this.s=+t,this.l=+n}function c(e,t,n){return 255*(60>e?t+(n-t)*e/60:180>e?n:240>e?t+(n-t)*(240-e)/60:t)}function f(e,t,n){if(1===arguments.length)if(e instanceof d)n=e.b,t=e.a,e=e.l;else if(e instanceof y){var r=e.h*G;n=Math.sin(r)*e.c,t=Math.cos(r)*e.c,e=e.l}else{e instanceof o||(e=a(e));var i=m(e.r),s=m(e.g),n=m(e.b),u=h((.4124564*i+.3575761*s+.1804375*n)/U),l=h((.2126729*i+.7151522*s+.072175*n)/z),c=h((.0193339*i+.119192*s+.9503041*n)/q);n=200*(l-c),t=500*(u-l),e=116*l-16}return new d(e,t,n)}function d(e,t,n){this.l=+e,this.a=+t,this.b=+n}function h(e){return e>V?Math.pow(e,1/3):e/Y+H}function p(e){return e>B?e*e*e:Y*(e-H)}function g(e){return 255*(.0031308>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function m(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function v(e,t,n){return 1===arguments.length&&(e instanceof y?(n=e.l,t=e.c,e=e.h):(e instanceof d||(e=f(e)),n=e.l,t=Math.sqrt(e.a*e.a+e.b*e.b),e=Math.atan2(e.b,e.a)*X,0>e&&(e+=360))),new y(e,t,n)}function y(e,t,n){this.h=+e,this.c=+t,this.l=+n}function b(e,t,n){if(1===arguments.length)if(e instanceof x)n=e.l,t=e.s,e=e.h;else{e instanceof o||(e=a(e));var r=e.r/255,i=e.g/255,s=e.b/255;n=(ie*s+ne*r-re*i)/(ie+ne-re);var u=s-n,l=(te*(i-n)-Q*u)/ee;t=Math.sqrt(l*l+u*u)/(te*n*(1-n)),e=t?Math.atan2(l,u)*X-120:0/0,0>e&&(e+=360)}return new x(e,t,n)}function x(e,t,n){this.h=+e,this.s=+t,this.l=+n}function w(e){return function(n,r){n=b(n),r=b(r);var i=isNaN(n.h)?r.h:n.h,a=isNaN(n.s)?r.s:n.s,o=n.l,s=isNaN(r.h)?0:t(r.h,i),u=isNaN(r.s)?0:r.s-a,l=r.l-o;return function(t){return n.h=i+s*t,n.s=a+u*t,n.l=o+l*Math.pow(t,e),n+""}}}function _(e){return function(t,n){t=b(t),n=b(n);var r=isNaN(t.h)?n.h:t.h,i=isNaN(t.s)?n.s:t.s,a=t.l,o=isNaN(n.h)?0:n.h-r,s=isNaN(n.s)?0:n.s-i,u=n.l-a;return function(n){return t.h=r+o*n,t.s=i+s*n,t.l=a+u*Math.pow(n,e),t+""}}}function k(e,t){e=v(e),t=v(t);var n=isNaN(e.h)?t.h:e.h,r=isNaN(e.c)?t.c:e.c,i=e.l,a=isNaN(t.h)?0:t.h-n,o=isNaN(t.c)?0:t.c-r,s=t.l-i;return function(t){return e.h=n+a*t,e.c=r+o*t,e.l=i+s*t,e+""}}function $(e,n){e=v(e),n=v(n);var r=isNaN(e.h)?n.h:e.h,i=isNaN(e.c)?n.c:e.c,a=e.l,o=isNaN(n.h)?0:t(n.h,r),s=isNaN(n.c)?0:n.c-i,u=n.l-a;return function(t){return e.h=r+o*t,e.c=i+s*t,e.l=a+u*t,e+""}}function S(e,t){e=f(e),t=f(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(t){return e.l=n+a*t,e.a=r+o*t,e.b=i+s*t,e+""}}function M(e,t){e=u(e),t=u(t);var n=isNaN(e.h)?t.h:e.h,r=isNaN(e.s)?t.s:e.s,i=e.l,a=isNaN(t.h)?0:t.h-n,o=isNaN(t.s)?0:t.s-r,s=t.l-i;return function(t){return e.h=n+a*t,e.s=r+o*t,e.l=i+s*t,e+""}}function T(e,n){e=u(e),n=u(n);var r=isNaN(e.h)?n.h:e.h,i=isNaN(e.s)?n.s:e.s,a=e.l,o=isNaN(n.h)?0:t(n.h,r),s=isNaN(n.s)?0:n.s-i,l=n.l-a;return function(t){return e.h=r+o*t,e.s=i+s*t,e.l=a+l*t,e+""}}function C(e,t){e=a(e),t=a(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,u=t.g-r,l=t.b-i;return function(e){return s(Math.round(n+o*e),Math.round(r+u*e),Math.round(i+l*e))}}var E=/^#([0-9a-f]{3})$/,A=/^#([0-9a-f]{6})$/,O=/^rgb\(\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*,\s*([-+]?\d+)\s*\)$/,D=/^rgb\(\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/,L=/^hsl\(\s*([-+]?\d+(?:\.\d+)?)\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*,\s*([-+]?\d+(?:\.\d+)?)%\s*\)$/;r.prototype=n.prototype={displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}};var N={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},j=.7,P=1/j,R=a.prototype=o.prototype=new n;R.brighter=function(e){return e=null==e?P:Math.pow(P,e),new o(this.r*e,this.g*e,this.b*e)},R.darker=function(e){return e=null==e?j:Math.pow(j,e),new o(this.r*e,this.g*e,this.b*e)},R.rgb=function(){return this},R.displayable=function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255},R.toString=function(){return s(this.r,this.g,this.b)};var I=u.prototype=l.prototype=new n;I.brighter=function(e){return e=null==e?P:Math.pow(P,e),new l(this.h,this.s,this.l*e)},I.darker=function(e){return e=null==e?j:Math.pow(j,e),new l(this.h,this.s,this.l*e)},I.rgb=function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(.5>n?n:1-n)*t,i=2*n-r;return new o(c(e>=240?e-240:e+120,i,r),c(e,i,r),c(120>e?e+240:e-120,i,r))},I.displayable=function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1};var F=18,U=.95047,z=1,q=1.08883,H=4/29,B=6/29,Y=3*B*B,V=B*B*B,W=f.prototype=d.prototype=new n;W.brighter=function(e){return new d(this.l+F*(null==e?1:e),this.a,this.b)},W.darker=function(e){return new d(this.l-F*(null==e?1:e),this.a,this.b)},W.rgb=function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=z*p(e),t=U*p(t),n=q*p(n),new o(g(3.2404542*t-1.5371385*e-.4985314*n),g(-.969266*t+1.8760108*e+.041556*n),g(.0556434*t-.2040259*e+1.0572252*n))};var G=Math.PI/180,X=180/Math.PI,J=v.prototype=y.prototype=new n;J.brighter=function(e){return new y(this.h,this.c,this.l+F*(null==e?1:e))},J.darker=function(e){return new y(this.h,this.c,this.l-F*(null==e?1:e))},J.rgb=function(){return f(this).rgb()};var K=-.14861,Z=1.78277,Q=-.29227,ee=-.90649,te=1.97294,ne=te*ee,re=te*Z,ie=Z*Q-ee*K,ae=b.prototype=x.prototype=new n;ae.brighter=function(e){return e=null==e?P:Math.pow(P,e),new x(this.h,this.s,this.l*e)},ae.darker=function(e){return e=null==e?j:Math.pow(j,e),new x(this.h,this.s,this.l*e)},ae.rgb=function(){var e=isNaN(this.h)?0:(this.h+120)*G,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new o(255*(t+n*(K*r+Z*i)),255*(t+n*(Q*r+ee*i)),255*(t+n*te*r))},e.interpolateCubehelix=w(1),e.interpolateCubehelixLong=_(1),e.color=r,e.rgb=a,e.hsl=u,e.lab=f,e.hcl=v,e.cubehelix=b,e.interpolateRgb=C,e.interpolateHsl=T,e.interpolateHslLong=M,e.interpolateLab=S,e.interpolateHcl=$,e.interpolateHclLong=k,e.interpolateCubehelixGamma=w,e.interpolateCubehelixGammaLong=_})},{}],5:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.format={})}(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:0/0}function r(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1],o=a-(g=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+t(e,n+o-1)[0]}function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return 0>a?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function a(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,a=-1;r>i;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e}function o(e){return new s(e)}function s(e){if(!(t=j.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],u=!!t[7],l=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(u=!0,c="g"):N[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=u,this.precision=l,this.type=c}function u(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function l(e){return e}function c(e){function t(e){e=o(e);var t=e.fill,n=e.align,r=e.sign,u=e.symbol,l=e.zero,c=e.width,f=e.comma,d=e.precision,h=e.type,p="$"===u?a[0]:"#"===u&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",m="$"===u?a[1]:/[%p]/.test(h)?"%":"",v=N[h],y=!h||/[defgprs%]/.test(h);return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),function(e){var a=p,o=m;if("c"===h)o=v(e)+o,e="";else{e=+e;var u=(0>e||0>1/e)&&(e*=-1,!0);if(e=v(e,d),a=(u?"("===r?r:"-":"-"===r||"("===r?"":r)+a,o=o+("s"===h?P[8+g/3]:"")+(u&&"("===r?")":""),y)for(var b,x=-1,w=e.length;++x<w;)if(b=e.charCodeAt(x),48>b||b>57){o=(46===b?s+e.slice(x+1):e.slice(x))+o,e=e.slice(0,x);break}}f&&!l&&(e=i(e,1/0));var _=a.length+e.length+o.length,k=c>_?new Array(c-_+1).join(t):"";switch(f&&l&&(e=i(k+e,k.length?c-o.length:1/0),k=""),n){case"<":return a+e+o+k;case"=":return a+k+e+o;case"^":return k.slice(0,_=k.length>>1)+a+e+o+k.slice(_)}return k+a+e+o}}function r(e,r){var i=t((e=o(e),e.type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),s=Math.pow(10,-a),u=P[8+a/3];return function(e){return i(s*e)+u}}var i=e.grouping&&e.thousands?u(e.grouping,e.thousands):l,a=e.currency,s=e.decimal;return{format:t,formatPrefix:r}}function f(e,t){return Math.max(0,n(Math.abs(t))-n(Math.abs(e)))+1}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function h(e){return Math.max(0,-n(Math.abs(e)))}function p(e){if("string"==typeof e){if(!R.hasOwnProperty(e))return null;e=R[e]}return c(e)}var g,m={decimal:".",thousands:",",grouping:[3],currency:["",""]},v={decimal:",",thousands:"",grouping:[3],currency:["","."]},y={decimal:",",thousands:".",grouping:[3],currency:["R$",""]},b={decimal:",",thousands:".",grouping:[3],currency:["","z"]},x={decimal:",",thousands:".",grouping:[3],
currency:["",""]},w={decimal:",",thousands:".",grouping:[3],currency:["","."]},_={decimal:".",thousands:",",grouping:[3],currency:["",""]},k={decimal:",",thousands:".",grouping:[3],currency:["",""]},$={decimal:".",thousands:",",grouping:[3],currency:["",""]},S={decimal:",",thousands:".",grouping:[3],currency:["",""]},M={decimal:",",thousands:"",grouping:[3],currency:["","$"]},T={decimal:",",thousands:"",grouping:[3],currency:["",""]},C={decimal:",",thousands:".",grouping:[3],currency:["",""]},E={decimal:".",thousands:",",grouping:[3],currency:["$",""]},A={decimal:".",thousands:",",grouping:[3],currency:["",""]},O={decimal:".",thousands:",",grouping:[3],currency:["$",""]},D={decimal:",",thousands:".",grouping:[3],currency:["",""]},L={decimal:",",thousands:".",grouping:[3],currency:["",""]},N={"":a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return i(100*e,t)},r:i,s:r,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},j=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var P=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],R={"ca-ES":L,"de-DE":D,"en-CA":O,"en-GB":A,"en-US":E,"es-ES":C,"fi-FI":T,"fr-CA":M,"fr-FR":S,"he-IL":$,"it-IT":k,"ja-JP":_,"mk-MK":w,"nl-NL":x,"pl-PL":b,"pt-BR":y,"ru-RU":v,"zh-CN":m},I=c(E);e.format=I.format,e.formatPrefix=I.formatPrefix,e.localeFormat=p,e.formatSpecifier=o,e.precisionFixed=h,e.precisionPrefix=d,e.precisionRound=f})},{}],6:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.timeFormat={})}(this,function(e){"use strict";function t(e,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},i.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},i.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},i.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},i.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(i.count=function(t,n){return we.setTime(+t),_e.setTime(+n),e(we),e(_e),Math.floor(r(we,_e))}),i}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}function i(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function s(e){function t(e,t){return function(n){for(var r,i,a,o=[],s=-1,u=0,l=e.length;++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=Oe[r=e.charAt(++s)])&&(r=e.charAt(++s)),(a=t[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function n(e,t){return function(n){var i=o(1900),s=r(i,e,n,0);if(s!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"Z"in i){if("w"in i&&("W"in i||"U"in i)){var u=a(o(i.y)).getUTCDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return i.H+=i.Z/100|0,i.M+=i.Z%100,a(i)}if("w"in i&&("W"in i||"U"in i)){var u=t(o(i.y)).getDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return t(i)}}function r(e,t,n,r){for(var i,a,o=0,s=t.length,u=n.length;s>o;){if(r>=u)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Pe[i in Oe?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=Te.exec(t.slice(n));return r?(e.w=Ce[r[0].toLowerCase()],n+r[0].length):-1}function u(e,t,n){var r=Se.exec(t.slice(n));return r?(e.w=Me[r[0].toLowerCase()],n+r[0].length):-1}function l(e,t,n){var r=De.exec(t.slice(n));return r?(e.m=Le[r[0].toLowerCase()],n+r[0].length):-1}function te(e,t,n){var r=Ee.exec(t.slice(n));return r?(e.m=Ae[r[0].toLowerCase()],n+r[0].length):-1}function ne(e,t,n){return r(e,me,t,n)}function re(e,t,n){return r(e,ve,t,n)}function ie(e,t,n){return r(e,ye,t,n)}function ae(e,t,n){var r=$e[t.slice(n,n+=2).toLowerCase()];return null==r?-1:(e.p=r,n)}function oe(e){return we[e.getDay()]}function se(e){return xe[e.getDay()]}function ue(e){return ke[e.getMonth()]}function le(e){return _e[e.getMonth()]}function ce(e){return be[+(e.getHours()>=12)]}function fe(e){return we[e.getUTCDay()]}function de(e){return xe[e.getUTCDay()]}function he(e){return ke[e.getUTCMonth()]}function pe(e){return _e[e.getUTCMonth()]}function ge(e){return be[+(e.getUTCHours()>=12)]}var me=e.dateTime,ve=e.date,ye=e.time,be=e.periods,xe=e.days,we=e.shortDays,_e=e.months,ke=e.shortMonths,$e=f(be),Se=c(xe),Me=f(xe),Te=c(we),Ce=f(we),Ee=c(_e),Ae=f(_e),De=c(ke),Le=f(ke),Ne={a:oe,A:se,b:ue,B:le,c:null,d:M,e:M,H:T,I:C,j:E,L:A,m:O,M:D,p:ce,S:L,U:N,w:j,W:P,x:null,X:null,y:R,Y:I,Z:F,"%":ee},je={a:fe,A:de,b:he,B:pe,c:null,d:U,e:U,H:z,I:q,j:H,L:B,m:Y,M:V,p:ge,S:W,U:G,w:X,W:J,x:null,X:null,y:K,Y:Z,Z:Q,"%":ee},Pe={a:s,A:u,b:l,B:te,c:ne,d:b,e:b,H:w,I:w,j:x,L:$,m:y,M:_,p:ae,S:k,U:h,w:d,W:p,x:re,X:ie,y:m,Y:g,Z:v,"%":S};return Ne.x=t(ve,Ne),Ne.X=t(ye,Ne),Ne.c=t(me,Ne),je.x=t(ve,je),je.X=t(ye,je),je.c=t(me,je),{format:function(e){var r=t(e+="",Ne);return r.parse=n(e,i),r.toString=function(){return e},r},utcFormat:function(e){var r=t(e+="",je);return r.parse=n(e,a),r.toString=function(){return e},r}}}function u(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function l(e){return e.replace(Ne,"\\$&")}function c(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function f(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function d(e,t,n){var r=De.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function h(e,t,n){var r=De.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function p(e,t,n){var r=De.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function g(e,t,n){var r=De.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function m(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(e,t,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:r[3]?-(r[2]+r[3]):100*-r[2],n+r[0].length):-1}function y(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function x(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function w(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function k(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=Le.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function M(e,t){return u(e.getDate(),t,2)}function T(e,t){return u(e.getHours(),t,2)}function C(e,t){return u(e.getHours()%12||12,t,2)}function E(e,t){return u(1+ke.count(Me(e),e),t,3)}function A(e,t){return u(e.getMilliseconds(),t,3)}function O(e,t){return u(e.getMonth()+1,t,2)}function D(e,t){return u(e.getMinutes(),t,2)}function L(e,t){return u(e.getSeconds(),t,2)}function N(e,t){return u($e.count(Me(e),e),t,2)}function j(e){return e.getDay()}function P(e,t){return u(Se.count(Me(e),e),t,2)}function R(e,t){return u(e.getFullYear()%100,t,2)}function I(e,t){return u(e.getFullYear()%1e4,t,4)}function F(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function U(e,t){return u(e.getUTCDate(),t,2)}function z(e,t){return u(e.getUTCHours(),t,2)}function q(e,t){return u(e.getUTCHours()%12||12,t,2)}function H(e,t){return u(1+Te.count(Ae(e),e),t,3)}function B(e,t){return u(e.getUTCMilliseconds(),t,3)}function Y(e,t){return u(e.getUTCMonth()+1,t,2)}function V(e,t){return u(e.getUTCMinutes(),t,2)}function W(e,t){return u(e.getUTCSeconds(),t,2)}function G(e,t){return u(Ce.count(Ae(e),e),t,2)}function X(e){return e.getUTCDay()}function J(e,t){return u(Ee.count(Ae(e),e),t,2)}function K(e,t){return u(e.getUTCFullYear()%100,t,2)}function Z(e,t){return u(e.getUTCFullYear()%1e4,t,4)}function Q(){return"+0000"}function ee(){return"%"}function te(e){return e.toISOString()}function ne(e){if("string"==typeof e){if(!Ie.hasOwnProperty(e))return null;e=Ie[e]}return s(e)}var re={dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ie={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ae={dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},oe={dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","r.","Czw.","Pt.","Sob."],months:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Padz.","Listop.","Grudz."]},se={dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]},ue={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},le={dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},ce={dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]},fe={dateTime:"%A, %e %B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},de={dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]},he={dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["jan","fv","mar","avr","mai","jui","jul","ao","sep","oct","nov","dc"]},pe={dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes","Hein","Elo","Syys","Loka","Marras","Joulu"]},ge={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},me={dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ve={dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ye={dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},be={dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},xe={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]},we=new Date,_e=new Date,ke=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),$e=n(0),Se=n(1),Me=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()}),Te=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5}),Ce=r(0),Ee=r(1),Ae=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),Oe={"-":"",_:" ",0:"0"},De=/^\s*\d+/,Le=/^%/,Ne=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,je="%Y-%m-%dT%H:%M:%S.%LZ";te.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},te.toString=function(){return je};var Pe=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?te:me.utcFormat(je),Re=Pe,Ie={"ca-ES":xe,"de-DE":be,"en-CA":ye,"en-GB":ve,"en-US":me,"es-ES":ge,"fi-FI":pe,"fr-CA":he,"fr-FR":de,"he-IL":fe,"it-IT":ce,"ja-JP":le,"mk-MK":ue,"nl-NL":se,"pl-PL":oe,"pt-BR":ae,"ru-RU":ie,"zh-CN":re},Fe=s(me);e.format=Fe.format,e.utcFormat=Fe.utcFormat,e.localeFormat=ne,e.isoFormat=Re})},{}],7:[function(e,t,n){"use strict";e("./globals");var r=e("./consts"),i=e("./util"),a=e("./encdef"),o=e("./enc"),s=e("./schema/schema");t.exports=function(){function e(e,t){var n=s.instantiate(),r=s.util.merge(n,t||{},e);this._data=r.data,this._marktype=r.marktype,this._enc=r.encoding,this._config=r.config}var t=e.prototype;return e.fromShorthand=function(t,n,i,a){var s=r.shorthand,u=t.split(s.delim),l=u.shift().split(s.assign)[1].trim(),c=o.fromShorthand(u);return new e({data:n,marktype:l,encoding:c,config:i},a)},e.fromSpec=function(t,n){return new e(t,n)},t.toShorthand=function(){var e=r.shorthand;return"mark"+e.assign+this._marktype+e.delim+o.shorthand(this._enc)},e.shorthand=function(e){var t=r.shorthand;return"mark"+t.assign+e.marktype+t.delim+o.shorthand(e.encoding)},e.specFromShorthand=function(t,n,r,i){return e.fromShorthand(t,n,r).toSpec(i)},t.toSpec=function(e,t){var n,r=i.duplicate(this._enc);n={marktype:this._marktype,encoding:r},e||(n.config=i.duplicate(this._config)),t||(n.data=i.duplicate(this._data));var a=s.instantiate();return s.util.subtract(n,a)},t.marktype=function(){return this._marktype},t.is=function(e){return this._marktype===e},t.has=function(e){return void 0!==this._enc[e].name},t.encDef=function(e){return this._enc[e]},t.fieldRef=function(e,t){return t=t||{},a.fieldRef(this._enc[e],t)},t.fields=function(){return o.fields(this._enc)},t.fieldTitle=function(e){if(a.isCount(this._enc[e]))return a.count.displayName;var t=this._enc[e].aggregate||this._enc[e].timeUnit||this._enc[e].bin&&"bin";return t?t.toUpperCase()+"("+this._enc[e].name+")":this._enc[e].name},t.scale=function(e){return this._enc[e].scale||{}},t.axis=function(e){return this._enc[e].axis||{}},t.bandSize=function(e,t){return t=t||e===Y&&this.has(ROW)&&this.has(Y)||e===X&&this.has(COL)&&this.has(X),this.encDef(e).band.size||this.config(t?"smallBandSize":"largeBandSize")},t.bin=function(e){var t=this._enc[e].bin;return t==={}?!1:t===!0?{maxbins:s.MAXBINS_DEFAULT}:t},t.value=function(e){return this._enc[e].value},t.numberFormat=function(e){var t=e.max>this.config("maxSmallNumber")?"largeNumberFormat":"smallNumberFormat";return this.config(t)},t.sort=function(t,n){var r=this._enc[t].sort,i=this._enc,o=a.isTypes;if((!r||0===r.length)&&e.toggleSort.support({encoding:this._enc},n,!0)&&this.config("toggleSort")===Q){var s=o(i.x,[N,O])?i.y:i.x;o(i[t],[N,O])&&(r=[{name:s.name,aggregate:s.aggregate,type:s.type,reverse:!0}])}return r},t.map=function(e){return o.map(this._enc,e)},t.reduce=function(e,t){return o.reduce(this._enc,e,t)},t.forEach=function(e){return o.forEach(this._enc,e)},t.type=function(e){return this.has(e)?this._enc[e].type:null},t.isType=function(e,t){var n=this.encDef(e);return n&&a.isType(n,t)},t.isTypes=function(e,t){var n=this.encDef(e);return n&&a.isTypes(n,t)},e.isOrdinalScale=function(e,t){return a.isOrdinalScale(e.encDef(t))},e.isDimension=function(e,t){return a.isDimension(e.encDef(t))},e.isMeasure=function(e,t){return a.isMeasure(e.encDef(t))},t.isOrdinalScale=function(t){return this.has(t)&&e.isOrdinalScale(this,t)},t.isDimension=function(t){return this.has(t)&&e.isDimension(this,t)},t.isMeasure=function(t){return this.has(t)&&e.isMeasure(this,t)},t.isAggregate=function(){return o.isAggregate(this._enc)},t.dataTable=function(){return this.isAggregate()?AGGREGATE:RAW},e.isAggregate=function(e){return o.isAggregate(e.encoding)},e.alwaysNoOcclusion=function(e){return o.isAggregate(e.encoding)},e.isStack=function(e){return("bar"===e.marktype||"area"===e.marktype)&&e.encoding.color},t.stack=function(){var e=this.has(COLOR)&&this.encDef(COLOR).stack?COLOR:this.has(DETAIL)&&this.encDef(DETAIL).stack?DETAIL:null,t=e&&this.encDef(e).stack!==!0?this.encDef(e).stack:{};if((this.is("bar")||this.is("area"))&&e&&this.isAggregate()){var n=this.isMeasure(X),r=this.isMeasure(Y);if(n&&!r)return{groupby:Y,value:X,stack:e,properties:t};if(r&&!n)return{groupby:X,value:Y,stack:e,properties:t}}return null},t.details=function(){var e=this;return this.reduce(function(t,n,r){return n.aggregate||r===X||r===Y||t.push(e.fieldRef(r)),t},[])},t.facets=function(){var e=this;return this.reduce(function(t,n,r){return n.aggregate||r!=ROW&&r!=COL||t.push(e.fieldRef(r)),t},[])},t.cardinality=function(e,t){return a.cardinality(this.encDef(e),t,this.config("filterNull"))},t.isRaw=function(){return!this.isAggregate()},t.data=function(){return this._data},t.hasValues=function(){var e=this.data().values;return e&&e.length},t.config=function(e){return this._config[e]},e.transpose=function(e){var t=e.encoding,n=i.duplicate(e.encoding);return n.x=t.y,n.y=t.x,n.row=t.col,n.col=t.row,e.encoding=n,e},e}()},{"./consts":20,"./enc":22,"./encdef":23,"./globals":24,"./schema/schema":26,"./util":28}],8:[function(e,t,n){"use strict";e("../globals");var r=e("../util"),i=r.setter,a=r.getter,o=e("./time"),s=t.exports={};s.def=function(e,t,n,r,i){var o=e==COL,u=e==ROW,l=o?"x":u?"y":e,c={type:l,scale:e,properties:{},layer:t.encDef(e).axis.layer},f=s.orient(t,e,r);return f&&(c.orient=f),c=s.labels.scale(c,t,e),c=s.labels.format(c,t,e,r),c=s.labels.angle(c,t,e),e==X&&(!t.isDimension(X)&&!t.isType(X,T)||"angle"in a(c,["properties","labels"])?c.ticks=t.encDef(e).axis.ticks:c=s.labels.rotate(c)),c.titleOffset=s.titleOffset(t,n,e),u&&(c.offset=s.titleOffset(t,n,Y)+20),c=s.grid(c,t,e,n),c=s.title(c,t,e,n,i),(u||o)&&(c=s.hideTicks(c)),c},s.orient=function(e,t,n){var r=e.encDef(t).axis.orient;return r?r:t===COL?"top":t===X&&e.has(Y)&&e.isOrdinalScale(Y)&&e.cardinality(Y,n)>30?"top":void 0},s.grid=function(e,t,n,r){var i=r.cellPadding,a=n==COL,o=n==ROW,s=t.axis(n).grid,u=void 0===s?n===ROW||n===COL||t.isTypes(n,[Q,T])&&!t.encDef(n).bin:s;if(u)if(e.grid=!0,a){var l=t.config("cellGridOffset");e.properties.grid={x:{offset:r.cellWidth*(1+i/2),scale:"col",field:"data"},y:{value:-l},y2:{field:{group:"mark.group.height"},offset:l},stroke:{value:t.config("cellGridColor")},strokeOpacity:{value:t.config("cellGridOpacity")}}}else if(o){var c=t.config("cellGridOffset");e.properties.grid={y:{offset:-r.cellHeight*(i/2),scale:"row",field:"data"},x:{value:e.offset-c},x2:{field:{group:"mark.group.width"},offset:e.offset+c,mult:1},stroke:{value:t.config("cellGridColor")},strokeOpacity:{value:t.config("cellGridOpacity")}}}else e.properties.grid={stroke:{value:t.config("gridColor")},strokeOpacity:{value:t.config("gridOpacity")}};return e},s.hideTicks=function(e){return e.properties.ticks={opacity:{value:0}},e.properties.majorTicks={opacity:{value:0}},e.properties.axis={opacity:{value:0}},e},s.title=function(e,t,n,i){var a=t.encDef(n).axis;if(a.title)e.title=a.title;else{var o,s=t.fieldTitle(n);a.titleMaxLength?o=a.titleMaxLength:n===X?o=i.cellWidth/t.config("characterWidth"):n===Y&&(o=i.cellHeight/t.config("characterWidth")),e.title=o?r.truncate(s,o):s}return n===ROW&&(e.properties.title={angle:{value:0},align:{value:"right"},baseline:{value:"middle"},dy:{value:-i.height/2-20}}),e},s.labels={},s.labels.scale=function(e,t,n){var r=t.encDef(n).timeUnit;return t.isType(n,T)&&r&&o.hasScale(r)&&i(e,["properties","labels","text","scale"],"time-"+r),e},s.labels.format=function(e,t,n,r){var a=r[t.encDef(n).name];if(t.axis(n).format)e.format=t.axis(n).format;else if(t.isType(n,Q)||"number"===a.type)e.format=t.numberFormat(a);else if(t.isType(n,T)){var o=t.encDef(n).timeUnit;o?"year"===o&&(e.format="d"):e.format=t.config("timeFormat")}else t.isTypes(n,[N,O])&&t.axis(n).maxLabelLength&&i(e,["properties","labels","text","template"],"{{ datum.data | truncate:"+t.axis(n).maxLabelLength+"}}");return e},s.labels.angle=function(e,t,n){var r=t.axis(n).labelAngle;return"undefined"==typeof r?e:(i(e,["properties","labels","angle","value"],r),e)},s.labels.rotate=function(e){var t="top"===e.orient?"left":"right";return i(e,["properties","labels","angle","value"],270),i(e,["properties","labels","align","value"],t),i(e,["properties","labels","baseline","value"],"middle"),e},s.titleOffset=function(e,t,n){var r=e.axis(n).titleOffset;if(r)return r;switch(n){case ROW:return 0;case COL:return 35}return a(t,[n,"axisTitleOffset"])}},{"../globals":24,"../util":28,"./time":19}],9:[function(e,t,n){"use strict";var r=t.exports=e("datalib/src/stats").summary;e("../globals");var i=t.exports={},a=e("../Encoding"),o=i.axis=e("./axis"),s=i.legend=e("./legend"),u=i.marks=e("./marks"),l=i.scale=e("./scale");i.data=e("./data"),i.facet=e("./facet"),i.layout=e("./layout"),i.stack=e("./stack"),i.style=e("./style"),i.subfacet=e("./subfacet"),i.time=e("./time"),i.compile=function(e,t,n){return i.compileEncoding(a.fromSpec(e,n),t)},i.shorthand=function(e,t,n,r){return i.compileEncoding(a.fromShorthand(e,n,r),t)},i.compileEncoding=function(e,t){t||(e.hasValues()?t=r(e.data().values).reduce(function(e,t){return e[t.field]=t,e},{}):console.error("No stats provided and data is not embedded."));var n=i.layout(e,t),a={width:n.width,height:n.height,padding:"auto",data:i.data(e),scales:i.time.scales(e),marks:[{name:"cell",type:"group",properties:{enter:{width:n.cellWidth?{value:n.cellWidth}:{field:{group:"width"}},height:n.cellHeight?{value:n.cellHeight}:{field:{group:"height"}}}}}]},c=a.marks[0],f=i.style(e,t),d=c.marks=u.def(e,n,f,t),h=d[d.length-1],p=e.stack();p&&i.stack(e,h,p);var g=u[e.marktype()].line,m=e.details();if(m.length>0&&g&&i.subfacet(c,h,m),g&&e.config("autoSortLine")){var v=e.isMeasure(X)&&e.isDimension(Y)?Y:X;h.from||(h.from={}),h.from.transform=[{type:"sort",by:"-"+e.fieldRef(v)}]}var y=[].concat.apply([],d.map(function(e){return l.names(e.properties.update)}));return e.has(ROW)||e.has(COL)?(a=i.facet(c,e,n,a,y,t),a.legends=s.defs(e,f)):(c.scales=l.defs(y,e,n,t),c.axes=[],e.has(X)&&c.axes.push(o.def(X,e,n,t)),e.has(Y)&&c.axes.push(o.def(Y,e,n,t)),c.legends=s.defs(e,f)),a}},{"../Encoding":7,"../globals":24,"./axis":8,"./data":10,"./facet":11,"./layout":12,"./legend":13,"./marks":14,"./scale":15,"./stack":16,"./style":17,"./subfacet":18,"./time":19,"datalib/src/stats":82}],10:[function(e,t,n){"use strict";function r(e){var t=[r.raw(e)],n=r.aggregate(e);n&&t.push(r.aggregate(e)),r.filterNonPositive(t[t.length-1],e);var i=e.stack();return i&&t.push(r.stack(e,i)),t}e("../globals"),t.exports=r;var i=e("../encdef"),a=e("../util"),o=e("./time");r.raw=function(e){var t={name:RAW};e.hasValues()?(t.values=e.data().values,t.format={type:"json"}):(t.url=e.data().url,t.format={type:e.data().formatType});var n=r.raw.formatParse(e);return n&&(t.format.parse=n),t.transform=r.raw.transform(e),t},r.raw.formatParse=function(e){var t;return e.forEach(function(e){if(e.type==T)t=t||{},t[e.name]="date";else if(e.type==Q){if(i.isCount(e))return;t=t||{},t[e.name]="number"}}),t},r.raw.transform=function(e){return r.raw.transform.nullFilter(e).concat(r.raw.transform.formula(e),r.raw.transform.time(e),r.raw.transform.bin(e),r.raw.transform.filter(e))},r.raw.transform.time=function(e){return e.reduce(function(t,n,r){if(n.type===T&&n.timeUnit){var i=e.fieldRef(r,{nofn:!0,datum:!0});t.push({type:"formula",field:e.fieldRef(r),expr:o.formula(n.timeUnit,i)})}return t},[])},r.raw.transform.bin=function(e){return e.reduce(function(t,n,r){return e.bin(r)&&(t.push({type:"bin",field:n.name,output:{start:e.fieldRef(r,{bin_suffix:"_start"}),end:e.fieldRef(r,{bin_suffix:"_end"})},maxbins:e.bin(r).maxbins}),t.push({type:"formula",field:e.fieldRef(r,{bin_suffix:"_mid"}),expr:"("+e.fieldRef(r,{datum:1,bin_suffix:"_start"})+"+"+e.fieldRef(r,{datum:1,bin_suffix:"_end"})+")/2"})),t},[])},r.raw.transform.nullFilter=function(e){var t=a.reduce(e.fields(),function(t,n,r){return"*"===r?t:((e.config("filterNull").Q&&n.containsType[Q]||e.config("filterNull").T&&n.containsType[T]||e.config("filterNull").O&&n.containsType[O]||e.config("filterNull").N&&n.containsType[N])&&t.push(r),t)},[]);return t.length>0?[{type:"filter",test:t.map(function(e){return"datum."+e+"!==null"}).join(" && ")}]:[]},r.raw.transform.filter=function(e){var t=e.data().filter;return t?[{type:"filter",test:t}]:[]},r.raw.transform.formula=function(e){var t=e.data().formulas;return void 0===t?[]:t.reduce(function(e,t){return t.type="formula",e.push(t),e},[])},r.aggregate=function(e){var t={},n={},r=!1;e.forEach(function(i,a){i.aggregate?(r=!0,"count"===i.aggregate?(n["*"]=n["*"]||{},n["*"].count=!0):(n[i.name]=n[i.name]||{},n[i.name][i.aggregate]=!0)):i.bin?(t[e.fieldRef(a,{bin_suffix:"_start"})]=e.fieldRef(a,{bin_suffix:"_start"}),t[e.fieldRef(a,{bin_suffix:"_mid"})]=e.fieldRef(a,{bin_suffix:"_mid"}),t[e.fieldRef(a,{bin_suffix:"_end"})]=e.fieldRef(a,{bin_suffix:"_end"})):t[i.name]=e.fieldRef(a)});var i=a.vals(t),o=a.reduce(n,function(e,t,n){return e[n]=a.keys(t),e},{});return r?{name:AGGREGATE,source:RAW,transform:[{type:"aggregate",groupby:i,summarize:o}]}:null},r.stack=function(e,t){var n=t.groupby,r=t.value,i=e.facets(),a={name:STACKED,source:e.dataTable(),transform:[{type:"aggregate",groupby:[e.fieldRef(n)].concat(i),summarize:[{ops:["sum"],field:e.fieldRef(r)}]}]};return i&&i.length>0&&a.transform.push({type:"aggregate",groupby:i,summarize:[{ops:["max"],field:e.fieldRef(r,{prefn:"sum_"})}]}),a},r.filterNonPositive=function(e,t){t.forEach(function(n,r){"log"===t.scale(r).type&&e.transform.push({type:"filter",test:t.fieldRef(r,{datum:1})+" > 0"})})}},{"../encdef":23,"../globals":24,"../util":28,"./time":19}],11:[function(e,t,n){"use strict";function r(e,t){t=t||{};var n={name:e||void 0,type:"group",properties:{enter:{width:t.width||{field:{group:"width"}},height:t.height||{field:{group:"height"}}}}};return t.from&&(n.from=t.from),t.x&&(n.properties.enter.x=t.x),t.y&&(n.properties.enter.y=t.y),t.axes&&(n.axes=t.axes),n}function i(e,t,n,i,u,l){var c,f,d=e.properties.enter,h=[],p=[],g=t.has(ROW),m=t.has(COL);

d.fill={value:t.config("cellBackgroundColor")},e.from={data:e.marks[0].from.data};for(var v=0;v<e.marks.length;v++){var y=e.marks[v];y.from.transform?delete y.from.data:delete y.from}g?(t.isDimension(ROW)||a.error("Row encoding should be ordinal."),d.y={scale:ROW,field:t.fieldRef(ROW)},d.height={value:n.cellHeight},h.push(t.fieldRef(ROW)),m&&(c=a.duplicate(e.from),c.transform=c.transform||[],c.transform.unshift({type:"facet",groupby:[t.fieldRef(COL)]})),f=r("x-axes",{axes:t.has(X)?[o.def(X,t,n,l)]:void 0,x:m?{scale:COL,field:t.fieldRef(COL)}:{value:0},width:m&&{value:n.cellWidth},from:c}),i.marks.unshift(f),i.axes=i.axes||[],i.axes.push(o.def(ROW,t,n,l))):t.has(X)&&p.push(o.def(X,t,n,l)),m?(t.isDimension(COL)||a.error("Col encoding should be ordinal."),d.x={scale:COL,field:t.fieldRef(COL)},d.width={value:n.cellWidth},h.push(t.fieldRef(COL)),g&&(c=a.duplicate(e.from),c.transform=c.transform||[],c.transform.unshift({type:"facet",groupby:[t.fieldRef(ROW)]})),f=r("y-axes",{axes:t.has(Y)?[o.def(Y,t,n,l)]:void 0,y:g&&{scale:ROW,field:t.fieldRef(ROW)},x:g&&{value:0},height:g&&{value:n.cellHeight},from:c}),i.marks.unshift(f),i.axes=i.axes||[],i.axes.push(o.def(COL,t,n,l))):t.has(Y)&&p.push(o.def(Y,t,n,l)),i.scales=(i.scales||[]).concat(s.defs(s.names(d).concat(u),t,n,l,!0)),p.length>0&&(e.axes=p);var b=e.from.transform||(e.from.transform=[]);return b.unshift({type:"facet",groupby:h}),i}e("../globals");var a=e("../util"),o=e("./axis"),s=e("./scale");t.exports=i},{"../globals":24,"../util":28,"./axis":8,"./scale":15}],12:[function(e,t,n){"use strict";function r(e,t){var n=i(e,t);return n=s(e,t,n)}function i(e,t){var n,r,i=e.has(ROW),a=e.has(COL),o=e.has(X),s=e.has(Y),u=e.marktype(),l=o&&e.isDimension(X)?e.cardinality(X,t):1,c=s&&e.isDimension(Y)?e.cardinality(Y,t):1,f=l>e.config("largeBandMaxCardinality")||c>e.config("largeBandMaxCardinality"),d=e.config("cellPadding");n=o?e.isOrdinalScale(X)?(l+e.encDef(X).band.padding)*e.bandSize(X,f):a||i?e.encDef(COL).width:e.config("singleWidth"):u===TEXT?e.config("textCellWidth"):e.bandSize(X),r=s?e.isOrdinalScale(Y)?(c+e.encDef(Y).band.padding)*e.bandSize(Y,f):a||i?e.encDef(ROW).height:e.config("singleHeight"):e.bandSize(Y);var h=n,p=r;if(a){var g=e.cardinality(COL,t);h=n*((1+d)*(g-1)+1)}if(i){var m=e.cardinality(ROW,t);p=r*((1+d)*(m-1)+1)}return{cellWidth:n,cellHeight:r,cellPadding:d,width:h,height:p,x:{useSmallBand:f},y:{useSmallBand:f}}}function a(e,t,n){var r=e.numberFormat(t,n);return f.format(r)(n.max).length}function o(e,t,n){var r=e.encDef(n),i=t[r.name];return r.bin?a(e,n,i):e.isType(n,Q)?a(e,n,i):e.isType(n,T)?c.maxLength(e.encDef(n).timeUnit,e):e.isTypes(n,[N,O])?"number"===i.type?a(e,n,i):Math.min(i.max,e.axis(n).maxLabelLength||1/0):void 0}function s(e,t,n){return[X,Y].forEach(function(r){var i,a=r===X?20:22;e.isDimension(r)||e.isType(r,T)?i=o(e,t,r):(e.isType(r,Q)||"count"===e.encDef(r).aggregate)&&r===Y&&(i=o(e,t,r)),i?l(n,[r,"axisTitleOffset"],e.config("characterWidth")*i+a):l(n,[r,"axisTitleOffset"],3*e.config("characterWidth")+a)}),n}e("../globals");var u=e("../util"),l=u.setter,c=e("./time"),f=e("d3-format");t.exports=r},{"../globals":24,"../util":28,"./time":19,"d3-format":5}],13:[function(e,t,n){"use strict";e("../globals");var r=e("./time"),i=e("../util"),a=i.setter,o=i.getter,s=t.exports={};s.defs=function(e,t){var n=[];return e.has(COLOR)&&e.encDef(COLOR).legend&&n.push(s.def(COLOR,e,{fill:COLOR},t)),e.has(SIZE)&&e.encDef(SIZE).legend&&n.push(s.def(SIZE,e,{size:SIZE},t)),e.has(SHAPE)&&e.encDef(SHAPE).legend&&n.push(s.def(SHAPE,e,{shape:SHAPE},t)),n},s.def=function(e,t,n,i){var o=t.encDef(e).timeUnit;return n.title=s.title(e,t),n.orient=t.encDef(e).legend.orient,n=s.style(e,t,n,i),t.isType(e,T)&&o&&r.hasScale(o)&&a(n,["properties","labels","text","scale"],"time-"+o),n},s.style=function(e,t,n,r){var i=o(n,["properties","symbols"]),a=t.marktype();switch(a){case"bar":case"tick":case"text":i.stroke={value:"transparent"},i.shape={value:"square"};break;case"circle":case"square":i.shape={value:a};case"point":t.encDef(SHAPE).filled?(i.fill=t.has(COLOR)&&e===COLOR?{scale:COLOR,field:"data"}:{value:t.value(COLOR)},i.stroke={value:"transparent"}):(i.stroke=t.has(COLOR)&&e===COLOR?{scale:COLOR,field:"data"}:{value:t.value(COLOR)},i.fill={value:"transparent"},i.strokeWidth={value:t.config("strokeWidth")});break;case"line":case"area":}var s=t.encDef(COLOR).opacity||r.opacity;return s&&(i.opacity={value:s}),n},s.title=function(e,t){var n=t.encDef(e).legend;return n.title?n.title:t.fieldTitle(e)}},{"../globals":24,"../util":28,"./time":19}],14:[function(e,t,n){"use strict";function r(e,t,n){var r={};e.encDef(X).bin?(r.x={scale:X,field:e.fieldRef(X,{bin_suffix:"_start"}),offset:1},r.x2={scale:X,field:e.fieldRef(X,{bin_suffix:"_end"})}):e.isMeasure(X)?(r.x={scale:X,field:e.fieldRef(X)},(!e.has(Y)||e.isDimension(Y))&&(r.x2={value:0})):e.has(X)?r.xc={scale:X,field:e.fieldRef(X)}:r.x={value:0,offset:e.config("singleBarOffset")},r.x2||(r.width=!e.has(X)||e.isOrdinalScale(X)?e.has(SIZE)?{scale:SIZE,field:e.fieldRef(SIZE)}:{value:e.bandSize(X,t.x.useSmallBand),offset:-1}:{value:2}),e.encDef(Y).bin?(r.y={scale:Y,field:e.fieldRef(Y,{bin_suffix:"_start"})},r.y2={scale:Y,field:e.fieldRef(Y,{bin_suffix:"_end"}),offset:1}):e.isMeasure(Y)?(r.y={scale:Y,field:e.fieldRef(Y)},r.y2={field:{group:"height"}}):(e.has(Y)?r.yc={scale:Y,field:e.fieldRef(Y)}:r.y2={field:{group:"height"},offset:-e.config("singleBarOffset")},r.height=e.has(SIZE)?{scale:SIZE,field:e.fieldRef(SIZE)}:{value:e.bandSize(Y,t.y.useSmallBand),offset:-1}),r.fill=e.has(COLOR)?{scale:COLOR,field:e.fieldRef(COLOR)}:{value:e.value(COLOR)};var i=e.encDef(COLOR).opacity;return i&&(r.opacity={value:i}),r}function i(e,t,n){var r={};e.has(X)?r.x={scale:X,field:e.fieldRef(X,{bin_suffix:"_mid"})}:e.has(X)||(r.x={value:e.bandSize(X,t.x.useSmallBand)/2}),e.has(Y)?r.y={scale:Y,field:e.fieldRef(Y,{bin_suffix:"_mid"})}:e.has(Y)||(r.y={value:e.bandSize(Y,t.y.useSmallBand)/2}),e.has(SIZE)?r.size={scale:SIZE,field:e.fieldRef(SIZE)}:e.has(SIZE)||(r.size={value:e.value(SIZE)}),e.has(SHAPE)?r.shape={scale:SHAPE,field:e.fieldRef(SHAPE)}:e.has(SHAPE)||(r.shape={value:e.value(SHAPE)}),e.encDef(SHAPE).filled?e.has(COLOR)?r.fill={scale:COLOR,field:e.fieldRef(COLOR)}:e.has(COLOR)||(r.fill={value:e.value(COLOR)}):(e.has(COLOR)?r.stroke={scale:COLOR,field:e.fieldRef(COLOR)}:e.has(COLOR)||(r.stroke={value:e.value(COLOR)}),r.strokeWidth={value:e.config("strokeWidth")});var i=e.encDef(COLOR).opacity||n.opacity;return i&&(r.opacity={value:i}),r}function a(e,t,n){var r={};e.has(X)?r.x={scale:X,field:e.fieldRef(X,{bin_suffix:"_mid"})}:e.has(X)||(r.x={value:0}),e.has(Y)?r.y={scale:Y,field:e.fieldRef(Y,{bin_suffix:"_mid"})}:e.has(Y)||(r.y={field:{group:"height"}}),e.has(COLOR)?r.stroke={scale:COLOR,field:e.fieldRef(COLOR)}:e.has(COLOR)||(r.stroke={value:e.value(COLOR)});var i=e.encDef(COLOR).opacity;return i&&(r.opacity={value:i}),r.strokeWidth={value:e.config("strokeWidth")},r}function o(e,t,n){var r={};e.isMeasure(X)?(r.x={scale:X,field:e.fieldRef(X)},e.isDimension(Y)&&(r.x2={scale:X,value:0},r.orient={value:"horizontal"})):r.x=e.has(X)?{scale:X,field:e.fieldRef(X,{bin_suffix:"_mid"})}:{value:0},e.isMeasure(Y)?(r.y={scale:Y,field:e.fieldRef(Y)},r.y2={scale:Y,value:0}):r.y=e.has(Y)?{scale:Y,field:e.fieldRef(Y,{bin_suffix:"_mid"})}:{field:{group:"height"}},e.has(COLOR)?r.fill={scale:COLOR,field:e.fieldRef(COLOR)}:e.has(COLOR)||(r.fill={value:e.value(COLOR)});var i=e.encDef(COLOR).opacity;return i&&(r.opacity={value:i}),r}function s(e,t,n){var r={};e.has(X)?(r.x={scale:X,field:e.fieldRef(X,{bin_suffix:"_mid"})},e.isDimension(X)&&(r.x.offset=-e.bandSize(X,t.x.useSmallBand)/3)):e.has(X)||(r.x={value:0}),e.has(Y)?(r.y={scale:Y,field:e.fieldRef(Y,{bin_suffix:"_mid"})},e.isDimension(Y)&&(r.y.offset=-e.bandSize(Y,t.y.useSmallBand)/3)):e.has(Y)||(r.y={value:0}),r.width=!e.has(X)||e.isDimension(X)?{value:e.bandSize(X,t.y.useSmallBand)/1.5}:{value:1},r.height=!e.has(Y)||e.isDimension(Y)?{value:e.bandSize(Y,t.y.useSmallBand)/1.5}:{value:1},r.fill=e.has(COLOR)?{scale:COLOR,field:e.fieldRef(COLOR)}:{value:e.value(COLOR)};var i=e.encDef(COLOR).opacity||n.opacity;return i&&(r.opacity={value:i}),r}function u(e){return function(t,n,r){var i={};t.has(X)?i.x={scale:X,field:t.fieldRef(X,{bin_suffix:"_mid"})}:t.has(X)||(i.x={value:t.bandSize(X,n.x.useSmallBand)/2}),t.has(Y)?i.y={scale:Y,field:t.fieldRef(Y,{bin_suffix:"_mid"})}:t.has(Y)||(i.y={value:t.bandSize(Y,n.y.useSmallBand)/2}),t.has(SIZE)?i.size={scale:SIZE,field:t.fieldRef(SIZE)}:t.has(X)||(i.size={value:t.value(SIZE)}),i.shape={value:e},t.has(COLOR)?i.fill={scale:COLOR,field:t.fieldRef(COLOR)}:t.has(COLOR)||(i.fill={value:t.value(COLOR)});var a=t.encDef(COLOR).opacity||r.opacity;return a&&(i.opacity={value:a}),i}}function l(e,t,n,r){var i={},a=e.encDef(TEXT);e.has(X)?i.x={scale:X,field:e.fieldRef(X,{bin_suffix:"_mid"})}:e.has(X)||(i.x=e.has(TEXT)&&e.isType(TEXT,Q)?{value:t.cellWidth-5}:{value:e.bandSize(X,t.x.useSmallBand)/2}),e.has(Y)?i.y={scale:Y,field:e.fieldRef(Y,{bin_suffix:"_mid"})}:e.has(Y)||(i.y={value:e.bandSize(Y,t.y.useSmallBand)/2}),e.has(SIZE)?i.fontSize={scale:SIZE,field:e.fieldRef(SIZE)}:e.has(SIZE)||(i.fontSize={value:a.font.size}),i.fill={value:a.color};var o=e.encDef(COLOR).opacity||n.opacity;if(o&&(i.opacity={value:o}),e.has(TEXT))if(e.isType(TEXT,Q)){var s=r[e.encDef(TEXT).name],u=a.format||e.numberFormat(s);i.text={template:"{{"+e.fieldRef(TEXT,{datum:!0})+" | number:'"+u+"'}}"},i.align={value:a.align}}else i.text={field:e.fieldRef(TEXT)};else i.text={value:a.placeholder};return i.font={value:a.font.family},i.fontWeight={value:a.font.weight},i.fontStyle={value:a.font.style},i.baseline={value:a.baseline},i}e("../globals");var c=t.exports={};c.def=function(e,t,n,r){var i=[],a=c[e.marktype()],o=e.dataTable();if(e.marktype()===TEXT&&e.has(COLOR)){var s={x:{value:0},y:{value:0},x2:{value:t.cellWidth},y2:{value:t.cellHeight},fill:{scale:COLOR,field:e.fieldRef(COLOR)}};i.push({type:"rect",from:{data:o},properties:{enter:s,update:s}})}var u=a.prop(e,t,n,r);return i.push({type:a.type,from:{data:o},properties:{enter:u,update:u}}),i},c.bar={type:"rect",prop:r,supportedEncoding:{row:1,col:1,x:1,y:1,size:1,color:1}},c.line={type:"line",line:!0,prop:a,requiredEncoding:["x","y"],supportedEncoding:{row:1,col:1,x:1,y:1,color:1,detail:1}},c.area={type:"area",line:!0,requiredEncoding:["x","y"],prop:o,supportedEncoding:{row:1,col:1,x:1,y:1,color:1}},c.tick={type:"rect",prop:s,supportedEncoding:{row:1,col:1,x:1,y:1,color:1,detail:1}},c.circle={type:"symbol",prop:u("circle"),supportedEncoding:{row:1,col:1,x:1,y:1,size:1,color:1,detail:1}},c.square={type:"symbol",prop:u("square"),supportedEncoding:c.circle.supportedEncoding},c.point={type:"symbol",prop:i,supportedEncoding:{row:1,col:1,x:1,y:1,size:1,color:1,shape:1,detail:1}},c.text={type:"text",prop:l,requiredEncoding:["text"],supportedEncoding:{row:1,col:1,size:1,color:1,text:1}}},{"../globals":24}],15:[function(e,t,n){"use strict";e("../globals");var r=e("../util"),i=e("./time"),a=e("colorbrewer"),o=e("d3-color").interpolateHsl,s=t.exports={};s.names=function(e){return r.keys(r.keys(e).reduce(function(t,n){return e[n]&&e[n].scale&&(t[e[n].scale]=1),t},{}))},s.defs=function(e,t,n,r,i){return e.reduce(function(e,a){var o={};o.name=a,o.type=s.type(a,t),o.domain=s.domain(t,a,o.type,i);var u=s.reverse(t,a);u&&(o.reverse=u);var l=s.zero(t,a);return void 0!==l&&(o.zero=l),o=s.range(o,t,n,r),e.push(o),e},[])},s.type=function(e,t){switch(t.type(e)){case N:case O:return"ordinal";case T:var n=t.encDef(e).timeUnit;return n?i.scale.type(n,e):"time";case Q:return t.bin(e)?"linear":t.scale(e).type}},s.domain=function(e,t,n,r){var a=e.encDef(t);if(e.isType(t,T)){var o=i.scale.domain(a.timeUnit,t);if(o)return o}var u=e.stack();if(u&&t===u.value)return{data:STACKED,field:e.fieldRef(t,{prefn:(r?"max_":"")+"sum_"})};var l=s._useRawDomain(e,t),c=s.sort(e,t,n);return l?{data:RAW,field:e.fieldRef(t,{noAggregate:!0})}:a.bin?{data:e.dataTable(),field:[e.fieldRef(t,{bin_suffix:"_start"}),e.fieldRef(t,{bin_suffix:"_end"})]}:c?{data:c.op?RAW:e.dataTable(),field:e.fieldRef(t),sort:c}:{data:e.dataTable(),field:e.fieldRef(t)}},s.sort=function(e,t,n){var i=e.encDef(t).sort;return"ascending"===i||"descending"===i?!0:"ordinal"===n&&r.isObject(i)?{op:i.op,field:i.field}:void 0},s.reverse=function(e,t){var n=e.encDef(t).sort;return n&&("descending"===n||"descending"===n.order)},s._useRawDomain=function(e,t){var n=e.encDef(t),r=e.scale(t).useRawDomain,a=void 0!==r?r:e.config("useRawDomain"),o=!n.aggregate||"count"!==n.aggregate&&"sum"!==n.aggregate;return a&&o&&(e.isType(t,Q)&&!n.bin||e.isType(t,T)&&(!n.timeUnit||!i.isOrdinalFn(n.timeUnit)))},s.zero=function(e,t){var n=e.scale(t),r=e.encDef(t),i=r.timeUnit;return n.zero?n.zero:!e.isType(t,T)||i&&"year"!==i?r.bin?!1:t===X||t===Y||t===SIZE:!1},s.range=function(e,t,n,r){var i=t.encDef(e.name),a=i.timeUnit;switch(e.name){case X:e.range=n.cellWidth?[0,n.cellWidth]:"width","ordinal"===e.type&&(e.bandWidth=t.bandSize(X,n.x.useSmallBand)),e.round=!0,e.nice="time"===e.type?a||t.config("timeScaleNice"):!0;break;case Y:"ordinal"===e.type?(e.range=n.cellHeight?i.bin?[n.cellHeight,0]:[0,n.cellHeight]:"height",e.bandWidth=t.bandSize(Y,n.y.useSmallBand)):e.range=n.cellHeight?[n.cellHeight,0]:"height",e.round=!0,e.nice="time"===e.type?a||t.config("timeScaleNice"):!0;break;case ROW:e.bandWidth=n.cellHeight,e.round=!0,e.nice=!0;break;case COL:e.bandWidth=n.cellWidth,e.round=!0,e.nice=!0;break;case SIZE:if(t.is("bar"))e.range=[3,Math.max(t.bandSize(X),t.bandSize(Y))];else if(t.is(TEXT))e.range=[8,40];else{var o=Math.min(t.bandSize(X),t.bandSize(Y))-1;e.range=[10,.8*o*o]}e.round=!0;break;case SHAPE:e.range="shapes";break;case COLOR:e.range=s.color(e,t,r);break;default:throw new Error("Unknown encoding name: "+e.name)}switch(e.name){case ROW:case COL:e.padding=t.config("cellPadding"),e.outerPadding=0;break;case X:case Y:"ordinal"===e.type&&(e.points=!0,e.padding=t.encDef(e.name).band.padding)}return e},s.color=function(e,t,n){var r=t.scale(COLOR),i=r.range,a=t.cardinality(COLOR,n),o=t.type(COLOR);if(void 0===i){var u=r.ordinalPalette,l=r.quantitativeRange;return"ordinal"===e.type?o===N?(i=10>=a?r.c10palette:r.c20palette,s.color.palette(i,a,o)):u?s.color.palette(u,a,o):s.color.interpolate(l[0],l[1],a):[l[0],l[1]]}},s.color.palette=function(e,t,n){switch(e){case"category10k":return["#2ca02c","#e377c2","#7f7f7f","#17becf","#8c564b","#d62728","#bcbd22","#9467bd","#ff7f0e","#1f77b4"];case"category10":return["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"];case"category20":return["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"];case"category20b":return["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"];case"category20c":return["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"]}if(e in a){var i=a[e];if(t in i)return i[t];if(n===N)return i[Math.max.apply(null,r.keys(i))];var o=3>t?3:Math.max.apply(null,r.keys(i)),u=0,l=o-1;return s.color.interpolate(i[o][u],i[o][l],t)}return e},s.color.interpolate=function(e,t,n){var i=o(e,t);return r.range(n).map(function(e){return i(1*e/(n-1))})}},{"../globals":24,"../util":28,"./time":19,colorbrewer:3,"d3-color":4}],16:[function(e,t,n){"use strict";function r(e,t,n){var r=n.groupby,i=n.value,a=e.fieldRef(i),o=a+"_start",s=a+"_end",u=[];"area"===e.marktype()&&u.push({type:"impute",field:e.fieldRef(i),groupby:[e.fieldRef(n.stack)],orderby:[e.fieldRef(r)],method:"value",value:0});var l={type:"stack",groupby:[e.fieldRef(r)],field:e.fieldRef(i),sortby:[(n.properties.reverse?"-":"")+e.fieldRef(n.stack)],output:{start:o,end:s}};return n.properties.offset&&(l.offset=n.properties.offset),u.push(l),t.from.transform=u,t.properties.update[i]=t.properties.enter[i]={scale:i,field:o},t.properties.update[i+"2"]=t.properties.enter[i+"2"]={scale:i,field:s},i}e("../globals"),t.exports=r},{"../globals":24}],17:[function(e,t,n){"use strict";function r(e,t){if(!t)return 1;var n=0;if(e.isAggregate())n=1,e.forEach(function(r,a){a===ROW||a===COL||(a===X||a===Y)&&i.isOrdinalScale(r)||(n*=e.cardinality(a,t))});else{if(!t["*"])return 1;n=t["*"].max;var r=1;e.has(ROW)&&(r*=e.cardinality(ROW,t)),e.has(COL)&&(r*=e.cardinality(COL,t)),n/=r}var a=0;return a=25>=n?1:200>n?.8:1e3>n||e.is("tick")?.7:.3}e("../globals");var i=e("../encdef");t.exports=function(e,t){return{opacity:r(e,t)}}},{"../encdef":23,"../globals":24}],18:[function(e,t,n){"use strict";function r(e,t,n,r){var i=e.marks,a={name:"subfacet",type:"group",from:t.from,properties:{enter:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:i};e.marks=[a],delete t.from;var o=a.from.transform||(a.from.transform=[]);o.push({type:"facet",groupby:n})}e("../globals"),t.exports=r},{"../globals":24}],19:[function(e,t,n){"use strict";var r=e("../util"),i=e("d3-time-format"),a=t.exports={},o=new Date(Date.UTC(2014,8,17));a.cardinality=function(e,t,n,r){var i=e.timeUnit;switch(i){case"seconds":return 60;case"minutes":return 60;case"hours":return 24;case"day":return 7;case"date":return 31;case"month":return 12;case"year":var a=t[e.name],o=t["year_"+e.name];return o?o.distinct-(a.missing>0&&n[r]?1:0):null}return null},a.formula=function(e,t){var n="utc"+e;return n+"("+t+")"},a.maxLength=function(e,t){switch(e){case"seconds":case"minutes":case"hours":case"date":return 2;case"month":case"day":var n=a.range(e,t);return n?Math.max.apply(null,n.map(function(e){return e.length})):2;case"year":return 4}var r=t.config("timeFormat");return i.utcFormat(r)(o).length},a.range=function(e,t){var n,r=t.config("timeScaleLabelLength");switch(e){case"day":n=t.config("dayScaleLabel");break;case"month":n=t.config("monthScaleLabel")}return n?r?n.map(function(e){return e.substr(0,r)}):n:void 0},a.scales=function(e){var t=e.reduce(function(t,n){var r=n.timeUnit;if(n.type===T&&r&&!t[r]){var i=a.scale.def(n.timeUnit,e);i&&(t[r]=i)}return t},{});return r.vals(t)},a.scale={},a.scale.def=function(e,t){var n=a.range(e,t);return n?{name:"time-"+e,type:"ordinal",domain:a.scale.domain(e),range:n}:null},a.isOrdinalFn=function(e){switch(e){case"seconds":case"minutes":case"hours":case"day":case"date":case"month":return!0}return!1},a.scale.type=function(e,t){return t===COLOR?"linear":a.isOrdinalFn(e)||t===COL||t===ROW?"ordinal":"linear"},a.scale.domain=function(e,t){var n=t===COLOR;switch(e){case"seconds":case"minutes":return n?[0,59]:r.range(0,60);case"hours":return n?[0,23]:r.range(0,24);case"day":return n?[0,6]:r.range(0,7);case"date":return n?[1,31]:r.range(1,32);case"month":return n?[0,11]:r.range(0,12)}return null},a.hasScale=function(e){switch(e){case"day":case"month":return!0}return!1}},{"../util":28,"d3-time-format":6}],20:[function(e,t,n){"use strict";e("./globals");var r=t.exports={};r.encodingTypes=[X,Y,ROW,COL,SIZE,SHAPE,COLOR,TEXT,DETAIL],r.shorthand={delim:"|",assign:"=",type:",",func:"_"}},{"./globals":24}],21:[function(e,t,n){"use strict";e("./globals");var r=e("datalib/src/stats"),i=t.exports={};i.types={"boolean":N,number:Q,integer:Q,date:T,string:N},i.stats=function(e){var t=r.summary(e);return t.reduce(function(e,t){return e[t.field]=t,e},{"*":{max:e.length,min:0}})}},{"./globals":24,"datalib/src/stats":82}],22:[function(e,t,n){"use strict";var r=e("./consts"),i=r.shorthand,a=e("./encdef"),o=e("./util"),s=e("./schema/schema"),u=s.encTypes,l=t.exports={};l.countRetinal=function(e){var t=0;return e.color&&t++,e.size&&t++,e.shape&&t++,t},l.has=function(e,t){var n=e&&e[t];return n&&n.name},l.isAggregate=function(e){for(var t in e)if(l.has(e,t)&&e[t].aggregate)return!0;return!1},l.forEach=function(e,t){var n=0;u.forEach(function(r){l.has(e,r)&&t(e[r],r,n++)})},l.map=function(e,t){var n=[];return u.forEach(function(r){l.has(e,r)&&n.push(t(e[r],r,e))}),n},l.reduce=function(e,t,n){var r=n;return u.forEach(function(n){l.has(e,n)&&(r=t(r,e[n],n,e))}),r},l.fields=function(e){return l.reduce(e,function(e,t){var n=e[t.name]=e[t.name]||[],r=n.containsType=n.containsType||{};return-1===n.indexOf(t)&&(n.push(t),r[t.type]=!0),e},{})},l.shorthand=function(e){return l.map(e,function(e,t){return t+i.assign+a.shorthand(e)}).join(i.delim)},l.fromShorthand=function(e){var t=o.isArray(e)?e:e.split(i.delim);return t.reduce(function(e,t){var n=t.split(i.assign),r=n[0].trim(),o=n[1];return e[r]=a.fromShorthand(o),e},{})}},{"./consts":20,"./encdef":23,"./schema/schema":26,"./util":28}],23:[function(e,t,n){"use strict";function r(e){return f(e,[N,O])||!!e.bin||c(e,T)&&!!e.timeUnit}e("./globals");var i=e("./consts"),a=i.shorthand,o=e("./compiler/time"),s=e("./util"),u=e("./schema/schema"),l=t.exports={};l.fieldRef=function(e,t){t=t||{};var n=(t.datum?"datum.":"")+(t.prefn||""),r=e.name;if(l.isCount(e))return n+"count";if(t.fn)return n+t.fn+"_"+r;if(!t.nofn&&e.bin){var i=t.bin_suffix||"_start";return n+"bin_"+r+i}return t.nofn||t.noAggregate||!e.aggregate?!t.nofn&&e.timeUnit?n+e.timeUnit+"_"+r:n+r:n+e.aggregate+"_"+r},l.shorthand=function(e){var t=i.shorthand;return(e.aggregate?e.aggregate+t.func:"")+(e.timeUnit?e.timeUnit+t.func:"")+(e.bin?"bin"+t.func:"")+(e.name||"")+t.type+e.type},l.shorthands=function(e,t){return t=t||a.delim,e.map(l.shorthand).join(t)},l.fromShorthand=function(e){var t,n=e.split(a.type),r={name:n[0].trim(),type:n[1].trim()};for(t in u.aggregate["enum"]){var i=u.aggregate["enum"][t];if(0===r.name.indexOf(i+"_")){r.name=r.name.substr(i.length+1),"count"==i&&0===r.name.length&&(r.name="*"),r.aggregate=i;break}}for(t in u.timefns){var o=u.timefns[t];if(r.name&&0===r.name.indexOf(o+"_")){r.name=r.name.substr(r.length+1),r.timeUnit=o;break}}return r.name&&0===r.name.indexOf("bin_")&&(r.name=r.name.substr(4),r.bin=!0),r};var c=l.isType=function(e,t){return e.type===t},f=l.isTypes=function(e,t){for(var n=0;n<t.length;n++)if(e.type===t[n])return!0;return!1};l.isOrdinalScale=function(e){return f(e,[N,O])||c(e,T)&&e.timeUnit&&o.isOrdinalFn(e.timeUnit)},l.isDimension=function(e){return e&&r(e)},l.isMeasure=function(e){return e&&!r(e)},l.count=function(){return{name:"*",aggregate:"count",type:Q,displayName:l.count.displayName}},l.count.displayName="Number of Records",l.isCount=function(e){return"count"===e.aggregate},l.cardinality=function(e,t,n){var r=t[e.name],i=e.type;if(n=n||{},e.bin){var a=s.getbins(r,e.bin.maxbins||u.MAXBINS_DEFAULT);return(a.stop-a.start)/a.step}if(c(e,T)){var l=o.cardinality(e,t,n,i);if(null!==l)return l}return e.aggregate?1:r.distinct-(r.missing>0&&n[i]?1:0)}},{"./compiler/time":19,"./consts":20,"./globals":24,"./schema/schema":26,"./util":28}],24:[function(e,t,n){(function(e){"use strict";var t=e||window;t.AGGREGATE="aggregate",t.RAW="raw",t.STACKED="stacked",t.INDEX="index",t.X="x",t.Y="y",t.ROW="row",t.COL="col",t.SIZE="size",t.SHAPE="shape",t.COLOR="color",t.TEXT="text",t.DETAIL="detail",t.N="N",t.O="O",t.Q="Q",t.T="T"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(e,t,n){"use strict";t.exports=function(e){var t=["error","info","debug","warn","log"];return t.reduce(function(t,n){var r=console[n]?n:"log";return t[n]="undefined"===console[r].bind?Function.prototype.bind.call(console[r],console,e):console[r].bind(console,e),t},{})}},{}],26:[function(e,t,n){"use strict";e("../globals");var r=t.exports={},i=e("../util"),a=i.toMap,o=e("colorbrewer"),s=e("vega/src/transforms/Aggregate").VALID_OPS;r.util=e("./schemautil"),r.marktype={type:"string","enum":["point","tick","bar","line","area","circle","square","text"]},r.aggregate={type:"string","enum":s,supportedEnums:{Q:s,O:["median","min","max"],N:[],T:["mean","median","min","max"],"":["count"]},supportedTypes:a([Q,N,O,T,""])},r.getSupportedRole=function(e){return r.schema.properties.encoding.properties[e].supportedRole},r.timeUnits=["year","month","day","date","hours","minutes","seconds"],r.defaultTimeFn="month",r.timeUnit={type:"string","enum":r.timeUnits,supportedTypes:a([T])},r.scale_type={type:"string","enum":["linear","log","pow","sqrt","quantile"],"default":"linear",supportedTypes:a([Q])},r.field={type:"object",properties:{name:{type:"string"}}};var u=i.duplicate,l=r.util.merge;r.MAXBINS_DEFAULT=15;var c={type:["boolean","object"],"default":!1,properties:{maxbins:{type:"integer","default":r.MAXBINS_DEFAULT,minimum:2,description:"Maximum number of bins."}},supportedTypes:a([Q])},f=l(u(r.field),{type:"object",properties:{type:{type:"string","enum":[N,O,Q,T]},aggregate:r.aggregate,timeUnit:r.timeUnit,bin:c,scale:{type:"object",properties:{type:r.scale_type,nice:{type:"string","enum":["second","minute","hour","day","week","month","year"],supportedTypes:a([T])},zero:{type:"boolean",description:"Include zero","default":void 0,supportedTypes:a([Q,T])},useRawDomain:{type:"boolean","default":void 0,description:"Use the raw data range as scale domain instead of aggregated data for aggregate axis. This option does not work with sum or count aggregateas they might have a substantially larger scale range.By default, use value from config.useRawDomain."}}}}}),d=l(u(r.field),{type:"object",supportedRole:{dimension:!0},properties:{type:{type:"string","enum":[N,O,Q,T]},timeUnit:r.timeUnit,bin:c,aggregate:{type:"string","enum":["count"],supportedTypes:a([N,O])}}}),h={type:"object",supportedMarktypes:{point:!0,tick:!0,bar:!0,line:!0,area:!0,circle:!0,square:!0},properties:{axis:{type:"object",properties:{format:{type:"string","default":void 0,description:"The formatting pattern for axis labels. If not undefined, this will be determined by small/largeNumberFormat and the max value of the field."},grid:{type:"boolean","default":void 0,description:"A flag indicate if gridlines should be created in addition to ticks. If `grid` is unspecified, the default value is `true` for ROW and COL. For X and Y, the default value is `true` for quantitative and time fields and `false` otherwise."},layer:{type:"string","default":"back",description:'A string indicating if the axis (and any gridlines) should be placed above or below the data marks. One of "front" (default) or "back".'},orient:{type:"string","default":void 0,"enum":["top","right","left","bottom"],description:"The orientation of the axis. One of top, bottom, left or right. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart)."},ticks:{type:"integer","default":5,minimum:0,description:'A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are "nice" (multiples of 2, 5, 10) and lie within the underlying scale\'s range.'},title:{type:"string","default":void 0,description:"A title for the axis. (Shows field name and its function by default.)"},maxLabelLength:{type:"integer","default":25,minimum:0,description:"Truncate labels that are too long."},labelAngle:{type:"integer","default":void 0,minimum:0,maximum:360,description:"Angle by which to rotate labels. Set to 0 to force horizontal."},titleMaxLength:{type:"integer","default":void 0,minimum:0,description:"Max length for axis title if the title is automatically generated from the field's description"},titleOffset:{type:"integer","default":void 0,description:"A title offset value for the axis."}}}}},p={type:"object",properties:{sort:{"default":"ascending",supportedTypes:a([N,O]),oneOf:[{type:"string","enum":["ascending","descending","unsorted"]},{type:"object",required:["field","op"],properties:{field:{type:"string",description:"The field name to aggregate over."},op:{type:"string","enum":s,description:"The field name to aggregate over."},order:{type:"string","enum":["ascending","descending"]}}}]}}},g={type:"object",properties:{band:{type:"object",properties:{size:{type:"integer",minimum:0,"default":void 0},padding:{type:"integer",minimum:0,"default":1}}}}},m={type:"object",properties:{legend:{type:"object",description:"Properties of a legend.",properties:{title:{type:"string","default":void 0,description:"A title for the legend. (Shows field name and its function by default.)"},orient:{type:"string","default":"right",description:'The orientation of the legend. One of "left" or "right". This determines how the legend is positioned within the scene. The default is "right".'}}}}},v={type:"object",supportedMarktypes:{text:!0},properties:{align:{type:"string","default":"right"},baseline:{type:"string","default":"middle"},color:{type:"string",role:"color","default":"#000000"},margin:{type:"integer","default":4,minimum:0},placeholder:{type:"string","default":"Abc"},font:{type:"object",properties:{weight:{type:"string","enum":["normal","bold"],"default":"normal"},size:{type:"integer","default":10,minimum:0},family:{type:"string","default":"Helvetica Neue"},style:{type:"string","default":"normal","enum":["normal","italic"]}}},format:{type:"string","default":void 0,description:"The formatting pattern for text value. If not undefined, this will be determined by small/largeNumberFormat and the max value of the field."}}},y={type:"object",supportedMarktypes:{point:!0,bar:!0,circle:!0,square:!0,text:!0},properties:{value:{type:"integer","default":30,minimum:0,description:"Size of marks."}}},b={type:"object",supportedMarktypes:{point:!0,tick:!0,bar:!0,line:!0,area:!0,circle:!0,square:!0,text:!0},properties:{value:{type:"string",role:"color","default":"#4682b4",description:"Color to be used for marks."},opacity:{type:"number","default":void 0,minimum:0,maximum:1},scale:{type:"object",properties:{range:{type:["string","array"],"default":void 0,description:"Color palette, if undefined vega-lite will use data propertyto pick one from c10palette, c20palette, or ordinalPalette."},c10palette:{type:"string","default":"category10","enum":["category10","category10k","Pastel1","Pastel2","Set1","Set2","Set3"]},c20palette:{type:"string","default":"category20","enum":["category20","category20b","category20c"]},ordinalPalette:{type:"string","default":void 0,description:"Color palette to encode ordinal variables.","enum":i.keys(o)},quantitativeRange:{type:"array","default":["#AFC6A3","#09622A"],description:"Color range to encode quantitative variables.",minItems:2,maxItems:2,items:{type:"string",role:"color"}}}}}},x={type:"object",properties:{stack:{type:["boolean","object"],"default":!0,description:"Enable stacking (for bar and area marks only).",properties:{reverse:{type:"boolean","default":!1,description:"Whether to reverse the stack's sortby."},offset:{type:"string","default":void 0,"enum":["zero","center","normalize"]}}}}},w={type:"object",supportedMarktypes:{point:!0,circle:!0,square:!0},properties:{value:{type:"string","enum":["circle","square","cross","diamond","triangle-up","triangle-down"],"default":"circle",description:"Mark to be used."},filled:{type:"boolean","default":!1,description:"Whether the shape's color should be used as fill color instead of stroke color."}}},_={type:"object",supportedMarktypes:{point:!0,tick:!0,line:!0,circle:!0,square:!0}},k={properties:{height:{type:"number",minimum:0,"default":150}}},$={properties:{width:{type:"number",minimum:0,"default":150},axis:{properties:{maxLabelLength:{type:"integer","default":12,minimum:0,description:"Truncate labels that are too long."}}}}},S={type:"object",supportedMarktypes:{point:!0,tick:!0,bar:!0,line:!0,area:!0,circle:!0,square:!0,text:!0},properties:{padding:{type:"number",minimum:0,maximum:1,"default":.1}}},M={required:["name","type"]},C=l(u(f),{supportedRole:{measure:!0,dimension:!0}}),E=l(u(f),{supportedRole:{measure:!0,dimension:"ordinal-only"}}),A=l(u(f),{supportedRole:{measure:!0}}),D=l(u(C),h,g,M,p),L=u(D),j=l(u(d),M,S,p),P=l(u(j),h,k),R=l(u(j),h,$),I=l(u(E),m,y,p),F=l(u(C),m,b,x,p),U=l(u(d),m,w,p),z=l(u(d),_,x,p),q=l(u(A),v,p),H={
type:"object",properties:{formatType:{type:"string","enum":["json","csv"],"default":"json"},url:{type:"string","default":void 0},values:{type:"array","default":void 0,description:"Pass array of objects instead of a url to a file.",items:{type:"object",additionalProperties:!0}},filter:{type:"string","default":void 0,description:"A string containing the filter Vega expression. Use `datum` to refer to the current data object."},formulas:{type:"array","default":void 0,description:"Array of formula transforms. Formulas are applied before filter.",items:{type:"object",properties:{field:{type:"string",description:"The property name in which to store the computed formula value."},expr:{type:"string",description:"A string containing an expression for the formula. Use the variable `datum` to to refer to the current data object."}}}}}},B={type:"object",properties:{width:{type:"integer","default":void 0},height:{type:"integer","default":void 0},viewport:{type:"array",items:{type:"integer"},"default":void 0},gridColor:{type:"string",role:"color","default":"#000000"},gridOpacity:{type:"number",minimum:0,maximum:1,"default":.08},filterNull:{type:"object",properties:{N:{type:"boolean","default":!1},O:{type:"boolean","default":!1},Q:{type:"boolean","default":!0},T:{type:"boolean","default":!0}}},autoSortLine:{type:"boolean","default":!0},singleHeight:{type:"integer","default":200,minimum:0},singleWidth:{type:"integer","default":200,minimum:0},largeBandSize:{type:"integer","default":21,minimum:0},smallBandSize:{type:"integer","default":12,minimum:0},largeBandMaxCardinality:{type:"integer","default":10},cellPadding:{type:"number","default":.1},cellGridColor:{type:"string",role:"color","default":"#000000"},cellGridOpacity:{type:"number",minimum:0,maximum:1,"default":.25},cellGridOffset:{type:"number","default":6},cellBackgroundColor:{type:"string",role:"color","default":"rgba(0,0,0,0)"},textCellWidth:{type:"integer","default":90,minimum:0},strokeWidth:{type:"integer","default":2,minimum:0},singleBarOffset:{type:"integer","default":5,minimum:0},timeScaleLabelLength:{type:"integer","default":3,minimum:0,description:"Max length for values in dayScaleLabel and monthScaleLabel.  Zero means using full names in dayScaleLabel/monthScaleLabel."},dayScaleLabel:{type:"array",items:{type:"string"},"default":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],description:"Axis labels for day of week, starting from Sunday.(Consistent with Javascript -- See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/getDay."},monthScaleLabel:{type:"array",items:{type:"string"},"default":["January","February","March","April","May","June","July","August","September","October","November","December"],description:"Axis labels for month."},characterWidth:{type:"integer","default":6},maxSmallNumber:{type:"number","default":1e4,description:"maximum number that a field will be considered smallNumber.Used for axis labelling."},smallNumberFormat:{type:"string","default":"",description:"D3 Number format for axis labels and text tables for number <= maxSmallNumber. Used for axis labelling."},largeNumberFormat:{type:"string","default":".3s",description:"D3 Number format for axis labels and text tables for number > maxSmallNumber."},timeFormat:{type:"string","default":"%Y-%m-%d",description:"Date format for axis labels."},useRawDomain:{type:"boolean","default":!1,description:"Use the raw data range as scale domain instead of aggregated data for aggregate axis. This option does not work with sum or count aggregateas they might have a substantially larger scale range.By default, use value from config.useRawDomain."}}};r.schema={$schema:"http://json-schema.org/draft-04/schema#",description:"Schema for Vega-lite specification",type:"object",required:["marktype","encoding","data"],properties:{data:H,marktype:r.marktype,encoding:{type:"object",properties:{x:D,y:L,row:P,col:R,size:I,color:F,shape:U,text:q,detail:z}},config:B}},r.encTypes=i.keys(r.schema.properties.encoding.properties),r.instantiate=function(){return r.util.instantiate(r.schema)}},{"../globals":24,"../util":28,"./schemautil":27,colorbrewer:3,"vega/src/transforms/Aggregate":74}],27:[function(e,t,n){"use strict";function r(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=r(t[n].constructor===Array?[]:{},t[n]):r(e[n],t[n]));return e}var i=t.exports={},a=e("../util"),o=function(e){return 0===Object.keys(e).length};i.extend=function(e,t){return i.merge(i.instantiate(t),e)},i.instantiate=function(e){var t;if(void 0===e)return void 0;if("default"in e)return t=e["default"],a.isObject(t)?a.duplicate(t):t;if("object"===e.type){var n={};for(var r in e.properties)t=i.instantiate(e.properties[r]),void 0!==t&&(n[r]=t);return n}return"array"===e.type?[]:void 0},i.subtract=function(e,t){var n={};for(var r in e){var s=t[r],u=e[r];if(!t||s!==u)if("object"==typeof u&&!a.isArray(u)&&s){var l=i.subtract(u,s);o(l)||(n[r]=l)}else(!a.isArray(u)||u.length>0)&&(n[r]=u)}return n},i.merge=function(){for(var e=arguments[0],t=1;t<arguments.length;t++)e=r(e,arguments[t]);return e}},{"../util":28}],28:[function(e,t,n){"use strict";var r=t.exports=e("datalib/src/util");r.extend(r,e("datalib/src/generate")),r.extend(r,e("datalib/src/stats")),r.extend(r,e("./logger")("[VL Error]")),r.bin=e("datalib/src/bins/bins"),r.isin=function(e,t){return-1!==t.indexOf(e)},r.forEach=function(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)t.call(n,e[r],r,e)},r.reduce=function(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var i in e)n=t.call(r,n,e[i],i,e);return n},r.map=function(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var i in e)r.push(t.call(n,e[i],i,e))},r.any=function(e,t){var n,r=0;for(n in e)if(t(e[n],n,r++))return!0;return!1},r.all=function(e,t){var n,r=0;for(n in e)if(!t(e[n],n,r++))return!1;return!0},r.getbins=function(e,t){return r.bin({min:e.min,max:e.max,maxbins:t})},r.setter=function(e,t,n,r){for(var i=0;i<t.length-1;++i)e=r||t[i]in e?e[t[i]]:e[t[i]]={};e[t[i]]=n},r.getter=function(e,t,n){for(var r=0;r<t.length;++r)e=n||t[r]in e?e[t[r]]:e[t[r]]={};return e}},{"./logger":25,"datalib/src/bins/bins":79,"datalib/src/generate":80,"datalib/src/stats":82,"datalib/src/util":84}],29:[function(e,t,n){"use strict";e("./globals");var r=e("./util"),i=e("./consts"),a={};r.extend(a,i,r),a.Encoding=e("./Encoding"),a.compiler=e("./compiler/compiler"),a.compile=a.compiler.compile,a.data=e("./data"),a.enc=e("./enc"),a.encDef=e("./encdef"),a.schema=e("./schema/schema"),a.toShorthand=a.Encoding.shorthand,a.format=e("d3-format").format,t.exports=a},{"./Encoding":7,"./compiler/compiler":9,"./consts":20,"./data":21,"./enc":22,"./encdef":23,"./globals":24,"./schema/schema":26,"./util":28,"d3-format":5}],30:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.dsv={})}(this,function(e){"use strict";var t=function(e){function t(e,t){var r;return n(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})}function n(e,t){function n(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],l=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s}function r(t){if(Array.isArray(t[0]))return i(t);var n=Object.create(null),r=[];return t.forEach(function(e){for(var t in e)(t+="")in n||r.push(n[t]=t)}),[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")}function i(e){return e.map(a).join("\n")}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return{parse:t,parseRows:n,format:r,formatRows:i}};e.csv=t(","),e.tsv=t("	"),e.dsv=t})},{}],31:[function(t,n,r){"undefined"==typeof Map?(Map=function(){this.clear()},Map.prototype={set:function(e,t){return this._[e]=t,this},get:function(e){return this._[e]},has:function(e){return e in this._},"delete":function(e){return e in this._&&delete this._[e]},clear:function(){this._=Object.create(null)},get size(){var e=0;for(var t in this._)++e;return e},forEach:function(e){for(var t in this._)e(this._[t],t,this)}}):function(){var e=new Map;e.set(0,0)!==e&&(e=e.set,Map.prototype.set=function(){return e.apply(this,arguments),this})}(),function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.format={})}(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:0/0}function r(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1],o=a-(g=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+t(e,n+o-1)[0]}function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return 0>a?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function a(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,a=-1;r>i;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e}function o(e){return new s(e)}function s(e){if(!(t=j.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],u=!!t[7],l=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(u=!0,c="g"):N[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=u,this.precision=l,this.type=c}function u(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function l(e){return e}function c(e){function t(e){e=o(e);var t=e.fill,n=e.align,r=e.sign,u=e.symbol,l=e.zero,c=e.width,f=e.comma,d=e.precision,h=e.type,p="$"===u?a[0]:"#"===u&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",m="$"===u?a[1]:/[%p]/.test(h)?"%":"",v=N[h],y=!h||/[defgprs%]/.test(h);return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),function(e){var a=p,o=m;if("c"===h)o=v(e)+o,e="";else{e=+e;var u=(0>e||0>1/e)&&(e*=-1,!0);if(e=v(e,d),a=(u?"("===r?r:"-":"-"===r||"("===r?"":r)+a,o=o+("s"===h?P[8+g/3]:"")+(u&&"("===r?")":""),y)for(var b,x=-1,w=e.length;++x<w;)if(b=e.charCodeAt(x),48>b||b>57){o=(46===b?s+e.slice(x+1):e.slice(x))+o,e=e.slice(0,x);break}}f&&!l&&(e=i(e,1/0));var _=a.length+e.length+o.length,k=c>_?new Array(c-_+1).join(t):"";switch(f&&l&&(e=i(k+e,k.length?c-o.length:1/0),k=""),n){case"<":return a+e+o+k;case"=":return a+k+e+o;case"^":return k.slice(0,_=k.length>>1)+a+e+o+k.slice(_)}return k+a+e+o}}function r(e,r){var i=t((e=o(e),e.type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),s=Math.pow(10,-a),u=P[8+a/3];return function(e){return i(s*e)+u}}var i=e.grouping&&e.thousands?u(e.grouping,e.thousands):l,a=e.currency,s=e.decimal;return{format:t,formatPrefix:r}}function f(e,t){return Math.max(0,n(Math.abs(t))-n(Math.abs(e)))+1}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function h(e){return Math.max(0,-n(Math.abs(e)))}function p(e){return"string"!=typeof e||(e=R.get(e))?c(e):null}var g,m={decimal:".",thousands:",",grouping:[3],currency:["",""]},v={decimal:",",thousands:"",grouping:[3],currency:["","."]},y={decimal:",",thousands:".",grouping:[3],currency:["R$",""]},b={decimal:",",thousands:".",grouping:[3],currency:["","z"]},x={decimal:",",thousands:".",grouping:[3],currency:["",""]},w={decimal:",",thousands:".",grouping:[3],currency:["","."]},_={decimal:".",thousands:",",grouping:[3],currency:["",""]},k={decimal:",",thousands:".",grouping:[3],currency:["",""]},$={decimal:".",thousands:",",grouping:[3],currency:["",""]},S={decimal:",",thousands:".",grouping:[3],currency:["",""]},M={decimal:",",thousands:"",grouping:[3],currency:["","$"]},T={decimal:",",thousands:"",grouping:[3],currency:["",""]},C={decimal:",",thousands:".",grouping:[3],currency:["",""]},E={decimal:".",thousands:",",grouping:[3],currency:["$",""]},A={decimal:".",thousands:",",grouping:[3],currency:["",""]},O={decimal:".",thousands:",",grouping:[3],currency:["$",""]},D={decimal:",",thousands:".",grouping:[3],currency:["",""]},L={decimal:",",thousands:".",grouping:[3],currency:["",""]},N={"":a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return i(100*e,t)},r:i,s:r,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},j=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var P=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],R=(new Map).set("ca-ES",L).set("de-DE",D).set("en-CA",O).set("en-GB",A).set("en-US",E).set("es-ES",C).set("fi-FI",T).set("fr-CA",M).set("fr-FR",S).set("he-IL",$).set("it-IT",k).set("ja-JP",_).set("mk-MK",w).set("nl-NL",x).set("pl-PL",b).set("pt-BR",y).set("ru-RU",v).set("zh-CN",m),I=c(E);e.format=I.format,e.formatPrefix=I.formatPrefix,e.localeFormat=p,e.formatSpecifier=o,e.precisionFixed=h,e.precisionPrefix=d,e.precisionRound=f})},{}],32:[function(t,n,r){"undefined"==typeof Map?(Map=function(){this.clear()},Map.prototype={set:function(e,t){return this._[e]=t,this},get:function(e){return this._[e]},has:function(e){return e in this._},"delete":function(e){return e in this._&&delete this._[e]},clear:function(){this._=Object.create(null)},get size(){var e=0;for(var t in this._)++e;return e},forEach:function(e){for(var t in this._)e(this._[t],t,this)}}):function(){var e=new Map;e.set(0,0)!==e&&(e=e.set,Map.prototype.set=function(){return e.apply(this,arguments),this})}(),function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.timeFormat={})}(this,function(e){"use strict";function t(e,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},i.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},i.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},i.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},i.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(i.count=function(t,n){return we.setTime(+t),_e.setTime(+n),e(we),e(_e),Math.floor(r(we,_e))}),i}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}function i(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function s(e){function t(e,t){return function(n){for(var r,i,a,o=[],s=-1,u=0,l=e.length;++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=Oe[r=e.charAt(++s)])&&(r=e.charAt(++s)),(a=t[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function n(e,t){return function(n){var i=o(1900),s=r(i,e,n,0);if(s!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"Z"in i){if("w"in i&&("W"in i||"U"in i)){var u=a(o(i.y)).getUTCDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return i.H+=i.Z/100|0,i.M+=i.Z%100,a(i)}if("w"in i&&("W"in i||"U"in i)){var u=t(o(i.y)).getDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return t(i)}}function r(e,t,n,r){for(var i,a,o=0,s=t.length,u=n.length;s>o;){if(r>=u)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Pe[i in Oe?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=Te.exec(t.slice(n));return r?(e.w=Ce.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,n){var r=Se.exec(t.slice(n));return r?(e.w=Me.get(r[0].toLowerCase()),n+r[0].length):-1}function l(e,t,n){var r=De.exec(t.slice(n));return r?(e.m=Le.get(r[0].toLowerCase()),n+r[0].length):-1}function te(e,t,n){var r=Ee.exec(t.slice(n));return r?(e.m=Ae.get(r[0].toLowerCase()),n+r[0].length):-1}function ne(e,t,n){return r(e,me,t,n)}function re(e,t,n){return r(e,ve,t,n)}function ie(e,t,n){return r(e,ye,t,n)}function ae(e,t,n){var r=$e.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}function oe(e){return we[e.getDay()]}function se(e){return xe[e.getDay()]}function ue(e){return ke[e.getMonth()]}function le(e){return _e[e.getMonth()]}function ce(e){return be[+(e.getHours()>=12)]}function fe(e){return we[e.getUTCDay()]}function de(e){return xe[e.getUTCDay()]}function he(e){return ke[e.getUTCMonth()]}function pe(e){return _e[e.getUTCMonth()]}function ge(e){return be[+(e.getUTCHours()>=12)]}var me=e.dateTime,ve=e.date,ye=e.time,be=e.periods,xe=e.days,we=e.shortDays,_e=e.months,ke=e.shortMonths,$e=f(be),Se=c(xe),Me=f(xe),Te=c(we),Ce=f(we),Ee=c(_e),Ae=f(_e),De=c(ke),Le=f(ke),Ne={a:oe,A:se,b:ue,B:le,c:null,d:M,e:M,H:T,I:C,j:E,L:A,m:O,M:D,p:ce,S:L,U:N,w:j,W:P,x:null,X:null,y:R,Y:I,Z:F,"%":ee},je={a:fe,A:de,b:he,B:pe,c:null,d:U,e:U,H:z,I:q,j:H,L:B,m:Y,M:V,p:ge,S:W,U:G,w:X,W:J,x:null,X:null,y:K,Y:Z,Z:Q,"%":ee},Pe={a:s,A:u,b:l,B:te,c:ne,d:b,e:b,H:w,I:w,j:x,L:$,m:y,M:_,p:ae,S:k,U:h,w:d,W:p,x:re,X:ie,y:m,Y:g,Z:v,"%":S};return Ne.x=t(ve,Ne),Ne.X=t(ye,Ne),Ne.c=t(me,Ne),je.x=t(ve,je),je.X=t(ye,je),je.c=t(me,je),{format:function(e){var r=t(e+="",Ne);return r.parse=n(e,i),r.toString=function(){return e},r},utcFormat:function(e){var r=t(e+="",je);return r.parse=n(e,a),r.toString=function(){return e},r}}}function u(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function l(e){return e.replace(Ne,"\\$&")}function c(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function f(e){for(var t=new Map,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function d(e,t,n){var r=De.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function h(e,t,n){var r=De.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function p(e,t,n){var r=De.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function g(e,t,n){var r=De.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function m(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function y(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function x(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function w(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function k(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=Le.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function M(e,t){return u(e.getDate(),t,2)}function T(e,t){return u(e.getHours(),t,2)}function C(e,t){return u(e.getHours()%12||12,t,2)}function E(e,t){return u(1+ke.count(Me(e),e),t,3)}function A(e,t){return u(e.getMilliseconds(),t,3)}function O(e,t){return u(e.getMonth()+1,t,2)}function D(e,t){return u(e.getMinutes(),t,2)}function L(e,t){return u(e.getSeconds(),t,2)}function N(e,t){return u($e.count(Me(e),e),t,2)}function j(e){return e.getDay()}function P(e,t){return u(Se.count(Me(e),e),t,2)}function R(e,t){return u(e.getFullYear()%100,t,2)}function I(e,t){return u(e.getFullYear()%1e4,t,4)}function F(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function U(e,t){return u(e.getUTCDate(),t,2)}function z(e,t){return u(e.getUTCHours(),t,2)}function q(e,t){return u(e.getUTCHours()%12||12,t,2)}function H(e,t){return u(1+Te.count(Ae(e),e),t,3)}function B(e,t){return u(e.getUTCMilliseconds(),t,3)}function Y(e,t){return u(e.getUTCMonth()+1,t,2)}function V(e,t){return u(e.getUTCMinutes(),t,2)}function W(e,t){return u(e.getUTCSeconds(),t,2)}function G(e,t){return u(Ce.count(Ae(e),e),t,2)}function X(e){return e.getUTCDay()}function J(e,t){return u(Ee.count(Ae(e),e),t,2)}function K(e,t){return u(e.getUTCFullYear()%100,t,2)}function Z(e,t){return u(e.getUTCFullYear()%1e4,t,4)}function Q(){return"+0000"}function ee(){return"%"}function te(e){return e.toISOString()}function ne(e){return"string"!=typeof e||(e=Ie.get(e))?s(e):null}var re={dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ie={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ae={dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},oe={dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","r.","Czw.","Pt.","Sob."],months:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Padz.","Listop.","Grudz."]},se={dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]},ue={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},le={dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},ce={dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]},fe={dateTime:"%A, %e %B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},de={dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]},he={dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["jan","fv","mar","avr","mai","jui","jul","ao","sep","oct","nov","dc"]},pe={dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes","Hein","Elo","Syys","Loka","Marras","Joulu"]},ge={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},me={dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ve={dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ye={dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},be={dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},xe={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]},we=new Date,_e=new Date,ke=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),$e=n(0),Se=n(1),Me=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()}),Te=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5}),Ce=r(0),Ee=r(1),Ae=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),Oe={"-":"",_:" ",0:"0"},De=/^\s*\d+/,Le=/^%/,Ne=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,je="%Y-%m-%dT%H:%M:%S.%LZ";te.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},te.toString=function(){return je};var Pe=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?te:me.utcFormat(je),Re=Pe,Ie=(new Map).set("ca-ES",xe).set("de-DE",be).set("en-CA",ye).set("en-GB",ve).set("en-US",me).set("es-ES",ge).set("fi-FI",pe).set("fr-CA",he).set("fr-FR",de).set("he-IL",fe).set("it-IT",ce).set("ja-JP",le).set("mk-MK",ue).set("nl-NL",se).set("pl-PL",oe).set("pt-BR",ae).set("ru-RU",ie).set("zh-CN",re),Fe=s(me);e.format=Fe.format,e.utcFormat=Fe.utcFormat,e.localeFormat=ne,e.isoFormat=Re})},{}],33:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.time={})}(this,function(e){"use strict";function t(e,n,r){function o(t){return e(t=new Date(+t)),t}return o.floor=o,o.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},o.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},o.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},o.range=function(t,r,i){var a=[];if(t=new Date(t-1),
r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},o.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(o.count=function(t,n){return a.setTime(+t),i.setTime(+n),e(a),e(i),Math.floor(r(a,i))}),o}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3});e.seconds=o.range;var s=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4});e.minutes=s.range;var u=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5});e.hours=u.range;var l=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5});e.days=l.range,e.sunday=n(0),e.sundays=e.sunday.range,e.monday=n(1),e.mondays=e.monday.range,e.tuesday=n(2),e.tuesdays=e.tuesday.range,e.wednesday=n(3),e.wednesdays=e.wednesday.range,e.thursday=n(4),e.thursdays=e.thursday.range,e.friday=n(5),e.fridays=e.friday.range,e.saturday=n(6),e.saturdays=e.saturday.range;var c=e.sunday;e.weeks=c.range;var f=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())});e.months=f.range;var d=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()});e.years=d.range;var h=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3});e.utcSeconds=h.range;var p=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4});e.utcMinutes=p.range;var g=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5});e.utcHours=g.range;var m=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5});e.utcDays=m.range,e.utcSunday=r(0),e.utcSundays=e.utcSunday.range,e.utcMonday=r(1),e.utcMondays=e.utcMonday.range,e.utcTuesday=r(2),e.utcTuesdays=e.utcTuesday.range,e.utcWednesday=r(3),e.utcWednesdays=e.utcWednesday.range,e.utcThursday=r(4),e.utcThursdays=e.utcThursday.range,e.utcFriday=r(5),e.utcFridays=e.utcFriday.range,e.utcSaturday=r(6),e.utcSaturdays=e.utcSaturday.range;var v=e.utcSunday;e.utcWeeks=v.range;var y=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())});e.utcMonths=y.range;var b=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()});e.utcYears=b.range,e.interval=t,e.second=o,e.minute=s,e.hour=u,e.day=l,e.week=c,e.month=f,e.year=d,e.utcSecond=h,e.utcMinute=p,e.utcHour=g,e.utcDay=m,e.utcWeek=v,e.utcMonth=y,e.utcYear=b})},{}],34:[function(e,t,n){function r(){this._cells={},this._aggr=[],this._stream=!1}function i(e){if(a.isArray(e))return e;if(null==e)return[];var t,n,r=[];for(t in e)n=a.array(e[t]),r.push({name:t,ops:n});return r}var a=e("../util"),o=e("./measures"),s=e("./collector"),u=r.Flags={ADD_CELL:1,MOD_CELL:2},l=r.prototype;l.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},l.key=function(e){return null==e?this._key:(this._key=a.$(e),this)},l.groupby=function(e){return this._dims=a.array(e).map(function(e,t){if(e=a.isString(e)?{name:e,get:a.$(e)}:a.isFunction(e)?{name:a.name(e)||e.name||"_"+t,get:e}:e.name&&a.isFunction(e.get)?e:null,null==e)throw"Invalid groupby argument: "+e;return e}),this.clear()},l.summarize=function(e){e=i(e),this._count=!0;var t,n,r,s,u,l,c,f=this._aggr=[];for(r=0;r<e.length;++r){for(s=0,t=[],n=e[r];s<n.ops.length;++s)u=n.ops[s],"count"!==u&&(this._count=!1),l=n.as&&n.as[s]||u+("*"===n.name?"":"_"+n.name),t.push(o[u](l));c=n.get&&a.$(n.get)||("*"===n.name?a.identity:a.$(n.name)),f.push({name:n.name,measures:o.create(t,this._stream,c,this._assign)})}return this.clear()},l.count=function(){return this.summarize({"*":"count"})},l._assign=function(e,t,n){e[t]=n},l.clear=function(){return this._cells={},this},l._cellkey=function(e){var t,n=this._dims,r=n.length,i=String(n[0].get(e));for(t=1;r>t;++t)i+="|"+n[t].get(e);return i},l._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},l._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:u.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new s(this._key)),r},l._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;n>t;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},l._ingest=a.identity,l._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=u.MOD_CELL,this._on_add&&this._on_add(e,n)},l._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=u.MOD_CELL,this._on_rem&&this._on_rem(e,n)},l._mod=function(e,t){var n,r=this._cell(t),i=this._cell(e),o=this._aggr;for(r!==i?(r.num-=1,i.num+=1,r.collect&&r.data.rem(t),i.collect&&i.data.add(e)):r.collect&&!a.isObject(e)&&(r.data.rem(t),r.data.add(e)),n=0;n<o.length;++n)r.aggs[o[n].name].rem(t),i.aggs[o[n].name].add(e);r.flag|=u.MOD_CELL,i.flag|=u.MOD_CELL,this._on_mod&&this._on_mod(e,t,r,i)},l.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if(e=this._cells[n],e.num>0){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},l.changes=function(e){var t,n,r,i,a=e||{add:[],rem:[],mod:[]},o=this._aggr;for(i in this._cells){for(t=this._cells[i],n=t.flag,t.collect&&t.data.values(),r=0;r<o.length;++r)t.aggs[o[r].name].set();t.num<=0?(a.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&u.ADD_CELL?a.add.push(t.tuple):n&u.MOD_CELL&&a.mod.push(t.tuple)),t.flag=0}return this._rems=!1,a},l.execute=function(e){return this.clear().insert(e).result()},l.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},l.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},l._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},t.exports=r},{"../util":56,"./collector":35,"./measures":37}],35:[function(e,t,n){function r(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var i=e("../util"),a=e("../stats"),o="__dl_rem__",s=r.prototype;s.add=function(e){this._add.push(e)},s.rem=function(e){this._rem.push(e)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r,s=this._add,u=this._rem,l=this._key,c=Array(s.length-u.length);if(i.isObject(u[0]))if(l)for(r=i.toMap(u,l),e=0,t=0,n=s.length;n>e;++e)r.hasOwnProperty(l(s[e]))||(c[t++]=s[e]);else{for(e=0,n=u.length;n>e;++e)u[e][o]=1;for(e=0,t=0,n=s.length;n>e;++e)s[e][o]||(c[t++]=s[e]);for(e=0,n=u.length;n>e;++e)delete u[e][o]}else for(r=a.count.map(u),e=0,t=0,n=s.length;n>e;++e)r[s[e]]>0?r[s[e]]-=1:c[t++]=s[e];return this._rem=[],this._add=c},s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=a.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},s.argmin=function(e){return this.extent(e)[0]},s.argmax=function(e){return this.extent(e)[1]},s.min=function(e){var t=this.extent(e)[0];return t?e(t):+(1/0)},s.max=function(e){var t=this.extent(e)[1];return t?e(t):-(1/0)},s.quartile=function(e){return this._get===e&&this._q||(this._q=a.quartile(this.values(),e),this._get=e),this._q},s.q1=function(e){return this.quartile(e)[0]},s.q2=function(e){return this.quartile(e)[1]},s.q3=function(e){return this.quartile(e)[2]},t.exports=r},{"../stats":53,"../util":56}],36:[function(e,t,n){var r=e("../util"),i=e("./aggregator");t.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},{"../util":56,"./aggregator":34}],37:[function(e,t,n){function r(e){return function(t){var n=o.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function i(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=s[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return o.vals(r).sort(function(e,t){return e.idx-t.idx})}function a(t,n,r,a){var s=i(t,n),u="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",l="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",c="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",f="var t = this.tuple; var cell = this.cell;";return s.forEach(function(e){e.idx<0?(u=e.init+u,l=e.add+l,c=e.rem+c):(u+=e.init,l+=e.add,c+=e.rem)}),t.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){f+="this.assign(t,'"+e.out+"',"+e.set+");"}),f+="return t;",u=Function("cell","t",u),u.prototype.assign=a,u.prototype.add=Function("t","var v = this.get(t);"+l),u.prototype.rem=Function("t","var v = this.get(t);"+c),u.prototype.set=Function(f),u.prototype.get=r,u.prototype.distinct=e("../stats").count.distinct,u.prototype.isValid=o.isValid,u.fields=t.map(o.$("out")),u}var o=e("../util"),s={values:r({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:r({name:"count",set:"cell.num"}),missing:r({name:"missing",set:"this.missing"}),valid:r({name:"valid",set:"this.valid"}),sum:r({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:r({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:r({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:r({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:r({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:r({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:r({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),median:r({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:r({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:r({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:r({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:r({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:r({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:r({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:r({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:r({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","stdev","median"],idx:5})};s.create=a,t.exports=s},{"../stats":53,"../util":56}],38:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,u,l,c,f=e.maxbins||15,d=e.base||10,h=Math.log(d),p=e.div||[5,2],g=e.min,m=e.max,v=m-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,v/f,0,e.steps.length))];else{n=Math.ceil(Math.log(f)/h),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(v)/h)-n));do t*=d;while(Math.ceil(v/t)>f);for(l=0;l<p.length;++l)u=t/p[l],u>=r&&f>=v/u&&(t=u)}return u=Math.log(t),s=u>=0?0:~~(-u/h)+1,c=Math.pow(d,-s-1),g=Math.min(g,Math.floor(g/t+c)*t),m=Math.ceil(m/t)*t,{start:g,stop:m,step:t,unit:{precision:s},value:a,index:o}}function i(e,t,n,r){for(;r>n;){var i=n+r>>>1;l.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(a.call(this,e))}function u(e){return o.call(this,this.unit.unit(e))}var l=e("../util"),c=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?c.utc:c,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,l=+i-+n,f=e.unit?t[e.unit]:t.find(l,o,a),d=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return d.unit=f,d.index=u,e.raw||(d.value=s),d},t.exports=r},{"../time":55,"../util":56}],39:[function(e,t,n){function r(e,t,n){n=o(e,t,n);var r=a(n);return r?d.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||d.identity}function i(e,t,n){n=o(e,t,n);var r=a(n);return r?s(e,n.accessor,r):u(e,n.accessor,n&&n.sort)}function a(e){var t=e.type,n=null;return(null==t||p[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?l.date(e):l(e)),n}function o(){var e=arguments,t=0,n=d.isArray(e[t])?e[t++]:null,r=d.isFunction(e[t])||d.isString(e[t])?d.$(e[t++]):null,i=d.extend({},e[t]);if(n&&(i.type=i.type||f(n,r),p[i.type])){var a=h.extent(n,r);i=d.extend({min:a[0],max:a[1]},i)}return r&&(i.accessor=r),i}function s(e,t,n){for(var r,i,a=c.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),o=0;o<e.length;++o)if(r=t?t(e[o]):e[o],d.isValid(r)){if(i=n.index(r),0>i||i>=a.length||!isFinite(i))continue;a[i].count+=1}return a.bins=n,a}function u(e,t,n){var r=h.unique(e,t),i=h.count.map(e,t);return r.map(function(e){return{value:e,count:i[e]}}).sort(d.comparator(n?"-count":"+value"))}var l=e("./bins"),c=e("../generate"),f=e("../import/type"),d=e("../util"),h=e("../stats"),p={integer:1,number:1,date:1};t.exports={$bin:r,histogram:i}},{"../generate":41,"../import/type":50,"../stats":53,"../util":56,"./bins":38}],40:[function(e,t,n){function r(e){var t=f.localeFormat(e);if(null==t)throw Error("Unrecognized locale: "+e);d=t}function i(e){var t=c.localeFormat(e);if(null==t)throw Error("Unrecognized locale: "+e);h=t}function a(e,t){e.length||(e=[0]),null==t&&(t=10);var n=e[0],r=e[e.length-1];n>r&&(o=r,r=n,n=o);var i=r-n||(t=1,n||r||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=i/t/a;return o>=p?a*=10:o>=g?a*=5:o>=m&&(a*=2),[Math.ceil(n/a)*a,Math.floor(r/a)*a+a/2,a]}function o(e,t,n){var r=a(e,t);if(null==n)n=",."+f.precisionFixed(r[2])+"f";else switch(n=f.formatSpecifier(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=f.precisionPrefix(r[2],i)),d.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=f.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=f.precisionFixed(r[2])-2*("%"===n.type))}return d.format(n)}function s(){var e=h.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var c=+e;return(l.second(e)<c?t:l.minute(e)<c?n:l.hour(e)<c?r:l.day(e)<c?i:l.month(e)<c?l.week(e)<c?a:o:l.year(e)<c?s:u)(e)}}function u(){var e=h.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var c=+e;return(l.utcSecond(e)<c?t:l.utcMinute(e)<c?n:l.utcHour(e)<c?r:l.utcDay(e)<c?i:l.utcMonth(e)<c?l.utcWeek(e)<c?a:o:l.utcYear(e)<c?s:u)(e)}}var l=e("d3-time"),c=e("d3-time-format"),f=e("d3-format"),d=f,h=c;t.exports={numberLocale:r,number:function(e){return d.format(e)},numberPrefix:function(e,t){return d.formatPrefix(e,t)},timeLocale:i,time:function(e){return h.format(e)},utc:function(e){return h.utcFormat(e)},locale:function(e){r(e),i(e)},auto:{number:o,time:function(){return s()},utc:function(){return u()}}};var p=Math.sqrt(50),g=Math.sqrt(10),m=Math.sqrt(2)},{"d3-format":31,"d3-time":33,"d3-time-format":32}],41:[function(e,t,n){var r=t.exports={};r.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},r.zeros=function(e){return r.repeat(0,e)},r.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(0>n)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},r.random={},r.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,i=function(){return e+n*Math.random()};return i.samples=function(e){return r.zeros(e).map(i)},i},r.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,i=function(){return e+Math.floor(n*Math.random())};return i.samples=function(e){return r.zeros(e).map(i)},i},r.random.normal=function(e,t){e=e||0,t=t||1;var n,i=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return i.samples=function(e){return r.zeros(e).map(i)},i}},{}],42:[function(e,t,n){function r(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return a.dsv(t.delimiter).parse(e)}var i=e("../../util"),a=e("d3-dsv");r.delimiter=function(e){var t={delimiter:e};return function(e,n){return r(e,n?i.extend(n,t):t)}},t.exports=r},{"../../util":56,"d3-dsv":30}],43:[function(e,t,n){var r=e("./dsv");t.exports={json:e("./json"),topojson:e("./topojson"),treejson:e("./treejson"),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("	")}},{"./dsv":42,"./json":44,"./topojson":45,"./treejson":46}],44:[function(e,t,n){var r=e("../../util");t.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=r.accessor(t.property)(n)),n}},{"../../util":56}],45:[function(e,t,n){(function(n){var r=e("./json"),i=function(e,t){var n=i.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var a,o=r(e,t);if(t&&t.feature){if(a=o.objects[t.feature])return n.feature(o,a).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(a=o.objects[t.mesh])return[n.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};i.topojson="undefined"!=typeof window?window.topojson:"undefined"!=typeof n?n.topojson:null,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./json":44}],46:[function(e,t,n){function r(e,t){function n(e){r.push(e);var i=e[t];if(i)for(var a=0;a<i.length;++a)n(i[a],e)}t=t||"children";var r=[];return n(e,null),r.root=e,r}var i=e("./json");t.exports=function(e,t){return e=i(e,t),r(e,t&&t.children)}},{"./json":44}],47:[function(e,t,n){function r(t){var n=t.url;if(!n&&t.file)return f+t.file;if(t.baseURL&&!c.test(n)&&(l(n,"/")||"/"===t.baseURL[t.baseURL.length-1]||(n="/"+n),n=t.baseURL+n),!i.useXHR&&l(n,"//")&&(n=(t.defaultProtocol||"http")+":"+n),t.domainWhiteList){var r,a;if(i.useXHR){var o=document.createElement("a");o.href=n,""===o.host&&(o.href=o.href),r=o.hostname.toLowerCase(),a=window.location.hostname}else{var s=e("url").parse(n);r=s.hostname,a=null}if(a!==r){var u=t.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t});if(!u)throw"URL is not whitelisted: "+n}}return n}function i(e,t){var n,r=t||function(e){throw e};try{n=i.sanitizeUrl(e)}catch(a){return void r(a)}return n?i.useXHR?o(n,t):l(n,f)?s(n.slice(f.length),t):n.indexOf("://")<0?s(n,t):u(n,t):void r("Invalid URL: "+e.url)}function a(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function o(e,t){function n(){var e=i.status;!e&&a(i)||e>=200&&300>e||304===e?t(null,i.responseText):t(i,null)}var r=!!t,i=new XMLHttpRequest;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(e)||(i=new XDomainRequest),r&&("onload"in i?i.onload=i.onerror=n:i.onreadystatechange=function(){i.readyState>3&&n()}),i.open("GET",e,r),i.send(),!r&&a(i)?i.responseText:void 0}function s(t,n){var r=e("fs");return n?void r.readFile(t,n):r.readFileSync(t,"utf8")}function u(t,n){if(!n)return e("sync-request")("GET",t).getBody();var r={url:t,encoding:null,gzip:!0};e("request")(r,function(e,t,r){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",n(e,null)):n(null,r)})}function l(e,t){return null==e?!1:0===e.lastIndexOf(t,0)}var c=/^([A-Za-z]+:)?\/\//,f="file://";i.sanitizeUrl=r,i.useXHR="undefined"!=typeof XMLHttpRequest,t.exports=i},{fs:1,request:1,"sync-request":1,url:1}],48:[function(e,t,n){function r(e,t){var n=t&&t.type||"json";return e=s[n](e,t),t&&t.parse&&i(e,t.parse),e}function i(e,t){var n,r,i,s,u,l,c=e.length;for(t="auto"===t?o.inferAll(e):a.duplicate(t),n=a.keys(t),r=n.map(function(e){return o.parsers[t[e]]}),s=0,l=n.length;c>s;++s)for(i=e[s],u=0;l>u;++u)i[n[u]]=r[u](i[n[u]]);o.annotation(e,t)}var a=e("../util"),o=e("./type"),s=e("./formats");r.formats=s,t.exports=r},{"../util":56,"./formats":43,"./type":50}],49:[function(e,t,n){var r=e("../util"),i=e("./load"),a=e("./read");t.exports=r.keys(a.formats).reduce(function(e,t){return e[t]=function(e,n,o){r.isString(e)&&(e={url:e}),2===arguments.length&&r.isFunction(n)&&(o=n,n=void 0),n=r.extend({parse:"auto"},n),n.type=t;var s=i(e,o?function(e,t){if(e)return void o(e,null);try{t=a(t,n),o(null,t)}catch(r){o(r,null)}}:void 0);return o?void 0:a(s,n)},e},{})},{"../util":56,"./load":47,"./read":48}],50:[function(e,t,n){function r(e,t){return t?void(e[l]=t):e&&e[l]||null}function i(e,t){t=u.$(t);var n,r,i;if(e[l]&&(n=t(e[l]),u.isString(n)))return n;for(r=0,i=e.length;!u.isValid(n)&&i>r;++r)n=t?t(e[r]):e[r];return u.isDate(n)?"date":u.isNumber(n)?"number":u.isBoolean(n)?"boolean":u.isString(n)?"string":null}function a(e,t){return e.length?(t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=i(e,n),t},{})):void 0}function o(e,t){t=u.$(t);var n,r,i,a=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(i=t?t(e[n]):e[n],r=0;r<a.length;++r)u.isValid(i)&&!f[a[r]](i)&&(a.splice(r,1),r-=1);if(0===a.length)return"string"}return a[0]}function s(e,t){return t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=o(e,n),t},{})}var u=e("../util"),l="__types__",c={"boolean":u["boolean"],integer:u.number,number:u.number,date:u.date,string:function(e){return""===e?null:e}},f={"boolean":function(e){return"true"===e||"false"===e||u.isBoolean(e)},integer:function(e){return f.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!u.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};i.annotation=r,i.all=a,i.infer=o,i.inferAll=s,i.parsers=c,t.exports=i},{"../util":56}],51:[function(e,t,n){var r=e("./util"),i={version:"0.8.2",load:e("./import/load"),read:e("./import/read"),type:e("./import/type"),Aggregator:e("./aggregate/aggregator"),groupby:e("./aggregate/groupby"),bins:e("./bins/bins"),$bin:e("./bins/histogram").$bin,histogram:e("./bins/histogram").histogram,format:e("./format"),print:e("./print"),template:e("./template"),time:e("./time")};r.extend(i,r),r.extend(i,e("./generate")),r.extend(i,e("./stats")),r.extend(i,e("./import/readers")),t.exports=i},{"./aggregate/aggregator":34,"./aggregate/groupby":36,"./bins/bins":38,"./bins/histogram":39,"./format":40,"./generate":41,"./import/load":47,"./import/read":48,"./import/readers":49,"./import/type":50,"./print":52,"./stats":53,"./template":54,"./time":55,"./util":56}],52:[function(e,t,n){function r(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function i(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=a.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(r).join("\n")}var a=e("./util"),o=e("./import/type"),s=e("./stats"),u=e("./template"),l={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},c={number:"left",integer:"left"};t.exports.table=function(e,t){t=a.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||a.keys(e[0]),r=o.all(e);if(t.start||t.limit){var i=t.start||0,f=t.limit?i+t.limit:e.length;e=e.slice(i,f)}var d=n.map(function(n){var i=l[r[n]]||"",a=u("{{"+n+i+"}}"),o=s.max(e,function(e){return a(e).length});return o=Math.max(Math.min(n.length,t.minwidth),o),t.maxwidth>0?Math.min(o,t.maxwidth):o}),h=n.map(function(e,t){return a.truncate(a.pad(e,d[t],"center"),d[t])}).join(t.separator),p=u(n.map(function(e,t){return"{{"+e+(l[r[e]]||"")+("|pad:"+d[t]+","+(c[r[e]]||"right"))+("|truncate:"+d[t])+"}}"}).join(t.separator));return h+"\n"+e.map(p).join("\n")},t.exports.summary=function(e){e=e?e.__summary__?e:s.summary(e):this;var t,n,a=[];for(t=0,n=e.length;n>t;++t)a.push("-- "+e[t].field+" --"),a.push("string"===e[t].type||e[t].distinct<10?i(e[t]):r(e[t])),a.push("");return a.join("\n")}},{"./import/type":50,"./stats":53,"./template":54,"./util":56}],53:[function(e,t,n){var r=e("./util"),i=e("./import/type"),a=e("./generate"),o={};o.unique=function(e,t,n){t=r.$(t),n=n||[];var i,a,o,s={};for(a=0,o=e.length;o>a;++a)i=t?t(e[a]):e[a],i in s||(s[i]=1,n.push(i));return n},o.count=function(e){return e&&e.length||0},o.count.valid=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],r.isValid(n)&&(o+=1);return o},o.count.missing=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],null==n&&(o+=1);return o},o.count.distinct=function(e,t){t=r.$(t);var n,i,a,o={},s=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],n in o||(o[n]=1,s+=1);return s},o.count.map=function(e,t){t=r.$(t);var n,i,a,o={};for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],o[n]=n in o?o[n]+1:1;return o},o.median=function(e,t){return t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp),o.quantile(e,.5)},o.quartile=function(e,t){t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp);var n=o.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},o.quantile=function(e,t,n){void 0===n&&(n=t,t=r.identity),t=r.$(t);var i=(e.length-1)*n+1,a=Math.floor(i),o=+t(e[a-1]),s=i-a;return s?o+s*(t(e[a])-o):o},o.sum=function(e,t){t=r.$(t);for(var n,i=0,a=0,o=e.length;o>a;++a)n=t?t(e[a]):e[a],r.isValid(n)&&(i+=n);return i},o.mean=function(e,t){t=r.$(t);var n,i,a,o,s,u=0;for(i=0,o=0,a=e.length;a>i;++i)s=t?t(e[i]):e[i],r.isValid(s)&&(n=s-u,u+=n/++o);return u},o.variance=function(e,t){if(t=r.$(t),!r.isArray(e)||e.length<2)return 0;var n,i,a,o,s=0,u=0;for(i=0,a=0;i<e.length;++i)o=t?t(e[i]):e[i],r.isValid(o)&&(n=o-s,s+=n/++a,u+=n*(o-s));return u/=a-1},o.stdev=function(e,t){return Math.sqrt(o.variance(e,t))},o.modeskew=function(e,t){var n=o.mean(e,t),r=o.median(e,t),i=o.stdev(e,t);return 0===i?0:(n-r)/i},o.min=function(e,t){return o.extent(e,t)[0]},o.max=function(e,t){return o.extent(e,t)[1]},o.extent=function(e,t){t=r.$(t);var n,i,a,o,s=e.length;for(o=0;s>o;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a;break}for(;s>o;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(n>a&&(n=a),a>i&&(i=a));return[n,i]},o.extent.index=function(e,t){t=r.$(t);var n,i,a,o,s=-1,u=-1,l=e.length;for(o=0;l>o;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a,s=u=o;break}for(;l>o;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(n>a&&(n=a,s=o),a>i&&(i=a,u=o));return[s,u]},o.dot=function(e,t,n){var i,a,o=0;if(n)for(t=r.$(t),n=r.$(n),i=0;i<e.length;++i)a=t(e[i])*n(e[i]),a===a&&(o+=a);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(i=0;i<e.length;++i)a=e[i]*t[i],a===a&&(o+=a)}return o},o.rank=function(e,t){t=r.$(t)||r.identity;var n,i,a,o=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(r.comparator("val")),s=e.length,u=Array(s),l=-1,c={};for(n=0;s>n;++n){if(i=o[n].val,0>l&&c===i)l=n-1;else if(l>-1&&c!==i){for(a=1+(n-1+l)/2;n>l;++l)u[o[l].idx]=a;l=-1}u[o[n].idx]=n+1,c=i}if(l>-1)for(a=1+(s-1+l)/2;s>l;++l)u[o[l].idx]=a;return u},o.cor=function(e,t,n){var i=n;n=i?e.map(r.$(n)):t,t=i?e.map(r.$(t)):e;var a=o.dot(t,n),s=o.mean(t),u=o.mean(n),l=o.stdev(t),c=o.stdev(n),f=e.length;return(a-f*s*u)/((f-1)*l*c)},o.cor.rank=function(e,t,n){var i,a,s,u=n?o.rank(e,r.$(t)):o.rank(e),l=n?o.rank(e,r.$(n)):o.rank(t),c=e.length;for(i=0,a=0;c>i;++i)s=u[i]-l[i],a+=s*s;return 1-6*a/(c*(c*c-1))},o.cor.dist=function(e,t,n){var i,a,s,u,l=n?e.map(r.$(t)):e,c=n?e.map(r.$(n)):t,f=o.dist.mat(l),d=o.dist.mat(c),h=f.length;for(i=0,a=0,s=0,u=0;h>i;++i)a+=f[i]*f[i],s+=d[i]*d[i],u+=f[i]*d[i];return Math.sqrt(u/Math.sqrt(a*s))},o.dist=function(e,t,n,i){var a,o,s=r.isFunction(n)||r.isString(n),u=e,l=s?e:t,c=s?i:n,f=2===c||null==c,d=e.length,h=0;for(s&&(t=r.$(t),n=r.$(n)),o=0;d>o;++o)a=s?t(u[o])-n(l[o]):u[o]-l[o],h+=f?a*a:Math.pow(Math.abs(a),c);return f?Math.sqrt(h):Math.pow(h,1/c)},o.dist.mat=function(e){var t,n,r,i=e.length,o=i*i,s=Array(o),u=a.zeros(i),l=0;for(n=0;i>n;++n)for(s[n*i+n]=0,r=n+1;i>r;++r)s[n*i+r]=t=Math.abs(e[n]-e[r]),s[r*i+n]=t,u[n]+=t,u[r]+=t;for(n=0;i>n;++n)l+=u[n],u[n]/=i;for(l/=o,n=0;i>n;++n)for(r=n;i>r;++r)s[n*i+r]+=l-u[n]-u[r],s[r*i+n]=s[n*i+r];return s},o.entropy=function(e,t){t=r.$(t);var n,i,a=0,o=0,s=e.length;for(n=0;s>n;++n)a+=t?t(e[n]):e[n];if(0===a)return 0;for(n=0;s>n;++n)i=(t?t(e[n]):e[n])/a,i&&(o+=i*Math.log(i));return-o/Math.LN2},o.mutual=function(e,t,n,i){var a,o,s,u=i?e.map(r.$(t)):e,l=i?e.map(r.$(n)):t,c=i?e.map(r.$(i)):n,f={},d={},h=c.length,p=0,g=0,m=0;for(s=0;h>s;++s)f[u[s]]=0,d[l[s]]=0;for(s=0;h>s;++s)f[u[s]]+=c[s],d[l[s]]+=c[s],p+=c[s];for(o=1/(p*Math.LN2),s=0;h>s;++s)0!==c[s]&&(a=p*c[s]/(f[u[s]]*d[l[s]]),g+=c[s]*o*Math.log(a),m+=c[s]*o*Math.log(c[s]/p));return[g,1+g/m]},o.mutual.info=function(e,t,n,r){return o.mutual(e,t,n,r)[0]},o.mutual.dist=function(e,t,n,r){return o.mutual(e,t,n,r)[1]},o.profile=function(e,t){var n,a,s,u,l,c=0,f=0,d=0,h=0,p=null,g=null,m=0,v=[],y={};for(s=0;s<e.length;++s)u=t?t(e[s]):e[s],y[u]=u in y?y[u]+1:(h+=1,1),null==u?++d:r.isValid(u)&&(l="string"==typeof u?u.length:u,(null===p||p>l)&&(p=l),(null===g||l>g)&&(g=l),n=l-c,c+=n/++f,m+=n*(l-c),v.push(l));return m/=f-1,a=Math.sqrt(m),v.sort(r.cmp),{type:i(e,t),unique:y,count:e.length,valid:f,missing:d,distinct:h,min:p,max:g,mean:c,stdev:a,median:u=o.quantile(v,.5),q1:o.quantile(v,.25),q3:o.quantile(v,.75),modeskew:0===a?0:(c-u)/a}},o.summary=function(e,t){t=t||r.keys(e[0]);var n=t.map(function(t){var n=o.profile(e,r.$(t));return n.field=t,n});return n.__summary__=!0,
n},t.exports=o},{"./generate":41,"./import/type":50,"./util":56}],54:[function(e,t,n){function r(e){var t=i(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(c)}function i(e,t,n){t=t||"obj";var r=0,i="'",s=f;return e.replace(s,function(s,u,l){return i+=e.slice(r,l).replace(g,o),r=l+s.length,u&&(i+="'\n+((__t=("+a(u,t,n)+"))==null?'':__t)+\n'"),s}),i+"'"}function a(e,t,n){function i(e){return e=e||"",g?(g=!1,m="String("+m+")"+e):m+=e,m}function a(){return"(typeof "+m+'==="number"?new Date('+m+"):"+m+")"}function o(e,t){b=s(_[0],t,e),g=!1,m="this.formats["+b+"]("+m+")"}function c(e,t){b=s(_[0],t,e),g=!1,m="this.formats["+b+"]("+a()+")"}var f=e.match(d),p=f.shift().trim(),g=!0;n&&(n[p]=1);for(var m=r.property(t,p),v=0;v<f.length;++v){var y,b,x,w=f[v],_=null;switch((y=w.indexOf(":"))>0&&(w=w.slice(0,y),_=f[v].slice(y+1).match(h).map(function(e){return e.trim()})),w=w.trim()){case"length":i(".length");break;case"lower":i(".toLowerCase()");break;case"upper":i(".toUpperCase()");break;case"lower-locale":i(".toLocaleLowerCase()");break;case"upper-locale":i(".toLocaleUpperCase()");break;case"trim":i(".trim()");break;case"left":b=u.number(_[0]),i(".slice(0,"+b+")");break;case"right":b=u.number(_[0]),i(".slice(-"+b+")");break;case"mid":b=u.number(_[0]),x=b+u.number(_[1]),i(".slice(+"+b+","+x+")");break;case"slice":b=u.number(_[0]),i(".slice("+b+(_.length>1?","+u.number(_[1]):"")+")");break;case"truncate":b=u.number(_[0]),x=_[1],x="left"!==x&&"middle"!==x&&"center"!==x?"right":x,m="this.truncate("+i()+","+b+",'"+x+"')";break;case"pad":b=u.number(_[0]),x=_[1],x="left"!==x&&"middle"!==x&&"center"!==x?"right":x,m="this.pad("+i()+","+b+",'"+x+"')";break;case"number":o(l.number,"number");break;case"time":c(l.time,"time");break;case"time-utc":c(l.utc,"time-utc");break;default:throw Error("Unrecognized template filter: "+w)}}return m}function o(e){return"\\"+p[e]}function s(e,t,n){if(!("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]))throw Error("Format pattern must be quoted: "+e);if(e=e.slice(1,-1),t=t+":"+e,!c.format_map[t]){var r=n(e),i=c.formats.length;c.formats.push(r),c.format_map[t]=i}return c.format_map[t]}var u=e("./util"),l=e("./format"),c={formats:[],format_map:{},truncate:u.truncate,pad:u.pad};r.source=i,r.context=c,t.exports=r,r.clearFormatCache=function(){c.formats=[],c.format_map={}},r.property=function(e,t){var n=u.field(t).map(u.str).join("][");return e+"["+n+"]"};var f=/\{\{(.+?)\}\}|$/g,d=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,h=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,p={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},g=/\\|'|\r|\n|\u2028|\u2029/g},{"./format":40,"./util":56}],55:[function(e,t,n){function r(e){return l.setTime(+e),l}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,s=p[0];for(i=1,a=p.length;a>i;++i)if(s=p[i],t>s[0]){if(o=t/s[0],o>r)return e[p[i-1][1]];if(o>=n)return e[s[1]]}return e[p[a-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var u=e("d3-time"),l=new Date,c=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),d=[a("second",u.second,c),a("minute",u.minute,c),a("hour",u.hour,c),a("day",u.day,c,[1,7]),a("month",u.month,c,[1,3,6]),a("year",u.year,c),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],h=[a("second",u.utcSecond,f),a("minute",u.utcMinute,f),a("hour",u.utcHour,f),a("day",u.utcDay,f,[1,7]),a("month",u.utcMonth,f,[1,3,6]),a("year",u.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],p=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=s(d),t.exports.utc=s(h)},{"d3-time":33}],56:[function(e,t,n){function r(e){return e.replace(d,"$1\\'")}function i(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function a(e,t,n){var r=0,i=e.split(p);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():i.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():i[0].slice(0,t)}var o=e("buffer"),s=e("./time"),u=s.utc,l=t.exports={},c="__name__";l.namedfunc=function(e,t){return t[c]=e,t},l.name=function(e){return null==e?null:e[c]},l.identity=function(e){return e},l["true"]=l.namedfunc("true",function(){return!0}),l["false"]=l.namedfunc("false",function(){return!1}),l.duplicate=function(e){return JSON.parse(JSON.stringify(e))},l.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},l.extend=function(e){for(var t,n,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},l.length=function(e){return null!=e&&null!=e.length?e.length:null},l.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},l.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},l.toMap=function(e,t){return(t=l.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},l.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var f=Object.prototype.toString;l.isObject=function(e){return e===Object(e)},l.isFunction=function(e){return"[object Function]"===f.call(e)},l.isString=function(e){return"string"==typeof value||"[object String]"===f.call(e)},l.isArray=Array.isArray||function(e){return"[object Array]"===f.call(e)},l.isNumber=function(e){return"number"==typeof e||"[object Number]"===f.call(e)},l.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},l.isDate=function(e){return"[object Date]"===f.call(e)},l.isValid=function(e){return null!=e&&e===e},l.isBuffer=o.Buffer&&o.Buffer.isBuffer||l["false"],l.number=function(e){return null==e||""===e?null:+e},l["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},l.date=function(e){return null==e||""===e?null:Date.parse(e)},l.array=function(e){return null!=e?l.isArray(e)?e:[e]:[]},l.str=function(e){return l.isArray(e)?"["+e.map(l.str)+"]":l.isObject(e)?JSON.stringify(e):l.isString(e)?"'"+r(e)+"'":e};var d=/(^|[^\\])'/g,h=/\[(.*?)\]|[^.\[]+/g;l.field=function(e){return String(e).match(h).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},l.accessor=function(e){var t;return null==e||l.isFunction(e)?e:l.namedfunc(e,(t=l.field(e)).length>1?function(e){return t.reduce(function(e,t){return e[t]},e)}:function(t){return t[e]})},l.$=l.accessor,l.mutator=function(e){var t;return l.isString(e)&&(t=l.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},l.$func=function(e,t){return function(n){n=l.$(n)||l.identity;var r=e+(l.name(n)?"_"+l.name(n):"");return l.namedfunc(r,function(e){return t(n(e))})}},l.$valid=l.$func("valid",l.isValid),l.$length=l.$func("length",l.length),l.$in=function(e,t){e=l.$(e);var n=l.isArray(t)?l.toMap(t):t;return function(t){return!!n[e(t)]}},l.$year=l.$func("year",s.year.unit),l.$month=l.$func("month",s.months.unit),l.$date=l.$func("date",s.dates.unit),l.$day=l.$func("day",s.weekdays.unit),l.$hour=l.$func("hour",s.hours.unit),l.$minute=l.$func("minute",s.minutes.unit),l.$second=l.$func("second",s.seconds.unit),l.$utcYear=l.$func("utcYear",u.year.unit),l.$utcMonth=l.$func("utcMonth",u.months.unit),l.$utcDate=l.$func("utcDate",u.dates.unit),l.$utcDay=l.$func("utcDay",u.weekdays.unit),l.$utcHour=l.$func("utcHour",u.hours.unit),l.$utcMinute=l.$func("utcMinute",u.minutes.unit),l.$utcSecond=l.$func("utcSecond",u.seconds.unit),l.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=l.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),l.accessor(e)}),function(n,r){var i,a,o,s,u;for(i=0,a=e.length;a>i;++i){if(o=e[i],s=o(n),u=o(r),u>s)return-1*t[i];if(s>u)return t[i]}return 0}},l.cmp=function(e,t){return t>e?-1:e>t?1:e>=t?0:null===e?-1:null===t?1:0/0},l.numcmp=function(e,t){return e-t},l.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return o>a?-1:a>o?1:r[n(e)]-r[n(i)]}),e},l.pad=function(e,t,n,r){r=r||" ";var a=t-e.length;if(0>=a)return e;switch(n){case"left":return i(a,r)+e;case"middle":case"center":return i(Math.floor(a/2),r)+e+i(Math.ceil(a/2),r);default:return e+i(a,r)}},l.truncate=function(e,t,n,r,i){var o=e.length;if(t>=o)return e;i=void 0!==i?String(i):"";var s=Math.max(0,t-i.length);switch(n){case"left":return i+(r?a(e,s,1):e.slice(o-s));case"middle":case"center":var u=Math.ceil(s/2),l=Math.floor(s/2);return(r?a(e,u):e.slice(0,u))+i+(r?a(e,l,1):e.slice(o-l));default:return(r?a(e,s):e.slice(0,s))+i}};var p=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/},{"./time":55,buffer:1}],57:[function(e,t,n){function r(e,t){var n={};return i(e,n),n.add=[],n.mod=[],n.rem=[],n.reflow=t,n}function i(e,t){t.stamp=e?e.stamp:0,t.sort=e?e.sort:null,t.facet=e?e.facet:null,t.trans=e?e.trans:null,t.dirty=e?e.dirty:[],t.request=e?e.request:null;for(var n,r=0,i=a.length;i>r;++r)t[n=a[r]]=e?e[n]:{}}var a=e("./Dependencies").ALL;t.exports={create:r,copy:i}},{"./Dependencies":60}],58:[function(e,t,n){function r(e){o.init.call(this,e),this._data=[],this.router(!0).collector(!0)}var i=e("vega-logging"),a=e("./Tuple"),o=e("./Node").prototype,s=r.prototype=Object.create(o);s.constructor=r,s.data=function(){return this._data},s.evaluate=function(e){return i.debug(e,["collecting"]),e.rem.length&&(this._data=a.idFilter(this._data,e.rem)),e.add.length&&(this._data=this._data.length?this._data.concat(e.add):e.add),e.sort&&this._data.sort(e.sort),e.reflow&&(e.mod=e.mod.concat(a.idFilter(this._data,e.add,e.mod,e.rem)),e.reflow=!1),e},t.exports=r},{"./Node":63,"./Tuple":65,"vega-logging":72}],59:[function(e,t,n){function r(e,t,n){this._graph=e,this._name=t,this._data=[],this._source=null,this._facet=n,this._input=u.create(),this._output=null,this._inputNode=null,this._outputNode=null,this._pipeline=null,this._collector=null,this._mutates=!1}function i(e){var t=new f(e._graph).router(!0).collector(!0);return t.data=function(){return e._data},t.evaluate=function(t){s.debug(t,["input",e._name]);var n,r=e._input,i=u.create(t);for(n in r.fields)i.fields[n]=1;return r.rem.length&&(e._data=c.idFilter(e._data,r.rem)),r.add.length&&(e._data=e._data.concat(r.add)),t.reflow&&(r.mod=r.mod.concat(c.idFilter(e._data,r.add,r.mod,r.rem))),e._input=u.create(),i.add=r.add,i.mod=r.mod,i.rem=r.rem,i.facet=e._facet,i},t}function a(e){var t=new f(e._graph).router(!0).reflows(!0).collector(!0);return t.data=function(){return e._collector?e._collector.data():e._data},t.evaluate=function(t){s.debug(t,["output",e._name]);var n=u.create(t,!0);return e._facet&&(e._facet.values=e.values(),t.facet=null),e._output=t,n.data[e._name]=1,n},t}function o(e){var t=new f(e._graph).router(!0);return t.evaluate=function(t){if(e.mutates()){var n=e._srcMap||(e._srcMap={}),r=u.create(t);return r.add=t.add.map(function(e){return n[e._id]=c.derive(e)}),r.mod=t.mod.map(function(e){return c.rederive(e,n[e._id])}),r.rem=t.rem.map(function(e){var t=n[e._id];return n[e._id]=null,t}),e._input=r}return e._input=t},t}var s=e("vega-logging"),u=e("./ChangeSet"),l=e("./Collector"),c=e("./Tuple"),f=e("./Node"),d=r.prototype;d.name=function(e){return arguments.length?(this._name=e,this):this._name},d.source=function(e){return arguments.length?this._source=this._graph.data(e):this._source},d.insert=function(e){return this._input.add=this._input.add.concat(e.map(c.ingest)),this},d.remove=function(e){var t=this._data.filter(e);return this._input.rem=this._input.rem.concat(t),this},d.update=function(e,t,n){var r=this._input.mod,i=c.idMap(r);return this._input.fields[t]=1,this._data.filter(e).forEach(function(e){var a=e[t],o=n(e);a!==o&&(c.set(e,t,o),1!==i[e._id]&&(r.push(e),i[e._id]=1))}),this},d.values=function(e){return arguments.length?(this._input.rem=this._data.slice(),e&&this.insert(e),this):this._collector.data()},d.mutates=function(e){return arguments.length?(this._mutates=this._mutates||e,this):this._mutates},d.last=function(){return this._output},d.fire=function(e){return e&&(this._input=e),this._graph.propagate(this._input,this._pipeline[0]),this},d.pipeline=function(e){if(!arguments.length)return this._pipeline;var t,n=this._graph;return e.unshift(this._inputNode=i(this)),t=n.preprocess(e),t.router&&e.push(t.collector=new l(n)),e.push(this._outputNode=a(this)),this._collector=t.collector,this._mutates=!!t.mutates,n.connect(this._pipeline=e),this},d.synchronize=function(){return this._graph.synchronize(this._pipeline),this},d.listener=function(){return o(this).addListener(this._inputNode)},d.addListener=function(e){return e instanceof r?this._collector.addListener(e.listener()):this._outputNode.addListener(e),this},d.removeListener=function(e){this._outputNode.removeListener(e)},d.listeners=function(e){return(e?this._collector:this._outputNode).listeners()},t.exports=r},{"./ChangeSet":57,"./Collector":58,"./Node":63,"./Tuple":65,"vega-logging":72}],60:[function(e,t,n){var r=t.exports={ALL:["data","fields","scales","signals"]};r.ALL.forEach(function(e){r[e.toUpperCase()]=e})},{}],61:[function(e,t,n){function r(){}var i=e("datalib"),a=e("./Heap"),o=e("./ChangeSet"),s=e("./DataSource"),u=e("./Collector"),l=e("./Tuple"),c=e("./Signal"),f=e("./Dependencies"),d=r.prototype;d.init=function(){this._stamp=0,this._rank=0,this._data={},this._signals={},this.doNotPropagate={}},d.rank=function(){return++this._rank},d.values=function(e,t,n){var r,a,o=e===f.SIGNALS?this._signals:this._data,s=void 0!==t?t:i.keys(o);if(Array.isArray(s)){for(r=n||{},a=0;a<s.length;++a)r[s[a]]=o[s[a]].values();return r}return o[s].values()},d.dataValues=function(e){return this.values(f.DATA,e)},d.signalValues=function(e){return this.values(f.SIGNALS,e)},d.data=function(e,t,n){var r=this._data;if(arguments.length)return 1===arguments.length?r[e]:r[e]=new s(this,e,n).pipeline(t);var i,a=[];for(i in r)a.push(r[i]);return a},d.signal=function(e,t){if(1===arguments.length){var n=this;return Array.isArray(e)?e.map(function(e){return n._signals[e]}):this._signals[e]}return this._signals[e]=new c(this,e,t)},d.signalRef=function(e){Array.isArray(e)||(e=i.field(e));var t=this.signal(e[0]).value();if(e.length>1)for(var n=1,r=e.length;r>n;++n)t=t[e[n]];return t},d.propagate=function(e,t,n){var r,i,s,u,l,c,f,d={},h=new a(function(e,t){return e._qrank-t._qrank});if(e.stamp)throw Error("Pulse already has a non-zero stamp.");for(e.stamp=n||++this._stamp,d[t._id]=e,h.push(t.qrank(!0));h.size()>0;)if(t=h.peek(),e=d[t._id],t.rank()!==t.qrank())h.replace(t.qrank(!0));else if(h.pop(),d[t._id]=null,r=t._listeners,e=this.evaluate(e,t),e!==this.doNotPropagate)for(!e.reflow&&t.reflows()&&(e=o.create(e,!0)),c=0,f=r.length;f>c;++c)if(i=r[c],void 0!==(s=d[i._id])){if(null===s)throw Error("Already propagated to node.");if(s===e)continue;if(u=e.add.length||e.mod.length||e.rem.length,l=s.add.length||s.mod.length||s.rem.length,u&&l)throw Error("Multiple changeset pulses to same node");d[i._id]=u?e:s,d[i._id].reflow=e.reflow||s.reflow}else h.push(i.qrank(!0)),d[i._id]=e},d.preprocess=function(e){for(var t,n,r,i,a=this,o=0,s=0;s<e.length;++s)t=e[s],t.batch()&&!t._collector&&(n||!r?(t=new u(a),e.splice(s,0,t),n=!1):t._collector=r),(i=t.collector())&&(r=t),n=n||t.router()&&!i,o=o||t.mutates(),t.produces()&&(e.splice(s+1,0,new u(a)),n=!1);return{router:n,collector:r,mutates:o}},d.connect=function(e){var t,n,r,i,a,o,s,u;for(a=0,o=e.length;o>a;++a){for(n=e[a],n.collector()&&(t=n),r=n.dependency(f.DATA),s=0,u=r.length;u>s;++s)this.data(r[s]).addListener(t);for(i=n.dependency(f.SIGNALS),s=0,u=i.length;u>s;++s)this.signal(i[s]).addListener(t);a>0&&e[a-1].addListener(n)}return e},d.disconnect=function(e){var t,n,r,i,a,o,s,u;for(a=0,o=e.length;o>a;++a){for(n=e[a],n.collector()&&(t=n),r=n.dependency(f.DATA),s=0,u=r.length;u>s;++s)this.data(r[s]).removeListener(t);for(i=n.dependency(f.SIGNALS),s=0,u=i.length;u>s;++s)this.signal(i[s]).removeListener(t);n.disconnect()}return e},d.synchronize=function(e){var t,n,r,i,a,o,s,u,c={};for(r=0,i=e.length;i>r;++r)if(t=e[r],t.collector())for(a=0,n=t.data(),o=n.length;o>a;++a)u=(s=n[a])._id,c[u]||(l.prev_update(s),c[u]=1);return this},d.reevaluate=function(e,t){var n=e.reflow&&t.last()>=e.stamp,r=t.router()||e.add.length||e.rem.length;return r||!n||t.reevaluate(e)},d.evaluate=function(e,t){return this.reevaluate(e,t)?(e=t.evaluate(e),t.last(e.stamp),e):e},t.exports=r},{"./ChangeSet":57,"./Collector":58,"./DataSource":59,"./Dependencies":60,"./Heap":62,"./Signal":64,"./Tuple":65,datalib:51}],62:[function(e,t,n){function r(e){this.cmp=e,this.nodes=[]}function i(e,t,n,r){var i,a,o;for(i=e[n];n>t&&(o=n-1>>1,a=e[o],r(i,a)<0);)e[n]=a,n=o;return e[n]=i}function a(e,t,n){for(var r,a=t,o=e.length,s=e[t],u=2*t+1;o>u;)r=u+1,o>r&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],t=u,u=2*t+1;return e[t]=s,i(e,a,t,n)}var o=r.prototype;o.size=function(){return this.nodes.length},o.clear=function(){return this.nodes=[],this},o.peek=function(){return this.nodes[0]},o.push=function(e){var t=this.nodes;return t.push(e),i(t,0,t.length-1,this.cmp)},o.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,a(t,0,this.cmp)):e=n,e},o.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,a(t,0,this.cmp),n},o.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,a(t,0,this.cmp)),e},t.exports=r},{}],63:[function(e,t,n){function r(e){e&&this.init(e)}var i=e("./Dependencies").ALL,a=0,o=r.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32},s=r.prototype;s.init=function(e){this._id=++a,this._graph=e,this._rank=e.rank(),this._qrank=null,this._stamp=0,this._listeners=[],this._listeners._ids={},this._deps={};for(var t=0,n=i.length;n>t;++t)this._deps[i[t]]=[];return this._flags=0,this},s.rank=function(){return this._rank},s.qrank=function(){return arguments.length?(this._qrank=this._rank,this):this._qrank},s.last=function(e){return arguments.length?(this._stamp=e,this):this._stamp},s._setf=function(e,t){return t?this._flags|=e:this._flags&=~e,this},s.router=function(e){return arguments.length?this._setf(o.Router,e):this._flags&o.Router},s.collector=function(e){return arguments.length?this._setf(o.Collector,e):this._flags&o.Collector},s.produces=function(e){return arguments.length?this._setf(o.Produces,e):this._flags&o.Produces},s.mutates=function(e){return arguments.length?this._setf(o.Mutates,e):this._flags&o.Mutates},s.reflows=function(e){return arguments.length?this._setf(o.Reflows,e):this._flags&o.Reflows},s.batch=function(e){return arguments.length?this._setf(o.Batch,e):this._flags&o.Batch},s.dependency=function(e,t){var n=this._deps[e],r=n._names||(n._names={});if(1===arguments.length)return n;if(null===t)n.splice(0,n.length),n._names={};else if(Array.isArray(t))for(var i,a=0,o=t.length;o>a;++a)i=t[a],r[i]||(n.push(i),r[i]=1);else{if(r[t])return this;n.push(t),r[t]=1}return this},s.listeners=function(){return this._listeners},s.addListener=function(e){if(!(e instanceof r))throw Error("Listener is not a Node");if(this._listeners._ids[e._id])return this;if(this._listeners.push(e),this._listeners._ids[e._id]=1,this._rank>e._rank)for(var t,n=[e],i=this._graph;n.length;)t=n.shift(),t._rank=i.rank(),n.unshift.apply(n,t.listeners());return this},s.removeListener=function(e){if(!this._listeners._ids[e._id])return!1;var t=this._listeners.indexOf(e),n=t>=0;return n&&(this._listeners.splice(t,1),this._listeners._ids[e._id]=null),n},s.disconnect=function(){this._listeners=[],this._listeners._ids={}},s.evaluate=function(e){return e},s.reevaluate=function(e){var t,n,r,a,o,s;for(r=0,a=i.length;a>r;++r)for(t=i[r],n=this._deps[t],o=0,s=n.length;s>o;++o)if(e[t][n[o]])return!0;return!1},r.reset=function(){a=0},t.exports=r},{"./Dependencies":60}],64:[function(e,t,n){function r(e,t,n){return o.init.call(this,e),this._name=t,this._value=n,this._verbose=!1,this._handlers=[],this}var i=e("./ChangeSet"),a=e("./Node"),o=a.prototype,s=r.prototype=Object.create(o);s.constructor=r,s.name=function(){return this._name},s.value=function(e){return arguments.length?(this._value=e,this):this._value},s.values=s.value,s.verbose=function(e){return arguments.length?(this._verbose=!!e,this):this._verbose},s.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate},s.fire=function(e){e||(e=i.create(null,!0)),e.signals[this._name]=1,this._graph.propagate(e,this)},s.on=function(e){var t=this,n=new a(this._graph);return n.evaluate=function(n){return e(t.name(),t.value()),n},this._handlers.push({handler:e,node:n}),this.addListener(n)},s.off=function(e){var t,n,r=this._handlers;for(t=r.length;--t>=0;)e&&r[t].handler!==e||(n=r.splice(t,1)[0],this.removeListener(n.node));return this},t.exports=r},{"./ChangeSet":57,"./Node":63}],65:[function(e,t,n){function r(e){return e=e===Object(e)?e:{data:e},e._id=++o,e._prev&&(e._prev=null),e}function i(e,t){t=t||{};for(var n=0,r=e.length;r>n;++n)t[e[n]._id]=1;return t}function a(e,t){t=t||{};for(var n in e)"_prev"!==n&&"_id"!==n&&(t[n]=e[n]);return t}var o=0;t.exports={ingest:r,idMap:i,derive:function(e){return r(a(e))},rederive:function(e,t){return a(e,t)},set:function(e,t,n){return e[t]===n?0:(e[t]=n,1)},prev:function(e){return e._prev||e},prev_init:function(e){e._prev||(e._prev={_id:e._id})},prev_update:function(e){var t,n,r=e._prev;if(r)for(t in e)"_prev"!==t&&"_id"!==t&&(r[t]=(n=e[t])instanceof Object&&n._prev?n._prev:n)},reset:function(){o=0},idFilter:function(e){for(var t={},n=arguments.length;--n>0;)i(arguments[n],t);return e.filter(function(e){return!t[e._id]})}}},{}],66:[function(e,t,n){t.exports={ChangeSet:e("./ChangeSet"),Collector:e("./Collector"),DataSource:e("./DataSource"),Dependencies:e("./Dependencies"),Graph:e("./Graph"),Node:e("./Node"),Signal:e("./Signal"),Tuple:e("./Tuple"),debug:e("vega-logging").debug}},{"./ChangeSet":57,"./Collector":58,"./DataSource":59,"./Dependencies":60,"./Graph":61,"./Node":63,"./Signal":64,"./Tuple":65,"vega-logging":72}],67:[function(e,t,n){function r(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t]]=1;return r}function i(e){var t,n=[];for(t in e)n.push(t);return n}t.exports=function(t){function n(e){var t={code:o(e),globals:i(p),fields:i(g)};return p={},g={},t}function a(e){return h+'["'+e+'"]'}function o(e){if("string"==typeof e)return e;var t=m[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}t=t||{};var s=t.constants||e("./constants"),u=(t.functions||e("./functions"))(o),l=t.idWhiteList?r(t.idWhiteList):null,c=t.idBlackList?r(t.idBlackList):null,f=0,d=t.fieldVar||"datum",h=t.globalVar||"signals",p={},g={},m={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;if(f>0)return t;if(s.hasOwnProperty(t))return s[t];if(l)return l.hasOwnProperty(t)?t:(p[t]=1,a(t));if(c&&c.hasOwnProperty(t))throw new Error("Illegal identifier: "+t);return t},Program:function(e){return e.body.map(o).join("\n")},MemberExpression:function(e){var t=!e.computed,n=o(e.object);t&&(f+=1);var r=o(e.property);return n===d&&(g[r]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=u.hasOwnProperty(t)&&u[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n):r+"("+n.map(o).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(o).join(",")+"]"},BinaryExpression:function(e){return"("+o(e.left)+e.operator+o(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+o(e.argument)+")"},ConditionalExpression:function(e){return"("+o(e.test)+"?"+o(e.consequent)+":"+o(e.alternate)+")"},LogicalExpression:function(e){return"("+o(e.left)+e.operator+o(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(o).join(",")+"}"},Property:function(e){f+=1;var t=o(e.key);return f-=1,t+":"+o(e.value)},ExpressionStatement:function(e){return o(e.expression)}};return n.functions=u,n.constants=s,n}},{"./constants":68,"./functions":69}],68:[function(e,t,n){t.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],69:[function(e,t,n){t.exports=function(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),slice:n("slice",i),substring:n("substring",i),regexp:a,test:n("test",a),"if":function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return n[0]+"?"+n[1]+":"+n[2]}}}},{}],70:[function(e,t,n){var r=e("./parser"),i=e("./codegen"),a=t.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,o=function(t){var i=n(a.parse(t));return e[r]='"use strict"; return ('+i.code+");",i.fn=Function.apply(null,e),i};return o.codegen=n,o},functions:e("./functions"),constants:e("./constants")}},{"./codegen":67,"./constants":68,"./functions":69,"./parser":71}],71:[function(e,t,n){/*
  The following expression parser is based on Esprima (http://esprima.org/).
  Original header comment and license for Esprima is included here:

  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
  Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
t.exports=function(){"use strict";function e(e,t){if(!e)throw new Error("ASSERT: "+t)}function t(e){return e>=48&&57>=e}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function a(e){return 10===e||13===e||8232===e||8233===e}function o(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&$e.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&$e.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function u(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function l(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function c(e){if(Me&&l(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function f(){var e,t;for(t=0===Te;Ae>Te;)if(e=Se.charCodeAt(Te),i(e))++Te;else{if(!a(e))break;++Te,13===e&&10===Se.charCodeAt(Te)&&++Te,++Ce,Ee=Te,t=!0}}function d(e){var t,r,i,a=0;for(r="u"===e?4:2,t=0;r>t;++t){if(!(Ae>Te&&n(Se[Te])))return"";i=Se[Te++],a=16*a+"0123456789abcdef".indexOf(i.toLowerCase())}return String.fromCharCode(a)}function h(){var e,t,r,i;for(e=Se[Te],t=0,"}"===e&&F({},ke.UnexpectedToken,"ILLEGAL");Ae>Te&&(e=Se[Te++],n(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&F({},ke.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function p(){var e,t;for(e=Se.charCodeAt(Te++),t=String.fromCharCode(e),92===e&&(117!==Se.charCodeAt(Te)&&F({},ke.UnexpectedToken,"ILLEGAL"),++Te,e=d("u"),e&&"\\"!==e&&o(e.charCodeAt(0))||F({},ke.UnexpectedToken,"ILLEGAL"),t=e);Ae>Te&&(e=Se.charCodeAt(Te),s(e));)++Te,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Se.charCodeAt(Te)&&F({},ke.UnexpectedToken,"ILLEGAL"),++Te,e=d("u"),e&&"\\"!==e&&s(e.charCodeAt(0))||F({},ke.UnexpectedToken,"ILLEGAL"),t+=e);return t}function g(){var e,t;for(e=Te++;Ae>Te;){if(t=Se.charCodeAt(Te),92===t)return Te=e,p();if(!s(t))break;++Te}return Se.slice(e,Te)}function m(){var e,t,n;return e=Te,t=92===Se.charCodeAt(Te)?p():g(),n=1===t.length?be.Identifier:c(t)?be.Keyword:"null"===t?be.NullLiteral:"true"===t||"false"===t?be.BooleanLiteral:be.Identifier,{type:n,value:t,lineNumber:Ce,lineStart:Ee,start:e,end:Te}}function v(){var e,t,n,r,i=Te,a=Se.charCodeAt(Te),o=Se[Te];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Te,Le.tokenize&&(40===a?Le.openParenToken=Le.tokens.length:123===a&&(Le.openCurlyToken=Le.tokens.length)),{type:be.Punctuator,value:String.fromCharCode(a),lineNumber:Ce,lineStart:Ee,start:i,end:Te};default:if(e=Se.charCodeAt(Te+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Te+=2,{type:be.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:Ce,lineStart:Ee,start:i,end:Te};case 33:case 61:return Te+=2,61===Se.charCodeAt(Te)&&++Te,{type:be.Punctuator,value:Se.slice(i,Te),lineNumber:Ce,lineStart:Ee,start:i,end:Te}}}return r=Se.substr(Te,4),">>>="===r?(Te+=4,{type:be.Punctuator,value:r,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(Te+=3,{type:be.Punctuator,value:n,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(Te+=2,{type:be.Punctuator,value:t,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):"<>=!+-*%&|^/".indexOf(o)>=0?(++Te,{type:be.Punctuator,value:o,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):void F({},ke.UnexpectedToken,"ILLEGAL")))}function y(e){for(var t="";Ae>Te&&n(Se[Te]);)t+=Se[Te++];return 0===t.length&&F({},ke.UnexpectedToken,"ILLEGAL"),o(Se.charCodeAt(Te))&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Ce,lineStart:Ee,start:e,end:Te}}function b(e){for(var n="0"+Se[Te++];Ae>Te&&r(Se[Te]);)n+=Se[Te++];return(o(Se.charCodeAt(Te))||t(Se.charCodeAt(Te)))&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:Ce,lineStart:Ee,start:e,end:Te}}function x(){var n,i,a;if(a=Se[Te],e(t(a.charCodeAt(0))||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),i=Te,n="","."!==a){if(n=Se[Te++],a=Se[Te],"0"===n){if("x"===a||"X"===a)return++Te,y(i);if(r(a))return b(i);a&&t(a.charCodeAt(0))&&F({},ke.UnexpectedToken,"ILLEGAL")}for(;t(Se.charCodeAt(Te));)n+=Se[Te++];a=Se[Te]}if("."===a){for(n+=Se[Te++];t(Se.charCodeAt(Te));)n+=Se[Te++];a=Se[Te]}if("e"===a||"E"===a)if(n+=Se[Te++],a=Se[Te],("+"===a||"-"===a)&&(n+=Se[Te++]),t(Se.charCodeAt(Te)))for(;t(Se.charCodeAt(Te));)n+=Se[Te++];else F({},ke.UnexpectedToken,"ILLEGAL");return o(Se.charCodeAt(Te))&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseFloat(n),lineNumber:Ce,lineStart:Ee,start:i,end:Te}}function w(){var t,n,i,o,s,u,l,c,f="",p=!1;for(l=Ce,c=Ee,t=Se[Te],e("'"===t||'"'===t,"String literal must starts with a quote"),n=Te,++Te;Ae>Te;){if(i=Se[Te++],i===t){t="";break}if("\\"===i)if(i=Se[Te++],i&&a(i.charCodeAt(0)))++Ce,"\r"===i&&"\n"===Se[Te]&&++Te,Ee=Te;else switch(i){case"u":case"x":"{"===Se[Te]?(++Te,f+=h()):(u=Te,s=d(i),s?f+=s:(Te=u,f+=i));break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="	";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="";break;default:r(i)?(o="01234567".indexOf(i),0!==o&&(p=!0),Ae>Te&&r(Se[Te])&&(p=!0,o=8*o+"01234567".indexOf(Se[Te++]),"0123".indexOf(i)>=0&&Ae>Te&&r(Se[Te])&&(o=8*o+"01234567".indexOf(Se[Te++]))),f+=String.fromCharCode(o)):f+=i}else{if(a(i.charCodeAt(0)))break;f+=i}}return""!==t&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.StringLiteral,value:f,octal:p,startLineNumber:l,startLineStart:c,lineNumber:Ce,lineStart:Ee,start:n,end:Te}}function _(e,t){var n,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void F({},ke.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(r)}catch(i){F({},ke.InvalidRegExp)}try{return new RegExp(e,t)}catch(a){return null}}function k(){var t,n,r,i,o;for(t=Se[Te],e("/"===t,"Regular expression literal must start with a slash"),n=Se[Te++],r=!1,i=!1;Ae>Te;)if(t=Se[Te++],n+=t,"\\"===t)t=Se[Te++],a(t.charCodeAt(0))&&F({},ke.UnterminatedRegExp),n+=t;else if(a(t.charCodeAt(0)))F({},ke.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){i=!0;break}"["===t&&(r=!0)}return i||F({},ke.UnterminatedRegExp),o=n.substr(1,n.length-2),{value:o,literal:n}}function $(){var e,t,n,r;for(t="",n="";Ae>Te&&(e=Se[Te],s(e.charCodeAt(0)));)if(++Te,"\\"===e&&Ae>Te)if(e=Se[Te],"u"===e){if(++Te,r=Te,e=d("u"))for(n+=e,t+="\\u";Te>r;++r)t+=Se[r];else Te=r,n+="u",t+="\\u";U({},ke.UnexpectedToken,"ILLEGAL")}else t+="\\",U({},ke.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function S(){var e,t,n,r;return Oe=null,f(),e=Te,t=k(),n=$(),r=_(t.value,n.value),Le.tokenize?{type:be.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:Ce,lineStart:Ee,start:e,end:Te}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Te}}function M(){var e,t,n,r;return f(),e=Te,t={start:{line:Ce,column:Te-Ee}},n=S(),t.end={line:Ce,column:Te-Ee},Le.tokenize||(Le.tokens.length>0&&(r=Le.tokens[Le.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&Le.tokens.pop()),Le.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Te],loc:t})),n}function T(e){return e.type===be.Identifier||e.type===be.Keyword||e.type===be.BooleanLiteral||e.type===be.NullLiteral}function C(){var e,t;if(e=Le.tokens[Le.tokens.length-1],!e)return M();if("Punctuator"===e.type){if("]"===e.value)return v();if(")"===e.value)return t=Le.tokens[Le.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?v():M();if("}"===e.value){if(Le.tokens[Le.openCurlyToken-3]&&"Keyword"===Le.tokens[Le.openCurlyToken-3].type){if(t=Le.tokens[Le.openCurlyToken-4],!t)return v()}else{if(!Le.tokens[Le.openCurlyToken-4]||"Keyword"!==Le.tokens[Le.openCurlyToken-4].type)return v();if(t=Le.tokens[Le.openCurlyToken-5],!t)return M()}return v()}return M()}return"Keyword"===e.type&&"this"!==e.value?M():v()}function E(){var e;return f(),Te>=Ae?{type:be.EOF,lineNumber:Ce,lineStart:Ee,start:Te,end:Te}:(e=Se.charCodeAt(Te),o(e)?m():40===e||41===e||59===e?v():39===e||34===e?w():46===e?t(Se.charCodeAt(Te+1))?x():v():t(e)?x():Le.tokenize&&47===e?C():v())}function A(){var e,t,n,r;return f(),e={start:{line:Ce,column:Te-Ee}},t=E(),e.end={line:Ce,column:Te-Ee},t.type!==be.EOF&&(n=Se.slice(t.start,t.end),r={type:xe[t.type],value:n,range:[t.start,t.end],loc:e},t.regex&&(r.regex={pattern:t.regex.pattern,flags:t.regex.flags}),Le.tokens.push(r)),t}function O(){var e;return e=Oe,Te=e.end,Ce=e.lineNumber,Ee=e.lineStart,Oe="undefined"!=typeof Le.tokens?A():E(),Te=e.end,Ce=e.lineNumber,Ee=e.lineStart,e}function D(){var e,t,n;e=Te,t=Ce,n=Ee,Oe="undefined"!=typeof Le.tokens?A():E(),Te=e,Ce=t,Ee=n}function L(){this.line=Ce,this.column=Te-Ee}function N(){this.start=new L,this.end=null}function j(e){this.start=e.type===be.StringLiteral?{line:e.startLineNumber,column:e.start-e.startLineStart}:{line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function P(){Te=Oe.start,Oe.type===be.StringLiteral?(Ce=Oe.startLineNumber,Ee=Oe.startLineStart):(Ce=Oe.lineNumber,Ee=Oe.lineStart),Le.range&&(this.range=[Te,0]),Le.loc&&(this.loc=new N)}function R(e){Le.range&&(this.range=[e.start,0]),Le.loc&&(this.loc=new j(e))}function I(){var e,t,n,r;return e=Te,t=Ce,n=Ee,f(),r=Ce!==t,Te=e,Ce=t,Ee=n,r}function F(t,n){var r,i=Array.prototype.slice.call(arguments,2),a=n.replace(/%(\d)/g,function(t,n){return e(n<i.length,"Message reference must be in range"),i[n]});throw"number"==typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+a),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-Ee+1):(r=new Error("Line "+Ce+": "+a),r.index=Te,r.lineNumber=Ce,r.column=Te-Ee+1),r.description=a,r}function U(){try{F.apply(null,arguments)}catch(e){if(!Le.errors)throw e;Le.errors.push(e)}}function z(e){if(e.type===be.EOF&&F(e,ke.UnexpectedEOS),e.type===be.NumericLiteral&&F(e,ke.UnexpectedNumber),e.type===be.StringLiteral&&F(e,ke.UnexpectedString),e.type===be.Identifier&&F(e,ke.UnexpectedIdentifier),e.type===be.Keyword){if(u(e.value))F(e,ke.UnexpectedReserved);else if(Me&&l(e.value))return void U(e,ke.StrictReservedWord);F(e,ke.UnexpectedToken,e.value)}F(e,ke.UnexpectedToken,e.value)}function q(e){var t=O();(t.type!==be.Punctuator||t.value!==e)&&z(t)}function H(e){if(Le.errors){var t=Oe;t.type!==be.Punctuator&&t.value!==e?U(t,ke.UnexpectedToken,t.value):O()}else q(e)}function B(e){return Oe.type===be.Punctuator&&Oe.value===e}function Y(e){return Oe.type===be.Keyword&&Oe.value===e}function V(){var e;return 59===Se.charCodeAt(Te)||B(";")?void O():(e=Ce,f(),void(Ce===e&&(Oe.type===be.EOF||B("}")||z(Oe))))}function W(){var e=[],t=new P;for(q("[");!B("]");)B(",")?(O(),e.push(null)):(e.push(le()),B("]")||q(","));return O(),t.finishArrayExpression(e)}function G(){var e,t=new P;return e=O(),e.type===be.StringLiteral||e.type===be.NumericLiteral?(Me&&e.octal&&U(e,ke.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function X(){var e,t,n,r,i=new P;return e=Oe,e.type===be.Identifier?(n=G(),q(":"),r=le(),i.finishProperty("init",n,r)):e.type!==be.EOF&&e.type!==be.Punctuator?(t=G(),q(":"),r=le(),i.finishProperty("init",t,r)):void z(e)}function J(){var e,t,n,r,i=[],a={},o=String,s=new P;for(q("{");!B("}");)e=X(),t=e.key.type===we.Identifier?e.key.name:o(e.key.value),r="init"===e.kind?_e.Data:"get"===e.kind?_e.Get:_e.Set,n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?(a[n]===_e.Data?Me&&r===_e.Data?U({},ke.StrictDuplicateProperty):r!==_e.Data&&U({},ke.AccessorDataProperty):r===_e.Data?U({},ke.AccessorDataProperty):a[n]&r&&U({},ke.AccessorGetSet),a[n]|=r):a[n]=r,i.push(e),B("}")||H(",");return q("}"),s.finishObjectExpression(i)}function K(){var e;return q("("),++De.parenthesisCount,e=ce(),q(")"),e}function Z(){var e,t,n,r;if(B("("))return K();if(B("["))return W();if(B("{"))return J();if(e=Oe.type,r=new P,e===be.Identifier||Ne[Oe.value])n=r.finishIdentifier(O().value);else if(e===be.StringLiteral||e===be.NumericLiteral)Me&&Oe.octal&&U(Oe,ke.StrictOctalLiteral),n=r.finishLiteral(O());else{if(e===be.Keyword)throw new Error("Disabled.");e===be.BooleanLiteral?(t=O(),t.value="true"===t.value,n=r.finishLiteral(t)):e===be.NullLiteral?(t=O(),t.value=null,n=r.finishLiteral(t)):B("/")||B("/=")?(n=r.finishLiteral("undefined"!=typeof Le.tokens?M():S()),D()):z(O())}return n}function Q(){var e=[];if(q("("),!B(")"))for(;Ae>Te&&(e.push(le()),!B(")"));)H(",");return q(")"),e}function ee(){var e,t=new P;return e=O(),T(e)||z(e),t.finishIdentifier(e.value)}function te(){return q("."),ee()}function ne(){var e;return q("["),e=ce(),q("]"),e}function re(){var e,t,n,r,i=De.allowIn;for(r=Oe,De.allowIn=!0,e=Z();;)if(B("."))n=te(),e=new R(r).finishMemberExpression(".",e,n);else if(B("("))t=Q(),e=new R(r).finishCallExpression(e,t);else{if(!B("["))break;n=ne(),e=new R(r).finishMemberExpression("[",e,n)}return De.allowIn=i,e}function ie(){var e=re();if(Oe.type===be.Punctuator&&(B("++")||B("--"))&&!I())throw new Error("Disabled.");return e}function ae(){var e,t,n;if(Oe.type!==be.Punctuator&&Oe.type!==be.Keyword)t=ie();else{if(B("++")||B("--"))throw new Error("Disabled.");if(B("+")||B("-")||B("~")||B("!"))n=Oe,e=O(),t=ae(),t=new R(n).finishUnaryExpression(e.value,t);else{if(Y("delete")||Y("void")||Y("typeof"))throw new Error("Disabled.");t=ie()}}return t}function oe(e,t){var n=0;if(e.type!==be.Punctuator&&e.type!==be.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function se(){var e,t,n,r,i,a,o,s,u,l;if(e=Oe,u=ae(),r=Oe,i=oe(r,De.allowIn),0===i)return u;for(r.prec=i,O(),t=[e,Oe],o=ae(),a=[u,r,o];(i=oe(Oe,De.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),t.pop(),n=new R(t[t.length-1]).finishBinaryExpression(s,u,o),a.push(n);r=O(),r.prec=i,a.push(r),t.push(Oe),n=ae(),a.push(n)}for(l=a.length-1,n=a[l],t.pop();l>1;)n=new R(t.pop()).finishBinaryExpression(a[l-1].value,a[l-2],n),l-=2;return n}function ue(){var e,t,n,r,i;return i=Oe,e=se(),B("?")&&(O(),t=De.allowIn,De.allowIn=!0,n=le(),De.allowIn=t,q(":"),r=le(),e=new R(i).finishConditionalExpression(e,n,r)),e}function le(){var e,t,n,r;return e=De.parenthesisCount,r=Oe,t=Oe,n=ue()}function ce(){var e=le();if(B(","))throw new Error("Disabled.");return e}function fe(e){var t=ce();return V(),e.finishExpressionStatement(t)}function de(){var e,t,n=Oe.type;if(n===be.EOF&&z(Oe),n===be.Punctuator&&"{"===Oe.value)throw new Error("Disabled.");if(t=new P,n===be.Punctuator)switch(Oe.value){case";":throw new Error("Disabled.");case"(":return fe(t)}else if(n===be.Keyword)throw new Error("Disabled.");return e=ce(),V(),t.finishExpressionStatement(e)}function he(){if(Oe.type===be.Keyword)switch(Oe.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return de()}return Oe.type!==be.EOF?de():void 0}function pe(){for(var e,t,n,r,i=[];Ae>Te&&(t=Oe,t.type===be.StringLiteral)&&(e=he(),i.push(e),e.expression.type===we.Literal);)n=Se.slice(t.start+1,t.end-1),"use strict"===n?(Me=!0,r&&U(r,ke.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;Ae>Te&&(e=he(),"undefined"!=typeof e);)i.push(e);return i}function ge(){var e,t;return f(),D(),t=new P,Me=!0,e=pe(),t.finishProgram(e)}function me(){var e,t,n,r=[];for(e=0;e<Le.tokens.length;++e)t=Le.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),Le.range&&(n.range=t.range),Le.loc&&(n.loc=t.loc),r.push(n);Le.tokens=r}function ve(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),Se=e,Te=0,Ce=Se.length>0?1:0,Ee=0,Ae=Se.length,Oe=null,De={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Le={},t=t||{},t.tokens=!0,Le.tokens=[],Le.tokenize=!0,Le.openParenToken=-1,Le.openCurlyToken=-1,Le.range="boolean"==typeof t.range&&t.range,Le.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.tolerant&&t.tolerant&&(Le.errors=[]);try{if(D(),Oe.type===be.EOF)return Le.tokens;for(O();Oe.type!==be.EOF;)try{O()}catch(i){if(Le.errors){Le.errors.push(i);break}throw i}me(),r=Le.tokens,"undefined"!=typeof Le.errors&&(r.errors=Le.errors)}catch(a){throw a}finally{Le={}}return r}function ye(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),Se=e,Te=0,Ce=Se.length>0?1:0,Ee=0,Ae=Se.length,Oe=null,De={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Le={},"undefined"!=typeof t&&(Le.range="boolean"==typeof t.range&&t.range,Le.loc="boolean"==typeof t.loc&&t.loc,Le.loc&&null!==t.source&&void 0!==t.source&&(Le.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(Le.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(Le.errors=[]));try{n=ge(),"undefined"!=typeof Le.tokens&&(me(),n.tokens=Le.tokens),"undefined"!=typeof Le.errors&&(n.errors=Le.errors)}catch(i){throw i}finally{Le={}}return n}var be,xe,we,_e,ke,$e,Se,Me,Te,Ce,Ee,Ae,Oe,De,Le;be={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},xe={},xe[be.BooleanLiteral]="Boolean",xe[be.EOF]="<end>",xe[be.Identifier]="Identifier",xe[be.Keyword]="Keyword",xe[be.NullLiteral]="Null",xe[be.NumericLiteral]="Numeric",xe[be.Punctuator]="Punctuator",xe[be.StringLiteral]="String",xe[be.RegularExpression]="RegularExpression",we={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},_e={Data:1,Get:2,Set:4},ke={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},$e={NonAsciiIdentifierStart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},R.prototype=P.prototype={finish:function(){Le.range&&(this.range[1]=Te),Le.loc&&(this.loc.end=new L,Le.source&&(this.loc.source=Le.source))},finishArrayExpression:function(e){return this.type=we.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=we.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?we.LogicalExpression:we.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishCallExpression:function(e,t){return this.type=we.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=we.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishExpressionStatement:function(e){return this.type=we.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=we.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=we.Literal,this.value=e.value,this.raw=Se.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=we.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishObjectExpression:function(e){return this.type=we.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=we.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n){return this.type=we.Property,this.key=t,this.value=n,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=we.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var Ne={"if":1,"this":1};return{tokenize:ve,parse:ye}}()},{}],72:[function(e,t,n){function r(e){e="[Vega Log] "+e,console.log(e)}function i(e){e="[Vega Err] "+e,console.error(e)}function a(e,t){if(a.enable){var n=Function.prototype.bind.call(console.log,console),r={prevTime:Date.now()-o,stamp:e.stamp};e.add&&(r.add=e.add.length,r.mod=e.mod.length,r.rem=e.rem.length,r.reflow=!!e.reflow),n.apply(console,(t.push(JSON.stringify(r)),t)),o=Date.now()}}var o=Date.now();t.exports={log:r,error:i,debug:(a.enable=!1,a)}},{}],73:[function(e,t,n){var r=e("vega-expression"),i=["datum","event","signals"];t.exports=r.compiler(i,{idWhiteList:i,fieldVar:i[0],globalVar:i[2],functions:function(e){var t=r.functions(e);return t.eventItem=function(){return"event.vg.item"},t.eventGroup="event.vg.getGroup",t.eventX="event.vg.getX",t.eventY="event.vg.getY",t.open="window.open",t}})},{"vega-expression":70}],74:[function(e,t,n){function r(e){return f.prototype.init.call(this,e),f.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){function t(e){e.signal&&(l[e.signal]=1)}var n,r,i,o,s,u,l={},f=this._transform;if(!a.isArray(o=e)){o=[];for(s in e)u=a.array(e[s]),o.push({field:s,ops:u})}for(n=0,r=o.length;r>n;++n)i=o[n],i.field.signal&&(l[i.field.signal]=1),a.array(i.ops).forEach(t),a.array(i.as).forEach(t);return f._fields=o,f._aggr=null,f.dependency(c.SIGNALS,a.keys(l)),f}}}),this._aggr=null,this._input=null,this._args=null,this._fields=[],this._out=[],this._type=p.TUPLE,this._acc={groupby:a["true"],value:a["true"]},this.router(!0).produces(!0)}function i(e){var t,n,r,i,a,o,s,u=[];for(a=e._dims,t=0,n=a.length;n>t;++t)u.push(a[t].name);for(o=e._aggr,t=0,n=o.length;n>t;++t)for(s=o[t].measures.fields,r=0,i=s.length;i>r;++r)u.push(s[r]);return u}var a=e("datalib"),o=e("vega-dataflow"),s=e("vega-logging"),u=o.ChangeSet,l=o.Tuple,c=o.Dependencies,f=e("./Transform"),d=e("./Facetor"),h=r.prototype=Object.create(f.prototype);h.constructor=r;var p=r.TYPES={VALUE:1,TUPLE:2,MULTI:3};r.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"],h.type=function(e){return this._type=e,this},h.accessors=function(e,t){var n=this._acc;n.groupby=a.$(e)||a["true"],n.value=a.$(t)||a["true"]},h.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=!1,n=[],r=this.param("groupby").field,o=function(t){return t.signal?e.signalRef(t.signal):t},s=this._fields.map(function(e){var r={name:o(e.field),as:a.array(e.as),ops:a.array(o(e.ops)).map(o),get:e.get};return t=t||null!=r.get,n.push(r.name),r});r.forEach(function(e){e.get&&(t=!0),n.push(e.name||e)}),this._args=t||!s.length?null:n,s.length||(s={"*":"values"});var u=this._aggr=(new d).groupby(r).stream(!0).summarize(s);return this._out=i(u),this._type!==p.VALUE&&u.key("_id"),u},h.transform=function(e,t){s.debug(e,["aggregate"]);var n,r,i,a,o=u.create(e),c=this.aggr(),f=this._out,d=this._args,h=!0,g=l.prev;if(t&&(o.rem.push.apply(o.rem,c.result()),c.clear(),this._aggr=null,c=this.aggr()),this._type===p.TUPLE)n=function(e){c._add(e),l.prev_init(e)},r=function(e){c._rem(g(e))},i=function(e){c._mod(e,g(e))};else{var m=this._acc.groupby,v=this._acc.value,y=this._type===p.VALUE?v:function(e){return{_id:e._id,groupby:m(e),value:v(e)}};n=function(e){c._add(y(e)),l.prev_init(e)},r=function(e){c._rem(y(g(e)))},i=function(e){c._mod(y(e),y(g(e)))}}if(e.add.forEach(n),t)e.mod.forEach(n);else{if(e.rem.forEach(r),d)for(a=0,h=!1;a<d.length;++a)if(e.fields[d[a]]){h=!0;break}h&&e.mod.forEach(i)}for(a=0;a<f.length;++a)o.fields[f[a]]=1;return c._input=e,c.changes(o)},t.exports=r},{"./Facetor":75,"./Transform":77,datalib:51,"vega-dataflow":66,"vega-logging":72}],75:[function(e,t,n){function r(){o.call(this),this._facet=null,this._facetID=++f}function i(e){c.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]),e._graph.removeListener(t[0]),e._graph.disconnect(t)}var a=e("datalib"),o=a.Aggregator,s=o.prototype,u=e("vega-dataflow"),l=u.Tuple,c=e("vega-logging"),f=0,d=r.prototype=Object.create(s);d.constructor=r,d.facet=function(e){return arguments.length?(this._facet=e,this):this._facet},d._ingest=function(e){return l.ingest(e,null)},d._assign=l.set,d._newcell=function(e,t){var n=s._newcell.call(this,e,t),r=this._facet;if(r){var a=r._graph,o=n.tuple,u=r.param("transform");n.ds=a.data(o._facetID,u,o),n.disconnect=i,r.addListener(u[0])}return n},d._newtuple=function(e,t){var n=s._newtuple.call(this,e);return this._facet&&(l.set(n,"key",t),l.set(n,"_facetID",this._facetID+"_"+t)),n},d.clear=function(){if(this._facet)for(var e in this._cells)this._cells[e].disconnect(this._facet);return s.clear.call(this)},d._on_add=function(e,t){this._facet&&t.ds._input.add.push(e)},d._on_rem=function(e,t){this._facet&&t.ds._input.rem.push(e)},d._on_mod=function(e,t,n,r){this._facet&&(n===r?n.ds._input.mod.push(e):(n.ds._input.rem.push(e),r.ds._input.add.push(e)))},d._on_drop=function(e){this._facet&&e.disconnect(this._facet)},d._on_keep=function(e){this._facet&&u.ChangeSet.copy(this._input,e.ds._input)},t.exports=r},{datalib:51,"vega-dataflow":66,"vega-logging":72}],76:[function(e,t,n){function r(e,t,n){this._name=e,this._type=t,this._transform=n,this._value=[],this._accessors=[],this._resolution=!1,this._signals={}}function i(){var e=u.test(this._type),t=l.test(this._type),n=c.test(this._type),r=e?this._value:this._value[0],i=e?this._accessors:this._accessors[0];return!a.isValid(i)&&d.test(this._type)?r:t?{name:r,source:i}:n?{field:r,accessor:i}:r}var a=e("datalib"),o=e("vega-dataflow").Dependencies,s=e("../parse/expr"),u=/array/i,l=/data/i,c=/field/i,f=/expr/i,d=/value/i,h=r.prototype;h.get=function(){var e,t,n,r=this._transform._graph,o=l.test(this._type),s=c.test(this._type);if(!this._resolution)return i.call(this);if(o)return this._accessors=this._value.map(function(e){return r.data(e)}),i.call(this);for(e in this._signals)t=this._signals[e],n=r.signalRef(e),s&&(this._accessors[t]=this._value[t]!=n?a.accessor(n):this._accessors[t]),this._value[t]=n;return i.call(this)},h.set=function(e){var t=this,n=f.test(this._type),r=l.test(this._type),i=c.test(this._type);return this._value=a.array(e).map(function(e,u){if(a.isString(e)){if(n){var l=s(e);return t._transform.dependency(o.FIELDS,l.fields),t._transform.dependency(o.SIGNALS,l.globals),l.fn}return i?(t._accessors[u]=a.accessor(e),t._transform.dependency(o.FIELDS,a.field(e))):r&&(t._resolution=!0,t._transform.dependency(o.DATA,e)),e}return void 0!==e.value?e.value:void 0!==e.field?(t._accessors[u]=a.accessor(e.field),
t._transform.dependency(o.FIELDS,a.field(e.field)),e.field):void 0!==e.signal?(t._resolution=!0,t._signals[e.signal]=u,t._transform.dependency(o.SIGNALS,e.signal),e.signal):e}),t._transform},t.exports=r},{"../parse/expr":73,datalib:51,"vega-dataflow":66}],77:[function(e,t,n){function r(e){e&&a.init.call(this,e)}var i=e("vega-dataflow"),a=i.Node.prototype,o=i.Dependencies,s=e("./Parameter");r.addParameters=function(e,t){e._parameters=e._parameters||{};for(var n in t){var r=t[n],i=new s(n,r.type,e);e._parameters[n]=i,"custom"===r.type&&(r.set&&(i.set=r.set.bind(i)),r.get&&(i.get=r.get.bind(i))),r.hasOwnProperty("default")&&i.set(r["default"])}};var u=r.prototype=Object.create(a);u.constructor=r,u.param=function(e,t){var n=this._parameters[e];return void 0===n?this:1===arguments.length?n.get():n.set(t)},u.transform=function(e){return e},u.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(o.SIGNALS).reduce(function(t,n){return t+=e.signals[n]?1:0},0);return this.transform(e,t)},u.output=function(e){for(var t in this._output)void 0!==e[t]&&(this._output[t]=e[t]);return this},t.exports=r},{"./Parameter":76,"vega-dataflow":66}],78:[function(e,t,n){arguments[4][33][0].apply(n,arguments)},{dup:33}],79:[function(e,t,n){arguments[4][38][0].apply(n,arguments)},{"../time":83,"../util":84,dup:38}],80:[function(e,t,n){arguments[4][41][0].apply(n,arguments)},{dup:41}],81:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{"../util":84,dup:50}],82:[function(e,t,n){arguments[4][53][0].apply(n,arguments)},{"./generate":80,"./import/type":81,"./util":84,dup:53}],83:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{"d3-time":78,dup:55}],84:[function(e,t,n){function r(e){return e.replace(d,"$1\\'")}function i(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function a(e,t,n){var r=0,i=e.split(h);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():i.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():i[0].slice(0,t)}var o=e("buffer"),s=e("./time"),u=s.utc,l=t.exports={},c="__name__";l.namedfunc=function(e,t){return t[c]=e,t},l.name=function(e){return null==e?null:e[c]},l.identity=function(e){return e},l["true"]=l.namedfunc("true",function(){return!0}),l["false"]=l.namedfunc("false",function(){return!1}),l.duplicate=function(e){return JSON.parse(JSON.stringify(e))},l.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},l.extend=function(e){for(var t,n,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},l.length=function(e){return null!=e&&null!=e.length?e.length:null},l.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},l.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},l.toMap=function(e,t){return(t=l.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},l.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var f=Object.prototype.toString;l.isObject=function(e){return e===Object(e)},l.isFunction=function(e){return"[object Function]"===f.call(e)},l.isString=function(e){return"string"==typeof value||"[object String]"===f.call(e)},l.isArray=Array.isArray||function(e){return"[object Array]"===f.call(e)},l.isNumber=function(e){return"number"==typeof e||"[object Number]"===f.call(e)},l.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},l.isDate=function(e){return"[object Date]"===f.call(e)},l.isValid=function(e){return null!=e&&e===e},l.isBuffer=o.Buffer&&o.Buffer.isBuffer||l["false"],l.number=function(e){return null==e||""===e?null:+e},l["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},l.date=function(e){return null==e||""===e?null:Date.parse(e)},l.array=function(e){return null!=e?l.isArray(e)?e:[e]:[]},l.str=function(e){return l.isArray(e)?"["+e.map(l.str)+"]":l.isObject(e)?JSON.stringify(e):l.isString(e)?"'"+r(e)+"'":e};var d=/(^|[^\\])'/g;l.field=function(e){return String(e).split("\\.").map(function(e){return e.split(".")}).reduce(function(e,t){return e.length&&(e[e.length-1]+="."+t.shift()),e.push.apply(e,t),e},[])},l.accessor=function(e){var t;return null==e||l.isFunction(e)?e:l.namedfunc(e,(t=l.field(e)).length>1?function(e){return t.reduce(function(e,t){return e[t]},e)}:function(t){return t[e]})},l.$=l.accessor,l.mutator=function(e){var t;return l.isString(e)&&(t=l.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},l.$func=function(e,t){return function(n){n=l.$(n)||l.identity;var r=e+(l.name(n)?"_"+l.name(n):"");return l.namedfunc(r,function(e){return t(n(e))})}},l.$valid=l.$func("valid",l.isValid),l.$length=l.$func("length",l.length),l.$in=function(e,t){e=l.$(e);var n=l.isArray(t)?l.toMap(t):t;return function(t){return!!n[e(t)]}},l.$year=l.$func("year",s.year.unit),l.$month=l.$func("month",s.months.unit),l.$date=l.$func("date",s.dates.unit),l.$day=l.$func("day",s.weekdays.unit),l.$hour=l.$func("hour",s.hours.unit),l.$minute=l.$func("minute",s.minutes.unit),l.$second=l.$func("second",s.seconds.unit),l.$utcYear=l.$func("utcYear",u.year.unit),l.$utcMonth=l.$func("utcMonth",u.months.unit),l.$utcDate=l.$func("utcDate",u.dates.unit),l.$utcDay=l.$func("utcDay",u.weekdays.unit),l.$utcHour=l.$func("utcHour",u.hours.unit),l.$utcMinute=l.$func("utcMinute",u.minutes.unit),l.$utcSecond=l.$func("utcSecond",u.seconds.unit),l.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=l.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),l.accessor(e)}),function(n,r){var i,a,o,s,u;for(i=0,a=e.length;a>i;++i){if(o=e[i],s=o(n),u=o(r),u>s)return-1*t[i];if(s>u)return t[i]}return 0}},l.cmp=function(e,t){return t>e?-1:e>t?1:e>=t?0:null===e?-1:null===t?1:0/0},l.numcmp=function(e,t){return e-t},l.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return o>a?-1:a>o?1:r[n(e)]-r[n(i)]}),e},l.pad=function(e,t,n,r){r=r||" ";var a=t-e.length;if(0>=a)return e;switch(n){case"left":return i(a,r)+e;case"middle":case"center":return i(Math.floor(a/2),r)+e+i(Math.ceil(a/2),r);default:return e+i(a,r)}},l.truncate=function(e,t,n,r,i){var o=e.length;if(t>=o)return e;i=void 0!==i?String(i):"";var s=Math.max(0,t-i.length);switch(n){case"left":return i+(r?a(e,s,1):e.slice(o-s));case"middle":case"center":var u=Math.ceil(s/2),l=Math.floor(s/2);return(r?a(e,u):e.slice(0,u))+i+(r?a(e,l,1):e.slice(o-l));default:return(r?a(e,s):e.slice(0,s))+i}};var h=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/},{"./time":83,buffer:1}]},{},[29])(29)}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cp=e()}}(function(){return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){t.exports={hcluster:e("./hcluster"),Kmeans:e("./kmeans"),kmeans:e("./kmeans").kmeans}},{"./hcluster":3,"./kmeans":4}],2:[function(e,t,n){t.exports={euclidean:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)},manhattan:function(e,t){for(var n=0,r=0;r<e.length;r++)n+=Math.abs(t[r]-e[r]);return n},max:function(e,t){for(var n=0,r=0;r<e.length;r++)n=Math.max(n,Math.abs(t[r]-e[r]));return n}}},{}],3:[function(e,t,n){var r=e("./distance"),i=function(e,t,n){this.distance=e,this.linkage=t,this.threshold=void 0==n?1/0:n};i.prototype={cluster:function(e,t,n){this.clusters=[],this.dists=[],this.mins=[],this.index=[];for(var r=0;r<e.length;r++){var i={value:e[r],key:r,index:r,size:1};this.clusters[r]=i,this.index[r]=i,this.dists[r]=[],this.mins[r]=0}for(var r=0;r<this.clusters.length;r++)for(var a=0;r>=a;a++){var o=r==a?1/0:this.distance(this.clusters[r].value,this.clusters[a].value);this.dists[r][a]=o,this.dists[a][r]=o,o<this.dists[r][this.mins[r]]&&(this.mins[r]=a)}for(var s=this.mergeClosest(),r=0;s;)n&&r++%t==0&&n(this.clusters),s=this.mergeClosest();return this.clusters.forEach(function(e){delete e.key,delete e.index}),this.clusters},mergeClosest:function(){for(var e=0,t=1/0,n=0;n<this.clusters.length;n++){var r=this.clusters[n].key,i=this.dists[r][this.mins[r]];t>i&&(e=r,t=i)}if(t>=this.threshold)return!1;var a=this.index[e],o=this.index[this.mins[e]],s={left:a,right:o,key:a.key,size:a.size+o.size};this.clusters[a.index]=s,this.clusters.splice(o.index,1),this.index[a.key]=s;for(var n=0;n<this.clusters.length;n++){var i,u=this.clusters[n];a.key==u.key?i=1/0:"single"==this.linkage?(i=this.dists[a.key][u.key],this.dists[a.key][u.key]>this.dists[o.key][u.key]&&(i=this.dists[o.key][u.key])):"complete"==this.linkage?(i=this.dists[a.key][u.key],this.dists[a.key][u.key]<this.dists[o.key][u.key]&&(i=this.dists[o.key][u.key])):i="average"==this.linkage?(this.dists[a.key][u.key]*a.size+this.dists[o.key][u.key]*o.size)/(a.size+o.size):this.distance(u.value,a.value),this.dists[a.key][u.key]=this.dists[u.key][a.key]=i}for(var n=0;n<this.clusters.length;n++){var l=this.clusters[n].key;if(this.mins[l]==a.key||this.mins[l]==o.key){for(var t=l,c=0;c<this.clusters.length;c++){var f=this.clusters[c].key;this.dists[l][f]<this.dists[l][t]&&(t=f)}this.mins[l]=t}this.clusters[n].index=n}return delete a.key,delete o.key,delete a.index,delete o.index,!0}};var a=function(e,t,n,a,o,s){t=t||"euclidean",n=n||"average","string"==typeof t&&(t=r[t]);var u=new i(t,n,a).cluster(e,o,s);return void 0===a?u[0]:u};t.exports=a},{"./distance":2}],4:[function(e,t,n){function r(e){this.centroids=e||[]}var i=e("./distance");r.prototype.randomCentroids=function(e,t){var n=e.slice(0);return n.sort(function(){return Math.round(Math.random())-.5}),n.slice(0,t)},r.prototype.classify=function(e,t){var n=1/0,r=0;t=t||"euclidean","string"==typeof t&&(t=i[t]);for(var a=0;a<this.centroids.length;a++){var o=t(e,this.centroids[a]);n>o&&(n=o,r=a)}return r},r.prototype.cluster=function(e,t,n,r,a){t=t||Math.max(2,Math.ceil(Math.sqrt(e.length/2))),n=n||"euclidean","string"==typeof n&&(n=i[n]),this.centroids=this.randomCentroids(e,t);for(var o=new Array(e.length),s=new Array(t),u=0,l=!0;l;){for(var c=0;c<e.length;c++)o[c]=this.classify(e[c],n);l=!1;for(var f=0;t>f;f++){for(var d=[],c=0;c<o.length;c++)o[c]==f&&d.push(e[c]);if(d.length){for(var h=this.centroids[f],p=new Array(h.length),g=0;g<h.length;g++){for(var m=0,c=0;c<d.length;c++)m+=d[c][g];p[g]=m/d.length,p[g]!=h[g]&&(l=!0)}this.centroids[f]=p,s[f]=d}}a&&u++%r==0&&a(s)}return s},r.prototype.toJSON=function(){return JSON.stringify(this.centroids)},r.prototype.fromJSON=function(e){return this.centroids=JSON.parse(e),this},t.exports=r,t.exports.kmeans=function(e,t){return(new r).cluster(e,t)}},{"./distance":2}],5:[function(e,t,n){(function(e){"use strict";var t=e||window;t.AGGREGATE="aggregate",t.RAW="raw",t.STACKED="stacked",t.INDEX="index",t.X="x",t.Y="y",t.ROW="row",t.COL="col",t.SIZE="size",t.SHAPE="shape",t.COLOR="color",t.TEXT="text",t.DETAIL="detail",t.N="N",t.O="O",t.Q="Q",t.T="T"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(n){"use strict";function r(e,t){var n=r.distance.table(e),u=a.hcluster(e,function(e,t){var r=i.Encoding.shorthand(e),a=i.Encoding.shorthand(t);return n[r][a]},"average",o.CLUSTER_THRESHOLD),l=u.map(function(e){return s.traverse(e,[])}).map(function(e){return e.sort(function(e,t){return t._info.score-e._info.score})}).filter(function(e){return e.length>0}).sort(function(e,t){return t[0]._info.score-e[0]._info.score});return l.dist=n,l}t.exports=r;var i="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,a=e("clusterfck"),o=e("./clusterconsts"),s=e("../util");r.distance=e("./distance")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":20,"./clusterconsts":7,"./distance":8,clusterfck:1}],7:[function(e,t,n){"use strict";function r(e,t){var n=t[0],r=t[1],i=t[2];return e[n]=e[n]||{},e[r]=e[r]||{},e[n][r]=e[r][n]=i,e}var i=t.exports={};i.SWAPPABLE=.05,i.DIST_MISSING=1,i.CLUSTER_THRESHOLD=1,i.DIST_BY_ENCTYPE=[["x","y",i.SWAPPABLE],["row","col",i.SWAPPABLE],["color","shape",i.SWAPPABLE],["color","detail",i.SWAPPABLE],["detail","shape",i.SWAPPABLE],["size","color",i.SWAPPABLE]].reduce(r,{})},{}],8:[function(e,t,n){(function(n){"use strict";var r="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,i=e("./clusterconsts"),a=e("../util"),o={};t.exports=o,o.table=function(e){var t,n,i=e.length,a=e.map(function(e){return o.getEncTypeByColumnName(e)}),s=e.map(r.Encoding.shorthand),u={};for(t=0;i>t;t++)u[s[t]]={};for(t=0;i>t;t++)for(n=t+1;i>n;n++){var l=s[n],c=s[t];u[l][c]=u[c][l]=o.get(a[t],a[n])}return u},o.get=function(e,t){var n=a.union(r.keys(e.col),r.keys(t.col)),o=0;n.forEach(function(n){var r=e.col[n],a=t.col[n];r&&a?r.encType!=a.encType&&(o+=(i.DIST_BY_ENCTYPE[r.encType]||{})[a.encType]||1):o+=i.DIST_MISSING});var s=r.Encoding.isStack(e),u=r.Encoding.isStack(t);return(s||u)&&(s&&u?e.encoding.color.name!==t.encoding.color.name&&(o+=1):o+=1),o},o.getEncTypeByColumnName=function(e){var t={},n=e.encoding;return r.keys(n).forEach(function(e){var i=r.duplicate(n[e]);i.encType=e,t[i.name||""]=i,delete i.name}),{marktype:e.marktype,col:t,encoding:e.encoding}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":20,"./clusterconsts":7}],9:[function(e,t,n){"use strict";var r=t.exports={gen:{},cluster:{},rank:{}};r.gen.projections={type:"object",properties:{omitDotPlot:{type:"boolean","default":!1,description:"remove all dot plots"},maxCardinalityForAutoAddOrdinal:{type:"integer","default":50,description:"max cardinality for ordinal field to be considered for auto adding"},alwaysAddHistogram:{type:"boolean","default":!0}}},r.gen.aggregates={type:"object",properties:{config:{type:"object"},data:{type:"object"},tableTypes:{type:"boolean","default":"both","enum":["both","aggregated","disaggregated"]},genDimQ:{type:"string","default":"auto","enum":["auto","bin","cast","none"],description:"Use Q as Dimension either by binning or casting"},minCardinalityForBin:{type:"integer","default":20,description:"minimum cardinality of a field if we were to bin"},omitDotPlot:{type:"boolean","default":!1,description:"remove all dot plots"},omitMeasureOnly:{type:"boolean","default":!1,description:"Omit aggregation with measure(s) only"},omitDimensionOnly:{type:"boolean","default":!0,description:"Omit aggregation with dimension(s) only"},addCountForDimensionOnly:{type:"boolean","default":!0,description:"Add count when there are dimension(s) only"},aggrList:{type:"array",items:{type:["string"]},"default":[void 0,"mean"]},timeUnitList:{type:"array",items:{type:["string"]},"default":["year"]},consistentAutoQ:{type:"boolean","default":!0,description:"generate similar auto transform for quant"}}},r.gen.encodings={type:"object",properties:{marktypeList:{type:"array",items:{type:"string"},"default":["point","bar","line","area","text","tick"],description:"allowed marktypes"},encodingTypeList:{type:"array",items:{type:"string"},"default":["x","y","row","col","size","color","text","detail"],description:"allowed encoding types"},maxGoodCardinalityForFacets:{type:"integer","default":5,description:"maximum cardinality of a field to be put on facet (row/col) effectively"},maxCardinalityForFacets:{type:"integer","default":20,description:"maximum cardinality of a field to be put on facet (row/col)"},maxGoodCardinalityForColor:{type:"integer","default":7,description:"maximum cardinality of an ordinal field to be put on color effectively"},maxCardinalityForColor:{type:"integer","default":20,description:"maximum cardinality of an ordinal field to be put on color"},maxCardinalityForShape:{type:"integer","default":6,description:"maximum cardinality of an ordinal field to be put on shape"},omitTranpose:{type:"boolean","default":!0,description:"Eliminate all transpose by (1) keeping horizontal dot plot only (2) for OxQ charts, always put O on Y (3) show only one DxD, MxM (currently sorted by name)"},omitDotPlot:{type:"boolean","default":!1,description:"remove all dot plots"},omitDotPlotWithExtraEncoding:{type:"boolean","default":!0,description:"remove all dot plots with >1 encoding"},omitMultipleRetinalEncodings:{type:"boolean","default":!0,description:"omit using multiple retinal variables (size, color, shape)"},omitNonTextAggrWithAllDimsOnFacets:{type:"boolean","default":!0,description:"remove all aggregated charts (except text tables) with all dims on facets (row, col)"},omitOneDimensionCount:{type:"boolean","default":!1,description:"omit one dimension count"},omitSizeOnBar:{type:"boolean","default":!1,description:"do not use bar's size"},omitStackedAverage:{type:"boolean","default":!0,description:"do not stack bar chart with average"},alwaysGenerateTableAsHeatmap:{type:"boolean","default":!0}}}},{}],10:[function(e,t,n){t.exports={consts:e("./consts"),cluster:e("./cluster/cluster"),gen:e("./gen/gen"),rank:e("./rank/rank"),util:e("./util"),auto:"-, sum"}},{"./cluster/cluster":6,"./consts":9,"./gen/gen":14,"./rank/rank":18,"./util":20}],11:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){function s(t){t=i.duplicate(t),t.key=i.encDef.shorthands(t),e.push(t)}function u(){if(r.omitMeasureOnly||r.omitDimensionOnly){var e=!1,t=!1,n=!1;if(g.forEach(function(r){i.encDef.isDimension(r)?t=!0:(e=!0,r.aggregate||(n=!0))}),!t&&!n&&r.omitMeasureOnly)return;if(!e&&(r.addCountForDimensionOnly&&(g.push(i.encDef.count()),s(g),g.pop()),r.omitDimensionOnly))return}r.omitDotPlot&&1===g.length||s(g)}function l(e,t,n,r){var i=t===!0||null===t,a=t===!1||null===t;r?i&&(g[e].aggregate=r,p(e+1,!0,n),delete g[e].aggregate):a&&p(e+1,!1,n)}function c(e,t,n){g[e].bin=!0,p(e+1,t,n),delete g[e].bin}function f(e,a,s){var u=t[e],f=a===!0||null===a;if(g[e]={name:u.name,type:u.type},"count"===u.aggregate)f&&(g[e].aggregate=u.aggregate,p(e+1,!0,s));else if(u._aggregate)l(e,a,s,u._aggregate);else if(u._raw)l(e,a,s,void 0);else if(u._bin)c(e,a,s);else if(r.aggrList.forEach(function(t){r.consistentAutoQ&&s!==o&&s!==t||l(e,a,t,t)}),(!r.consistentAutoQ||i.isin(s,[o,"bin","cast","autocast"]))&&!m){var d=i.encDef.cardinality(u,n)>r.minCardinalityForBin,h="auto"===r.genDimQ,v="bin"===r.genDimQ||h&&d,y="cast"===r.genDimQ||h&&!d;v&&i.isin(s,[o,"bin","autocast"])&&c(e,a,h?"autocast":"bin"),y&&i.isin(s,[o,"cast","autocast"])&&(g[e].type="O",p(e+1,a,h?"autocast":"cast"),g[e].type="Q")}}function d(e,t,n,r){g[e].timeUnit=r,p(e+1,t,n),delete g[e].timeUnit}function h(e,n,i){var a=t[e];g[e]={name:a.name,type:a.type},a._timeUnit?d(e,n,i,a._timeUnit):r.timeUnitList.forEach(function(t){void 0===t?n||p(e+1,!1,i):d(e,n,i,t)})}function p(e,n,r){if(e===t.length)return void u();var i=t[e];switch(i.type){case Q:f(e,n,r);break;case T:h(e,n,r);break;case O:case N:default:g[e]=i,p(e+1,n,r)}}r=i.schema.util.extend(r||{},a.gen.aggregates);var g=new Array(t.length),m=i.any(t,function(e){return i.encDef.isTypes(e,[N,O])}),v="aggregated"===r.tableTypes?!0:"disaggregated"===r.tableTypes?!1:null;return p(0,v,o),e}var i="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,a=e("../consts"),o="*";t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":9}],12:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r,a){r=o.schema.util.extend(r||{},c.gen.encodings);var u=s([],t,n,r);return a?u.reduce(function(e,t){return e[t]=i([],t,n,r),e},{}):u.reduce(function(e,t){return i(e,t,n,r)},[])}function i(e,t,n,r){return u(t,n,r).forEach(function(i){var s=o.duplicate({encoding:t,config:r.config});s.marktype=i,s.data=r.data;var u=a(s,n,r),c=l.encoding(u,n,r);u._info=c,e.push(u)}),e}function a(e,t,n){"text"===e.marktype&&n.alwaysGenerateTableAsHeatmap&&(e.encoding.color=e.encoding.text);var r=e.encoding;return["x","y"].forEach(function(e){var n=r[e];if(n&&o.encDef.isMeasure(n)&&!o.encDef.isCount(n)){var i=t[n.name];i&&i.stdev/i.mean<.01&&(n.scale={zero:!1})}}),e}var o="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,s=e("./encs"),u=e("./marktypes"),l=e("../rank/rank"),c=e("../consts");t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":9,"../rank/rank":18,"./encs":13,"./marktypes":15}],13:[function(e,t,n){(function(n){"use strict";function r(e,t,n,r){return r.omitMultipleRetinalEncodings&&(e.color||e.size||e.shape)?!1:!0}function i(e,t,n,i){return r(e,t,n,i)?l.encDef.isMeasure(t)||l.encDef.cardinality(t,n)<=i.maxCardinalityForColor:!1}function a(e,t,n,i){return r(e,t,n,i)?t.bin&&t.type===Q?!1:t.timeUnit&&t.type===T?!1:l.encDef.cardinality(t,n)<=i.maxCardinalityForColor:!1}function o(e){return l.encDef.isTypes(e.y,[N,O])&&d(e.x)?!0:d(e.y)&&!l.encDef.isTypes(e.x,[N,O])&&f(e.x)?!0:!1}function s(e,t,n){if(e.text)return c.satisfyRules(e,TEXT,t,n);if(e.x||e.y||e.geo||e.arc){if(e.row||e.col){if(!e.x||!e.y)return!1;if(n.omitNonTextAggrWithAllDimsOnFacets&&u.isAggrWithAllDimOnFacets(e))return!1}if(e.x&&e.y){var r=!!f(e.x),i=!!f(e.y);if(r&&i&&!l.enc.isAggregate(e))return!1;if(n.omitTranpose)if(r^i){if(!o(e))return!1}else if(e.y.type===T||e.x.type===T){if(e.y.type===T&&e.x.type!==T)return!1}else if(e.x.name>e.y.name)return!1;return!0}if(n.omitDotPlot)return!1;if(n.omitTranpose&&e.y)return!1;if(n.omitDotPlotWithExtraEncoding&&l.keys(e).length>1)return!1;if(n.omitOneDimensionCount){if(e.x&&"count"==e.x.aggregate&&!e.y)return!1;if(e.y&&"count"==e.y.aggregate&&!e.x)return!1}return!0}return!1}function u(e,t,n,r){function i(o){if(o===t.length)return void(s(a,n,r)&&e.push(l.duplicate(a)));var u=t[o];for(var c in r.encodingTypeList){var d=r.encodingTypeList[c],p=f(u);d in a||!(p&&h[d].dimension||!p&&h[d].measure)||h[d].rules&&!h[d].rules(a,u,n,r)||(a[d]=u,i(o+1),delete a[d])}}var a={};return i(0),e}e("../globals");var l="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,c=e("./marktypes"),f=l.encDef.isDimension,d=l.encDef.isMeasure;t.exports=u;var h={x:{dimension:!0,measure:!0,multiple:!0},y:{dimension:!0,measure:!0,multiple:!0},row:{dimension:!0,multiple:!0},col:{dimension:!0,multiple:!0},shape:{dimension:!0,rules:a},size:{measure:!0,rules:r},color:{dimension:!0,measure:!0,rules:i},text:{measure:!0},detail:{dimension:!0}};u.isAggrWithAllDimOnFacets=function(e){var t=!1,n=!1;for(var r in e){var i=e[r];if(i.aggregate&&(t=!0),l.encDef.isDimension(i)&&r!==ROW&&r!==COL&&(n=!0),t&&n)break}return t&&!n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../globals":17,"./marktypes":15}],14:[function(e,t,n){"use strict";var r=e("../util"),i=t.exports={aggregates:e("./aggregates"),projections:e("./projections"),encodings:e("./encodings"),encs:e("./encs"),marktypes:e("./marktypes")};i.charts=function(e,t,n,a){t=r.gen.getOpt(t),a=void 0===a?{encodings:1}:a;var o,s,u=t.genAggr?i.aggregates([],e,t):[e],l=0;return a===!0||a&&a.aggregate?o=u.reduce(function(e,n){return i.encs(e,n,t)},[]):(o=u.map(function(e){return i.encs([],e,t)},!0),l+=1),a===!0||a&&a.encodings?s=r.nestedReduce(o,function(e,r){return i.marktypes(e,r,t,n)},l,!0):(s=r.nestedMap(o,function(e){return i.marktypes([],e,t,n)},l,!0),l+=1),s}},{"../util":20,"./aggregates":11,"./encodings":12,"./encs":13,"./marktypes":15,"./projections":16}],15:[function(e,t,n){(function(e){"use strict";function n(e,t,n){return n.marktypeList.filter(function(r){return p.satisfyRules(e,r,t,n)})}function r(e,t,n){return f.encDef.cardinality(e,t)<=n.maxCardinalityForFacets}function i(e,t,n){return e.row&&!r(e.row,t,n)?!1:e.col&&!r(e.col,t,n)?!1:!0}function a(e,t,n){if(!i(e,t,n))return!1;if(e.x&&e.y){var r=d(e.x),a=d(e.y);if(r&&a){if(e.shape)return!1;if(e.color&&d(e.color))return!1}}else{if(n.omitDotPlot)return!1;if(n.omitTranpose&&e.y)return!1;if(n.omitDotPlotWithExtraEncoding&&f.keys(e).length>1)return!1;if(e.shape)return!1}return!0}function o(e,t,n){if(e.x||e.y){if(f.enc.isAggregate(e))return!1;var r=d(e.x),i=d(e.y);return!r&&(!e.y||h(e.y))||!i&&(!e.x||h(e.x))}return!1}function s(e,t,n){if(!i(e,t,n))return!1;if(!e.x&&!e.y)return!1;if(n.omitSizeOnBar&&void 0!==e.size)return!1;var r=(!e.x||void 0===e.x.aggregate)^(!e.y||void 0===e.y.aggregate);if(r){var a=(!e.x||d(e.x))^(!e.y||d(e.y));if(a){var o=e.x.aggregate||e.y.aggregate;return!(n.omitStackedAverage&&"mean"===o&&e.color)}}return!1}function u(e,t,n){return i(e,t,n)?"T"==e.x.type&&e.x.timeUnit&&"Q"==e.y.type&&e.y.aggregate:!1}function l(e,t,n){return i(e,t,n)&&u(e,t,n)?!(n.omitStackedAverage&&"mean"===e.y.aggregate&&e.color):!1}function c(e,t,n){return!(!e.row&&!e.col||!e.text||!e.text.aggregate||e.x||e.y||e.size||n.alwaysGenerateTableAsHeatmap&&e.color)}var f="undefined"!=typeof window?window.vl:"undefined"!=typeof e?e.vl:null,d=f.encDef.isDimension,h=f.encDef.isOrdinalScale,p=t.exports=n,g=p.rule={point:a,bar:s,line:u,area:l,text:c,tick:o};p.satisfyRules=function(e,t,n,r){var i=f.compiler.marks[t],a=i.requiredEncoding,o=i.supportedEncoding;for(var s in a)if(!(a[s]in e))return!1;for(var u in e)if(!o[u])return!1;return!g[t]||g[t](e,n,r)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){(function(n){"use strict";function r(e,t,n){n=s.schema.util.extend(n||{},o.gen.projections);var l=[],c=[],f=[],d=!1,h=!1,p={};e.forEach(function(e,r){if(p[e.name]=r,e.selected)l.push(e),u(e)||"T"===e.type?d=!0:h=!0;else if(e.selected!==!1&&!s.encDef.isCount(e)){if(s.encDef.isDimension(e)&&!n.maxCardinalityForAutoAddOrdinal&&s.encDef.cardinality(e,t,15)>n.maxCardinalityForAutoAddOrdinal)return;c.push(e)}}),c.sort(i(d,h,p));var g=a.chooseKorLess(c,1);return g.forEach(function(e){var t=l.concat(e);if(t.length>0){if(n.omitDotPlot&&1===t.length)return;f.push(t)}}),f.forEach(function(e){e.key=r.key(e)}),f}function i(e,t,n){return function(t,r){return t.type!==r.type?e?l[r.type]-l[t.type]:l[t.type]-l[r.type]:n[t.name]-n[r.name]}}var a=e("../util"),o=e("../consts"),s="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,u=s.encDef.isDimension;t.exports=r;var l={N:0,O:0,T:2,Q:3};r.key=function(e){return e.map(function(e){return s.encDef.isCount(e)?"count":e.name}).join(",")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../consts":9,"../util":20}],17:[function(e,t,n){(function(t){"use strict";var n=t||window;e("vega-lite/src/globals"),n.CHART_TYPES={TABLE:"TABLE",BAR:"BAR",PLOT:"PLOT",LINE:"LINE",AREA:"AREA",MAP:"MAP",HISTOGRAM:"HISTOGRAM"},n.ANY_DATA_TYPES=15}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"vega-lite/src/globals":5}],18:[function(e,t,n){t.exports={encoding:e("./rankEncodings")}},{"./rankEncodings":19}],19:[function(e,t,n){(function(n){"use strict";function r(e,t,n,u){var l=[],c=i.keys(e.encoding),f=e.marktype,d=e.encoding,h=i.enc.reduce(e.encoding,function(e,t,n){var r=i.encDef.shorthand(t),a=e[r]=e[r]||[];return a.push({encType:n,field:t}),e},{});return i.forEach(h,function(a){var o=a.map(function(e){return e.encType+i.shorthand.assign+i.encDef.shorthand(e.field)+" "+(u&&u[e.field.name]?"[x]":"[ ]")}),s=a.map(function(a){var o=i.encDef.isDimension(a.field)?"dimension":"measure",s=r.score[o](a.field,a.encType,e.marktype,t,n);return!u||u[a.field.name]?s:Math.pow(s,.125)});l.push({reason:o.join(" | "),score:Math.max.apply(null,s)})}),f===TEXT||d.x&&d.y&&a(d.x)^a(d.y)&&l.push({reason:"OxQ plot",score:.8}),c.length>1&&f!==TEXT&&(d.x&&d.y||d.geo||d.text||l.push({reason:"unused position",score:o})),l.push({reason:"marktype="+f,score:s[f]}),{score:l.reduce(function(e,t){return e*t.score},1),features:l}}e("../globals");var i="undefined"!=typeof window?window.vl:"undefined"!=typeof n?n.vl:null,a=i.encDef.isDimension;t.exports=r;var o=.5,s={line:.99,area:.98,bar:.97,tick:.96,point:.95,circle:.94,square:.94,text:.8},u={},l={},c=.1,f=.01;u.minor=.01,u.pos=1,u.Y_T=.8,u.facet_text=1,u.facet_good=.675,u.facet_ok=.55,u.facet_bad=.4,u.color_good=.7,u.color_ok=.65,u.color_bad=.3,u.color_stack=.6,u.shape=.6,u.detail=.5,u.bad=c,u.terrible=f,l.pos=1,l.size=.6,l.color=.5,l.text=.4,l.bad=c,l.terrible=f,r.dimensionScore=function(e,t,n,r,a){var o=i.encDef.cardinality(e,r);switch(t){case X:return i.encDef.isTypes(e,[N,O])?u.pos-u.minor:u.pos;case Y:return i.encDef.isTypes(e,[N,O])?u.pos-u.minor:e.type===T?u.Y_T:u.pos-u.minor;case COL:return n===TEXT?u.facet_text:o<=a.maxGoodCardinalityForFacets?u.facet_good:o<=a.maxCardinalityForFacets?u.facet_ok:u.facet_bad;case ROW:return n===TEXT?u.facet_text:(o<=a.maxGoodCardinalityForFacets?u.facet_good:o<=a.maxCardinalityForFacets?u.facet_ok:u.facet_bad)-u.minor;case COLOR:var s=e.bin&&e.type===Q||e.timeUnit&&e.type===T,l="bar"===n||"area"===n;return s?u.color_bad:l?u.color_stack:o<=a.maxGoodCardinalityForColor?u.color_good:o<=a.maxCardinalityForColor?u.color_ok:u.color_bad;case SHAPE:return o<=a.maxCardinalityForShape?u.shape:f;case DETAIL:return u.detail}return f},r.dimensionScore.consts=u,r.measureScore=function(e,t,n,r,i){switch(t){case X:return l.pos;case Y:return l.pos;case SIZE:return"bar"===n?c:n===TEXT?c:"line"===n?c:l.size;case COLOR:return l.color;case TEXT:return l.text}return c},r.measureScore.consts=l,r.score={dimension:r.dimensionScore,measure:r.measureScore}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../globals":17}],20:[function(e,t,n){"use strict";var r=e("./consts"),i=t.exports={gen:{}};i.isArray=Array.isArray||function(e){return"[object Array]"=={}.toString.call(e)},i.json=function(e,t){return JSON.stringify(e,null,t)},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.nestedMap=function(e,t,n,r){return e.map(0===n?t:function(e){var a=i.nestedMap(e,t,n-1);return r?a.filter(i.nonEmpty):a})},i.nestedReduce=function(e,t,n,r){return 0===n?e.reduce(t,[]):e.map(function(e){var a=i.nestedReduce(e,t,n-1);return r?a.filter(i.nonEmpty):a})},i.nonEmpty=function(e){return!i.isArray(e)||e.length>0},i.traverse=function(e,t){return void 0!==e.value?t.push(e.value):(e.left&&i.traverse(e.left,t),e.right&&i.traverse(e.right,t)),t},i.union=function(e,t){var n={};return e.forEach(function(e){n[e]=!0}),t.forEach(function(e){n[e]=!0}),i.keys(n)},i.gen.getOpt=function(e){return(e?i.keys(e):[]).reduce(function(t,n){return t[n]=e[n],t},Object.create(r.gen.DEFAULT_OPT))},i.powerset=function(e){for(var t=[[]],n=0;n<e.length;n++)for(var r=0,i=t.length;i>r;r++)t.push(t[r].concat(e[n]));return t},i.chooseKorLess=function(e,t){for(var n=[[]],r=0;r<e.length;r++)for(var i=0,a=n.length;a>i;i++){var o=n[i].concat(e[r]);o.length<=t&&n.push(o)}return n},i.chooseK=function(e,t){for(var n=[[]],r=[],i=0;i<e.length;i++)for(var a=0,o=n.length;o>a;a++){var s=n[a].concat(e[i]);s.length<t?n.push(s):s.length===t&&r.push(s)}return r},i.cross=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n.push(e[r].concat(t[i]));return n}},{"./consts":9}]},{},[10])(10)}),function(){function e(e,t){if(e!==t){var n=null===e,r=e===_,i=e===e,a=null===t,o=t===_,s=t===t;if(e>t&&!a||!i||n&&!o&&s||r&&s)return 1;if(t>e&&!n||!s||a&&!r&&i||o&&i)return-1;

}return 0}function t(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function n(e,t,n){if(t!==t)return h(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function r(e){return"function"==typeof e||!1}function i(e){return null==e?"":e+""}function a(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function o(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function s(t,n){return e(t.criteria,n.criteria)||t.index-n.index}function u(t,n,r){for(var i=-1,a=t.criteria,o=n.criteria,s=a.length,u=r.length;++i<s;){var l=e(a[i],o[i]);if(l){if(i>=u)return l;var c=r[i];return l*("asc"===c||c===!0?1:-1)}}return t.index-n.index}function l(e){return ze[e]}function c(e){return qe[e]}function f(e,t,n){return t?e=Ye[e]:n&&(e=Ve[e]),"\\"+e}function d(e){return"\\"+Ve[e]}function h(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var a=e[i];if(a!==a)return i}return-1}function p(e){return!!e&&"object"==typeof e}function g(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function m(e,t){for(var n=-1,r=e.length,i=-1,a=[];++n<r;)e[n]===t&&(e[n]=z,a[++i]=n);return a}function v(e,t){for(var n,r=-1,i=e.length,a=-1,o=[];++r<i;){var s=e[r],u=t?t(s,r,e):s;r&&n===u||(n=u,o[++a]=s)}return o}function y(e){for(var t=-1,n=e.length;++t<n&&g(e.charCodeAt(t)););return t}function b(e){for(var t=e.length;t--&&g(e.charCodeAt(t)););return t}function x(e){return He[e]}function w(g){function G(e){if(p(e)&&!Es(e)&&!(e instanceof ze)){if(e instanceof ee)return e;if(eo.call(e,"__chain__")&&eo.call(e,"__wrapped__"))return hr(e)}return new ee(e)}function Z(){}function ee(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function ze(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Co,this.__views__=[]}function qe(){var e=new ze(this.__wrapped__);return e.__actions__=nt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nt(this.__views__),e}function He(){if(this.__filtered__){var e=new ze(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Be(){var e=this.__wrapped__.value(),t=this.__dir__,n=Es(e),r=0>t,i=n?e.length:0,a=Vn(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,f=c.length,d=0,h=ko(u,this.__takeCount__);if(!n||R>i||i==u&&h==u)return nn(e,this.__actions__);var p=[];e:for(;u--&&h>d;){l+=t;for(var g=-1,m=e[l];++g<f;){var v=c[g],y=v.iteratee,b=v.type,x=y(m);if(b==F)m=x;else if(!x){if(b==I)continue e;break e}}p[d++]=m}return p}function Ye(){this.__data__={}}function Ve(e){return this.has(e)&&delete this.__data__[e]}function We(e){return"__proto__"==e?_:this.__data__[e]}function Ge(e){return"__proto__"!=e&&eo.call(this.__data__,e)}function Xe(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Je(e){var t=e?e.length:0;for(this.data={hash:vo(null),set:new co};t--;)this.push(e[t])}function Ke(e,t){var n=e.data,r="string"==typeof t||Ni(t)?n.set.has(t):n.hash[t];return r?0:-1}function Ze(e){var t=this.data;"string"==typeof e||Ni(e)?t.set.add(e):t.hash[e]=!0}function tt(e,t){for(var n=-1,r=e.length,i=-1,a=t.length,o=Ua(r+a);++n<r;)o[n]=e[n];for(;++i<a;)o[n++]=t[i];return o}function nt(e,t){var n=-1,r=e.length;for(t||(t=Ua(r));++n<r;)t[n]=e[n];return t}function rt(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function it(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function at(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ot(e,t,n,r){for(var i=-1,a=e.length,o=r,s=o;++i<a;){var u=e[i],l=+t(u);n(l,o)&&(o=l,s=u)}return s}function st(e,t){for(var n=-1,r=e.length,i=-1,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[++i]=o)}return a}function ut(e,t){for(var n=-1,r=e.length,i=Ua(r);++n<r;)i[n]=t(e[n],n,e);return i}function lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function ct(e,t,n,r){var i=-1,a=e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function ft(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function dt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ht(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}function pt(e,t){return e===_?t:e}function gt(e,t,n,r){return e!==_&&eo.call(r,n)?e:t}function mt(e,t,n){for(var r=-1,i=Us(t),a=i.length;++r<a;){var o=i[r],s=e[o],u=n(s,t[o],o,e,t);(u===u?u===s:s!==s)&&(s!==_||o in e)||(e[o]=u)}return e}function vt(e,t){return null==t?e:bt(t,Us(t),e)}function yt(e,t){for(var n=-1,r=null==e,i=!r&&Kn(e),a=i?e.length:0,o=t.length,s=Ua(o);++n<o;){var u=t[n];s[n]=i?Zn(u,a)?e[u]:_:r?_:e[u]}return s}function bt(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var a=t[r];n[a]=e[a]}return n}function xt(e,t,n){var r=typeof e;return"function"==r?t===_?e:on(e,t,n):null==e?Ta:"object"==r?Ft(e):t===_?La(e):Ut(e,t)}function wt(e,t,n,r,i,a,o){var s;if(n&&(s=i?n(e,r,i):n(e)),s!==_)return s;if(!Ni(e))return e;var u=Es(e);if(u){if(s=Wn(e),!t)return nt(e,s)}else{var l=no.call(e),c=l==W;if(l!=J&&l!=q&&(!c||i))return Ue[l]?Xn(e,l,t):i?e:{};if(s=Gn(c?{}:e),!t)return vt(s,e)}a||(a=[]),o||(o=[]);for(var f=a.length;f--;)if(a[f]==e)return o[f];return a.push(e),o.push(s),(u?rt:Ot)(e,function(r,i){s[i]=wt(r,t,n,i,e,a,o)}),s}function _t(e,t,n){if("function"!=typeof e)throw new Xa(U);return fo(function(){e.apply(_,n)},t)}function kt(e,t){var r=e?e.length:0,i=[];if(!r)return i;var a=-1,o=Hn(),s=o===n,u=s&&t.length>=R?gn(t):null,l=t.length;u&&(o=Ke,s=!1,t=u);e:for(;++a<r;){var c=e[a];if(s&&c===c){for(var f=l;f--;)if(t[f]===c)continue e;i.push(c)}else o(t,c,0)<0&&i.push(c)}return i}function $t(e,t){var n=!0;return Po(e,function(e,r,i){return n=!!t(e,r,i)}),n}function St(e,t,n,r){var i=r,a=i;return Po(e,function(e,o,s){var u=+t(e,o,s);(n(u,i)||u===r&&u===a)&&(i=u,a=e)}),a}function Mt(e,t,n,r){var i=e.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===_||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)e[n++]=t;return e}function Tt(e,t){var n=[];return Po(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Ct(e,t,n,r){var i;return n(e,function(e,n,a){return t(e,n,a)?(i=r?n:e,!1):void 0}),i}function Et(e,t,n,r){r||(r=[]);for(var i=-1,a=e.length;++i<a;){var o=e[i];p(o)&&Kn(o)&&(n||Es(o)||Si(o))?t?Et(o,t,n,r):lt(r,o):n||(r[r.length]=o)}return r}function At(e,t){return Io(e,t,ea)}function Ot(e,t){return Io(e,t,Us)}function Dt(e,t){return Fo(e,t,Us)}function Lt(e,t){for(var n=-1,r=t.length,i=-1,a=[];++n<r;){var o=t[n];Li(e[o])&&(a[++i]=o)}return a}function Nt(e,t,n){if(null!=e){n!==_&&n in fr(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&i>r;)e=e[t[r++]];return r&&r==i?e:_}}function jt(e,t,n,r,i,a){return e===t?!0:null==e||null==t||!Ni(e)&&!p(t)?e!==e&&t!==t:Pt(e,t,jt,n,r,i,a)}function Pt(e,t,n,r,i,a,o){var s=Es(e),u=Es(t),l=H,c=H;s||(l=no.call(e),l==q?l=J:l!=J&&(s=Hi(e))),u||(c=no.call(t),c==q?c=J:c!=J&&(u=Hi(t)));var f=l==J,d=c==J,h=l==c;if(h&&!s&&!f)return Fn(e,t,l);if(!i){var p=f&&eo.call(e,"__wrapped__"),g=d&&eo.call(t,"__wrapped__");if(p||g)return n(p?e.value():e,g?t.value():t,r,i,a,o)}if(!h)return!1;a||(a=[]),o||(o=[]);for(var m=a.length;m--;)if(a[m]==e)return o[m]==t;a.push(e),o.push(t);var v=(s?In:Un)(e,t,n,r,i,a,o);return a.pop(),o.pop(),v}function Rt(e,t,n){var r=t.length,i=r,a=!n;if(null==e)return!i;for(e=fr(e);r--;){var o=t[r];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++r<i;){o=t[r];var s=o[0],u=e[s],l=o[1];if(a&&o[2]){if(u===_&&!(s in e))return!1}else{var c=n?n(u,l,s):_;if(!(c===_?jt(l,u,n,!0):c))return!1}}return!0}function It(e,t){var n=-1,r=Kn(e)?Ua(e.length):[];return Po(e,function(e,i,a){r[++n]=t(e,i,a)}),r}function Ft(e){var t=Bn(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(r!==_||n in fr(e))}}return function(e){return Rt(e,t)}}function Ut(e,t){var n=Es(e),r=er(e)&&rr(t),i=e+"";return e=dr(e),function(a){if(null==a)return!1;var o=i;if(a=fr(a),!(!n&&r||o in a)){if(a=1==e.length?a:Nt(a,Gt(e,0,-1)),null==a)return!1;o=Mr(e),a=fr(a)}return a[o]===t?t!==_||o in a:jt(t,a[o],_,!0)}}function zt(e,t,n,r,i){if(!Ni(e))return e;var a=Kn(t)&&(Es(t)||Hi(t)),o=a?_:Us(t);return rt(o||t,function(s,u){if(o&&(u=s,s=t[u]),p(s))r||(r=[]),i||(i=[]),qt(e,t,u,zt,n,r,i);else{var l=e[u],c=n?n(l,s,u,e,t):_,f=c===_;f&&(c=s),c===_&&(!a||u in e)||!f&&(c===c?c===l:l!==l)||(e[u]=c)}}),e}function qt(e,t,n,r,i,a,o){for(var s=a.length,u=t[n];s--;)if(a[s]==u)return void(e[n]=o[s]);var l=e[n],c=i?i(l,u,n,e,t):_,f=c===_;f&&(c=u,Kn(u)&&(Es(u)||Hi(u))?c=Es(l)?l:Kn(l)?nt(l):[]:Ui(u)||Si(u)?c=Si(l)?Gi(l):Ui(l)?l:{}:f=!1),a.push(u),o.push(c),f?e[n]=r(c,u,i,a,o):(c===c?c!==l:l===l)&&(e[n]=c)}function Ht(e){return function(t){return null==t?_:t[e]}}function Bt(e){var t=e+"";return e=dr(e),function(n){return Nt(n,e,t)}}function Yt(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Zn(r)){var i=r;ho.call(e,r,1)}}return e}function Vt(e,t){return e+yo(Mo()*(t-e+1))}function Wt(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function Gt(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===_||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Ua(i);++r<i;)a[r]=e[r+t];return a}function Xt(e,t){var n;return Po(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Jt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Kt(e,t,n){var r=zn(),i=-1;t=ut(t,function(e){return r(e)});var a=It(e,function(e){var n=ut(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return Jt(a,function(e,t){return u(e,t,n)})}function Zt(e,t){var n=0;return Po(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function Qt(e,t){var r=-1,i=Hn(),a=e.length,o=i===n,s=o&&a>=R,u=s?gn():null,l=[];u?(i=Ke,o=!1):(s=!1,u=t?[]:l);e:for(;++r<a;){var c=e[r],f=t?t(c,r,e):c;if(o&&c===c){for(var d=u.length;d--;)if(u[d]===f)continue e;t&&u.push(f),l.push(c)}else i(u,f,0)<0&&((t||s)&&u.push(f),l.push(c))}return l}function en(e,t){for(var n=-1,r=t.length,i=Ua(r);++n<r;)i[n]=e[t[n]];return i}function tn(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?Gt(e,r?0:a,r?a+1:i):Gt(e,r?a+1:0,r?i:a)}function nn(e,t){var n=e;n instanceof ze&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var a=t[r];n=a.func.apply(a.thisArg,lt([n],a.args))}return n}function rn(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&Oo>=i){for(;i>r;){var a=r+i>>>1,o=e[a];(n?t>=o:t>o)&&null!==o?r=a+1:i=a}return i}return an(e,t,Ta,n)}function an(e,t,n,r){t=n(t);for(var i=0,a=e?e.length:0,o=t!==t,s=null===t,u=t===_;a>i;){var l=yo((i+a)/2),c=n(e[l]),f=c!==_,d=c===c;if(o)var h=d||r;else h=s?d&&f&&(r||null!=c):u?d&&(r||f):null==c?!1:r?t>=c:t>c;h?i=l+1:a=l}return ko(a,Ao)}function on(e,t,n){if("function"!=typeof e)return Ta;if(t===_)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,a){return e.call(t,n,r,i,a)};case 5:return function(n,r,i,a,o){return e.call(t,n,r,i,a,o)}}return function(){return e.apply(t,arguments)}}function sn(e){var t=new ao(e.byteLength),n=new po(t);return n.set(new po(e)),t}function un(e,t,n){for(var r=n.length,i=-1,a=_o(e.length-r,0),o=-1,s=t.length,u=Ua(s+a);++o<s;)u[o]=t[o];for(;++i<r;)u[n[i]]=e[i];for(;a--;)u[o++]=e[i++];return u}function ln(e,t,n){for(var r=-1,i=n.length,a=-1,o=_o(e.length-i,0),s=-1,u=t.length,l=Ua(o+u);++a<o;)l[a]=e[a];for(var c=a;++s<u;)l[c+s]=t[s];for(;++r<i;)l[c+n[r]]=e[a++];return l}function cn(e,t){return function(n,r,i){var a=t?t():{};if(r=zn(r,i,3),Es(n))for(var o=-1,s=n.length;++o<s;){var u=n[o];e(a,u,r(u,o,n),n)}else Po(n,function(t,n,i){e(a,t,r(t,n,i),i)});return a}}function fn(e){return vi(function(t,n){var r=-1,i=null==t?0:n.length,a=i>2?n[i-2]:_,o=i>2?n[2]:_,s=i>1?n[i-1]:_;for("function"==typeof a?(a=on(a,s,5),i-=2):(a="function"==typeof s?s:_,i-=a?1:0),o&&Qn(n[0],n[1],o)&&(a=3>i?_:a,i=1);++r<i;){var u=n[r];u&&e(t,u,a)}return t})}function dn(e,t){return function(n,r){var i=n?qo(n):0;if(!nr(i))return e(n,r);for(var a=t?i:-1,o=fr(n);(t?a--:++a<i)&&r(o[a],a,o)!==!1;);return n}}function hn(e){return function(t,n,r){for(var i=fr(t),a=r(t),o=a.length,s=e?o:-1;e?s--:++s<o;){var u=a[s];if(n(i[u],u,i)===!1)break}return t}}function pn(e,t){function n(){var i=this&&this!==Qe&&this instanceof n?r:e;return i.apply(t,arguments)}var r=vn(e);return n}function gn(e){return vo&&co?new Je(e):null}function mn(e){return function(t){for(var n=-1,r=$a(ca(t)),i=r.length,a="";++n<i;)a=e(a,r[n],n);return a}}function vn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=jo(e.prototype),r=e.apply(n,t);return Ni(r)?r:n}}function yn(e){function t(n,r,i){i&&Qn(n,r,i)&&(r=_);var a=Rn(n,e,_,_,_,_,_,r);return a.placeholder=t.placeholder,a}return t}function bn(e,t){return vi(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(_,n))})}function xn(e,t){return function(n,r,i){if(i&&Qn(n,r,i)&&(r=_),r=zn(r,i,3),1==r.length){n=Es(n)?n:cr(n);var a=ot(n,r,e,t);if(!n.length||a!==t)return a}return St(n,r,e,t)}}function wn(e,n){return function(r,i,a){if(i=zn(i,a,3),Es(r)){var o=t(r,i,n);return o>-1?r[o]:_}return Ct(r,i,e)}}function _n(e){return function(n,r,i){return n&&n.length?(r=zn(r,i,3),t(n,r,e)):-1}}function kn(e){return function(t,n,r){return n=zn(n,r,3),Ct(t,n,e,!0)}}function $n(e){return function(){for(var t,n=arguments.length,r=e?n:-1,i=0,a=Ua(n);e?r--:++r<n;){var o=a[i++]=arguments[r];if("function"!=typeof o)throw new Xa(U);!t&&ee.prototype.thru&&"wrapper"==qn(o)&&(t=new ee([],!0))}for(r=t?-1:n;++r<n;){o=a[r];var s=qn(o),u="wrapper"==s?zo(o):_;t=u&&tr(u[0])&&u[1]==(O|T|E|D)&&!u[4].length&&1==u[9]?t[qn(u[0])].apply(t,u[3]):1==o.length&&tr(o)?t[s]():t.thru(o)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Es(r)&&r.length>=R)return t.plant(r).value();for(var i=0,o=n?a[i].apply(this,e):r;++i<n;)o=a[i].call(this,o);return o}}}function Sn(e,t){return function(n,r,i){return"function"==typeof r&&i===_&&Es(n)?e(n,r):t(n,on(r,i,3))}}function Mn(e){return function(t,n,r){return("function"!=typeof n||r!==_)&&(n=on(n,r,3)),e(t,n,ea)}}function Tn(e){return function(t,n,r){return("function"!=typeof n||r!==_)&&(n=on(n,r,3)),e(t,n)}}function Cn(e){return function(t,n,r){var i={};return n=zn(n,r,3),Ot(t,function(t,r,a){var o=n(t,r,a);r=e?o:r,t=e?t:o,i[r]=t}),i}}function En(e){return function(t,n,r){return t=i(t),(e?t:"")+Ln(t,n,r)+(e?"":t)}}function An(e){var t=vi(function(n,r){var i=m(r,t.placeholder);return Rn(n,e,_,r,i)});return t}function On(e,t){return function(n,r,i,a){var o=arguments.length<3;return"function"==typeof r&&a===_&&Es(n)?e(n,r,i,o):Wt(n,zn(r,a,4),i,o,t)}}function Dn(e,t,n,r,i,a,o,s,u,l){function c(){for(var b=arguments.length,x=b,w=Ua(b);x--;)w[x]=arguments[x];if(r&&(w=un(w,r,i)),a&&(w=ln(w,a,o)),p||v){var k=c.placeholder,M=m(w,k);if(b-=M.length,l>b){var T=s?nt(s):_,C=_o(l-b,0),O=p?M:_,D=p?_:M,L=p?w:_,N=p?_:w;t|=p?E:A,t&=~(p?A:E),g||(t&=~($|S));var j=[e,t,n,L,O,N,D,T,u,C],P=Dn.apply(_,j);return tr(e)&&Ho(P,j),P.placeholder=k,P}}var R=d?n:this,I=h?R[e]:e;return s&&(w=ur(w,s)),f&&u<w.length&&(w.length=u),this&&this!==Qe&&this instanceof c&&(I=y||vn(e)),I.apply(R,w)}var f=t&O,d=t&$,h=t&S,p=t&T,g=t&M,v=t&C,y=h?_:vn(e);return c}function Ln(e,t,n){var r=e.length;if(t=+t,r>=t||!xo(t))return"";var i=t-r;return n=null==n?" ":n+"",ma(n,mo(i/n.length)).slice(0,i)}function Nn(e,t,n,r){function i(){for(var t=-1,s=arguments.length,u=-1,l=r.length,c=Ua(l+s);++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++t];var f=this&&this!==Qe&&this instanceof i?o:e;return f.apply(a?n:this,c)}var a=t&$,o=vn(e);return i}function jn(e){var t=Ba[e];return function(e,n){return n=n===_?0:+n||0,n?(n=uo(10,n),t(e*n)/n):t(e)}}function Pn(e){return function(t,n,r,i){var a=zn(r);return null==r&&a===xt?rn(t,n,e):an(t,n,a(r,i,1),e)}}function Rn(e,t,n,r,i,a,o,s){var u=t&S;if(!u&&"function"!=typeof e)throw new Xa(U);var l=r?r.length:0;if(l||(t&=~(E|A),r=i=_),l-=i?i.length:0,t&A){var c=r,f=i;r=i=_}var d=u?_:zo(e),h=[e,t,n,r,i,c,f,a,o,s];if(d&&(ir(h,d),t=h[1],s=h[9]),h[9]=null==s?u?0:e.length:_o(s-l,0)||0,t==$)var p=pn(h[0],h[2]);else p=t!=E&&t!=($|E)||h[4].length?Dn.apply(_,h):Nn.apply(_,h);var g=d?Uo:Ho;return g(p,h)}function In(e,t,n,r,i,a,o){var s=-1,u=e.length,l=t.length;if(u!=l&&!(i&&l>u))return!1;for(;++s<u;){var c=e[s],f=t[s],d=r?r(i?f:c,i?c:f,s):_;if(d!==_){if(d)continue;return!1}if(i){if(!dt(t,function(e){return c===e||n(c,e,r,i,a,o)}))return!1}else if(c!==f&&!n(c,f,r,i,a,o))return!1}return!0}function Fn(e,t,n){switch(n){case B:case Y:return+e==+t;case V:return e.name==t.name&&e.message==t.message;case X:return e!=+e?t!=+t:e==+t;case K:case Q:return e==t+""}return!1}function Un(e,t,n,r,i,a,o){var s=Us(e),u=s.length,l=Us(t),c=l.length;if(u!=c&&!i)return!1;for(var f=u;f--;){var d=s[f];if(!(i?d in t:eo.call(t,d)))return!1}for(var h=i;++f<u;){d=s[f];var p=e[d],g=t[d],m=r?r(i?g:p,i?p:g,d):_;if(!(m===_?n(p,g,r,i,a,o):m))return!1;h||(h="constructor"==d)}if(!h){var v=e.constructor,y=t.constructor;if(v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0}function zn(e,t,n){var r=G.callback||Sa;return r=r===Sa?xt:r,n?r(e,t,n):r}function qn(e){for(var t=e.name+"",n=No[t],r=n?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function Hn(e,t,r){var i=G.indexOf||$r;return i=i===$r?n:i,e?i(e,t,r):i}function Bn(e){for(var t=ta(e),n=t.length;n--;)t[n][2]=rr(t[n][1]);return t}function Yn(e,t){var n=null==e?_:e[t];return Ri(n)?n:_}function Vn(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=ko(t,e+o);break;case"takeRight":e=_o(e,t-o)}}return{start:e,end:t}}function Wn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&eo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Gn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Va),new t}function Xn(e,t,n){var r=e.constructor;switch(t){case te:return sn(e);case B:case Y:return new r(+e);case ne:case re:case ie:case ae:case oe:case se:case ue:case le:case ce:var i=e.buffer;return new r(n?sn(i):i,e.byteOffset,e.length);case X:case Q:return new r(e);case K:var a=new r(e.source,Ee.exec(e));a.lastIndex=e.lastIndex}return a}function Jn(e,t,n){null==e||er(t,e)||(t=dr(t),e=1==t.length?e:Nt(e,Gt(t,0,-1)),t=Mr(t));var r=null==e?e:e[t];return null==r?_:r.apply(e,n)}function Kn(e){return null!=e&&nr(qo(e))}function Zn(e,t){return e="number"==typeof e||De.test(e)?+e:-1,t=null==t?Do:t,e>-1&&e%1==0&&t>e}function Qn(e,t,n){if(!Ni(n))return!1;var r=typeof t;if("number"==r?Kn(n)&&Zn(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function er(e,t){var n=typeof e;if("string"==n&&_e.test(e)||"number"==n)return!0;if(Es(e))return!1;var r=!we.test(e);return r||null!=t&&e in fr(t)}function tr(e){var t=qn(e),n=G[t];if("function"!=typeof n||!(t in ze.prototype))return!1;if(e===n)return!0;var r=zo(n);return!!r&&e===r[0]}function nr(e){return"number"==typeof e&&e>-1&&e%1==0&&Do>=e}function rr(e){return e===e&&!Ni(e)}function ir(e,t){var n=e[1],r=t[1],i=n|r,a=O>i,o=r==O&&n==T||r==O&&n==D&&e[7].length<=t[8]||r==(O|D)&&n==T;if(!a&&!o)return e;r&$&&(e[2]=t[2],i|=n&$?0:M);var s=t[3];if(s){var u=e[3];e[3]=u?un(u,s,t[4]):nt(s),e[4]=u?m(e[3],z):nt(t[4])}return s=t[5],s&&(u=e[5],e[5]=u?ln(u,s,t[6]):nt(s),e[6]=u?m(e[5],z):nt(t[6])),s=t[7],s&&(e[7]=nt(s)),r&O&&(e[8]=null==e[8]?t[8]:ko(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function ar(e,t){return e===_?t:As(e,t,ar)}function or(e,t){e=fr(e);for(var n=-1,r=t.length,i={};++n<r;){var a=t[n];a in e&&(i[a]=e[a])}return i}function sr(e,t){var n={};return At(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function ur(e,t){for(var n=e.length,r=ko(t.length,n),i=nt(e);r--;){var a=t[r];e[r]=Zn(a,n)?i[a]:_}return e}function lr(e){for(var t=ea(e),n=t.length,r=n&&e.length,i=!!r&&nr(r)&&(Es(e)||Si(e)),a=-1,o=[];++a<n;){var s=t[a];(i&&Zn(s,r)||eo.call(e,s))&&o.push(s)}return o}function cr(e){return null==e?[]:Kn(e)?Ni(e)?e:Va(e):aa(e)}function fr(e){return Ni(e)?e:Va(e)}function dr(e){if(Es(e))return e;var t=[];return i(e).replace(ke,function(e,n,r,i){t.push(r?i.replace(Te,"$1"):n||e)}),t}function hr(e){return e instanceof ze?e.clone():new ee(e.__wrapped__,e.__chain__,nt(e.__actions__))}function pr(e,t,n){t=(n?Qn(e,t,n):null==t)?1:_o(yo(t)||1,1);for(var r=0,i=e?e.length:0,a=-1,o=Ua(mo(i/t));i>r;)o[++a]=Gt(e,r,r+=t);return o}function gr(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var a=e[t];a&&(i[++r]=a)}return i}function mr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),Gt(e,0>t?0:t)):[]}function vr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Gt(e,0,0>t?0:t)):[]}function yr(e,t,n){return e&&e.length?tn(e,zn(t,n,3),!0,!0):[]}function br(e,t,n){return e&&e.length?tn(e,zn(t,n,3),!0):[]}function xr(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Qn(e,t,n)&&(n=0,r=i),Mt(e,t,n,r)):[]}function wr(e){return e?e[0]:_}function _r(e,t,n){var r=e?e.length:0;return n&&Qn(e,t,n)&&(t=!1),r?Et(e,t):[]}function kr(e){var t=e?e.length:0;return t?Et(e,!0):[]}function $r(e,t,r){var i=e?e.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?_o(i+r,0):r;else if(r){var a=rn(e,t);return i>a&&(t===t?t===e[a]:e[a]!==e[a])?a:-1}return n(e,t,r||0)}function Sr(e){return vr(e,1)}function Mr(e){var t=e?e.length:0;return t?e[t-1]:_}function Tr(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?_o(r+n,0):ko(n||0,r-1))+1;else if(n){i=rn(e,t,!0)-1;var a=e[i];return(t===t?t===a:a!==a)?i:-1}if(t!==t)return h(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function Cr(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Hn(),i=e.length;++n<i;)for(var a=0,o=e[n];(a=r(t,o,a))>-1;)ho.call(t,a,1);return t}function Er(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,a=[],o=e.length;for(t=zn(t,n,3);++i<o;){var s=e[i];t(s,i,e)&&(r.push(s),a.push(i))}return Yt(e,a),r}function Ar(e){return mr(e,1)}function Or(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Qn(e,t,n)&&(t=0,n=r),Gt(e,t,n)):[]}function Dr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),Gt(e,0,0>t?0:t)):[]}function Lr(e,t,n){var r=e?e.length:0;return r?((n?Qn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Gt(e,0>t?0:t)):[]}function Nr(e,t,n){return e&&e.length?tn(e,zn(t,n,3),!1,!0):[]}function jr(e,t,n){return e&&e.length?tn(e,zn(t,n,3)):[]}function Pr(e,t,r,i){var a=e?e.length:0;if(!a)return[];null!=t&&"boolean"!=typeof t&&(i=r,r=Qn(e,t,i)?_:t,t=!1);var o=zn();return(null!=r||o!==xt)&&(r=o(r,i,3)),t&&Hn()===n?v(e,r):Qt(e,r)}function Rr(e){if(!e||!e.length)return[];var t=-1,n=0;e=st(e,function(e){return Kn(e)?(n=_o(e.length,n),!0):void 0});for(var r=Ua(n);++t<n;)r[t]=ut(e,Ht(t));return r}function Ir(e,t,n){var r=e?e.length:0;if(!r)return[];var i=Rr(e);return null==t?i:(t=on(t,n,4),ut(i,function(e){return ct(e,t,_,!0)}))}function Fr(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Kn(n))var r=r?lt(kt(r,n),kt(n,r)):n}return r?Qt(r):[]}function Ur(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Es(e[0])||(t=[]);++n<r;){var a=e[n];t?i[a]=t[n]:a&&(i[a[0]]=a[1])}return i}function zr(e){var t=G(e);return t.__chain__=!0,t}function qr(e,t,n){return t.call(n,e),e}function Hr(e,t,n){return t.call(n,e)}function Br(){return zr(this)}function Yr(){return new ee(this.value(),this.__chain__)}function Vr(e){for(var t,n=this;n instanceof Z;){var r=hr(n);t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function Wr(){var e=this.__wrapped__,t=function(e){return e.reverse()};if(e instanceof ze){var n=e;return this.__actions__.length&&(n=new ze(this)),n=n.reverse(),n.__actions__.push({func:Hr,args:[t],thisArg:_}),new ee(n,this.__chain__)}return this.thru(t)}function Gr(){return this.value()+""}function Xr(){return nn(this.__wrapped__,this.__actions__)}function Jr(e,t,n){var r=Es(e)?at:$t;return n&&Qn(e,t,n)&&(t=_),("function"!=typeof t||n!==_)&&(t=zn(t,n,3)),r(e,t)}function Kr(e,t,n){var r=Es(e)?st:Tt;return t=zn(t,n,3),r(e,t)}function Zr(e,t){return is(e,Ft(t))}function Qr(e,t,n,r){var i=e?qo(e):0;return nr(i)||(e=aa(e),i=e.length),n="number"!=typeof n||r&&Qn(t,n,r)?0:0>n?_o(i+n,0):n||0,"string"==typeof e||!Es(e)&&qi(e)?i>=n&&e.indexOf(t,n)>-1:!!i&&Hn(e,t,n)>-1}function ei(e,t,n){var r=Es(e)?ut:It;return t=zn(t,n,3),r(e,t)}function ti(e,t){return ei(e,La(t))}function ni(e,t,n){var r=Es(e)?st:Tt;return t=zn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function ri(e,t,n){if(n?Qn(e,t,n):null==t){e=cr(e);var r=e.length;return r>0?e[Vt(0,r-1)]:_}var i=-1,a=Wi(e),r=a.length,o=r-1;for(t=ko(0>t?0:+t||0,r);++i<t;){var s=Vt(i,o),u=a[s];a[s]=a[i],a[i]=u}return a.length=t,a}function ii(e){return ri(e,Co)}function ai(e){var t=e?qo(e):0;return nr(t)?t:Us(e).length}function oi(e,t,n){var r=Es(e)?dt:Xt;return n&&Qn(e,t,n)&&(t=_),("function"!=typeof t||n!==_)&&(t=zn(t,n,3)),r(e,t)}function si(e,t,n){if(null==e)return[];n&&Qn(e,t,n)&&(t=_);var r=-1;t=zn(t,n,3);var i=It(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return Jt(i,s)}function ui(e,t,n,r){return null==e?[]:(r&&Qn(t,n,r)&&(n=_),Es(t)||(t=null==t?[]:[t]),Es(n)||(n=null==n?[]:[n]),Kt(e,t,n))}function li(e,t){return Kr(e,Ft(t))}function ci(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Xa(U);var n=e;e=t,t=n}return e=xo(e=+e)?e:0,function(){return--e<1?t.apply(this,arguments):void 0}}function fi(e,t,n){return n&&Qn(e,t,n)&&(t=_),t=e&&null==t?e.length:_o(+t||0,0),Rn(e,O,_,_,_,_,t)}function di(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Xa(U);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=_),n}}function hi(e,t,n){function r(){h&&oo(h),l&&oo(l),g=0,l=h=p=_}function i(t,n){n&&oo(n),l=h=p=_,t&&(g=gs(),c=e.apply(d,u),h||l||(u=d=_))}function a(){var e=t-(gs()-f);0>=e||e>t?i(p,l):h=fo(a,e)}function o(){i(v,h)}function s(){if(u=arguments,f=gs(),d=this,p=v&&(h||!y),m===!1)var n=y&&!h;else{l||y||(g=f);var r=m-(f-g),i=0>=r||r>m;i?(l&&(l=oo(l)),g=f,c=e.apply(d,u)):l||(l=fo(o,r))}return i&&h?h=oo(h):h||t===m||(h=fo(a,t)),n&&(i=!0,c=e.apply(d,u)),!i||h||l||(u=d=_),c}var u,l,c,f,d,h,p,g=0,m=!1,v=!0;if("function"!=typeof e)throw new Xa(U);if(t=0>t?0:+t||0,n===!0){var y=!0;v=!1}else Ni(n)&&(y=!!n.leading,m="maxWait"in n&&_o(+n.maxWait||0,t),v="trailing"in n?!!n.trailing:v);return s.cancel=r,s}function pi(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Xa(U);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o),o};return n.cache=new pi.Cache,n}function gi(e){if("function"!=typeof e)throw new Xa(U);return function(){return!e.apply(this,arguments)}}function mi(e){return di(2,e)}function vi(e,t){if("function"!=typeof e)throw new Xa(U);return t=_o(t===_?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=_o(n.length-t,0),a=Ua(i);++r<i;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var o=Ua(t+1);for(r=-1;++r<t;)o[r]=n[r];return o[t]=a,e.apply(this,o)}}function yi(e){if("function"!=typeof e)throw new Xa(U);return function(t){return e.apply(this,t)}}function bi(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Xa(U);return n===!1?r=!1:Ni(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),hi(e,t,{leading:r,maxWait:+t,trailing:i})}function xi(e,t){return t=null==t?Ta:t,Rn(t,E,_,[e],[])}function wi(e,t,n,r){return t&&"boolean"!=typeof t&&Qn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?wt(e,t,on(n,r,3)):wt(e,t)}function _i(e,t,n){return"function"==typeof t?wt(e,!0,on(t,n,3)):wt(e,!0)}function ki(e,t){return e>t}function $i(e,t){return e>=t}function Si(e){return p(e)&&Kn(e)&&eo.call(e,"callee")&&!lo.call(e,"callee")}function Mi(e){return e===!0||e===!1||p(e)&&no.call(e)==B}function Ti(e){return p(e)&&no.call(e)==Y}function Ci(e){return!!e&&1===e.nodeType&&p(e)&&!Ui(e)}function Ei(e){return null==e?!0:Kn(e)&&(Es(e)||qi(e)||Si(e)||p(e)&&Li(e.splice))?!e.length:!Us(e).length}function Ai(e,t,n,r){n="function"==typeof n?on(n,r,3):_;var i=n?n(e,t):_;return i===_?jt(e,t,n):!!i}function Oi(e){return p(e)&&"string"==typeof e.message&&no.call(e)==V}function Di(e){return"number"==typeof e&&xo(e)}function Li(e){return Ni(e)&&no.call(e)==W}function Ni(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ji(e,t,n,r){return n="function"==typeof n?on(n,r,3):_,Rt(e,Bn(t),n)}function Pi(e){return Fi(e)&&e!=+e}function Ri(e){return null==e?!1:Li(e)?io.test(Qa.call(e)):p(e)&&Oe.test(e)}function Ii(e){return null===e}function Fi(e){return"number"==typeof e||p(e)&&no.call(e)==X}function Ui(e){var t;if(!p(e)||no.call(e)!=J||Si(e)||!eo.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return At(e,function(e,t){n=t}),n===_||eo.call(e,n)}function zi(e){return Ni(e)&&no.call(e)==K}function qi(e){return"string"==typeof e||p(e)&&no.call(e)==Q}function Hi(e){return p(e)&&nr(e.length)&&!!Fe[no.call(e)]}function Bi(e){return e===_}function Yi(e,t){return t>e}function Vi(e,t){return t>=e}function Wi(e){var t=e?qo(e):0;return nr(t)?t?nt(e):[]:aa(e)}function Gi(e){return bt(e,ea(e))}function Xi(e,t,n){var r=jo(e);return n&&Qn(e,t,n)&&(t=_),t?vt(r,t):r}function Ji(e){return Lt(e,ea(e))}function Ki(e,t,n){var r=null==e?_:Nt(e,dr(t),t+"");return r===_?n:r}function Zi(e,t){if(null==e)return!1;var n=eo.call(e,t);if(!n&&!er(t)){if(t=dr(t),e=1==t.length?e:Nt(e,Gt(t,0,-1)),null==e)return!1;t=Mr(t),n=eo.call(e,t)}return n||nr(e.length)&&Zn(t,e.length)&&(Es(e)||Si(e))}function Qi(e,t,n){n&&Qn(e,t,n)&&(t=_);for(var r=-1,i=Us(e),a=i.length,o={};++r<a;){var s=i[r],u=e[s];t?eo.call(o,u)?o[u].push(s):o[u]=[s]:o[u]=s}return o}function ea(e){if(null==e)return[];Ni(e)||(e=Va(e));var t=e.length;t=t&&nr(t)&&(Es(e)||Si(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,a=Ua(t),o=t>0;++r<t;)a[r]=r+"";for(var s in e)o&&Zn(s,t)||"constructor"==s&&(i||!eo.call(e,s))||a.push(s);return a}function ta(e){e=fr(e);for(var t=-1,n=Us(e),r=n.length,i=Ua(r);++t<r;){var a=n[t];i[t]=[a,e[a]]}return i}function na(e,t,n){var r=null==e?_:e[t];return r===_&&(null==e||er(t,e)||(t=dr(t),e=1==t.length?e:Nt(e,Gt(t,0,-1)),r=null==e?_:e[Mr(t)]),r=r===_?n:r),Li(r)?r.call(e):r}function ra(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||er(t,e)?[r]:dr(t);for(var i=-1,a=t.length,o=a-1,s=e;null!=s&&++i<a;){var u=t[i];Ni(s)&&(i==o?s[u]=n:null==s[u]&&(s[u]=Zn(t[i+1])?[]:{})),s=s[u]}return e}function ia(e,t,n,r){var i=Es(e)||Hi(e);if(t=zn(t,r,4),null==n)if(i||Ni(e)){var a=e.constructor;n=i?Es(e)?new a:[]:jo(Li(a)?a.prototype:_)}else n={};return(i?rt:Ot)(e,function(e,r,i){return t(n,e,r,i)}),n}function aa(e){return en(e,Us(e))}function oa(e){return en(e,ea(e))}function sa(e,t,n){return t=+t||0,n===_?(n=t,t=0):n=+n||0,e>=ko(t,n)&&e<_o(t,n)}function ua(e,t,n){n&&Qn(e,t,n)&&(t=n=_);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var a=Mo();return ko(e+a*(t-e+so("1e-"+((a+"").length-1))),t)}return Vt(e,t)}function la(e){return e=i(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function ca(e){return e=i(e),e&&e.replace(Le,l).replace(Me,"")}function fa(e,t,n){e=i(e),t+="";var r=e.length;return n=n===_?r:ko(0>n?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function da(e){return e=i(e),
e&&ve.test(e)?e.replace(ge,c):e}function ha(e){return e=i(e),e&&Se.test(e)?e.replace($e,f):e||"(?:)"}function pa(e,t,n){e=i(e),t=+t;var r=e.length;if(r>=t||!xo(t))return e;var a=(t-r)/2,o=yo(a),s=mo(a);return n=Ln("",s,n),n.slice(0,o)+e+n}function ga(e,t,n){return(n?Qn(e,t,n):null==t)?t=0:t&&(t=+t),e=ba(e),So(e,t||(Ae.test(e)?16:10))}function ma(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!xo(t))return n;do t%2&&(n+=e),t=yo(t/2),e+=e;while(t);return n}function va(e,t,n){return e=i(e),n=null==n?0:ko(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function ya(e,t,n){var r=G.templateSettings;n&&Qn(e,t,n)&&(t=n=_),e=i(e),t=mt(vt({},n||t),r,gt);var a,o,s=mt(vt({},t.imports),r.imports,gt),u=Us(s),l=en(s,u),c=0,f=t.interpolate||Ne,h="__p += '",p=Wa((t.escape||Ne).source+"|"+f.source+"|"+(f===xe?Ce:Ne).source+"|"+(t.evaluate||Ne).source+"|$","g"),g="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Ie+"]")+"\n";e.replace(p,function(t,n,r,i,s,u){return r||(r=i),h+=e.slice(c,u).replace(je,d),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),h+="';\n";var m=t.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(o?h.replace(fe,""):h).replace(de,"$1").replace(he,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=Ks(function(){return Ha(u,g+"return "+h).apply(_,l)});if(v.source=h,Oi(v))throw v;return v}function ba(e,t,n){var r=e;return(e=i(e))?(n?Qn(r,t,n):null==t)?e.slice(y(e),b(e)+1):(t+="",e.slice(a(e,t),o(e,t)+1)):e}function xa(e,t,n){var r=e;return e=i(e),e?e.slice((n?Qn(r,t,n):null==t)?y(e):a(e,t+"")):e}function wa(e,t,n){var r=e;return e=i(e),e?(n?Qn(r,t,n):null==t)?e.slice(0,b(e)+1):e.slice(0,o(e,t+"")+1):e}function _a(e,t,n){n&&Qn(e,t,n)&&(t=_);var r=L,a=N;if(null!=t)if(Ni(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,a="omission"in t?i(t.omission):a}else r=+t||0;if(e=i(e),r>=e.length)return e;var s=r-a.length;if(1>s)return a;var u=e.slice(0,s);if(null==o)return u+a;if(zi(o)){if(e.slice(s).search(o)){var l,c,f=e.slice(0,s);for(o.global||(o=Wa(o.source,(Ee.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(f);)c=l.index;u=u.slice(0,null==c?s:c)}}else if(e.indexOf(o,s)!=s){var d=u.lastIndexOf(o);d>-1&&(u=u.slice(0,d))}return u+a}function ka(e){return e=i(e),e&&me.test(e)?e.replace(pe,x):e}function $a(e,t,n){return n&&Qn(e,t,n)&&(t=_),e=i(e),e.match(t||Pe)||[]}function Sa(e,t,n){return n&&Qn(e,t,n)&&(t=_),p(e)?Ca(e):xt(e,t)}function Ma(e){return function(){return e}}function Ta(e){return e}function Ca(e){return Ft(wt(e,!0))}function Ea(e,t){return Ut(e,wt(t,!0))}function Aa(e,t,n){if(null==n){var r=Ni(t),i=r?Us(t):_,a=i&&i.length?Lt(t,i):_;(a?a.length:r)||(a=!1,n=t,t=e,e=this)}a||(a=Lt(t,Us(t)));var o=!0,s=-1,u=Li(e),l=a.length;n===!1?o=!1:Ni(n)&&"chain"in n&&(o=n.chain);for(;++s<l;){var c=a[s],f=t[c];e[c]=f,u&&(e.prototype[c]=function(t){return function(){var n=this.__chain__;if(o||n){var r=e(this.__wrapped__),i=r.__actions__=nt(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,lt([this.value()],arguments))}}(f))}return e}function Oa(){return Qe._=ro,this}function Da(){}function La(e){return er(e)?Ht(e):Bt(e)}function Na(e){return function(t){return Nt(e,dr(t),t+"")}}function ja(e,t,n){n&&Qn(e,t,n)&&(t=n=_),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=_o(mo((t-e)/(n||1)),0),a=Ua(i);++r<i;)a[r]=e,e+=n;return a}function Pa(e,t,n){if(e=yo(e),1>e||!xo(e))return[];var r=-1,i=Ua(ko(e,Eo));for(t=on(t,n,1);++r<e;)Eo>r?i[r]=t(r):t(r);return i}function Ra(e){var t=++to;return i(e)+t}function Ia(e,t){return(+e||0)+(+t||0)}function Fa(e,t,n){return n&&Qn(e,t,n)&&(t=_),t=zn(t,n,3),1==t.length?ht(Es(e)?e:cr(e),t):Zt(e,t)}g=g?et.defaults(Qe.Object(),g,et.pick(Qe,Re)):Qe;{var Ua=g.Array,za=g.Date,qa=g.Error,Ha=g.Function,Ba=g.Math,Ya=g.Number,Va=g.Object,Wa=g.RegExp,Ga=g.String,Xa=g.TypeError,Ja=Ua.prototype,Ka=Va.prototype,Za=Ga.prototype,Qa=Ha.prototype.toString,eo=Ka.hasOwnProperty,to=0,no=Ka.toString,ro=Qe._,io=Wa("^"+Qa.call(eo).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ao=g.ArrayBuffer,oo=g.clearTimeout,so=g.parseFloat,uo=Ba.pow,lo=Ka.propertyIsEnumerable,co=Yn(g,"Set"),fo=g.setTimeout,ho=Ja.splice,po=g.Uint8Array,go=Yn(g,"WeakMap"),mo=Ba.ceil,vo=Yn(Va,"create"),yo=Ba.floor,bo=Yn(Ua,"isArray"),xo=g.isFinite,wo=Yn(Va,"keys"),_o=Ba.max,ko=Ba.min,$o=Yn(za,"now"),So=g.parseInt,Mo=Ba.random,To=Ya.NEGATIVE_INFINITY,Co=Ya.POSITIVE_INFINITY,Eo=4294967295,Ao=Eo-1,Oo=Eo>>>1,Do=9007199254740991,Lo=go&&new go,No={};G.support={}}G.templateSettings={escape:ye,evaluate:be,interpolate:xe,variable:"",imports:{_:G}};var jo=function(){function e(){}return function(t){if(Ni(t)){e.prototype=t;var n=new e;e.prototype=_}return n||{}}}(),Po=dn(Ot),Ro=dn(Dt,!0),Io=hn(),Fo=hn(!0),Uo=Lo?function(e,t){return Lo.set(e,t),e}:Ta,zo=Lo?function(e){return Lo.get(e)}:Da,qo=Ht("length"),Ho=function(){var e=0,t=0;return function(n,r){var i=gs(),a=P-(i-t);if(t=i,a>0){if(++e>=j)return n}else e=0;return Uo(n,r)}}(),Bo=vi(function(e,t){return p(e)&&Kn(e)?kt(e,Et(t,!1,!0)):[]}),Yo=_n(),Vo=_n(!0),Wo=vi(function(e){for(var t=e.length,r=t,i=Ua(f),a=Hn(),o=a===n,s=[];r--;){var u=e[r]=Kn(u=e[r])?u:[];i[r]=o&&u.length>=120?gn(r&&u):null}var l=e[0],c=-1,f=l?l.length:0,d=i[0];e:for(;++c<f;)if(u=l[c],(d?Ke(d,u):a(s,u,0))<0){for(var r=t;--r;){var h=i[r];if((h?Ke(h,u):a(e[r],u,0))<0)continue e}d&&d.push(u),s.push(u)}return s}),Go=vi(function(t,n){n=Et(n);var r=yt(t,n);return Yt(t,n.sort(e)),r}),Xo=Pn(),Jo=Pn(!0),Ko=vi(function(e){return Qt(Et(e,!1,!0))}),Zo=vi(function(e,t){return Kn(e)?kt(e,t):[]}),Qo=vi(Rr),es=vi(function(e){var t=e.length,n=t>2?e[t-2]:_,r=t>1?e[t-1]:_;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):_,r=_),e.length=t,Ir(e,n,r)}),ts=vi(function(e){return e=Et(e),this.thru(function(t){return tt(Es(t)?t:[fr(t)],e)})}),ns=vi(function(e,t){return yt(e,Et(t))}),rs=cn(function(e,t,n){eo.call(e,n)?++e[n]:e[n]=1}),is=wn(Po),as=wn(Ro,!0),os=Sn(rt,Po),ss=Sn(it,Ro),us=cn(function(e,t,n){eo.call(e,n)?e[n].push(t):e[n]=[t]}),ls=cn(function(e,t,n){e[n]=t}),cs=vi(function(e,t,n){var r=-1,i="function"==typeof t,a=er(t),o=Kn(e)?Ua(e.length):[];return Po(e,function(e){var s=i?t:a&&null!=e?e[t]:_;o[++r]=s?s.apply(e,n):Jn(e,t,n)}),o}),fs=cn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ds=On(ct,Po),hs=On(ft,Ro),ps=vi(function(e,t){if(null==e)return[];var n=t[2];return n&&Qn(t[0],t[1],n)&&(t.length=1),Kt(e,Et(t),[])}),gs=$o||function(){return(new za).getTime()},ms=vi(function(e,t,n){var r=$;if(n.length){var i=m(n,ms.placeholder);r|=E}return Rn(e,r,t,n,i)}),vs=vi(function(e,t){t=t.length?Et(t):Ji(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Rn(e[i],$,e)}return e}),ys=vi(function(e,t,n){var r=$|S;if(n.length){var i=m(n,ys.placeholder);r|=E}return Rn(t,r,e,n,i)}),bs=yn(T),xs=yn(C),ws=vi(function(e,t){return _t(e,1,t)}),_s=vi(function(e,t,n){return _t(e,t,n)}),ks=$n(),$s=$n(!0),Ss=vi(function(e,t){if(t=Et(t),"function"!=typeof e||!at(t,r))throw new Xa(U);var n=t.length;return vi(function(r){for(var i=ko(r.length,n);i--;)r[i]=t[i](r[i]);return e.apply(this,r)})}),Ms=An(E),Ts=An(A),Cs=vi(function(e,t){return Rn(e,D,_,_,_,Et(t))}),Es=bo||function(e){return p(e)&&nr(e.length)&&no.call(e)==H},As=fn(zt),Os=fn(function(e,t,n){return n?mt(e,t,n):vt(e,t)}),Ds=bn(Os,pt),Ls=bn(As,ar),Ns=kn(Ot),js=kn(Dt),Ps=Mn(Io),Rs=Mn(Fo),Is=Tn(Ot),Fs=Tn(Dt),Us=wo?function(e){var t=null==e?_:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Kn(e)?lr(e):Ni(e)?wo(e):[]}:lr,zs=Cn(!0),qs=Cn(),Hs=vi(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=ut(Et(t),Ga);return or(e,kt(ea(e),t))}var n=on(t[0],t[1],3);return sr(e,function(e,t,r){return!n(e,t,r)})}),Bs=vi(function(e,t){return null==e?{}:"function"==typeof t[0]?sr(e,on(t[0],t[1],3)):or(e,Et(t))}),Ys=mn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Vs=mn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ws=En(),Gs=En(!0),Xs=mn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Js=mn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ks=vi(function(e,t){try{return e.apply(_,t)}catch(n){return Oi(n)?n:new qa(n)}}),Zs=vi(function(e,t){return function(n){return Jn(n,e,t)}}),Qs=vi(function(e,t){return function(n){return Jn(e,n,t)}}),eu=jn("ceil"),tu=jn("floor"),nu=xn(ki,To),ru=xn(Yi,Co),iu=jn("round");return G.prototype=Z.prototype,ee.prototype=jo(Z.prototype),ee.prototype.constructor=ee,ze.prototype=jo(Z.prototype),ze.prototype.constructor=ze,Ye.prototype["delete"]=Ve,Ye.prototype.get=We,Ye.prototype.has=Ge,Ye.prototype.set=Xe,Je.prototype.push=Ze,pi.Cache=Ye,G.after=ci,G.ary=fi,G.assign=Os,G.at=ns,G.before=di,G.bind=ms,G.bindAll=vs,G.bindKey=ys,G.callback=Sa,G.chain=zr,G.chunk=pr,G.compact=gr,G.constant=Ma,G.countBy=rs,G.create=Xi,G.curry=bs,G.curryRight=xs,G.debounce=hi,G.defaults=Ds,G.defaultsDeep=Ls,G.defer=ws,G.delay=_s,G.difference=Bo,G.drop=mr,G.dropRight=vr,G.dropRightWhile=yr,G.dropWhile=br,G.fill=xr,G.filter=Kr,G.flatten=_r,G.flattenDeep=kr,G.flow=ks,G.flowRight=$s,G.forEach=os,G.forEachRight=ss,G.forIn=Ps,G.forInRight=Rs,G.forOwn=Is,G.forOwnRight=Fs,G.functions=Ji,G.groupBy=us,G.indexBy=ls,G.initial=Sr,G.intersection=Wo,G.invert=Qi,G.invoke=cs,G.keys=Us,G.keysIn=ea,G.map=ei,G.mapKeys=zs,G.mapValues=qs,G.matches=Ca,G.matchesProperty=Ea,G.memoize=pi,G.merge=As,G.method=Zs,G.methodOf=Qs,G.mixin=Aa,G.modArgs=Ss,G.negate=gi,G.omit=Hs,G.once=mi,G.pairs=ta,G.partial=Ms,G.partialRight=Ts,G.partition=fs,G.pick=Bs,G.pluck=ti,G.property=La,G.propertyOf=Na,G.pull=Cr,G.pullAt=Go,G.range=ja,G.rearg=Cs,G.reject=ni,G.remove=Er,G.rest=Ar,G.restParam=vi,G.set=ra,G.shuffle=ii,G.slice=Or,G.sortBy=si,G.sortByAll=ps,G.sortByOrder=ui,G.spread=yi,G.take=Dr,G.takeRight=Lr,G.takeRightWhile=Nr,G.takeWhile=jr,G.tap=qr,G.throttle=bi,G.thru=Hr,G.times=Pa,G.toArray=Wi,G.toPlainObject=Gi,G.transform=ia,G.union=Ko,G.uniq=Pr,G.unzip=Rr,G.unzipWith=Ir,G.values=aa,G.valuesIn=oa,G.where=li,G.without=Zo,G.wrap=xi,G.xor=Fr,G.zip=Qo,G.zipObject=Ur,G.zipWith=es,G.backflow=$s,G.collect=ei,G.compose=$s,G.each=os,G.eachRight=ss,G.extend=Os,G.iteratee=Sa,G.methods=Ji,G.object=Ur,G.select=Kr,G.tail=Ar,G.unique=Pr,Aa(G,G),G.add=Ia,G.attempt=Ks,G.camelCase=Ys,G.capitalize=la,G.ceil=eu,G.clone=wi,G.cloneDeep=_i,G.deburr=ca,G.endsWith=fa,G.escape=da,G.escapeRegExp=ha,G.every=Jr,G.find=is,G.findIndex=Yo,G.findKey=Ns,G.findLast=as,G.findLastIndex=Vo,G.findLastKey=js,G.findWhere=Zr,G.first=wr,G.floor=tu,G.get=Ki,G.gt=ki,G.gte=$i,G.has=Zi,G.identity=Ta,G.includes=Qr,G.indexOf=$r,G.inRange=sa,G.isArguments=Si,G.isArray=Es,G.isBoolean=Mi,G.isDate=Ti,G.isElement=Ci,G.isEmpty=Ei,G.isEqual=Ai,G.isError=Oi,G.isFinite=Di,G.isFunction=Li,G.isMatch=ji,G.isNaN=Pi,G.isNative=Ri,G.isNull=Ii,G.isNumber=Fi,G.isObject=Ni,G.isPlainObject=Ui,G.isRegExp=zi,G.isString=qi,G.isTypedArray=Hi,G.isUndefined=Bi,G.kebabCase=Vs,G.last=Mr,G.lastIndexOf=Tr,G.lt=Yi,G.lte=Vi,G.max=nu,G.min=ru,G.noConflict=Oa,G.noop=Da,G.now=gs,G.pad=pa,G.padLeft=Ws,G.padRight=Gs,G.parseInt=ga,G.random=ua,G.reduce=ds,G.reduceRight=hs,G.repeat=ma,G.result=na,G.round=iu,G.runInContext=w,G.size=ai,G.snakeCase=Xs,G.some=oi,G.sortedIndex=Xo,G.sortedLastIndex=Jo,G.startCase=Js,G.startsWith=va,G.sum=Fa,G.template=ya,G.trim=ba,G.trimLeft=xa,G.trimRight=wa,G.trunc=_a,G.unescape=ka,G.uniqueId=Ra,G.words=$a,G.all=Jr,G.any=oi,G.contains=Qr,G.eq=Ai,G.detect=is,G.foldl=ds,G.foldr=hs,G.head=wr,G.include=Qr,G.inject=ds,Aa(G,function(){var e={};return Ot(G,function(t,n){G.prototype[n]||(e[n]=t)}),e}(),!1),G.sample=ri,G.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ri(t,e)}):ri(this.value())},G.VERSION=k,rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){G[e].placeholder=G}),rt(["drop","take"],function(e,t){ze.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new ze(this);n=null==n?1:_o(yo(n)||0,0);var i=this.clone();return r?i.__takeCount__=ko(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},ze.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),rt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=F;ze.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:zn(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),rt(["first","last"],function(e,t){var n="take"+(t?"Right":"");ze.prototype[e]=function(){return this[n](1).value()[0]}}),rt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");ze.prototype[e]=function(){return this.__filtered__?new ze(this):this[n](1)}}),rt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Ft:La;ze.prototype[e]=function(e){return this[n](r(e))}}),ze.prototype.compact=function(){return this.filter(Ta)},ze.prototype.reject=function(e,t){return e=zn(e,t,1),this.filter(function(t){return!e(t)})},ze.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||0>t)?new ze(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==_&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n)},ze.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},ze.prototype.toArray=function(){return this.take(Co)},Ot(ze.prototype,function(e,t){var n=/^(?:filter|map|reject)|While$/.test(t),r=/^(?:first|last)$/.test(t),i=G[r?"take"+("last"==t?"Right":""):t];i&&(G.prototype[t]=function(){var t=r?[1]:arguments,a=this.__chain__,o=this.__wrapped__,s=!!this.__actions__.length,u=o instanceof ze,l=t[0],c=u||Es(o);c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=function(e){return r&&a?i(e,1)[0]:i.apply(_,lt([e],t))},d={func:Hr,args:[f],thisArg:_},h=u&&!s;if(r&&!a)return h?(o=o.clone(),o.__actions__.push(d),e.call(o)):i.call(_,this.value())[0];if(!r&&c){o=h?o:new ze(this);var p=e.apply(o,t);return p.__actions__.push(d),new ee(p,a)}return this.thru(f)})}),rt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var t=(/^(?:replace|split)$/.test(e)?Za:Ja)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);G.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Ot(ze.prototype,function(e,t){var n=G[t];if(n){var r=n.name+"",i=No[r]||(No[r]=[]);i.push({name:t,func:n})}}),No[Dn(_,S).name]=[{name:"wrapper",func:_}],ze.prototype.clone=qe,ze.prototype.reverse=He,ze.prototype.value=Be,G.prototype.chain=Br,G.prototype.commit=Yr,G.prototype.concat=ts,G.prototype.plant=Vr,G.prototype.reverse=Wr,G.prototype.toString=Gr,G.prototype.run=G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=Xr,G.prototype.collect=G.prototype.map,G.prototype.head=G.prototype.first,G.prototype.select=G.prototype.filter,G.prototype.tail=G.prototype.rest,G}var _,k="3.10.1",$=1,S=2,M=4,T=8,C=16,E=32,A=64,O=128,D=256,L=30,N="...",j=150,P=16,R=200,I=1,F=2,U="Expected a function",z="__lodash_placeholder__",q="[object Arguments]",H="[object Array]",B="[object Boolean]",Y="[object Date]",V="[object Error]",W="[object Function]",G="[object Map]",X="[object Number]",J="[object Object]",K="[object RegExp]",Z="[object Set]",Q="[object String]",ee="[object WeakMap]",te="[object ArrayBuffer]",ne="[object Float32Array]",re="[object Float64Array]",ie="[object Int8Array]",ae="[object Int16Array]",oe="[object Int32Array]",se="[object Uint8Array]",ue="[object Uint8ClampedArray]",le="[object Uint16Array]",ce="[object Uint32Array]",fe=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,he=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pe=/&(?:amp|lt|gt|quot|#39|#96);/g,ge=/[&<>"'`]/g,me=RegExp(pe.source),ve=RegExp(ge.source),ye=/<%-([\s\S]+?)%>/g,be=/<%([\s\S]+?)%>/g,xe=/<%=([\s\S]+?)%>/g,we=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,_e=/^\w*$/,ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,$e=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Se=RegExp($e.source),Me=/[\u0300-\u036f\ufe20-\ufe23]/g,Te=/\\(\\)?/g,Ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ee=/\w*$/,Ae=/^0[xX]/,Oe=/^\[object .+?Constructor\]$/,De=/^\d+$/,Le=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ne=/($^)/,je=/['\n\r\u2028\u2029\\]/g,Pe=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),Re=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ie=-1,Fe={};Fe[ne]=Fe[re]=Fe[ie]=Fe[ae]=Fe[oe]=Fe[se]=Fe[ue]=Fe[le]=Fe[ce]=!0,Fe[q]=Fe[H]=Fe[te]=Fe[B]=Fe[Y]=Fe[V]=Fe[W]=Fe[G]=Fe[X]=Fe[J]=Fe[K]=Fe[Z]=Fe[Q]=Fe[ee]=!1;var Ue={};Ue[q]=Ue[H]=Ue[te]=Ue[B]=Ue[Y]=Ue[ne]=Ue[re]=Ue[ie]=Ue[ae]=Ue[oe]=Ue[X]=Ue[J]=Ue[K]=Ue[Q]=Ue[se]=Ue[ue]=Ue[le]=Ue[ce]=!0,Ue[V]=Ue[W]=Ue[G]=Ue[Z]=Ue[ee]=!1;var ze={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},He={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Be={"function":!0,object:!0},Ye={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ve={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},We=Be[typeof exports]&&exports&&!exports.nodeType&&exports,Ge=Be[typeof module]&&module&&!module.nodeType&&module,Xe=We&&Ge&&"object"==typeof global&&global&&global.Object&&global,Je=Be[typeof self]&&self&&self.Object&&self,Ke=Be[typeof window]&&window&&window.Object&&window,Ze=Ge&&Ge.exports===We&&We,Qe=Xe||Ke!==(this&&this.window)&&Ke||Je||this,et=w();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Qe._=et,define(function(){return et})):We&&Ge?Ze?(Ge.exports=et)._=et:We._=et:Qe._=et}.call(this),/**
 * @license AngularJS v1.4.7
 * (c) 2010-2015 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t,n){"use strict";function r(e){var t;if(t=e.match(l)){var n=new Date(0),r=0,a=0;return t[9]&&(r=i(t[9]+t[10]),a=i(t[9]+t[11])),n.setUTCFullYear(i(t[1]),i(t[2])-1,i(t[3])),n.setUTCHours(i(t[4]||0)-r,i(t[5]||0)-a,i(t[6]||0),i(t[7]||0)),n}return e}function i(e){return parseInt(e,10)}function a(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function o(e,r,i,a){function o(e,n,r,i){return t.isFunction(e)?e:function(){return t.isNumber(e)?[e,n,r,i]:[200,e,n,r]}}function l(e,o,s,l,c,m,v){function y(e){return t.isString(e)||t.isFunction(e)||e instanceof RegExp?e:t.toJson(e)}function b(t){function i(){var n=t.response(e,o,s,c);x.$$respHeaders=n[2],l(g(n[0]),g(n[1]),x.getAllResponseHeaders(),g(n[3]||""))}function u(){for(var e=0,t=h.length;t>e;e++)if(h[e]===i){h.splice(e,1),l(-1,n,"");break}}return!a&&m&&(m.then?m.then(u):r(u,m)),i}var x=new u,w=d[0],_=!1;if(w&&w.match(e,o)){if(!w.matchData(s))throw new Error("Expected "+w+" with different data\nEXPECTED: "+y(w.data)+"\nGOT:      "+s);if(!w.matchHeaders(c))throw new Error("Expected "+w+" with different headers\nEXPECTED: "+y(w.headers)+"\nGOT:      "+y(c));if(d.shift(),w.response)return void h.push(b(w));_=!0}for(var k,$=-1;k=f[++$];)if(k.match(e,o,s,c||{})){if(k.response)(a?a.defer:p)(b(k));else{if(!k.passThrough)throw new Error("No response defined !");i(e,o,s,l,c,m,v)}return}throw new Error(_?"No response defined !":"Unexpected request: "+e+" "+o+"\n"+(w?"Expected "+w:"No more request expected"))}function c(e){t.forEach(["GET","DELETE","JSONP","HEAD"],function(t){l[e+t]=function(r,i){return l[e](t,r,n,i)}}),t.forEach(["PUT","POST","PATCH"],function(t){l[e+t]=function(n,r,i){return l[e](t,n,r,i)}})}var f=[],d=[],h=[],p=t.bind(h,h.push),g=t.copy;return l.when=function(e,t,r,i){var u=new s(e,t,r,i),l={respond:function(e,t,r,i){return u.passThrough=n,u.response=o(e,t,r,i),l}};return a&&(l.passThrough=function(){return u.response=n,u.passThrough=!0,l}),f.push(u),l},c("when"),l.expect=function(e,t,n,r){var i=new s(e,t,n,r),a={respond:function(e,t,n,r){return i.response=o(e,t,n,r),a}};return d.push(i),a},c("expect"),l.flush=function(n,r){if(r!==!1&&e.$digest(),!h.length)throw new Error("No pending request to flush !");if(t.isDefined(n)&&null!==n)for(;n--;){if(!h.length)throw new Error("No more pending request to flush !");h.shift()()}else for(;h.length;)h.shift()();l.verifyNoOutstandingExpectation(r)},l.verifyNoOutstandingExpectation=function(t){if(t!==!1&&e.$digest(),d.length)throw new Error("Unsatisfied requests: "+d.join(", "))},l.verifyNoOutstandingRequest=function(){if(h.length)throw new Error("Unflushed requests: "+h.length)},l.resetExpectations=function(){d.length=0,h.length=0},l}function s(e,n,r,i){this.data=r,this.headers=i,this.match=function(n,r,i,a){return e!=n?!1:this.matchUrl(r)?t.isDefined(i)&&!this.matchData(i)?!1:t.isDefined(a)&&!this.matchHeaders(a)?!1:!0:!1},this.matchUrl=function(e){return n?t.isFunction(n.test)?n.test(e):t.isFunction(n)?n(e):n==e:!0},this.matchHeaders=function(e){return t.isUndefined(i)?!0:t.isFunction(i)?i(e):t.equals(i,e)},this.matchData=function(e){return t.isUndefined(r)?!0:r&&t.isFunction(r.test)?r.test(e):r&&t.isFunction(r)?r(e):r&&!t.isString(r)?t.equals(t.fromJson(t.toJson(r)),t.fromJson(e)):r==e},this.toString=function(){return e+" "+n}}function u(){u.$$lastInstance=this,this.open=function(e,t,n){this.$$method=e,this.$$url=t,this.$$async=n,this.$$reqHeaders={},this.$$respHeaders={}},this.send=function(e){this.$$data=e},this.setRequestHeader=function(e,t){this.$$reqHeaders[e]=t},this.getResponseHeader=function(e){var r=this.$$respHeaders[e];return r?r:(e=t.lowercase(e),(r=this.$$respHeaders[e])?r:(r=n,t.forEach(this.$$respHeaders,function(n,i){r||t.lowercase(i)!=e||(r=n)}),r))},this.getAllResponseHeaders=function(){var e=[];return t.forEach(this.$$respHeaders,function(t,n){e.push(n+": "+t)}),e.join("\n")},this.abort=t.noop}t.mock={},t.mock.$BrowserProvider=function(){this.$get=function(){return new t.mock.$Browser}},t.mock.$Browser=function(){var e=this;this.isMock=!0,e.$$url="http://server/",e.$$lastUrl=e.$$url,e.pollFns=[],e.$$completeOutstandingRequest=t.noop,e.$$incOutstandingRequestCount=t.noop,e.onUrlChange=function(t){return e.pollFns.push(function(){(e.$$lastUrl!==e.$$url||e.$$state!==e.$$lastState)&&(e.$$lastUrl=e.$$url,e.$$lastState=e.$$state,t(e.$$url,e.$$state))}),t},e.$$applicationDestroyed=t.noop,e.$$checkUrlChange=t.noop,e.deferredFns=[],e.deferredNextId=0,e.defer=function(t,n){return n=n||0,e.deferredFns.push({time:e.defer.now+n,fn:t,id:e.deferredNextId}),e.deferredFns.sort(function(e,t){return e.time-t.time}),e.deferredNextId++},e.defer.now=0,e.defer.cancel=function(n){var r;return t.forEach(e.deferredFns,function(e,t){e.id===n&&(r=t)}),t.isDefined(r)?(e.deferredFns.splice(r,1),!0):!1},e.defer.flush=function(n){if(t.isDefined(n))e.defer.now+=n;else{if(!e.deferredFns.length)throw new Error("No deferred tasks to be flushed");e.defer.now=e.deferredFns[e.deferredFns.length-1].time}for(;e.deferredFns.length&&e.deferredFns[0].time<=e.defer.now;)e.deferredFns.shift().fn()},e.$$baseHref="/",e.baseHref=function(){return this.$$baseHref}},t.mock.$Browser.prototype={poll:function(){t.forEach(this.pollFns,function(e){e()})},url:function(e,n,r){return t.isUndefined(r)&&(r=null),e?(this.$$url=e,this.$$state=t.copy(r),this):this.$$url},state:function(){return this.$$state},notifyWhenNoOutstandingRequests:function(e){e()}},t.mock.$ExceptionHandlerProvider=function(){var e;this.mode=function(t){switch(t){case"log":case"rethrow":var n=[];e=function(e){if(n.push(1==arguments.length?e:[].slice.call(arguments,0)),"rethrow"===t)throw e},e.errors=n;break;default:throw new Error("Unknown mode '"+t+"', only 'log'/'rethrow' modes are allowed!")}},this.$get=function(){return e},this.mode("rethrow")},t.mock.$LogProvider=function(){function e(e,t,n){return e.concat(Array.prototype.slice.call(t,n))}var n=!0;this.debugEnabled=function(e){return t.isDefined(e)?(n=e,this):n},this.$get=function(){var r={log:function(){r.log.logs.push(e([],arguments,0))},warn:function(){r.warn.logs.push(e([],arguments,0))},info:function(){r.info.logs.push(e([],arguments,0))},error:function(){r.error.logs.push(e([],arguments,0))},debug:function(){n&&r.debug.logs.push(e([],arguments,0))}};return r.reset=function(){r.log.logs=[],r.info.logs=[],r.warn.logs=[],r.error.logs=[],r.debug.logs=[]},r.assertEmpty=function(){var e=[];if(t.forEach(["error","warn","info","log","debug"],function(n){t.forEach(r[n].logs,function(r){t.forEach(r,function(t){e.push("MOCK $log ("+n+"): "+String(t)+"\n"+(t.stack||""))})})}),e.length)throw e.unshift("Expected $log to be empty! Either a message was logged unexpectedly, or an expected log message was not checked and removed:"),e.push(""),new Error(e.join("\n---------\n"))},r.reset(),r}},t.mock.$IntervalProvider=function(){this.$get=["$browser","$rootScope","$q","$$q",function(e,n,r,i){var a=[],o=0,s=0,u=function(u,l,c,f){function d(){if(v.notify(g++),c>0&&g>=c){var r;v.resolve(g),t.forEach(a,function(e,t){e.id===y.$$intervalId&&(r=t)}),t.isDefined(r)&&a.splice(r,1)}m?e.defer.flush():n.$apply()}var h=arguments.length>4,p=h?Array.prototype.slice.call(arguments,4):[],g=0,m=t.isDefined(f)&&!f,v=(m?i:r).defer(),y=v.promise;return c=t.isDefined(c)?c:0,y.then(null,null,h?function(){u.apply(null,p)}:u),y.$$intervalId=o,a.push({nextTime:s+l,delay:l,fn:d,id:o,deferred:v}),a.sort(function(e,t){return e.nextTime-t.nextTime}),o++,y};return u.cancel=function(e){if(!e)return!1;var n;return t.forEach(a,function(t,r){t.id===e.$$intervalId&&(n=r)}),t.isDefined(n)?(a[n].deferred.reject("canceled"),a.splice(n,1),!0):!1},u.flush=function(e){for(s+=e;a.length&&a[0].nextTime<=s;){var t=a[0];t.fn(),t.nextTime+=t.delay,a.sort(function(e,t){return e.nextTime-t.nextTime})}return e},u}]};var l=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;if(t.mock.TzDate=function(e,n){var i=new Date(0);if(t.isString(n)){var o=n;if(i.origDate=r(n),n=i.origDate.getTime(),isNaN(n))throw{name:"Illegal Argument",message:"Arg '"+o+"' passed into TzDate constructor is not a valid date string"}}else i.origDate=new Date(n);var s=new Date(n).getTimezoneOffset();i.offsetDiff=60*s*1e3-1e3*e*60*60,i.date=new Date(n+i.offsetDiff),i.getTime=function(){return i.date.getTime()-i.offsetDiff},i.toLocaleDateString=function(){return i.date.toLocaleDateString()},i.getFullYear=function(){return i.date.getFullYear()},i.getMonth=function(){return i.date.getMonth()},i.getDate=function(){return i.date.getDate()},i.getHours=function(){return i.date.getHours()},i.getMinutes=function(){return i.date.getMinutes()},i.getSeconds=function(){return i.date.getSeconds()},i.getMilliseconds=function(){return i.date.getMilliseconds()},i.getTimezoneOffset=function(){return 60*e},i.getUTCFullYear=function(){return i.origDate.getUTCFullYear()},i.getUTCMonth=function(){return i.origDate.getUTCMonth()},i.getUTCDate=function(){return i.origDate.getUTCDate()},i.getUTCHours=function(){return i.origDate.getUTCHours()},i.getUTCMinutes=function(){return i.origDate.getUTCMinutes()},i.getUTCSeconds=function(){return i.origDate.getUTCSeconds()},i.getUTCMilliseconds=function(){return i.origDate.getUTCMilliseconds()},i.getDay=function(){return i.date.getDay()},i.toISOString&&(i.toISOString=function(){return a(i.origDate.getUTCFullYear(),4)+"-"+a(i.origDate.getUTCMonth()+1,2)+"-"+a(i.origDate.getUTCDate(),2)+"T"+a(i.origDate.getUTCHours(),2)+":"+a(i.origDate.getUTCMinutes(),2)+":"+a(i.origDate.getUTCSeconds(),2)+"."+a(i.origDate.getUTCMilliseconds(),3)+"Z"});var u=["getUTCDay","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toGMTString","toJSON","toLocaleFormat","toLocaleString","toLocaleTimeString","toSource","toString","toTimeString","toUTCString","valueOf"];return t.forEach(u,function(e){i[e]=function(){throw new Error("Method '"+e+"' is not implemented in the TzDate mock")}}),i},t.mock.TzDate.prototype=Date.prototype,t.mock.animate=t.module("ngAnimateMock",["ng"]).config(["$provide",function(e){e.factory("$$forceReflow",function(){function e(){e.totalReflows++}return e.totalReflows=0,e}),e.factory("$$animateAsyncRun",function(){var e=[],t=function(){return function(t){e.push(t)}};return t.flush=function(){if(0===e.length)return!1;for(var t=0;t<e.length;t++)e[t]();return e=[],!0},t}),e.decorator("$animate",["$delegate","$timeout","$browser","$$rAF","$$forceReflow","$$animateAsyncRun","$rootScope",function(e,n,r,i,a,o,s){var u={queue:[],cancel:e.cancel,on:e.on,off:e.off,pin:e.pin,get reflows(){return a.totalReflows},enabled:e.enabled,flush:function(){s.$digest();var e,t=!1;do e=!1,i.queue.length&&(i.flush(),e=t=!0),o.flush()&&(e=t=!0);while(e);if(!t)throw new Error("No pending animations ready to be closed or flushed");s.$digest()}};return t.forEach(["animate","enter","leave","move","addClass","removeClass","setClass"],function(t){u[t]=function(){return u.queue.push({event:t,element:arguments[0],options:arguments[arguments.length-1],args:arguments}),e[t].apply(e,arguments)}}),u}])}]),t.mock.dump=function(e){function n(e){var i;return t.isElement(e)?(e=t.element(e),i=t.element("<div></div>"),t.forEach(e,function(e){i.append(t.element(e).clone())}),i=i.html()):t.isArray(e)?(i=[],t.forEach(e,function(e){i.push(n(e))}),i="[ "+i.join(", ")+" ]"):i=t.isObject(e)?t.isFunction(e.$eval)&&t.isFunction(e.$apply)?r(e):e instanceof Error?e.stack||""+e.name+": "+e.message:t.toJson(e,!0):String(e),i}function r(e,n){n=n||"  ";var i=[n+"Scope("+e.$id+"): {"];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&!a.match(/^(\$|this)/)&&i.push("  "+a+": "+t.toJson(e[a]));for(var o=e.$$childHead;o;)i.push(r(o,n+"  ")),o=o.$$nextSibling;return i.push("}"),i.join("\n"+n)}return n(e)},t.mock.$HttpBackendProvider=function(){this.$get=["$rootScope","$timeout",o]},t.mock.$TimeoutDecorator=["$delegate","$browser",function(e,n){function r(e){var n=[];return t.forEach(e,function(e){n.push("{id: "+e.id+", time: "+e.time+"}")}),n.join(", ")}return e.flush=function(e){n.defer.flush(e)},e.verifyNoPendingTasks=function(){if(n.deferredFns.length)throw new Error("Deferred tasks to flush ("+n.deferredFns.length+"): "+r(n.deferredFns))},e}],t.mock.$RAFDecorator=["$delegate",function(e){var t=function(e){var n=t.queue.length;return t.queue.push(e),function(){t.queue.splice(n,1)}};return t.queue=[],t.supported=e.supported,t.flush=function(){if(0===t.queue.length)throw new Error("No rAF callbacks present");for(var e=t.queue.length,n=0;e>n;n++)t.queue[n]();t.queue=t.queue.slice(n)},t}],t.mock.$RootElementProvider=function(){this.$get=function(){return t.element("<div ng-app></div>")}},t.mock.$ControllerDecorator=["$delegate",function(e){return function(n,r,i,a){if(i&&"object"==typeof i){var o=e(n,r,!0,a);return t.extend(o.instance,i),o()}return e(n,r,i,a)}}],t.module("ngMock",["ng"]).provider({$browser:t.mock.$BrowserProvider,$exceptionHandler:t.mock.$ExceptionHandlerProvider,$log:t.mock.$LogProvider,$interval:t.mock.$IntervalProvider,$httpBackend:t.mock.$HttpBackendProvider,$rootElement:t.mock.$RootElementProvider}).config(["$provide",function(e){e.decorator("$timeout",t.mock.$TimeoutDecorator),e.decorator("$$rAF",t.mock.$RAFDecorator),e.decorator("$rootScope",t.mock.$RootScopeDecorator),e.decorator("$controller",t.mock.$ControllerDecorator)}]),t.module("ngMockE2E",["ng"]).config(["$provide",function(e){e.decorator("$httpBackend",t.mock.e2e.$httpBackendDecorator)}]),t.mock.e2e={},t.mock.e2e.$httpBackendDecorator=["$rootScope","$timeout","$delegate","$browser",o],t.mock.$RootScopeDecorator=["$delegate",function(e){function t(){for(var e,t=0,n=[this.$$childHead];n.length;)for(e=n.shift();e;)t+=1,n.push(e.$$childHead),e=e.$$nextSibling;return t}function n(){for(var e,t=this.$$watchers?this.$$watchers.length:0,n=[this.$$childHead];n.length;)for(e=n.shift();e;)t+=e.$$watchers?e.$$watchers.length:0,n.push(e.$$childHead),e=e.$$nextSibling;return t}var r=Object.getPrototypeOf(e);return r.$countChildScopes=t,r.$countWatchers=n,e}],e.jasmine||e.mocha){var c=null,f=[],d=function(){return!!c};t.mock.$$annotate=t.injector.$$annotate,t.injector.$$annotate=function(e){return"function"!=typeof e||e.$inject||f.push(e),t.mock.$$annotate.apply(this,arguments)},(e.beforeEach||e.setup)(function(){f=[],c=this}),(e.afterEach||e.teardown)(function(){var e=c.$injector;f.forEach(function(e){delete e.$inject}),t.forEach(c.$modules,function(e){e&&e.$$hashKey&&(e.$$hashKey=n)}),c.$injector=null,c.$modules=null,c=null,e&&e.get("$rootElement").off(),t.forEach(t.element.fragments,function(e,n){delete t.element.fragments[n]}),u.$$lastInstance=null,t.forEach(t.callbacks,function(e,n){delete t.callbacks[n]}),t.callbacks.counter=0}),e.module=t.mock.module=function(){function e(){if(c.$injector)throw new Error("Injector already created, can not register a module!");var e=c.$modules||(c.$modules=[]);t.forEach(n,function(n){e.push(t.isObject(n)&&!t.isArray(n)?function(e){t.forEach(n,function(t,n){e.value(n,t)})}:n)})}var n=Array.prototype.slice.call(arguments,0);return d()?e():e};var h=function(e,t){this.message=e.message,this.name=e.name,e.line&&(this.line=e.line),e.sourceId&&(this.sourceId=e.sourceId),e.stack&&t&&(this.stack=e.stack+"\n"+t.stack),e.stackArray&&(this.stackArray=e.stackArray)};h.prototype.toString=Error.prototype.toString,e.inject=t.mock.inject=function(){function e(){var e=c.$modules||[],i=!!c.$injectorStrict;e.unshift("ngMock"),e.unshift("ng");var a=c.$injector;a||(i&&t.forEach(e,function(e){"function"==typeof e&&t.injector.$$annotate(e)}),a=c.$injector=t.injector(e,i),c.$injectorStrict=i);for(var o=0,s=n.length;s>o;o++){c.$injectorStrict&&a.annotate(n[o]);try{a.invoke(n[o]||t.noop,this)}catch(u){if(u.stack&&r)throw new h(u,r);throw u}finally{r=null}}}var n=Array.prototype.slice.call(arguments,0),r=new Error("Declaration Location");return d()?e.call(c):e},t.mock.inject.strictDi=function(e){function t(){if(e!==c.$injectorStrict){if(c.$injector)throw new Error("Injector already created, can not modify strict annotations");c.$injectorStrict=e}}return e=arguments.length?!!e:!0,d()?t():t}}}(window,window.angular),/**
 * An Angular module that gives you access to the browsers local storage
 * @version v0.2.3 - 2015-10-11
 * @link https://github.com/grevory/angular-local-storage
 * @author grevory <greg@gregpike.ca>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(e,t,n){"use strict";var r=t.isDefined,i=t.isUndefined,a=t.isNumber,o=t.isObject,s=t.isArray,u=t.extend,l=t.toJson,c=t.module("LocalStorageModule",[]);c.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(e){return this.prefix=e,this},this.setStorageType=function(e){return this.storageType=e,this},this.setStorageCookie=function(e,t){return this.cookie.expiry=e,this.cookie.path=t,this},this.setStorageCookieDomain=function(e){return this.cookie.domain=e,this},this.setNotify=function(e,t){return this.notify={setItem:e,removeItem:t},this},this.$get=["$rootScope","$window","$document","$parse",function(e,t,n,c){var f,d=this,h=d.prefix,p=d.cookie,g=d.notify,m=d.storageType;n?n[0]&&(n=n[0]):n=document,"."!==h.substr(-1)&&(h=h?h+".":"");var v=function(e){return h+e},y=function(){try{var n=m in t&&null!==t[m],r=v("__"+Math.round(1e7*Math.random()));return n&&(f=t[m],f.setItem(r,""),f.removeItem(r)),n}catch(i){return m="cookie",e.$broadcast("LocalStorageModule.notification.error",i.message),!1}}(),b=function(t,n){if(n=i(n)?null:l(n),!y||"cookie"===d.storageType)return y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:"cookie"}),S(t,n);try{f&&f.setItem(v(t),n),g.setItem&&e.$broadcast("LocalStorageModule.notification.setitem",{key:t,newvalue:n,storageType:d.storageType})}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),S(t,n)}return!0},x=function(t){if(!y||"cookie"===d.storageType)return y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),M(t);var n=f?f.getItem(v(t)):null;if(!n||"null"===n)return null;try{return JSON.parse(n)}catch(r){return n}},w=function(){var t,n;for(t=0;t<arguments.length;t++)if(n=arguments[t],y&&"cookie"!==d.storageType)try{f.removeItem(v(n)),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:d.storageType})}catch(r){e.$broadcast("LocalStorageModule.notification.error",r.message),T(n)}else y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),g.removeItem&&e.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:"cookie"}),T(n)},_=function(){if(!y)return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var t=h.length,n=[];for(var r in f)if(r.substr(0,t)===h)try{n.push(r.substr(t))}catch(i){return e.$broadcast("LocalStorageModule.notification.error",i.Description),[]}return n},k=function(t){var n=h?new RegExp("^"+h):new RegExp,r=t?new RegExp(t):new RegExp;if(!y||"cookie"===d.storageType)return y||e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),C();var i=h.length;for(var a in f)if(n.test(a)&&r.test(a.substr(i)))try{w(a.substr(i))}catch(o){return e.$broadcast("LocalStorageModule.notification.error",o.message),C()}return!0},$=function(){try{return t.navigator.cookieEnabled||"cookie"in n&&(n.cookie.length>0||(n.cookie="test").indexOf.call(n.cookie,"test")>-1)}catch(r){return e.$broadcast("LocalStorageModule.notification.error",r.message),!1}}(),S=function(t,r,u){if(i(r))return!1;if((s(r)||o(r))&&(r=l(r)),!$)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var c="",f=new Date,d="";if(null===r?(f.setTime(f.getTime()+-864e5),c="; expires="+f.toGMTString(),r=""):a(u)&&0!==u?(f.setTime(f.getTime()+24*u*60*60*1e3),c="; expires="+f.toGMTString()):0!==p.expiry&&(f.setTime(f.getTime()+24*p.expiry*60*60*1e3),c="; expires="+f.toGMTString()),t){var h="; path="+p.path;p.domain&&(d="; domain="+p.domain),n.cookie=v(t)+"="+encodeURIComponent(r)+c+h+d}}catch(g){return e.$broadcast("LocalStorageModule.notification.error",g.message),!1}return!0},M=function(t){if(!$)return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var r=n.cookie&&n.cookie.split(";")||[],i=0;i<r.length;i++){for(var a=r[i];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(v(t)+"=")){var o=decodeURIComponent(a.substring(h.length+t.length+1,a.length));try{return JSON.parse(o)}catch(s){return o}}}return null},T=function(e){S(e,null)},C=function(){for(var e=null,t=h.length,r=n.cookie.split(";"),i=0;i<r.length;i++){for(e=r[i];" "===e.charAt(0);)e=e.substring(1,e.length);var a=e.substring(t,e.indexOf("="));T(a)}},E=function(){return m},A=function(e,t,n,i){i=i||t;var a=x(i);return null===a&&r(n)?a=n:o(a)&&o(n)&&(a=u(n,a)),c(t).assign(e,a),e.$watch(t,function(e){b(i,e)},o(e[t]))},O=function(){for(var e=0,n=t[m],r=0;r<n.length;r++)0===n.key(r).indexOf(h)&&e++;return e};return{isSupported:y,getStorageType:E,set:b,add:b,get:x,keys:_,remove:w,clearAll:k,bind:A,deriveKey:v,length:O,cookie:{isSupported:$,set:S,add:S,get:M,remove:T,clearAll:C}}}]})}(window,window.angular),/*! tether 0.7.1 */
function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.Tether=t()}(this,function(e,t,n){return function(){var e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,g,m,v,y,b={}.hasOwnProperty,x=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1},w=[].slice;null==this.Tether&&(this.Tether={modules:[]}),f=function(e){var t,n,r,i,a;if(n=getComputedStyle(e).position,"fixed"===n)return e;for(r=void 0,t=e;t=t.parentNode;){try{i=getComputedStyle(t)}catch(o){}if(null==i)return t;if(/(auto|scroll)/.test(i.overflow+i.overflowY+i.overflowX)&&("absolute"!==n||"relative"===(a=i.position)||"absolute"===a||"fixed"===a))return t}return document.body},m=function(){var e;return e=0,function(){return e++}}(),y={},l=function(e){var t,r,a,o,s;if(a=e._tetherZeroElement,null==a&&(a=e.createElement("div"),a.setAttribute("data-tether-id",m()),i(a.style,{top:0,left:0,position:"absolute"}),e.body.appendChild(a),e._tetherZeroElement=a),t=a.getAttribute("data-tether-id"),null==y[t]){y[t]={},s=a.getBoundingClientRect();for(r in s)o=s[r],y[t][r]=o;n(function(){return y[t]=void 0})}return y[t]},h=null,o=function(e){var t,n,r,i,a,o,s;e===document?(n=document,e=document.documentElement):n=e.ownerDocument,r=n.documentElement,t={},s=e.getBoundingClientRect();for(i in s)o=s[i],t[i]=o;return a=l(n),t.top-=a.top,t.left-=a.left,null==t.width&&(t.width=document.body.scrollWidth-t.left-t.right),null==t.height&&(t.height=document.body.scrollHeight-t.top-t.bottom),t.top=t.top-r.clientTop,t.left=t.left-r.clientLeft,t.right=n.body.clientWidth-t.width-t.left,t.bottom=n.body.clientHeight-t.height-t.top,t},u=function(e){return e.offsetParent||document.documentElement},c=function(){var e,t,n,r,a;return e=document.createElement("div"),e.style.width="100%",e.style.height="200px",t=document.createElement("div"),i(t.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t),r=e.offsetWidth,t.style.overflow="scroll",a=e.offsetWidth,r===a&&(a=t.clientWidth),document.body.removeChild(t),n=r-a,{width:n,height:n}},i=function(e){var t,n,r,i,a,o,s;for(null==e&&(e={}),t=[],Array.prototype.push.apply(t,arguments),s=t.slice(1),a=0,o=s.length;o>a;a++)if(r=s[a])for(n in r)b.call(r,n)&&(i=r[n],e[n]=i);return e},p=function(e,t){var n,r,i,a,o,u;if(null!=e.classList){for(o=t.split(" "),u=[],i=0,a=o.length;a>i;i++)r=o[i],r.trim()&&u.push(e.classList.remove(r));return u}return n=s(e).replace(new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi")," "),g(e,n)},t=function(e,t){var n,r,i,a,o;if(null!=e.classList){for(a=t.split(" "),o=[],r=0,i=a.length;i>r;r++)n=a[r],n.trim()&&o.push(e.classList.add(n));return o}return p(e,t),n=s(e)+(" "+t),g(e,n)},d=function(e,t){return null!=e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(s(e))},s=function(e){return e.className instanceof SVGAnimatedString?e.className.baseVal:e.className},g=function(e,t){return e.setAttribute("class",t)},v=function(e,n,r){var i,a,o,s,u,l;for(a=0,s=r.length;s>a;a++)i=r[a],x.call(n,i)<0&&d(e,i)&&p(e,i);for(l=[],o=0,u=n.length;u>o;o++)i=n[o],l.push(d(e,i)?void 0:t(e,i));return l},r=[],n=function(e){return r.push(e)},a=function(){var e,t;for(t=[];e=r.pop();)t.push(e());return t},e=function(){function e(){}return e.prototype.on=function(e,t,n,r){var i;return null==r&&(r=!1),null==this.bindings&&(this.bindings={}),null==(i=this.bindings)[e]&&(i[e]=[]),this.bindings[e].push({handler:t,ctx:n,once:r})},e.prototype.once=function(e,t,n){return this.on(e,t,n,!0)},e.prototype.off=function(e,t){var n,r,i;if(null!=(null!=(r=this.bindings)?r[e]:void 0)){if(null==t)return delete this.bindings[e];for(n=0,i=[];n<this.bindings[e].length;)i.push(this.bindings[e][n].handler===t?this.bindings[e].splice(n,1):n++);return i}},e.prototype.trigger=function(){var e,t,n,r,i,a,o,s,u;if(n=arguments[0],e=2<=arguments.length?w.call(arguments,1):[],null!=(o=this.bindings)?o[n]:void 0){for(i=0,u=[];i<this.bindings[n].length;)s=this.bindings[n][i],r=s.handler,t=s.ctx,a=s.once,r.apply(null!=t?t:this,e),u.push(a?this.bindings[n].splice(i,1):i++);return u}},e}(),this.Tether.Utils={getScrollParent:f,getBounds:o,getOffsetParent:u,extend:i,addClass:t,removeClass:p,hasClass:d,updateClasses:v,defer:n,flush:a,uniqueId:m,Evented:e,getScrollBarSize:c}}.call(this),function(){var e,t,n,r,i,a,o,s,u,l,c,f,d,h,p,g,m,v,y,b,x,w,_,k,$,S,M,T,C,E=[].slice,A=function(e,t){return function(){return e.apply(t,arguments)}};if(null==this.Tether)throw new Error("You must include the utils.js file before tether.js");r=this.Tether,C=r.Utils,g=C.getScrollParent,m=C.getSize,h=C.getOuterSize,f=C.getBounds,d=C.getOffsetParent,l=C.extend,i=C.addClass,_=C.removeClass,S=C.updateClasses,u=C.defer,c=C.flush,p=C.getScrollBarSize,M=function(e,t,n){return null==n&&(n=1),e+n>=t&&t>=e-n},$=function(){var e,t,n,r,i;for(e=document.createElement("div"),i=["transform","webkitTransform","OTransform","MozTransform","msTransform"],n=0,r=i.length;r>n;n++)if(t=i[n],void 0!==e.style[t])return t}(),k=[],w=function(){var e,t,n;for(t=0,n=k.length;n>t;t++)e=k[t],e.position(!1);return c()},v=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?e:+new Date},function(){var e,t,n,r,i,a,o,s,u;for(t=null,n=null,r=null,i=function(){if(null!=n&&n>16)return n=Math.min(n-16,250),void(r=setTimeout(i,250));if(!(null!=t&&v()-t<10))return null!=r&&(clearTimeout(r),r=null),t=v(),w(),n=v()-t},s=["resize","scroll","touchmove"],u=[],a=0,o=s.length;o>a;a++)e=s[a],u.push(window.addEventListener(e,i));return u}(),e={center:"center",left:"right",right:"left"},t={middle:"middle",top:"bottom",bottom:"top"},n={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},s=function(n,r){var i,a;return i=n.left,a=n.top,"auto"===i&&(i=e[r.left]),"auto"===a&&(a=t[r.top]),{left:i,top:a}},o=function(e){var t,r;return{left:null!=(t=n[e.left])?t:e.left,top:null!=(r=n[e.top])?r:e.top}},a=function(){var e,t,n,r,i,a,o;for(t=1<=arguments.length?E.call(arguments,0):[],n={top:0,left:0},i=0,a=t.length;a>i;i++)o=t[i],r=o.top,e=o.left,"string"==typeof r&&(r=parseFloat(r,10)),"string"==typeof e&&(e=parseFloat(e,10)),n.top+=r,n.left+=e;return n},y=function(e,t){return"string"==typeof e.left&&-1!==e.left.indexOf("%")&&(e.left=parseFloat(e.left,10)/100*t.width),"string"==typeof e.top&&-1!==e.top.indexOf("%")&&(e.top=parseFloat(e.top,10)/100*t.height),e},b=x=function(e){var t,n,r;return r=e.split(" "),n=r[0],t=r[1],{top:n,left:t}},T=function(){function e(e){this.position=A(this.position,this);var t,n,i,a,o;for(k.push(this),this.history=[],this.setOptions(e,!1),a=r.modules,n=0,i=a.length;i>n;n++)t=a[n],null!=(o=t.initialize)&&o.call(this);this.position()}return e.modules=[],e.prototype.getClass=function(e){var t,n;return(null!=(t=this.options.classes)?t[e]:void 0)?this.options.classes[e]:(null!=(n=this.options.classes)?n[e]:void 0)!==!1?this.options.classPrefix?""+this.options.classPrefix+"-"+e:e:""},e.prototype.setOptions=function(e,t){var n,r,a,o,s,u;for(this.options=e,null==t&&(t=!0),n={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options=l(n,this.options),s=this.options,this.element=s.element,this.target=s.target,this.targetModifier=s.targetModifier,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),u=["element","target"],a=0,o=u.length;o>a;a++){if(r=u[a],null==this[r])throw new Error("Tether Error: Both element and target must be defined");null!=this[r].jquery?this[r]=this[r][0]:"string"==typeof this[r]&&(this[r]=document.querySelector(this[r]))}if(i(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&i(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");return this.targetAttachment=b(this.options.targetAttachment),this.attachment=b(this.options.attachment),this.offset=x(this.options.offset),this.targetOffset=x(this.options.targetOffset),null!=this.scrollParent&&this.disable(),this.scrollParent="scroll-handle"===this.targetModifier?this.target:g(this.target),this.options.enabled!==!1?this.enable(t):void 0},e.prototype.getTargetBounds=function(){var e,t,n,r,i,a,o,s,u;if(null==this.targetModifier)return f(this.target);switch(this.targetModifier){case"visible":return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:(e=f(this.target),i={height:e.height,width:e.width,top:e.top,left:e.left},i.height=Math.min(i.height,e.height-(pageYOffset-e.top)),i.height=Math.min(i.height,e.height-(e.top+e.height-(pageYOffset+innerHeight))),i.height=Math.min(innerHeight,i.height),i.height-=2,i.width=Math.min(i.width,e.width-(pageXOffset-e.left)),i.width=Math.min(i.width,e.width-(e.left+e.width-(pageXOffset+innerWidth))),i.width=Math.min(innerWidth,i.width),i.width-=2,i.top<pageYOffset&&(i.top=pageYOffset),i.left<pageXOffset&&(i.left=pageXOffset),i);case"scroll-handle":return u=this.target,u===document.body?(u=document.documentElement,e={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):e=f(u),s=getComputedStyle(u),n=u.scrollWidth>u.clientWidth||"scroll"===[s.overflow,s.overflowX]||this.target!==document.body,a=0,n&&(a=15),r=e.height-parseFloat(s.borderTopWidth)-parseFloat(s.borderBottomWidth)-a,i={width:15,height:.975*r*(r/u.scrollHeight),left:e.left+e.width-parseFloat(s.borderLeftWidth)-15},t=0,408>r&&this.target===document.body&&(t=-11e-5*Math.pow(r,2)-.00727*r+22.58),this.target!==document.body&&(i.height=Math.max(i.height,24)),o=this.target.scrollTop/(u.scrollHeight-r),i.top=o*(r-i.height-t)+e.top+parseFloat(s.borderTopWidth),this.target===document.body&&(i.height=Math.max(i.height,24)),i}},e.prototype.clearCache=function(){return this._cache={}},e.prototype.cache=function(e,t){return null==this._cache&&(this._cache={}),null==this._cache[e]&&(this._cache[e]=t.call(this)),this._cache[e]},e.prototype.enable=function(e){return null==e&&(e=!0),this.options.addTargetClasses!==!1&&i(this.target,this.getClass("enabled")),i(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position),e?this.position():void 0},e.prototype.disable=function(){return _(this.target,this.getClass("enabled")),_(this.element,this.getClass("enabled")),this.enabled=!1,null!=this.scrollParent?this.scrollParent.removeEventListener("scroll",this.position):void 0},e.prototype.destroy=function(){var e,t,n,r,i;for(this.disable(),i=[],e=n=0,r=k.length;r>n;e=++n){if(t=k[e],t===this){k.splice(e,1);break}i.push(void 0)}return i},e.prototype.updateAttachClasses=function(e,t){var n,r,i,a,o,s,l,c,f,d=this;for(null==e&&(e=this.attachment),null==t&&(t=this.targetAttachment),a=["left","top","bottom","right","middle","center"],(null!=(f=this._addAttachClasses)?f.length:void 0)&&this._addAttachClasses.splice(0,this._addAttachClasses.length),n=null!=this._addAttachClasses?this._addAttachClasses:this._addAttachClasses=[],e.top&&n.push(""+this.getClass("element-attached")+"-"+e.top),e.left&&n.push(""+this.getClass("element-attached")+"-"+e.left),t.top&&n.push(""+this.getClass("target-attached")+"-"+t.top),t.left&&n.push(""+this.getClass("target-attached")+"-"+t.left),r=[],o=0,l=a.length;l>o;o++)i=a[o],r.push(""+this.getClass("element-attached")+"-"+i);for(s=0,c=a.length;c>s;s++)i=a[s],r.push(""+this.getClass("target-attached")+"-"+i);return u(function(){return null!=d._addAttachClasses?(S(d.element,d._addAttachClasses,r),d.options.addTargetClasses!==!1&&S(d.target,d._addAttachClasses,r),d._addAttachClasses=void 0):void 0})},e.prototype.position=function(e){var t,n,i,u,l,h,g,m,v,b,x,w,_,k,$,S,M,T,C,E,A,O,D,L,N,j,P,R,I,F,U,z,q,H,B,Y=this;if(null==e&&(e=!0),this.enabled){for(this.clearCache(),E=s(this.targetAttachment,this.attachment),this.updateAttachClasses(this.attachment,E),t=this.cache("element-bounds",function(){return f(Y.element)}),N=t.width,i=t.height,0===N&&0===i&&null!=this.lastSize?(F=this.lastSize,N=F.width,i=F.height):this.lastSize={width:N,height:i},D=O=this.cache("target-bounds",function(){return Y.getTargetBounds()}),v=y(o(this.attachment),{width:N,height:i}),A=y(o(E),D),l=y(this.offset,{width:N,height:i}),h=y(this.targetOffset,D),v=a(v,l),A=a(A,h),u=O.left+A.left-v.left,L=O.top+A.top-v.top,U=r.modules,j=0,R=U.length;R>j;j++){if(g=U[j],$=g.position.call(this,{left:u,top:L,targetAttachment:E,targetPos:O,attachment:this.attachment,elementPos:t,offset:v,targetOffset:A,manualOffset:l,manualTargetOffset:h,scrollbarSize:T}),$===!1)return!1;null!=$&&"object"==typeof $&&(L=$.top,u=$.left)}if(m={page:{top:L,left:u},viewport:{top:L-pageYOffset,bottom:pageYOffset-L-i+innerHeight,left:u-pageXOffset,right:pageXOffset-u-N+innerWidth}},document.body.scrollWidth>window.innerWidth&&(T=this.cache("scrollbar-size",p),m.viewport.bottom-=T.height),document.body.scrollHeight>window.innerHeight&&(T=this.cache("scrollbar-size",p),m.viewport.right-=T.width),(""!==(z=document.body.style.position)&&"static"!==z||""!==(q=document.body.parentElement.style.position)&&"static"!==q)&&(m.page.bottom=document.body.scrollHeight-L-i,m.page.right=document.body.scrollWidth-u-N),(null!=(H=this.options.optimizations)?H.moveElement:void 0)!==!1&&null==this.targetModifier){for(x=this.cache("target-offsetparent",function(){return d(Y.target)}),k=this.cache("target-offsetparent-bounds",function(){return f(x)}),_=getComputedStyle(x),n=getComputedStyle(this.element),w=k,b={},B=["Top","Left","Bottom","Right"],P=0,I=B.length;I>P;P++)C=B[P],b[C.toLowerCase()]=parseFloat(_["border"+C+"Width"]);k.right=document.body.scrollWidth-k.left-w.width+b.right,k.bottom=document.body.scrollHeight-k.top-w.height+b.bottom,m.page.top>=k.top+b.top&&m.page.bottom>=k.bottom&&m.page.left>=k.left+b.left&&m.page.right>=k.right&&(M=x.scrollTop,S=x.scrollLeft,m.offset={top:m.page.top-k.top+M-b.top,left:m.page.left-k.left+S-b.left})}return this.move(m),this.history.unshift(m),this.history.length>3&&this.history.pop(),e&&c(),!0}},e.prototype.move=function(e){var t,n,r,i,a,o,s,c,f,h,p,g,m,v,y,b,x,w=this;if(null!=this.element.parentNode){c={};for(h in e){c[h]={};for(i in e[h]){for(r=!1,b=this.history,v=0,y=b.length;y>v;v++)if(s=b[v],!M(null!=(x=s[h])?x[i]:void 0,e[h][i])){r=!0;break}r||(c[h][i]=!0)}}t={top:"",left:"",right:"",bottom:""},f=function(e,n){var r,i,a;return(null!=(a=w.options.optimizations)?a.gpu:void 0)===!1?(e.top?t.top=""+n.top+"px":t.bottom=""+n.bottom+"px",e.left?t.left=""+n.left+"px":t.right=""+n.right+"px"):(e.top?(t.top=0,i=n.top):(t.bottom=0,i=-n.bottom),e.left?(t.left=0,r=n.left):(t.right=0,r=-n.right),t[$]="translateX("+Math.round(r)+"px) translateY("+Math.round(i)+"px)","msTransform"!==$?t[$]+=" translateZ(0)":void 0)},a=!1,(c.page.top||c.page.bottom)&&(c.page.left||c.page.right)?(t.position="absolute",f(c.page,e.page)):(c.viewport.top||c.viewport.bottom)&&(c.viewport.left||c.viewport.right)?(t.position="fixed",f(c.viewport,e.viewport)):null!=c.offset&&c.offset.top&&c.offset.left?(t.position="absolute",o=this.cache("target-offsetparent",function(){return d(w.target)}),d(this.element)!==o&&u(function(){return w.element.parentNode.removeChild(w.element),o.appendChild(w.element)}),f(c.offset,e.offset),a=!0):(t.position="absolute",f({top:!0,left:!0},e.page)),a||"BODY"===this.element.parentNode.tagName||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element)),m={},g=!1;for(i in t)p=t[i],n=this.element.style[i],""===n||""===p||"top"!==i&&"left"!==i&&"bottom"!==i&&"right"!==i||(n=parseFloat(n),p=parseFloat(p)),n!==p&&(g=!0,m[i]=t[i]);return g?u(function(){return l(w.element.style,m)}):void 0}},e}(),r.position=w,this.Tether=l(T,r)}.call(this),function(){var e,t,n,r,i,a,o,s,u,l,c=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};l=this.Tether.Utils,o=l.getOuterSize,a=l.getBounds,s=l.getSize,r=l.extend,u=l.updateClasses,n=l.defer,t={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle"},e=["left","top","right","bottom"],i=function(t,n){var r,i,o,s,u,l,c;if("scrollParent"===n?n=t.scrollParent:"window"===n&&(n=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),n===document&&(n=n.documentElement),null!=n.nodeType)for(i=s=a(n),u=getComputedStyle(n),n=[i.left,i.top,s.width+i.left,s.height+i.top],r=l=0,c=e.length;c>l;r=++l)o=e[r],o=o[0].toUpperCase()+o.substr(1),"Top"===o||"Left"===o?n[r]+=parseFloat(u["border"+o+"Width"]):n[r]-=parseFloat(u["border"+o+"Width"]);return n},this.Tether.modules.push({position:function(t){var o,s,l,f,d,h,p,g,m,v,y,b,x,w,_,k,$,S,M,T,C,E,A,O,D,L,N,j,P,R,I,F,U,z,q,H,B,Y,V,W,G,X,J,K,Z,Q,ee,te=this;if(L=t.top,y=t.left,C=t.targetAttachment,!this.options.constraints)return!0;for(S=function(t){var n,r,i,a;for(te.removeClass(t),a=[],r=0,i=e.length;i>r;r++)n=e[r],a.push(te.removeClass(""+t+"-"+n));return a},W=this.cache("element-bounds",function(){return a(te.element)}),v=W.height,N=W.width,0===N&&0===v&&null!=this.lastSize&&(G=this.lastSize,N=G.width,v=G.height),A=this.cache("target-bounds",function(){return te.getTargetBounds()}),E=A.height,O=A.width,T={},m={},s=[this.getClass("pinned"),this.getClass("out-of-bounds")],X=this.options.constraints,j=0,F=X.length;F>j;j++)g=X[j],g.outOfBoundsClass&&s.push(g.outOfBoundsClass),g.pinnedClass&&s.push(g.pinnedClass);for(P=0,U=s.length;U>P;P++)for(p=s[P],J=["left","top","right","bottom"],R=0,z=J.length;z>R;R++)M=J[R],s.push(""+p+"-"+M);for(o=[],T=r({},C),m=r({},this.attachment),K=this.options.constraints,I=0,q=K.length;q>I;I++){if(g=K[I],D=g.to,l=g.attachment,_=g.pin,null==l&&(l=""),c.call(l," ")>=0?(Z=l.split(" "),h=Z[0],d=Z[1]):d=h=l,f=i(this,D),("target"===h||"both"===h)&&(L<f[1]&&"top"===T.top&&(L+=E,T.top="bottom"),L+v>f[3]&&"bottom"===T.top&&(L-=E,T.top="top")),"together"===h&&(L<f[1]&&"top"===T.top&&("bottom"===m.top?(L+=E,T.top="bottom",L+=v,m.top="top"):"top"===m.top&&(L+=E,T.top="bottom",L-=v,m.top="bottom")),L+v>f[3]&&"bottom"===T.top&&("top"===m.top?(L-=E,T.top="top",L-=v,m.top="bottom"):"bottom"===m.top&&(L-=E,T.top="top",L+=v,m.top="top")),"middle"===T.top&&(L+v>f[3]&&"top"===m.top?(L-=v,m.top="bottom"):L<f[1]&&"bottom"===m.top&&(L+=v,m.top="top"))),("target"===d||"both"===d)&&(y<f[0]&&"left"===T.left&&(y+=O,T.left="right"),y+N>f[2]&&"right"===T.left&&(y-=O,T.left="left")),"together"===d&&(y<f[0]&&"left"===T.left?"right"===m.left?(y+=O,T.left="right",y+=N,m.left="left"):"left"===m.left&&(y+=O,T.left="right",y-=N,m.left="right"):y+N>f[2]&&"right"===T.left?"left"===m.left?(y-=O,T.left="left",y-=N,m.left="right"):"right"===m.left&&(y-=O,T.left="left",y+=N,m.left="left"):"center"===T.left&&(y+N>f[2]&&"left"===m.left?(y-=N,m.left="right"):y<f[0]&&"right"===m.left&&(y+=N,m.left="left"))),("element"===h||"both"===h)&&(L<f[1]&&"bottom"===m.top&&(L+=v,m.top="top"),L+v>f[3]&&"top"===m.top&&(L-=v,m.top="bottom")),("element"===d||"both"===d)&&(y<f[0]&&"right"===m.left&&(y+=N,m.left="left"),y+N>f[2]&&"left"===m.left&&(y-=N,m.left="right")),"string"==typeof _?_=function(){var e,t,n,r;for(n=_.split(","),r=[],t=0,e=n.length;e>t;t++)w=n[t],r.push(w.trim());return r}():_===!0&&(_=["top","left","right","bottom"]),_||(_=[]),k=[],b=[],L<f[1]&&(c.call(_,"top")>=0?(L=f[1],k.push("top")):b.push("top")),L+v>f[3]&&(c.call(_,"bottom")>=0?(L=f[3]-v,k.push("bottom")):b.push("bottom")),y<f[0]&&(c.call(_,"left")>=0?(y=f[0],k.push("left")):b.push("left")),y+N>f[2]&&(c.call(_,"right")>=0?(y=f[2]-N,k.push("right")):b.push("right")),k.length)for($=null!=(Q=this.options.pinnedClass)?Q:this.getClass("pinned"),o.push($),Y=0,H=k.length;H>Y;Y++)M=k[Y],o.push(""+$+"-"+M);if(b.length)for(x=null!=(ee=this.options.outOfBoundsClass)?ee:this.getClass("out-of-bounds"),o.push(x),V=0,B=b.length;B>V;V++)M=b[V],o.push(""+x+"-"+M);(c.call(k,"left")>=0||c.call(k,"right")>=0)&&(m.left=T.left=!1),(c.call(k,"top")>=0||c.call(k,"bottom")>=0)&&(m.top=T.top=!1),(T.top!==C.top||T.left!==C.left||m.top!==this.attachment.top||m.left!==this.attachment.left)&&this.updateAttachClasses(m,T)}return n(function(){return te.options.addTargetClasses!==!1&&u(te.target,o,s),u(te.element,o,s)}),{top:L,left:y}}})}.call(this),function(){var e,t,n,r;r=this.Tether.Utils,t=r.getBounds,n=r.updateClasses,e=r.defer,this.Tether.modules.push({position:function(r){var i,a,o,s,u,l,c,f,d,h,p,g,m,v,y,b,x,w,_,k,$,S,M,T,C,E=this;if(p=r.top,l=r.left,$=this.cache("element-bounds",function(){return t(E.element)}),u=$.height,g=$.width,h=this.getTargetBounds(),s=p+u,c=l+g,i=[],p<=h.bottom&&s>=h.top)for(S=["left","right"],m=0,x=S.length;x>m;m++)f=S[m],((M=h[f])===l||M===c)&&i.push(f);if(l<=h.right&&c>=h.left)for(T=["top","bottom"],v=0,w=T.length;w>v;v++)f=T[v],((C=h[f])===p||C===s)&&i.push(f);for(o=[],a=[],d=["left","top","right","bottom"],o.push(this.getClass("abutted")),y=0,_=d.length;_>y;y++)f=d[y],o.push(""+this.getClass("abutted")+"-"+f);for(i.length&&a.push(this.getClass("abutted")),b=0,k=i.length;k>b;b++)f=i[b],a.push(""+this.getClass("abutted")+"-"+f);return e(function(){return E.options.addTargetClasses!==!1&&n(E.target,a,o),n(E.element,a,o)}),!0}})}.call(this),function(){this.Tether.modules.push({position:function(e){var t,n,r,i,a,o,s;return o=e.top,t=e.left,this.options.shift?(n=function(e){return"function"==typeof e?e.call(this,{top:o,left:t}):e},r=n(this.options.shift),"string"==typeof r?(r=r.split(" "),r[1]||(r[1]=r[0]),a=r[0],i=r[1],a=parseFloat(a,10),i=parseFloat(i,10)):(s=[r.top,r.left],a=s[0],i=s[1]),o+=a,t+=i,{top:o,left:t}):void 0}})}.call(this),this.Tether}),/*! tether-drop 1.0.8 */
function(e,t){"function"==typeof define&&define.amd?define(["tether"],t):"object"==typeof exports?module.exports=t(require("tether")):e.Drop=t(e.Tether)}(this,function(e){"use strict";function t(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw a}}return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function i(e){var n=e.split(" "),r=t(n,2),i=r[0],a=r[1];if(["left","right"].indexOf(i)>=0){var o=[a,i];i=o[0],a=o[1]}return[i,a].join(" ")}function a(e,t){for(var n=void 0,r=[];-1!==(n=e.indexOf(t));)r.push(e.splice(n,1));return r}function o(){var t=void 0===arguments[0]?{}:arguments[0],c=function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return new(l.apply(b,[null].concat(t)))};f(c,{createContext:o,drops:[],defaults:{}});var v={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,tetherOptions:{}}};f(c,v,t),f(c.defaults,v.defaults,t.defaults),"undefined"==typeof _[c.classPrefix]&&(_[c.classPrefix]=[]),c.updateBodyClasses=function(){for(var e=!1,t=_[c.classPrefix],n=t.length,r=0;n>r;++r)if(t[r].isOpened()){e=!0;break}e?d(document.body,""+c.classPrefix+"-open"):h(document.body,""+c.classPrefix+"-open")};var b=function(t){function o(e){if(n(this,o),u(Object.getPrototypeOf(o.prototype),"constructor",this).call(this),this.options=f({},c.defaults,e),this.target=this.options.target,"undefined"==typeof this.target)throw new Error("Drop Error: You must provide a target.");this.options.classes&&this.options.addTargetClasses!==!1&&d(this.target,this.options.classes),c.drops.push(this),_[c.classPrefix].push(this),this._boundEvents=[],this.setupElements(),this.setupEvents(),this.setupTether()}return r(o,t),s(o,[{key:"_on",value:function(e,t,n){this._boundEvents.push({element:e,event:t,handler:n}),e.addEventListener(t,n)}},{key:"setupElements",value:function(){var e=this;if(this.drop=document.createElement("div"),d(this.drop,c.classPrefix),this.options.classes&&d(this.drop,this.options.classes),this.content=document.createElement("div"),d(this.content,""+c.classPrefix+"-content"),"function"==typeof this.options.content){var t=function(){var t=e.options.content.call(e,e);if("string"==typeof t)e.content.innerHTML=t;else{if("object"!=typeof t)throw new Error("Drop Error: Content function should return a string or HTMLElement.");e.content.innerHTML="",e.content.appendChild(t)}};t(),this.on("open",t.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var t=this.options.position.split(" ");t[0]=w[t[0]],t=t.join(" ");var n=[];n.push(this.options.constrainToScrollParent?{to:"scrollParent",pin:"top, bottom",attachment:"together none"}:{to:"scrollParent"}),n.push(this.options.constrainToWindow!==!1?{to:"window",attachment:"together"}:{to:"window"});var r={element:this.drop,target:this.target,attachment:i(t),targetAttachment:i(this.options.position),classPrefix:c.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:n,addTargetClasses:this.options.addTargetClasses};this.options.tetherOptions!==!1&&(this.tether=new e(f({},r,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var e=this;if(this.options.openOn){if("always"===this.options.openOn)return void setTimeout(this.open.bind(this));var t=this.options.openOn.split(" ");if(t.indexOf("click")>=0)for(var n=function(t){e.toggle(),t.preventDefault()},r=function(t){e.isOpened()&&(t.target===e.drop||e.drop.contains(t.target)||t.target===e.target||e.target.contains(t.target)||e.close())},i=0;i<m.length;++i){var a=m[i];this._on(this.target,a,n),this._on(document,a,r)}t.indexOf("hover")>=0&&!function(){var t=!1,n=function(){t=!0,e.open()},r=null,i=function(){t=!1,"undefined"!=typeof r&&clearTimeout(r),r=setTimeout(function(){t||e.close(),r=null},50)};e._on(e.target,"mouseover",n),e._on(e.drop,"mouseover",n),e._on(e.target,"mouseout",i),e._on(e.drop,"mouseout",i)}()}}},{key:"isOpened",value:function(){return this.drop?p(this.drop,""+c.classPrefix+"-open"):void 0}},{key:"toggle",value:function(){this.isOpened()?this.close():this.open()}},{key:"open",value:function(){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!=typeof this.tether&&this.tether.enable(),d(this.drop,""+c.classPrefix+"-open"),d(this.drop,""+c.classPrefix+"-open-transitionend"),setTimeout(function(){e.drop&&d(e.drop,""+c.classPrefix+"-after-open")}),"undefined"!=typeof this.tether&&this.tether.position(),this.trigger("open"),c.updateBodyClasses())}},{key:"close",value:function(){var e=this;if(this.isOpened()){h(this.drop,""+c.classPrefix+"-open"),h(this.drop,""+c.classPrefix+"-after-open");var t=function n(){p(e.drop,""+c.classPrefix+"-open")||h(e.drop,""+c.classPrefix+"-open-transitionend"),e.drop.removeEventListener(y,n)};this.drop.addEventListener(y,t),this.trigger("close"),"undefined"!=typeof this.tether&&this.tether.disable(),c.updateBodyClasses(),this.options.remove&&this.remove()}}},{key:"remove",value:function(){this.close(),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&"undefined"!=typeof this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),"undefined"!=typeof this.tether&&this.tether.destroy();for(var e=0;e<this._boundEvents.length;++e){var t=this._boundEvents[e],n=t.element,r=t.event,i=t.handler;n.removeEventListener(r,i)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,a(_[c.classPrefix],this),a(c.drops,this)}}]),o}(g);return c}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,a=t,o=n;s=l=u=void 0,r=!1;var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return void 0;e=l,t=a,n=o,r=!0}},l=Function.prototype.bind,c=e.Utils,f=c.extend,d=c.addClass,h=c.removeClass,p=c.hasClass,g=c.Evented,m=["click"];"ontouchstart"in document.documentElement&&m.push("touchstart");var v={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},y="";for(var b in v)if({}.hasOwnProperty.call(v,b)){var x=document.createElement("p");"undefined"!==x.style[b]&&(y=v[b])}var w={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},_={},k=o();return document.addEventListener("DOMContentLoaded",function(){k.updateBodyClasses()}),k}),function(){var e,t,n,r,i,a,o,s,u,l,c,f,d,h,p;n=Math.floor,l=Math.min,t=function(e,t){return t>e?-1:e>t?1:0},u=function(e,r,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=t),0>i)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);a>i;)s=n((i+a)/2),o(r,e[s])<0?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(r)),r},a=function(e,n,r){return null==r&&(r=t),e.push(n),h(e,0,e.length-1,r)},i=function(e,n){var r,i;return null==n&&(n=t),r=e.pop(),e.length?(i=e[0],e[0]=r,p(e,0,n)):i=r,i},s=function(e,n,r){var i;return null==r&&(r=t),i=e[0],e[0]=n,p(e,0,r),i},o=function(e,n,r){var i;return null==r&&(r=t),e.length&&r(e[0],n)<0&&(i=[e[0],n],n=i[0],e[0]=i[1],p(e,0,r)),n},r=function(e,r){var i,a,o,s,u,l;for(null==r&&(r=t),s=function(){l=[];for(var t=0,r=n(e.length/2);r>=0?r>t:t>r;r>=0?t++:t--)l.push(t);return l}.apply(this).reverse(),u=[],a=0,o=s.length;o>a;a++)i=s[a],u.push(p(e,i,r));return u},d=function(e,n,r){var i;return null==r&&(r=t),i=e.indexOf(n),-1!==i?(h(e,0,i,r),p(e,i,r)):void 0},c=function(e,n,i){var a,s,u,l,c;if(null==i&&(i=t),s=e.slice(0,n),!s.length)return s;for(r(s,i),c=e.slice(n),u=0,l=c.length;l>u;u++)a=c[u],o(s,a,i);return s.sort(i).reverse()},f=function(e,n,a){var o,s,c,f,d,h,p,g,m,v;if(null==a&&(a=t),10*n<=e.length){if(f=e.slice(0,n).sort(a),!f.length)return f;for(c=f[f.length-1],g=e.slice(n),d=0,p=g.length;p>d;d++)o=g[d],a(o,c)<0&&(u(f,o,0,null,a),f.pop(),c=f[f.length-1]);return f}for(r(e,a),v=[],s=h=0,m=l(n,e.length);m>=0?m>h:h>m;s=m>=0?++h:--h)v.push(i(e,a));return v},h=function(e,n,r,i){var a,o,s;for(null==i&&(i=t),a=e[r];r>n&&(s=r-1>>1,o=e[s],i(a,o)<0);)e[r]=o,r=s;return e[r]=a},p=function(e,n,r){var i,a,o,s,u;for(null==r&&(r=t),a=e.length,u=n,o=e[n],i=2*n+1;a>i;)s=i+1,a>s&&!(r(e[i],e[s])<0)&&(i=s),e[n]=e[i],n=i,i=2*n+1;return e[n]=o,h(e,u,n,r)},e=function(){function e(e){this.cmp=null!=e?e:t,this.nodes=[]}return e.push=a,e.pop=i,e.replace=s,e.pushpop=o,e.heapify=r,e.updateItem=d,e.nlargest=c,e.nsmallest=f,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return i(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,t){return"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Heap=t()}(this,function(){return e})}.call(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.vg=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){t.exports={version:"2.3.1",dataflow:e("vega-dataflow"),parse:e("./src/parse/"),scene:{Bounder:e("./src/scene/Bounder"),Builder:e("./src/scene/Builder"),Encoder:e("./src/scene/Encoder"),GroupBuilder:e("./src/scene/GroupBuilder")},transforms:e("./src/transforms"),Transform:e("./src/transforms/Transform"),BatchTransform:e("./src/transforms/BatchTransform"),Parameter:e("./src/transforms/Parameter"),schema:e("./src/core/schema"),config:e("./src/core/config"),util:e("datalib"),debug:e("vega-logging").debug}},{"./src/core/config":90,"./src/core/schema":91,"./src/parse/":97,"./src/scene/Bounder":109,"./src/scene/Builder":110,"./src/scene/Encoder":111,"./src/scene/GroupBuilder":112,"./src/transforms":142,"./src/transforms/BatchTransform":119,"./src/transforms/Parameter":134,"./src/transforms/Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],2:[function(e,t,n){},{}],3:[function(e,t,n){function r(e){return e.text}function i(){return"serif"}function a(){return"normal"}function o(e){return Math.sqrt(e.value)}function s(){return 30*(~~(6*Math.random())-3)}function u(){return 1}function l(e,t,n,r){if(!t.sprite){var i=e.context,a=e.ratio;i.clearRect(0,0,(x<<5)/a,w/a);var o=0,s=0,u=0,l=n.length;for(--r;++r<l;){t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;var c=i.measureText(t.text+"m").width*a,f=t.size<<1;if(t.rotate){var d=Math.sin(t.rotate*b),h=Math.cos(t.rotate*b),p=c*h,g=c*d,m=f*h,v=f*d;c=Math.max(Math.abs(p+v),Math.abs(p-v))+31>>5<<5,f=~~Math.max(Math.abs(g+m),Math.abs(g-m))}else c=c+31>>5<<5;if(f>u&&(u=f),o+c>=x<<5&&(o=0,s+=u,u=0),s+f>=w)break;i.translate((o+(c>>1))/a,(s+(f>>1))/a),t.rotate&&i.rotate(t.rotate*b),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=s,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var y=i.getImageData(0,0,(x<<5)/a,w/a).data,_=[];--r>=0;)if(t=n[r],t.hasText){for(var c=t.width,k=c>>5,f=t.y1-t.y0,$=0;f*k>$;$++)_[$]=0;if(o=t.xoff,null==o)return;s=t.yoff;for(var S=0,M=-1,T=0;f>T;T++){for(var $=0;c>$;$++){var C=k*T+($>>5),E=y[(s+T)*(x<<5)+(o+$)<<2]?1<<31-$%32:0;_[C]|=E,S|=E}S?M=T:(t.y0++,f--,T--,s++)}t.y1=t.y0+M,t.sprite=_.slice(0,(t.y1-t.y0)*k)}}}function c(e,t,n){n>>=5;for(var r,i=e.sprite,a=e.width>>5,o=e.x-(a<<4),s=127&o,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),f=0;l>f;f++){r=0;for(var d=0;a>=d;d++)if((r<<u|(a>d?(r=i[f*a+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function f(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function d(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function h(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function p(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(e){var a=0>e?-1:1;switch(Math.sqrt(1+4*a*e)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t}return[r,i]}}function g(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function m(){return document.createElement("canvas")}function v(e){return"function"==typeof e?e:function(){return e}}var y=e("d3-dispatch").dispatch,b=Math.PI/180,x=64,w=2048;t.exports=function(){function e(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=(x<<5)/t,e.height=w/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}function t(e,t,r){for(var i,a,o,s=([{x:0,y:0},{x:n[0],y:n[1]}],t.x),u=t.y,l=Math.sqrt(n[0]*n[0]+n[1]*n[1]),f=C(n),h=L()<.5?1:-1,p=-h;(i=f(p+=h))&&(a=~~i[0],o=~~i[1],!(Math.min(Math.abs(a),Math.abs(o))>=l));)if(t.x=s+a,t.y=u+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>n[0]||t.y+t.y1>n[1]||r&&c(t,e,n[0])||r&&!d(t,r))){for(var g,m=t.sprite,v=t.width>>5,y=n[0]>>5,b=t.x-(v<<4),x=127&b,w=32-x,_=t.y1-t.y0,k=(t.y+t.y0)*y+(b>>5),$=0;_>$;$++){g=0;for(var S=0;v>=S;S++)e[k+S]|=g<<w|(v>S?(g=m[$*v+S])>>>x:0);k+=y}return delete t.sprite,!0}return!1}var n=[256,256],p=r,b=i,k=o,$=a,S=a,M=s,T=u,C=h,E=[],A=1/0,O=y("word","end"),D=null,L=Math.random,N={},j=m;return N.canvas=function(e){return arguments.length?(j=v(e),N):j},N.start=function(){function r(){for(var e=Date.now();Date.now()-e<A&&++u<s&&D;){var r=d[u];r.x=n[0]*(L()+.5)>>1,r.y=n[1]*(L()+.5)>>1,l(i,r,d,u),r.hasText&&t(a,r,o)&&(c.push(r),O.word(r),o?f(o,r):o=[{x:r.x+r.x0,y:r.y+r.y0},{x:r.x+r.x1,y:r.y+r.y1}],r.x-=n[0]>>1,r.y-=n[1]>>1)}u>=s&&(N.stop(),O.end(c,o))}var i=e(j()),a=g((n[0]>>5)*n[1]),o=null,s=E.length,u=-1,c=[],d=E.map(function(e,t){return e.text=p.call(this,e,t),e.font=b.call(this,e,t),e.style=$.call(this,e,t),e.weight=S.call(this,e,t),e.rotate=M.call(this,e,t),e.size=~~k.call(this,e,t),e.padding=T.call(this,e,t),e}).sort(function(e,t){return t.size-e.size});return D&&clearInterval(D),D=setInterval(r,0),r(),N},N.stop=function(){return D&&(clearInterval(D),D=null),N},N.timeInterval=function(e){return arguments.length?(A=null==e?1/0:e,N):A},N.words=function(e){return arguments.length?(E=e,N):E},N.size=function(e){return arguments.length?(n=[+e[0],+e[1]],N):n},N.font=function(e){return arguments.length?(b=v(e),N):b},N.fontStyle=function(e){return arguments.length?($=v(e),N):$},N.fontWeight=function(e){return arguments.length?(S=v(e),N):S},N.rotate=function(e){return arguments.length?(M=v(e),N):M},N.text=function(e){return arguments.length?(p=v(e),N):p},N.spiral=function(e){return arguments.length?(C=_[e]||e,N):C},N.fontSize=function(e){return arguments.length?(k=v(e),N):k},N.padding=function(e){return arguments.length?(T=v(e),N):T},N.random=function(e){return arguments.length?(L=e,N):L},N.on=function(){var e=O.on.apply(O,arguments);return e===O?N:e},N};var _={archimedean:h,rectangular:p}},{"d3-dispatch":4}],4:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.dispatch={})}(this,function(e){"use strict";function t(e){function t(e){var t=(e+="").indexOf("."),n=e;if(t>=0?e=e.slice(0,t):n+=".",e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}function n(e){return function(){for(var t,n,r=o[e],i=-1,a=r.length;++i<a;)(n=(t=r[i]).value)&&n.apply(this,arguments);return u}}var r,i=-1,a=e.length,o={},s={},u=this;for(u.on=function(e,n){if(e=t(e),arguments.length<2)return(n=s[e.name])&&n.value;if(e.type){var r,i=o[e.type],a=s[e.name];a&&(a.value=null,r=i.indexOf(a),o[e.type]=i=i.slice(0,r).concat(i.slice(r+1)),delete s[e.name]),n&&(n={value:n},s[e.name]=n,i.push(n))}else if(null==n)for(var l in o)if(n=s[l+e.name]){n.value=null;var i=o[l],r=i.indexOf(n);o[l]=i.slice(0,r).concat(i.slice(r+1)),delete s[n.name]}return u};++i<a;){if(r=e[i]+"",!r||r in u)throw new Error("illegal or duplicate type: "+r);o[r]=[],u[r]=n(r)}}function n(){return new t(arguments)}n.prototype=t.prototype,e.dispatch=n})},{}],5:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.dsv={})}(this,function(e){"use strict";var t=function(e){function t(e,t){var r;return n(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})}function n(e,t){function n(){if(c>=l)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<l;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;l>c;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==u)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],l=e.length,c=0,f=0;(r=n())!==o;){for(var d=[];r!==a&&r!==o;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s}function r(t){if(Array.isArray(t[0]))return i(t);var n=Object.create(null),r=[];return t.forEach(function(e){for(var t in e)(t+="")in n||r.push(n[t]=t)}),[r.map(o).join(e)].concat(t.map(function(t){return r.map(function(e){return o(t[e])}).join(e)})).join("\n")}function i(e){return e.map(a).join("\n")}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),u=e.charCodeAt(0);return{parse:t,parseRows:n,format:r,formatRows:i}};e.csv=t(","),e.tsv=t("	"),e.dsv=t})},{}],6:[function(t,n,r){"undefined"==typeof Map?(Map=function(){this.clear()},Map.prototype={set:function(e,t){return this._[e]=t,this},get:function(e){return this._[e]},has:function(e){return e in this._},"delete":function(e){return e in this._&&delete this._[e]},clear:function(){this._=Object.create(null)},get size(){var e=0;for(var t in this._)++e;return e},forEach:function(e){for(var t in this._)e(this._[t],t,this)}}):function(){var e=new Map;e.set(0,0)!==e&&(e=e.set,Map.prototype.set=function(){return e.apply(this,arguments),this})}(),function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.format={})}(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:0/0}function r(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1],o=a-(g=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,s=i.length;return o===s?i:o>s?i+new Array(o-s+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+t(e,n+o-1)[0]}function i(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return 0>a?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}function a(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,i=1,a=-1;r>i;++i)switch(e[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break e;default:a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(n+1):e}function o(e){return new s(e)}function s(e){if(!(t=j.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",i=t[3]||"-",a=t[4]||"",o=!!t[5],s=t[6]&&+t[6],u=!!t[7],l=t[8]&&+t[8].slice(1),c=t[9]||"";"n"===c?(u=!0,c="g"):N[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=s,this.comma=u,this.precision=l,this.type=c}function u(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),a.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function l(e){return e}function c(e){function t(e){e=o(e);var t=e.fill,n=e.align,r=e.sign,u=e.symbol,l=e.zero,c=e.width,f=e.comma,d=e.precision,h=e.type,p="$"===u?a[0]:"#"===u&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",m="$"===u?a[1]:/[%p]/.test(h)?"%":"",v=N[h],y=!h||/[defgprs%]/.test(h);return d=null==d?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),function(e){var a=p,o=m;if("c"===h)o=v(e)+o,e="";else{e=+e;var u=(0>e||0>1/e)&&(e*=-1,!0);if(e=v(e,d),a=(u?"("===r?r:"-":"-"===r||"("===r?"":r)+a,o=o+("s"===h?P[8+g/3]:"")+(u&&"("===r?")":""),y)for(var b,x=-1,w=e.length;++x<w;)if(b=e.charCodeAt(x),48>b||b>57){o=(46===b?s+e.slice(x+1):e.slice(x))+o,e=e.slice(0,x);break}}f&&!l&&(e=i(e,1/0));var _=a.length+e.length+o.length,k=c>_?new Array(c-_+1).join(t):"";switch(f&&l&&(e=i(k+e,k.length?c-o.length:1/0),k=""),n){case"<":return a+e+o+k;case"=":return a+k+e+o;case"^":return k.slice(0,_=k.length>>1)+a+e+o+k.slice(_)}return k+a+e+o}}function r(e,r){var i=t((e=o(e),e.type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),s=Math.pow(10,-a),u=P[8+a/3];return function(e){return i(s*e)+u}}var i=e.grouping&&e.thousands?u(e.grouping,e.thousands):l,a=e.currency,s=e.decimal;return{format:t,formatPrefix:r}}function f(e,t){return Math.max(0,n(Math.abs(t))-n(Math.abs(e)))+1}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function h(e){return Math.max(0,-n(Math.abs(e)))}function p(e){return"string"!=typeof e||(e=R.get(e))?c(e):null}var g,m={decimal:".",thousands:",",grouping:[3],currency:["",""]},v={decimal:",",thousands:"",grouping:[3],currency:["","."]},y={decimal:",",thousands:".",grouping:[3],currency:["R$",""]},b={decimal:",",thousands:".",grouping:[3],currency:["","z"]},x={decimal:",",thousands:".",grouping:[3],currency:["",""]},w={decimal:",",thousands:".",grouping:[3],currency:["","."]},_={decimal:".",thousands:",",grouping:[3],currency:["",""]},k={decimal:",",thousands:".",grouping:[3],currency:["",""]},$={decimal:".",thousands:",",grouping:[3],currency:["",""]},S={decimal:",",thousands:".",grouping:[3],currency:["",""]},M={decimal:",",thousands:"",grouping:[3],currency:["","$"]},T={decimal:",",thousands:"",grouping:[3],currency:["",""]},C={decimal:",",thousands:".",grouping:[3],currency:["",""]},E={decimal:".",thousands:",",grouping:[3],currency:["$",""]},A={decimal:".",thousands:",",grouping:[3],currency:["",""]},O={decimal:".",thousands:",",grouping:[3],currency:["$",""]},D={decimal:",",thousands:".",grouping:[3],currency:["",""]},L={decimal:",",thousands:".",grouping:[3],currency:["",""]},N={"":a,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return i(100*e,t)},r:i,s:r,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},j=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var P=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],R=(new Map).set("ca-ES",L).set("de-DE",D).set("en-CA",O).set("en-GB",A).set("en-US",E).set("es-ES",C).set("fi-FI",T).set("fr-CA",M).set("fr-FR",S).set("he-IL",$).set("it-IT",k).set("ja-JP",_).set("mk-MK",w).set("nl-NL",x).set("pl-PL",b).set("pt-BR",y).set("ru-RU",v).set("zh-CN",m),I=c(E);e.format=I.format,e.formatPrefix=I.formatPrefix,e.localeFormat=p,e.formatSpecifier=o,e.precisionFixed=h,e.precisionPrefix=d,e.precisionRound=f})},{}],7:[function(t,n,r){"undefined"==typeof Map?(Map=function(){this.clear()},Map.prototype={set:function(e,t){return this._[e]=t,this},get:function(e){return this._[e]},has:function(e){return e in this._},"delete":function(e){return e in this._&&delete this._[e]},clear:function(){this._=Object.create(null)},get size(){var e=0;for(var t in this._)++e;return e},forEach:function(e){for(var t in this._)e(this._[t],t,this)}}):function(){var e=new Map;e.set(0,0)!==e&&(e=e.set,Map.prototype.set=function(){return e.apply(this,arguments),this})}(),function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.timeFormat={})}(this,function(e){"use strict";function t(e,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},i.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},i.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},i.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},i.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(i.count=function(t,n){return we.setTime(+t),_e.setTime(+n),e(we),e(_e),Math.floor(r(we,_e))}),i}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}function i(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function a(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function o(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function s(e){function t(e,t){return function(n){for(var r,i,a,o=[],s=-1,u=0,l=e.length;++s<l;)37===e.charCodeAt(s)&&(o.push(e.slice(u,s)),null!=(i=Oe[r=e.charAt(++s)])&&(r=e.charAt(++s)),(a=t[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(e.slice(u,s)),o.join("")}}function n(e,t){return function(n){var i=o(1900),s=r(i,e,n,0);if(s!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"Z"in i){if("w"in i&&("W"in i||"U"in i)){var u=a(o(i.y)).getUTCDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return i.H+=i.Z/100|0,i.M+=i.Z%100,a(i)}if("w"in i&&("W"in i||"U"in i)){var u=t(o(i.y)).getDay();"W"in i&&(i.U=i.W,i.w=(i.w+6)%7,--u),i.m=0,i.d=i.w+7*i.U-(u+6)%7}return t(i)}}function r(e,t,n,r){for(var i,a,o=0,s=t.length,u=n.length;s>o;){if(r>=u)return-1;if(i=t.charCodeAt(o++),37===i){if(i=t.charAt(o++),a=Pe[i in Oe?t.charAt(o++):i],!a||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(e,t,n){var r=Te.exec(t.slice(n));return r?(e.w=Ce.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,n){var r=Se.exec(t.slice(n));return r?(e.w=Me.get(r[0].toLowerCase()),n+r[0].length):-1}function l(e,t,n){var r=De.exec(t.slice(n));return r?(e.m=Le.get(r[0].toLowerCase()),n+r[0].length):-1}function te(e,t,n){var r=Ee.exec(t.slice(n));return r?(e.m=Ae.get(r[0].toLowerCase()),n+r[0].length):-1}function ne(e,t,n){return r(e,me,t,n)}function re(e,t,n){return r(e,ve,t,n)}function ie(e,t,n){return r(e,ye,t,n)}function ae(e,t,n){var r=$e.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}function oe(e){return we[e.getDay()]}function se(e){return xe[e.getDay()]}function ue(e){return ke[e.getMonth()]}function le(e){return _e[e.getMonth()]}function ce(e){return be[+(e.getHours()>=12)]}function fe(e){return we[e.getUTCDay()]}function de(e){return xe[e.getUTCDay()]}function he(e){return ke[e.getUTCMonth()]}function pe(e){return _e[e.getUTCMonth()]}function ge(e){return be[+(e.getUTCHours()>=12)]}var me=e.dateTime,ve=e.date,ye=e.time,be=e.periods,xe=e.days,we=e.shortDays,_e=e.months,ke=e.shortMonths,$e=f(be),Se=c(xe),Me=f(xe),Te=c(we),Ce=f(we),Ee=c(_e),Ae=f(_e),De=c(ke),Le=f(ke),Ne={a:oe,A:se,b:ue,B:le,c:null,d:M,e:M,H:T,I:C,j:E,L:A,m:O,M:D,p:ce,S:L,U:N,w:j,W:P,x:null,X:null,y:R,Y:I,Z:F,"%":ee},je={a:fe,A:de,b:he,B:pe,c:null,d:U,e:U,H:z,I:q,j:H,L:B,m:Y,M:V,p:ge,S:W,U:G,w:X,W:J,x:null,X:null,y:K,Y:Z,Z:Q,"%":ee},Pe={a:s,A:u,b:l,B:te,c:ne,d:b,e:b,H:w,I:w,j:x,L:$,m:y,M:_,p:ae,S:k,U:h,w:d,W:p,x:re,X:ie,y:m,Y:g,Z:v,"%":S};return Ne.x=t(ve,Ne),Ne.X=t(ye,Ne),Ne.c=t(me,Ne),je.x=t(ve,je),je.X=t(ye,je),je.c=t(me,je),{format:function(e){var r=t(e+="",Ne);return r.parse=n(e,i),r.toString=function(){return e},r},utcFormat:function(e){var r=t(e+="",je);return r.parse=n(e,a),r.toString=function(){return e},r}}}function u(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",a=i.length;return r+(n>a?new Array(n-a+1).join(t)+i:i)}function l(e){return e.replace(Ne,"\\$&")}function c(e){return new RegExp("^(?:"+e.map(l).join("|")+")","i")}function f(e){for(var t=new Map,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function d(e,t,n){var r=De.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function h(e,t,n){var r=De.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function p(e,t,n){var r=De.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function g(e,t,n){var r=De.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function m(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function y(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function b(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function x(e,t,n){var r=De.exec(t.slice(n,n+3));

return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function w(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function k(e,t,n){var r=De.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function $(e,t,n){var r=De.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function S(e,t,n){var r=Le.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function M(e,t){return u(e.getDate(),t,2)}function T(e,t){return u(e.getHours(),t,2)}function C(e,t){return u(e.getHours()%12||12,t,2)}function E(e,t){return u(1+ke.count(Me(e),e),t,3)}function A(e,t){return u(e.getMilliseconds(),t,3)}function O(e,t){return u(e.getMonth()+1,t,2)}function D(e,t){return u(e.getMinutes(),t,2)}function L(e,t){return u(e.getSeconds(),t,2)}function N(e,t){return u($e.count(Me(e),e),t,2)}function j(e){return e.getDay()}function P(e,t){return u(Se.count(Me(e),e),t,2)}function R(e,t){return u(e.getFullYear()%100,t,2)}function I(e,t){return u(e.getFullYear()%1e4,t,4)}function F(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+u(t/60|0,"0",2)+u(t%60,"0",2)}function U(e,t){return u(e.getUTCDate(),t,2)}function z(e,t){return u(e.getUTCHours(),t,2)}function q(e,t){return u(e.getUTCHours()%12||12,t,2)}function H(e,t){return u(1+Te.count(Ae(e),e),t,3)}function B(e,t){return u(e.getUTCMilliseconds(),t,3)}function Y(e,t){return u(e.getUTCMonth()+1,t,2)}function V(e,t){return u(e.getUTCMinutes(),t,2)}function W(e,t){return u(e.getUTCSeconds(),t,2)}function G(e,t){return u(Ce.count(Ae(e),e),t,2)}function X(e){return e.getUTCDay()}function J(e,t){return u(Ee.count(Ae(e),e),t,2)}function K(e,t){return u(e.getUTCFullYear()%100,t,2)}function Z(e,t){return u(e.getUTCFullYear()%1e4,t,4)}function Q(){return"+0000"}function ee(){return"%"}function te(e){return e.toISOString()}function ne(e){return"string"!=typeof e||(e=Ie.get(e))?s(e):null}var re={dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["",""],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ie={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},ae={dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sb"],months:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},oe={dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","r.","Czw.","Pt.","Sob."],months:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Padz.","Listop.","Grudz."]},se={dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]},ue={dateTime:"%A, %e %B %Y . %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},le={dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["1","2","3","4","5","6","7","8","9","10","11","12"]},ce={dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]},fe={dateTime:"%A, %e %B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["","","","","","",""],shortDays:["","","","","","",""],months:["","","","","","","","","","","",""],shortMonths:["","","","","","","","","","","",""]},de={dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."]},he={dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],shortMonths:["jan","fv","mar","avr","mai","jui","jul","ao","sep","oct","nov","dc"]},pe={dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","keskuu","heinkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kes","Hein","Elo","Syys","Loka","Marras","Joulu"]},ge={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"],shortDays:["dom","lun","mar","mi","jue","vie","sb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},me={dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ve={dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},ye={dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},be={dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},xe={dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","mar","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","mar","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]},we=new Date,_e=new Date,ke=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5}),$e=n(0),Se=n(1),Me=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()}),Te=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5}),Ce=r(0),Ee=r(1),Ae=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),Oe={"-":"",_:" ",0:"0"},De=/^\s*\d+/,Le=/^%/,Ne=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,je="%Y-%m-%dT%H:%M:%S.%LZ";te.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},te.toString=function(){return je};var Pe=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?te:me.utcFormat(je),Re=Pe,Ie=(new Map).set("ca-ES",xe).set("de-DE",be).set("en-CA",ye).set("en-GB",ve).set("en-US",me).set("es-ES",ge).set("fi-FI",pe).set("fr-CA",he).set("fr-FR",de).set("he-IL",fe).set("it-IT",ce).set("ja-JP",le).set("mk-MK",ue).set("nl-NL",se).set("pl-PL",oe).set("pt-BR",ae).set("ru-RU",ie).set("zh-CN",re),Fe=s(me);e.format=Fe.format,e.utcFormat=Fe.utcFormat,e.localeFormat=ne,e.isoFormat=Re})},{}],8:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.time={})}(this,function(e){"use strict";function t(e,n,r){function o(t){return e(t=new Date(+t)),t}return o.floor=o,o.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},o.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},o.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},o.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},o.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(o.count=function(t,n){return a.setTime(+t),i.setTime(+n),e(a),e(i),Math.floor(r(a,i))}),o}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3});e.seconds=o.range;var s=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4});e.minutes=s.range;var u=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5});e.hours=u.range;var l=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5});e.days=l.range,e.sunday=n(0),e.sundays=e.sunday.range,e.monday=n(1),e.mondays=e.monday.range,e.tuesday=n(2),e.tuesdays=e.tuesday.range,e.wednesday=n(3),e.wednesdays=e.wednesday.range,e.thursday=n(4),e.thursdays=e.thursday.range,e.friday=n(5),e.fridays=e.friday.range,e.saturday=n(6),e.saturdays=e.saturday.range;var c=e.sunday;e.weeks=c.range;var f=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())});e.months=f.range;var d=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()});e.years=d.range;var h=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3});e.utcSeconds=h.range;var p=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4});e.utcMinutes=p.range;var g=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5});e.utcHours=g.range;var m=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5});e.utcDays=m.range,e.utcSunday=r(0),e.utcSundays=e.utcSunday.range,e.utcMonday=r(1),e.utcMondays=e.utcMonday.range,e.utcTuesday=r(2),e.utcTuesdays=e.utcTuesday.range,e.utcWednesday=r(3),e.utcWednesdays=e.utcWednesday.range,e.utcThursday=r(4),e.utcThursdays=e.utcThursday.range,e.utcFriday=r(5),e.utcFridays=e.utcFriday.range,e.utcSaturday=r(6),e.utcSaturdays=e.utcSaturday.range;var v=e.utcSunday;e.utcWeeks=v.range;var y=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())});e.utcMonths=y.range;var b=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()});e.utcYears=b.range,e.interval=t,e.second=o,e.minute=s,e.hour=u,e.day=l,e.week=c,e.month=f,e.year=d,e.utcSecond=h,e.utcMinute=p,e.utcHour=g,e.utcDay=m,e.utcWeek=v,e.utcMonth=y,e.utcYear=b})},{}],9:[function(e,t,n){function r(){this._cells={},this._aggr=[],this._stream=!1}function i(e){if(a.isArray(e))return e;if(null==e)return[];var t,n,r=[];for(t in e)n=a.array(e[t]),r.push({name:t,ops:n});return r}var a=e("../util"),o=e("./measures"),s=e("./collector"),u=r.Flags={ADD_CELL:1,MOD_CELL:2},l=r.prototype;l.stream=function(e){return null==e?this._stream:(this._stream=!!e,this._aggr=[],this)},l.key=function(e){return null==e?this._key:(this._key=a.$(e),this)},l.groupby=function(e){return this._dims=a.array(e).map(function(e,t){if(e=a.isString(e)?{name:e,get:a.$(e)}:a.isFunction(e)?{name:a.name(e)||e.name||"_"+t,get:e}:e.name&&a.isFunction(e.get)?e:null,null==e)throw"Invalid groupby argument: "+e;return e}),this.clear()},l.summarize=function(e){e=i(e),this._count=!0;var t,n,r,s,u,l,c,f=this._aggr=[];for(r=0;r<e.length;++r){for(s=0,t=[],n=e[r];s<n.ops.length;++s)u=n.ops[s],"count"!==u&&(this._count=!1),l=n.as&&n.as[s]||u+("*"===n.name?"":"_"+n.name),t.push(o[u](l));c=n.get&&a.$(n.get)||("*"===n.name?a.identity:a.$(n.name)),f.push({name:n.name,measures:o.create(t,this._stream,c,this._assign)})}return this.clear()},l.count=function(){return this.summarize({"*":"count"})},l._assign=function(e,t,n){e[t]=n},l.clear=function(){return this._cells={},this},l._cellkey=function(e){var t,n=this._dims,r=n.length,i=String(n[0].get(e));for(t=1;r>t;++t)i+="|"+n[t].get(e);return i},l._cell=function(e){var t=this._dims.length?this._cellkey(e):"";return this._cells[t]||(this._cells[t]=this._newcell(e,t))},l._newcell=function(e,t){var n,r={num:0,tuple:this._newtuple(e,t),flag:u.ADD_CELL,aggs:{}},i=this._aggr;for(n=0;n<i.length;++n)r.aggs[i[n].name]=new i[n].measures(r,r.tuple);return r.collect&&(r.data=new s(this._key)),r},l._newtuple=function(e){var t,n,r=this._dims,i={};for(t=0,n=r.length;n>t;++t)i[r[t].name]=r[t].get(e);return this._ingest(i)},l._ingest=a.identity,l._add=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num+=1,!this._count)for(n.collect&&n.data.add(e),t=0;t<r.length;++t)n.aggs[r[t].name].add(e);n.flag|=u.MOD_CELL,this._on_add&&this._on_add(e,n)},l._rem=function(e){var t,n=this._cell(e),r=this._aggr;if(n.num-=1,!this._count)for(n.collect&&n.data.rem(e),t=0;t<r.length;++t)n.aggs[r[t].name].rem(e);n.flag|=u.MOD_CELL,this._on_rem&&this._on_rem(e,n)},l._mod=function(e,t){var n,r=this._cell(t),i=this._cell(e),o=this._aggr;for(r!==i?(r.num-=1,i.num+=1,r.collect&&r.data.rem(t),i.collect&&i.data.add(e)):r.collect&&!a.isObject(e)&&(r.data.rem(t),r.data.add(e)),n=0;n<o.length;++n)r.aggs[o[n].name].rem(t),i.aggs[o[n].name].add(e);r.flag|=u.MOD_CELL,i.flag|=u.MOD_CELL,this._on_mod&&this._on_mod(e,t,r,i)},l.result=function(){var e,t,n,r=[],i=this._aggr;for(n in this._cells){if(e=this._cells[n],e.num>0){for(e.collect&&e.data.values(),t=0;t<i.length;++t)e.aggs[i[t].name].set();r.push(e.tuple)}else delete this._cells[n];e.flag=0}return this._rems=!1,r},l.changes=function(e){var t,n,r,i,a=e||{add:[],rem:[],mod:[]},o=this._aggr;for(i in this._cells){for(t=this._cells[i],n=t.flag,t.collect&&t.data.values(),r=0;r<o.length;++r)t.aggs[o[r].name].set();t.num<=0?(a.rem.push(t.tuple),delete this._cells[i],this._on_drop&&this._on_drop(t)):(this._on_keep&&this._on_keep(t),n&u.ADD_CELL?a.add.push(t.tuple):n&u.MOD_CELL&&a.mod.push(t.tuple)),t.flag=0}return this._rems=!1,a},l.execute=function(e){return this.clear().insert(e).result()},l.insert=function(e){this._consolidate();for(var t=0;t<e.length;++t)this._add(e[t]);return this},l.remove=function(e){if(!this._stream)throw"Aggregator not configured for streaming removes. Call stream(true) prior to calling summarize.";for(var t=0;t<e.length;++t)this._rem(e[t]);return this._rems=!0,this},l._consolidate=function(){if(this._rems){for(var e in this._cells)this._cells[e].collect&&this._cells[e].data.values();this._rems=!1}},t.exports=r},{"../util":31,"./collector":10,"./measures":12}],10:[function(e,t,n){function r(e){this._add=[],this._rem=[],this._key=e||null,this._last=null}var i=e("../util"),a=e("../stats"),o="__dl_rem__",s=r.prototype;s.add=function(e){this._add.push(e)},s.rem=function(e){this._rem.push(e)},s.values=function(){if(this._get=null,0===this._rem.length)return this._add;var e,t,n,r,s=this._add,u=this._rem,l=this._key,c=Array(s.length-u.length);if(i.isObject(u[0]))if(l)for(r=i.toMap(u,l),e=0,t=0,n=s.length;n>e;++e)r.hasOwnProperty(l(s[e]))||(c[t++]=s[e]);else{for(e=0,n=u.length;n>e;++e)u[e][o]=1;for(e=0,t=0,n=s.length;n>e;++e)s[e][o]||(c[t++]=s[e]);for(e=0,n=u.length;n>e;++e)delete u[e][o]}else for(r=a.count.map(u),e=0,t=0,n=s.length;n>e;++e)r[s[e]]>0?r[s[e]]-=1:c[t++]=s[e];return this._rem=[],this._add=c},s.extent=function(e){if(this._get!==e||!this._ext){var t=this.values(),n=a.extent.index(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},s.argmin=function(e){return this.extent(e)[0]},s.argmax=function(e){return this.extent(e)[1]},s.min=function(e){var t=this.extent(e)[0];return t?e(t):+(1/0)},s.max=function(e){var t=this.extent(e)[1];return t?e(t):-(1/0)},s.quartile=function(e){return this._get===e&&this._q||(this._q=a.quartile(this.values(),e),this._get=e),this._q},s.q1=function(e){return this.quartile(e)[0]},s.q2=function(e){return this.quartile(e)[1]},s.q3=function(e){return this.quartile(e)[2]},t.exports=r},{"../stats":28,"../util":31}],11:[function(e,t,n){var r=e("../util"),i=e("./aggregator");t.exports=function(){var e=[].reduce.call(arguments,function(e,t){return e.concat(r.array(t))},[]);return(new i).groupby(e).summarize({"*":"values"})}},{"../util":31,"./aggregator":9}],12:[function(e,t,n){function r(e){return function(t){var n=o.extend({init:"",add:"",rem:"",idx:0},e);return n.out=t||e.name,n}}function i(e,t){function n(e,r){function i(t){e[t]||n(e,e[t]=s[t]())}return r.req&&r.req.forEach(i),t&&r.str&&r.str.forEach(i),e}var r=e.reduce(n,e.reduce(function(e,t){return e[t.name]=t,e},{}));return o.vals(r).sort(function(e,t){return e.idx-t.idx})}function a(t,n,r,a){var s=i(t,n),u="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",l="if (v==null) this.missing++; if (!this.isValid(v)) return; ++this.valid;",c="if (v==null) this.missing--; if (!this.isValid(v)) return; --this.valid;",f="var t = this.tuple; var cell = this.cell;";return s.forEach(function(e){e.idx<0?(u=e.init+u,l=e.add+l,c=e.rem+c):(u+=e.init,l+=e.add,c+=e.rem)}),t.slice().sort(function(e,t){return e.idx-t.idx}).forEach(function(e){f+="this.assign(t,'"+e.out+"',"+e.set+");"}),f+="return t;",u=Function("cell","t",u),u.prototype.assign=a,u.prototype.add=Function("t","var v = this.get(t);"+l),u.prototype.rem=Function("t","var v = this.get(t);"+c),u.prototype.set=Function(f),u.prototype.get=r,u.prototype.distinct=e("../stats").count.distinct,u.prototype.isValid=o.isValid,u.fields=t.map(o.$("out")),u}var o=e("../util"),s={values:r({name:"values",init:"cell.collect = true;",set:"cell.data.values()",idx:-1}),count:r({name:"count",set:"cell.num"}),missing:r({name:"missing",set:"this.missing"}),valid:r({name:"valid",set:"this.valid"}),sum:r({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:r({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:r({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:r({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:r({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:r({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:r({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),median:r({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:r({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:r({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),distinct:r({name:"distinct",set:"this.distinct(cell.data.values(), this.get)",req:["values"],idx:3}),argmin:r({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin = this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:r({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax = this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:r({name:"min",init:"this.min = +Infinity;",add:"if (v < this.min) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:r({name:"max",init:"this.max = -Infinity;",add:"if (v > this.max) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4}),modeskew:r({name:"modeskew",set:"this.dev===0 ? 0 : (this.mean - cell.data.q2(this.get)) / Math.sqrt(this.dev/(this.valid-1))",req:["mean","stdev","median"],idx:5})};s.create=a,t.exports=s},{"../stats":28,"../util":31}],13:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,u,l,c,f=e.maxbins||15,d=e.base||10,h=Math.log(d),p=e.div||[5,2],g=e.min,m=e.max,v=m-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,v/f,0,e.steps.length))];else{n=Math.ceil(Math.log(f)/h),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(v)/h)-n));do t*=d;while(Math.ceil(v/t)>f);for(l=0;l<p.length;++l)u=t/p[l],u>=r&&f>=v/u&&(t=u)}return u=Math.log(t),s=u>=0?0:~~(-u/h)+1,c=Math.pow(d,-s-1),g=Math.min(g,Math.floor(g/t+c)*t),m=Math.ceil(m/t)*t,{start:g,stop:m,step:t,unit:{precision:s},value:a,index:o}}function i(e,t,n,r){for(;r>n;){var i=n+r>>>1;l.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(a.call(this,e))}function u(e){return o.call(this,this.unit.unit(e))}var l=e("../util"),c=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?c.utc:c,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,l=+i-+n,f=e.unit?t[e.unit]:t.find(l,o,a),d=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return d.unit=f,d.index=u,e.raw||(d.value=s),d},t.exports=r},{"../time":30,"../util":31}],14:[function(e,t,n){function r(e,t,n){n=o(e,t,n);var r=a(n);return r?d.$func("bin",r.unit.unit?function(e){return r.value(r.unit.unit(e))}:function(e){return r.value(e)})(n.accessor):n.accessor||d.identity}function i(e,t,n){n=o(e,t,n);var r=a(n);return r?s(e,n.accessor,r):u(e,n.accessor,n&&n.sort)}function a(e){var t=e.type,n=null;return(null==t||p[t])&&("integer"===t&&null==e.minstep&&(e.minstep=1),n="date"===t?l.date(e):l(e)),n}function o(){var e=arguments,t=0,n=d.isArray(e[t])?e[t++]:null,r=d.isFunction(e[t])||d.isString(e[t])?d.$(e[t++]):null,i=d.extend({},e[t]);if(n&&(i.type=i.type||f(n,r),p[i.type])){var a=h.extent(n,r);i=d.extend({min:a[0],max:a[1]},i)}return r&&(i.accessor=r),i}function s(e,t,n){for(var r,i,a=c.range(n.start,n.stop+n.step/2,n.step).map(function(e){return{value:n.value(e),count:0}}),o=0;o<e.length;++o)if(r=t?t(e[o]):e[o],d.isValid(r)){if(i=n.index(r),0>i||i>=a.length||!isFinite(i))continue;a[i].count+=1}return a.bins=n,a}function u(e,t,n){var r=h.unique(e,t),i=h.count.map(e,t);return r.map(function(e){return{value:e,count:i[e]}}).sort(d.comparator(n?"-count":"+value"))}var l=e("./bins"),c=e("../generate"),f=e("../import/type"),d=e("../util"),h=e("../stats"),p={integer:1,number:1,date:1};t.exports={$bin:r,histogram:i}},{"../generate":16,"../import/type":25,"../stats":28,"../util":31,"./bins":13}],15:[function(e,t,n){function r(e){var t=f.localeFormat(e);if(null==t)throw Error("Unrecognized locale: "+e);d=t}function i(e){var t=c.localeFormat(e);if(null==t)throw Error("Unrecognized locale: "+e);h=t}function a(e,t){e.length||(e=[0]),null==t&&(t=10);var n=e[0],r=e[e.length-1];n>r&&(o=r,r=n,n=o);var i=r-n||(t=1,n||r||1),a=Math.pow(10,Math.floor(Math.log(i/t)/Math.LN10)),o=i/t/a;return o>=p?a*=10:o>=g?a*=5:o>=m&&(a*=2),[Math.ceil(n/a)*a,Math.floor(r/a)*a+a/2,a]}function o(e,t,n){var r=a(e,t);if(null==n)n=",."+f.precisionFixed(r[2])+"f";else switch(n=f.formatSpecifier(n),n.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==n.precision&&(n.precision=f.precisionPrefix(r[2],i)),d.formatPrefix(n,i);case"":case"e":case"g":case"p":case"r":null==n.precision&&(n.precision=f.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===n.type));break;case"f":case"%":null==n.precision&&(n.precision=f.precisionFixed(r[2])-2*("%"===n.type))}return d.format(n)}function s(){var e=h.format,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var c=+e;return(l.second(e)<c?t:l.minute(e)<c?n:l.hour(e)<c?r:l.day(e)<c?i:l.month(e)<c?l.week(e)<c?a:o:l.year(e)<c?s:u)(e)}}function u(){var e=h.utcFormat,t=e(".%L"),n=e(":%S"),r=e("%I:%M"),i=e("%I %p"),a=e("%a %d"),o=e("%b %d"),s=e("%B"),u=e("%Y");return function(e){var c=+e;return(l.utcSecond(e)<c?t:l.utcMinute(e)<c?n:l.utcHour(e)<c?r:l.utcDay(e)<c?i:l.utcMonth(e)<c?l.utcWeek(e)<c?a:o:l.utcYear(e)<c?s:u)(e)}}var l=e("d3-time"),c=e("d3-time-format"),f=e("d3-format"),d=f,h=c;t.exports={numberLocale:r,number:function(e){return d.format(e)},numberPrefix:function(e,t){return d.formatPrefix(e,t)},timeLocale:i,time:function(e){return h.format(e)},utc:function(e){return h.utcFormat(e)},locale:function(e){r(e),i(e)},auto:{number:o,time:function(){return s()},utc:function(){return u()}}};var p=Math.sqrt(50),g=Math.sqrt(10),m=Math.sqrt(2)},{"d3-format":6,"d3-time":8,"d3-time-format":7}],16:[function(e,t,n){var r=t.exports={};r.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},r.zeros=function(e){return r.repeat(0,e)},r.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(0>n)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},r.random={},r.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,i=function(){return e+n*Math.random()};return i.samples=function(e){return r.zeros(e).map(i)},i},r.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,i=function(){return e+Math.floor(n*Math.random())};return i.samples=function(e){return r.zeros(e).map(i)},i},r.random.normal=function(e,t){e=e||0,t=t||1;var n,i=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return i.samples=function(e){return r.zeros(e).map(i)},i}},{}],17:[function(e,t,n){function r(e,t){if(e){var n=t.header;e=(n?n.join(t.delimiter)+"\n":"")+e}return a.dsv(t.delimiter).parse(e)}var i=e("../../util"),a=e("d3-dsv");r.delimiter=function(e){var t={delimiter:e};return function(e,n){return r(e,n?i.extend(n,t):t)}},t.exports=r},{"../../util":31,"d3-dsv":5}],18:[function(e,t,n){var r=e("./dsv");t.exports={json:e("./json"),topojson:e("./topojson"),treejson:e("./treejson"),dsv:r,csv:r.delimiter(","),tsv:r.delimiter("	")}},{"./dsv":17,"./json":19,"./topojson":20,"./treejson":21}],19:[function(e,t,n){var r=e("../../util");t.exports=function(e,t){var n=r.isObject(e)&&!r.isBuffer(e)?e:JSON.parse(e);return t&&t.property&&(n=r.accessor(t.property)(n)),n}},{"../../util":31}],20:[function(e,t,n){(function(n){var r=e("./json"),i=function(e,t){var n=i.topojson;if(null==n)throw Error("TopoJSON library not loaded.");var a,o=r(e,t);if(t&&t.feature){if(a=o.objects[t.feature])return n.feature(o,a).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(a=o.objects[t.mesh])return[n.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};i.topojson="undefined"!=typeof window?window.topojson:"undefined"!=typeof n?n.topojson:null,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./json":19}],21:[function(e,t,n){function r(e,t){function n(e){r.push(e);var i=e[t];if(i)for(var a=0;a<i.length;++a)n(i[a],e)}t=t||"children";var r=[];return n(e,null),r.root=e,r}var i=e("./json");t.exports=function(e,t){return e=i(e,t),r(e,t&&t.children)}},{"./json":19}],22:[function(e,t,n){function r(t){var n=t.url;if(!n&&t.file)return f+t.file;if(t.baseURL&&!c.test(n)&&(l(n,"/")||"/"===t.baseURL[t.baseURL.length-1]||(n="/"+n),n=t.baseURL+n),!i.useXHR&&l(n,"//")&&(n=(t.defaultProtocol||"http")+":"+n),t.domainWhiteList){var r,a;if(i.useXHR){var o=document.createElement("a");o.href=n,""===o.host&&(o.href=o.href),
r=o.hostname.toLowerCase(),a=window.location.hostname}else{var s=e("url").parse(n);r=s.hostname,a=null}if(a!==r){var u=t.domainWhiteList.some(function(e){var t=r.length-e.length;return e===r||t>1&&"."===r[t-1]&&r.lastIndexOf(e)===t});if(!u)throw"URL is not whitelisted: "+n}}return n}function i(e,t){var n,r=t||function(e){throw e};try{n=i.sanitizeUrl(e)}catch(a){return void r(a)}return n?i.useXHR?o(n,t):l(n,f)?s(n.slice(f.length),t):n.indexOf("://")<0?s(n,t):u(n,t):void r("Invalid URL: "+e.url)}function a(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function o(e,t){function n(){var e=i.status;!e&&a(i)||e>=200&&300>e||304===e?t(null,i.responseText):t(i,null)}var r=!!t,i=new XMLHttpRequest;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(e)||(i=new XDomainRequest),r&&("onload"in i?i.onload=i.onerror=n:i.onreadystatechange=function(){i.readyState>3&&n()}),i.open("GET",e,r),i.send(),!r&&a(i)?i.responseText:void 0}function s(t,n){var r=e("fs");return n?void r.readFile(t,n):r.readFileSync(t,"utf8")}function u(t,n){if(!n)return e("sync-request")("GET",t).getBody();var r={url:t,encoding:null,gzip:!0};e("request")(r,function(e,t,r){e||200!==t.statusCode?(e=e||"Load failed with response code "+t.statusCode+".",n(e,null)):n(null,r)})}function l(e,t){return null==e?!1:0===e.lastIndexOf(t,0)}var c=/^([A-Za-z]+:)?\/\//,f="file://";i.sanitizeUrl=r,i.useXHR="undefined"!=typeof XMLHttpRequest,t.exports=i},{fs:2,request:2,"sync-request":2,url:2}],23:[function(e,t,n){function r(e,t){var n=t&&t.type||"json";return e=s[n](e,t),t&&t.parse&&i(e,t.parse),e}function i(e,t){var n,r,i,s,u,l,c=e.length;for(t="auto"===t?o.inferAll(e):a.duplicate(t),n=a.keys(t),r=n.map(function(e){return o.parsers[t[e]]}),s=0,l=n.length;c>s;++s)for(i=e[s],u=0;l>u;++u)i[n[u]]=r[u](i[n[u]]);o.annotation(e,t)}var a=e("../util"),o=e("./type"),s=e("./formats");r.formats=s,t.exports=r},{"../util":31,"./formats":18,"./type":25}],24:[function(e,t,n){var r=e("../util"),i=e("./load"),a=e("./read");t.exports=r.keys(a.formats).reduce(function(e,t){return e[t]=function(e,n,o){r.isString(e)&&(e={url:e}),2===arguments.length&&r.isFunction(n)&&(o=n,n=void 0),n=r.extend({parse:"auto"},n),n.type=t;var s=i(e,o?function(e,t){if(e)return void o(e,null);try{t=a(t,n),o(null,t)}catch(r){o(r,null)}}:void 0);return o?void 0:a(s,n)},e},{})},{"../util":31,"./load":22,"./read":23}],25:[function(e,t,n){function r(e,t){return t?void(e[l]=t):e&&e[l]||null}function i(e,t){t=u.$(t);var n,r,i;if(e[l]&&(n=t(e[l]),u.isString(n)))return n;for(r=0,i=e.length;!u.isValid(n)&&i>r;++r)n=t?t(e[r]):e[r];return u.isDate(n)?"date":u.isNumber(n)?"number":u.isBoolean(n)?"boolean":u.isString(n)?"string":null}function a(e,t){return e.length?(t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=i(e,n),t},{})):void 0}function o(e,t){t=u.$(t);var n,r,i,a=["boolean","integer","number","date"];for(n=0;n<e.length;++n){for(i=t?t(e[n]):e[n],r=0;r<a.length;++r)u.isValid(i)&&!f[a[r]](i)&&(a.splice(r,1),r-=1);if(0===a.length)return"string"}return a[0]}function s(e,t){return t=t||u.keys(e[0]),t.reduce(function(t,n){return t[n]=o(e,n),t},{})}var u=e("../util"),l="__types__",c={"boolean":u["boolean"],integer:u.number,number:u.number,date:u.date,string:function(e){return""===e?null:e}},f={"boolean":function(e){return"true"===e||"false"===e||u.isBoolean(e)},integer:function(e){return f.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)&&!u.isDate(e)},date:function(e){return!isNaN(Date.parse(e))}};i.annotation=r,i.all=a,i.infer=o,i.inferAll=s,i.parsers=c,t.exports=i},{"../util":31}],26:[function(e,t,n){var r=e("./util"),i={version:"2.3.1",load:e("./import/load"),read:e("./import/read"),type:e("./import/type"),Aggregator:e("./aggregate/aggregator"),groupby:e("./aggregate/groupby"),bins:e("./bins/bins"),$bin:e("./bins/histogram").$bin,histogram:e("./bins/histogram").histogram,format:e("./format"),print:e("./print"),template:e("./template"),time:e("./time")};r.extend(i,r),r.extend(i,e("./generate")),r.extend(i,e("./stats")),r.extend(i,e("./import/readers")),t.exports=i},{"./aggregate/aggregator":9,"./aggregate/groupby":11,"./bins/bins":13,"./bins/histogram":14,"./format":15,"./generate":16,"./import/load":22,"./import/read":23,"./import/readers":24,"./import/type":25,"./print":27,"./stats":28,"./template":29,"./time":30,"./util":31}],27:[function(e,t,n){function r(e){return["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"min:      "+e.min,"max:      "+e.max,"median:   "+e.median,"mean:     "+e.mean,"stdev:    "+e.stdev,"modeskew: "+e.modeskew].join("\n")}function i(e){var t=["valid:    "+e.valid,"missing:  "+e.missing,"distinct: "+e.distinct,"top values: "],n=e.unique,r=a.keys(n).sort(function(e,t){return n[t]-n[e]}).slice(0,6).map(function(e){return" '"+e+"' ("+n[e]+")"});return t.concat(r).join("\n")}var a=e("./util"),o=e("./import/type"),s=e("./stats"),u=e("./template"),l={date:'|time:"%m/%d/%Y %H:%M:%S"',number:'|number:".4f"',integer:'|number:"d"'},c={number:"left",integer:"left"};t.exports.table=function(e,t){t=a.extend({separator:" ",minwidth:8,maxwidth:15},t);var n=t.fields||a.keys(e[0]),r=o.all(e);if(t.start||t.limit){var i=t.start||0,f=t.limit?i+t.limit:e.length;e=e.slice(i,f)}var d=n.map(function(n){var i=l[r[n]]||"",a=u("{{"+n+i+"}}"),o=s.max(e,function(e){return a(e).length});return o=Math.max(Math.min(n.length,t.minwidth),o),t.maxwidth>0?Math.min(o,t.maxwidth):o}),h=n.map(function(e,t){return a.truncate(a.pad(e,d[t],"center"),d[t])}).join(t.separator),p=u(n.map(function(e,t){return"{{"+e+(l[r[e]]||"")+("|pad:"+d[t]+","+(c[r[e]]||"right"))+("|truncate:"+d[t])+"}}"}).join(t.separator));return h+"\n"+e.map(p).join("\n")},t.exports.summary=function(e){e=e?e.__summary__?e:s.summary(e):this;var t,n,a=[];for(t=0,n=e.length;n>t;++t)a.push("-- "+e[t].field+" --"),a.push("string"===e[t].type||e[t].distinct<10?i(e[t]):r(e[t])),a.push("");return a.join("\n")}},{"./import/type":25,"./stats":28,"./template":29,"./util":31}],28:[function(e,t,n){var r=e("./util"),i=e("./import/type"),a=e("./generate"),o={};o.unique=function(e,t,n){t=r.$(t),n=n||[];var i,a,o,s={};for(a=0,o=e.length;o>a;++a)i=t?t(e[a]):e[a],i in s||(s[i]=1,n.push(i));return n},o.count=function(e){return e&&e.length||0},o.count.valid=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],r.isValid(n)&&(o+=1);return o},o.count.missing=function(e,t){t=r.$(t);var n,i,a,o=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],null==n&&(o+=1);return o},o.count.distinct=function(e,t){t=r.$(t);var n,i,a,o={},s=0;for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],n in o||(o[n]=1,s+=1);return s},o.count.map=function(e,t){t=r.$(t);var n,i,a,o={};for(i=0,a=e.length;a>i;++i)n=t?t(e[i]):e[i],o[n]=n in o?o[n]+1:1;return o},o.median=function(e,t){return t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp),o.quantile(e,.5)},o.quartile=function(e,t){t&&(e=e.map(r.$(t))),e=e.filter(r.isValid).sort(r.cmp);var n=o.quantile;return[n(e,.25),n(e,.5),n(e,.75)]},o.quantile=function(e,t,n){void 0===n&&(n=t,t=r.identity),t=r.$(t);var i=(e.length-1)*n+1,a=Math.floor(i),o=+t(e[a-1]),s=i-a;return s?o+s*(t(e[a])-o):o},o.sum=function(e,t){t=r.$(t);for(var n,i=0,a=0,o=e.length;o>a;++a)n=t?t(e[a]):e[a],r.isValid(n)&&(i+=n);return i},o.mean=function(e,t){t=r.$(t);var n,i,a,o,s,u=0;for(i=0,o=0,a=e.length;a>i;++i)s=t?t(e[i]):e[i],r.isValid(s)&&(n=s-u,u+=n/++o);return u},o.variance=function(e,t){if(t=r.$(t),!r.isArray(e)||e.length<2)return 0;var n,i,a,o,s=0,u=0;for(i=0,a=0;i<e.length;++i)o=t?t(e[i]):e[i],r.isValid(o)&&(n=o-s,s+=n/++a,u+=n*(o-s));return u/=a-1},o.stdev=function(e,t){return Math.sqrt(o.variance(e,t))},o.modeskew=function(e,t){var n=o.mean(e,t),r=o.median(e,t),i=o.stdev(e,t);return 0===i?0:(n-r)/i},o.min=function(e,t){return o.extent(e,t)[0]},o.max=function(e,t){return o.extent(e,t)[1]},o.extent=function(e,t){t=r.$(t);var n,i,a,o,s=e.length;for(o=0;s>o;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a;break}for(;s>o;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(n>a&&(n=a),a>i&&(i=a));return[n,i]},o.extent.index=function(e,t){t=r.$(t);var n,i,a,o,s=-1,u=-1,l=e.length;for(o=0;l>o;++o)if(a=t?t(e[o]):e[o],r.isValid(a)){n=i=a,s=u=o;break}for(;l>o;++o)a=t?t(e[o]):e[o],r.isValid(a)&&(n>a&&(n=a,s=o),a>i&&(i=a,u=o));return[s,u]},o.dot=function(e,t,n){var i,a,o=0;if(n)for(t=r.$(t),n=r.$(n),i=0;i<e.length;++i)a=t(e[i])*n(e[i]),a===a&&(o+=a);else{if(e.length!==t.length)throw Error("Array lengths must match.");for(i=0;i<e.length;++i)a=e[i]*t[i],a===a&&(o+=a)}return o},o.rank=function(e,t){t=r.$(t)||r.identity;var n,i,a,o=e.map(function(e,n){return{idx:n,val:t(e)}}).sort(r.comparator("val")),s=e.length,u=Array(s),l=-1,c={};for(n=0;s>n;++n){if(i=o[n].val,0>l&&c===i)l=n-1;else if(l>-1&&c!==i){for(a=1+(n-1+l)/2;n>l;++l)u[o[l].idx]=a;l=-1}u[o[n].idx]=n+1,c=i}if(l>-1)for(a=1+(s-1+l)/2;s>l;++l)u[o[l].idx]=a;return u},o.cor=function(e,t,n){var i=n;n=i?e.map(r.$(n)):t,t=i?e.map(r.$(t)):e;var a=o.dot(t,n),s=o.mean(t),u=o.mean(n),l=o.stdev(t),c=o.stdev(n),f=e.length;return(a-f*s*u)/((f-1)*l*c)},o.cor.rank=function(e,t,n){var i,a,s,u=n?o.rank(e,r.$(t)):o.rank(e),l=n?o.rank(e,r.$(n)):o.rank(t),c=e.length;for(i=0,a=0;c>i;++i)s=u[i]-l[i],a+=s*s;return 1-6*a/(c*(c*c-1))},o.cor.dist=function(e,t,n){var i,a,s,u,l=n?e.map(r.$(t)):e,c=n?e.map(r.$(n)):t,f=o.dist.mat(l),d=o.dist.mat(c),h=f.length;for(i=0,a=0,s=0,u=0;h>i;++i)a+=f[i]*f[i],s+=d[i]*d[i],u+=f[i]*d[i];return Math.sqrt(u/Math.sqrt(a*s))},o.dist=function(e,t,n,i){var a,o,s=r.isFunction(n)||r.isString(n),u=e,l=s?e:t,c=s?i:n,f=2===c||null==c,d=e.length,h=0;for(s&&(t=r.$(t),n=r.$(n)),o=0;d>o;++o)a=s?t(u[o])-n(l[o]):u[o]-l[o],h+=f?a*a:Math.pow(Math.abs(a),c);return f?Math.sqrt(h):Math.pow(h,1/c)},o.dist.mat=function(e){var t,n,r,i=e.length,o=i*i,s=Array(o),u=a.zeros(i),l=0;for(n=0;i>n;++n)for(s[n*i+n]=0,r=n+1;i>r;++r)s[n*i+r]=t=Math.abs(e[n]-e[r]),s[r*i+n]=t,u[n]+=t,u[r]+=t;for(n=0;i>n;++n)l+=u[n],u[n]/=i;for(l/=o,n=0;i>n;++n)for(r=n;i>r;++r)s[n*i+r]+=l-u[n]-u[r],s[r*i+n]=s[n*i+r];return s},o.entropy=function(e,t){t=r.$(t);var n,i,a=0,o=0,s=e.length;for(n=0;s>n;++n)a+=t?t(e[n]):e[n];if(0===a)return 0;for(n=0;s>n;++n)i=(t?t(e[n]):e[n])/a,i&&(o+=i*Math.log(i));return-o/Math.LN2},o.mutual=function(e,t,n,i){var a,o,s,u=i?e.map(r.$(t)):e,l=i?e.map(r.$(n)):t,c=i?e.map(r.$(i)):n,f={},d={},h=c.length,p=0,g=0,m=0;for(s=0;h>s;++s)f[u[s]]=0,d[l[s]]=0;for(s=0;h>s;++s)f[u[s]]+=c[s],d[l[s]]+=c[s],p+=c[s];for(o=1/(p*Math.LN2),s=0;h>s;++s)0!==c[s]&&(a=p*c[s]/(f[u[s]]*d[l[s]]),g+=c[s]*o*Math.log(a),m+=c[s]*o*Math.log(c[s]/p));return[g,1+g/m]},o.mutual.info=function(e,t,n,r){return o.mutual(e,t,n,r)[0]},o.mutual.dist=function(e,t,n,r){return o.mutual(e,t,n,r)[1]},o.profile=function(e,t){var n,a,s,u,l,c=0,f=0,d=0,h=0,p=null,g=null,m=0,v=[],y={};for(s=0;s<e.length;++s)u=t?t(e[s]):e[s],y[u]=u in y?y[u]+1:(h+=1,1),null==u?++d:r.isValid(u)&&(l="string"==typeof u?u.length:u,(null===p||p>l)&&(p=l),(null===g||l>g)&&(g=l),n=l-c,c+=n/++f,m+=n*(l-c),v.push(l));return m/=f-1,a=Math.sqrt(m),v.sort(r.cmp),{type:i(e,t),unique:y,count:e.length,valid:f,missing:d,distinct:h,min:p,max:g,mean:c,stdev:a,median:u=o.quantile(v,.5),q1:o.quantile(v,.25),q3:o.quantile(v,.75),modeskew:0===a?0:(c-u)/a}},o.summary=function(e,t){t=t||r.keys(e[0]);var n=t.map(function(t){var n=o.profile(e,r.$(t));return n.field=t,n});return n.__summary__=!0,n},t.exports=o},{"./generate":16,"./import/type":25,"./util":31}],29:[function(e,t,n){function r(e){var t=i(e,"d");return t="var __t; return "+t+";",new Function("d",t).bind(c)}function i(e,t,n){t=t||"obj";var r=0,i="'",s=f;return e.replace(s,function(s,u,l){return i+=e.slice(r,l).replace(g,o),r=l+s.length,u&&(i+="'\n+((__t=("+a(u,t,n)+"))==null?'':__t)+\n'"),s}),i+"'"}function a(e,t,n){function i(e){return e=e||"",g?(g=!1,m="String("+m+")"+e):m+=e,m}function a(){return"(typeof "+m+'==="number"?new Date('+m+"):"+m+")"}function o(e,t){b=s(_[0],t,e),g=!1,m="this.formats["+b+"]("+m+")"}function c(e,t){b=s(_[0],t,e),g=!1,m="this.formats["+b+"]("+a()+")"}var f=e.match(d),p=f.shift().trim(),g=!0;n&&(n[p]=1);for(var m=r.property(t,p),v=0;v<f.length;++v){var y,b,x,w=f[v],_=null;switch((y=w.indexOf(":"))>0&&(w=w.slice(0,y),_=f[v].slice(y+1).match(h).map(function(e){return e.trim()})),w=w.trim()){case"length":i(".length");break;case"lower":i(".toLowerCase()");break;case"upper":i(".toUpperCase()");break;case"lower-locale":i(".toLocaleLowerCase()");break;case"upper-locale":i(".toLocaleUpperCase()");break;case"trim":i(".trim()");break;case"left":b=u.number(_[0]),i(".slice(0,"+b+")");break;case"right":b=u.number(_[0]),i(".slice(-"+b+")");break;case"mid":b=u.number(_[0]),x=b+u.number(_[1]),i(".slice(+"+b+","+x+")");break;case"slice":b=u.number(_[0]),i(".slice("+b+(_.length>1?","+u.number(_[1]):"")+")");break;case"truncate":b=u.number(_[0]),x=_[1],x="left"!==x&&"middle"!==x&&"center"!==x?"right":x,m="this.truncate("+i()+","+b+",'"+x+"')";break;case"pad":b=u.number(_[0]),x=_[1],x="left"!==x&&"middle"!==x&&"center"!==x?"right":x,m="this.pad("+i()+","+b+",'"+x+"')";break;case"number":o(l.number,"number");break;case"time":c(l.time,"time");break;case"time-utc":c(l.utc,"time-utc");break;default:throw Error("Unrecognized template filter: "+w)}}return m}function o(e){return"\\"+p[e]}function s(e,t,n){if(!("'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]))throw Error("Format pattern must be quoted: "+e);if(e=e.slice(1,-1),t=t+":"+e,!c.format_map[t]){var r=n(e),i=c.formats.length;c.formats.push(r),c.format_map[t]=i}return c.format_map[t]}var u=e("./util"),l=e("./format"),c={formats:[],format_map:{},truncate:u.truncate,pad:u.pad};r.source=i,r.context=c,t.exports=r,r.clearFormatCache=function(){c.formats=[],c.format_map={}},r.property=function(e,t){var n=u.field(t).map(u.str).join("][");return e+"["+n+"]"};var f=/\{\{(.+?)\}\}|$/g,d=/(?:"[^"]*"|\'[^\']*\'|[^\|"]+|[^\|\']+)+/g,h=/(?:"[^"]*"|\'[^\']*\'|[^,"]+|[^,\']+)+/g,p={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},g=/\\|'|\r|\n|\u2028|\u2029/g},{"./format":15,"./util":31}],30:[function(e,t,n){function r(e){return l.setTime(+e),l}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,s=p[0];for(i=1,a=p.length;a>i;++i)if(s=p[i],t>s[0]){if(o=t/s[0],o>r)return e[p[i-1][1]];if(o>=n)return e[s[1]]}return e[p[a-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var u=e("d3-time"),l=new Date,c=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),d=[a("second",u.second,c),a("minute",u.minute,c),a("hour",u.hour,c),a("day",u.day,c,[1,7]),a("month",u.month,c,[1,3,6]),a("year",u.year,c),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],h=[a("second",u.utcSecond,f),a("minute",u.utcMinute,f),a("hour",u.utcHour,f),a("day",u.utcDay,f,[1,7]),a("month",u.utcMonth,f,[1,3,6]),a("year",u.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],p=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=s(d),t.exports.utc=s(h)},{"d3-time":8}],31:[function(e,t,n){function r(e){return e.replace(d,"$1\\'")}function i(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function a(e,t,n){var r=0,i=e.split(p);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():i.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():i[0].slice(0,t)}var o=e("buffer"),s=e("./time"),u=s.utc,l=t.exports={},c="__name__";l.namedfunc=function(e,t){return t[c]=e,t},l.name=function(e){return null==e?null:e[c]},l.identity=function(e){return e},l["true"]=l.namedfunc("true",function(){return!0}),l["false"]=l.namedfunc("false",function(){return!1}),l.duplicate=function(e){return JSON.parse(JSON.stringify(e))},l.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},l.extend=function(e){for(var t,n,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},l.length=function(e){return null!=e&&null!=e.length?e.length:null},l.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},l.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},l.toMap=function(e,t){return(t=l.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},l.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var f=Object.prototype.toString;l.isObject=function(e){return e===Object(e)},l.isFunction=function(e){return"[object Function]"===f.call(e)},l.isString=function(e){return"string"==typeof value||"[object String]"===f.call(e)},l.isArray=Array.isArray||function(e){return"[object Array]"===f.call(e)},l.isNumber=function(e){return"number"==typeof e||"[object Number]"===f.call(e)},l.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==f.call(e)},l.isDate=function(e){return"[object Date]"===f.call(e)},l.isValid=function(e){return null!=e&&e===e},l.isBuffer=o.Buffer&&o.Buffer.isBuffer||l["false"],l.number=function(e){return null==e||""===e?null:+e},l["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},l.date=function(e){return null==e||""===e?null:Date.parse(e)},l.array=function(e){return null!=e?l.isArray(e)?e:[e]:[]},l.str=function(e){return l.isArray(e)?"["+e.map(l.str)+"]":l.isObject(e)?JSON.stringify(e):l.isString(e)?"'"+r(e)+"'":e};var d=/(^|[^\\])'/g,h=/\[(.*?)\]|[^.\[]+/g;l.field=function(e){return String(e).match(h).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},l.accessor=function(e){var t;return null==e||l.isFunction(e)?e:l.namedfunc(e,(t=l.field(e)).length>1?function(e){return t.reduce(function(e,t){return e[t]},e)}:function(t){return t[e]})},l.$=l.accessor,l.mutator=function(e){var t;return l.isString(e)&&(t=l.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},l.$func=function(e,t){return function(n){n=l.$(n)||l.identity;var r=e+(l.name(n)?"_"+l.name(n):"");return l.namedfunc(r,function(e){return t(n(e))})}},l.$valid=l.$func("valid",l.isValid),l.$length=l.$func("length",l.length),l.$in=function(e,t){e=l.$(e);var n=l.isArray(t)?l.toMap(t):t;return function(t){return!!n[e(t)]}},l.$year=l.$func("year",s.year.unit),l.$month=l.$func("month",s.months.unit),l.$date=l.$func("date",s.dates.unit),l.$day=l.$func("day",s.weekdays.unit),l.$hour=l.$func("hour",s.hours.unit),l.$minute=l.$func("minute",s.minutes.unit),l.$second=l.$func("second",s.seconds.unit),l.$utcYear=l.$func("utcYear",u.year.unit),l.$utcMonth=l.$func("utcMonth",u.months.unit),l.$utcDate=l.$func("utcDate",u.dates.unit),l.$utcDay=l.$func("utcDay",u.weekdays.unit),l.$utcHour=l.$func("utcHour",u.hours.unit),l.$utcMinute=l.$func("utcMinute",u.minutes.unit),l.$utcSecond=l.$func("utcSecond",u.seconds.unit),l.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=l.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),l.accessor(e)}),function(n,r){var i,a,o,s,u;for(i=0,a=e.length;a>i;++i){if(o=e[i],s=o(n),u=o(r),u>s)return-1*t[i];if(s>u)return t[i]}return 0}},l.cmp=function(e,t){return t>e?-1:e>t?1:e>=t?0:null===e?-1:null===t?1:0/0},l.numcmp=function(e,t){return e-t},l.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return o>a?-1:a>o?1:r[n(e)]-r[n(i)]}),e},l.pad=function(e,t,n,r){r=r||" ";var a=t-e.length;if(0>=a)return e;switch(n){case"left":return i(a,r)+e;case"middle":case"center":return i(Math.floor(a/2),r)+e+i(Math.ceil(a/2),r);default:return e+i(a,r)}},l.truncate=function(e,t,n,r,i){var o=e.length;if(t>=o)return e;i=void 0!==i?String(i):"";var s=Math.max(0,t-i.length);switch(n){case"left":return i+(r?a(e,s,1):e.slice(o-s));case"middle":case"center":var u=Math.ceil(s/2),l=Math.floor(s/2);return(r?a(e,u):e.slice(0,u))+i+(r?a(e,l,1):e.slice(o-l));default:return(r?a(e,s):e.slice(0,s))+i}};var p=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/},{"./time":30,buffer:2}],32:[function(e,t,n){function r(e,t){var n={};return i(e,n),n.add=[],n.mod=[],n.rem=[],n.reflow=t,n}function i(e,t){t.stamp=e?e.stamp:0,t.sort=e?e.sort:null,t.facet=e?e.facet:null,t.trans=e?e.trans:null,t.dirty=e?e.dirty:[],t.request=e?e.request:null;for(var n,r=0,i=a.length;i>r;++r)t[n=a[r]]=e?e[n]:{}}var a=e("./Dependencies").ALL;t.exports={create:r,copy:i}},{"./Dependencies":35}],33:[function(e,t,n){function r(e){o.init.call(this,e),this._data=[],this.router(!0).collector(!0)}var i=e("vega-logging"),a=e("./Tuple"),o=e("./Node").prototype,s=r.prototype=Object.create(o);s.constructor=r,s.data=function(){return this._data},s.evaluate=function(e){return i.debug(e,["collecting"]),e.rem.length&&(this._data=a.idFilter(this._data,e.rem)),e.add.length&&(this._data=this._data.length?this._data.concat(e.add):e.add),e.sort&&this._data.sort(e.sort),e.reflow&&(e.mod=e.mod.concat(a.idFilter(this._data,e.add,e.mod,e.rem)),e.reflow=!1),e},t.exports=r},{"./Node":38,"./Tuple":40,"vega-logging":47}],34:[function(e,t,n){function r(e,t,n){this._graph=e,this._name=t,this._data=[],this._source=null,this._facet=n,this._input=u.create(),this._output=null,this._inputNode=null,this._outputNode=null,this._pipeline=null,this._collector=null,this._mutates=!1}function i(e){var t=new f(e._graph).router(!0).collector(!0);return t.data=function(){return e._data},t.evaluate=function(t){s.debug(t,["input",e._name]);var n,r=e._input,i=u.create(t);for(n in r.fields)i.fields[n]=1;return r.rem.length&&(e._data=c.idFilter(e._data,r.rem)),r.add.length&&(e._data=e._data.concat(r.add)),t.reflow&&(r.mod=r.mod.concat(c.idFilter(e._data,r.add,r.mod,r.rem))),e._input=u.create(),i.add=r.add,i.mod=r.mod,i.rem=r.rem,i.facet=e._facet,i},t}function a(e){var t=new f(e._graph).router(!0).reflows(!0).collector(!0);return t.data=function(){return e._collector?e._collector.data():e._data},t.evaluate=function(t){s.debug(t,["output",e._name]);var n=u.create(t,!0);return e._facet&&(e._facet.values=e.values(),t.facet=null),e._output=t,n.data[e._name]=1,n},t}function o(e){var t=new f(e._graph).router(!0);return t.evaluate=function(t){if(e.mutates()){var n=e._srcMap||(e._srcMap={}),r=u.create(t);return r.add=t.add.map(function(e){return n[e._id]=c.derive(e)}),r.mod=t.mod.map(function(e){return c.rederive(e,n[e._id])}),r.rem=t.rem.map(function(e){var t=n[e._id];return n[e._id]=null,t}),e._input=r}return e._input=t},t}var s=e("vega-logging"),u=e("./ChangeSet"),l=e("./Collector"),c=e("./Tuple"),f=e("./Node"),d=r.prototype;d.name=function(e){return arguments.length?(this._name=e,this):this._name},d.source=function(e){return arguments.length?this._source=this._graph.data(e):this._source},d.insert=function(e){return this._input.add=this._input.add.concat(e.map(c.ingest)),this},d.remove=function(e){var t=this._data.filter(e);return this._input.rem=this._input.rem.concat(t),this},d.update=function(e,t,n){var r=this._input.mod,i=c.idMap(r);return this._input.fields[t]=1,this._data.filter(e).forEach(function(e){var a=e[t],o=n(e);a!==o&&(c.set(e,t,o),1!==i[e._id]&&(r.push(e),i[e._id]=1))}),this},d.values=function(e){return arguments.length?(this._input.rem=this._data.slice(),e&&this.insert(e),this):this._collector.data()},d.mutates=function(e){return arguments.length?(this._mutates=this._mutates||e,this):this._mutates},d.last=function(){return this._output},d.fire=function(e){return e&&(this._input=e),this._graph.propagate(this._input,this._pipeline[0]),this},d.pipeline=function(e){if(!arguments.length)return this._pipeline;var t,n=this._graph;return e.unshift(this._inputNode=i(this)),t=n.preprocess(e),t.router&&e.push(t.collector=new l(n)),e.push(this._outputNode=a(this)),this._collector=t.collector,this._mutates=!!t.mutates,n.connect(this._pipeline=e),this},d.synchronize=function(){return this._graph.synchronize(this._pipeline),this},d.listener=function(){return o(this).addListener(this._inputNode)},d.addListener=function(e){return e instanceof r?this._collector.addListener(e.listener()):this._outputNode.addListener(e),this},d.removeListener=function(e){this._outputNode.removeListener(e)},d.listeners=function(e){return(e?this._collector:this._outputNode).listeners()},t.exports=r},{"./ChangeSet":32,"./Collector":33,"./Node":38,"./Tuple":40,"vega-logging":47}],35:[function(e,t,n){var r=t.exports={ALL:["data","fields","scales","signals"]};r.ALL.forEach(function(e){r[e.toUpperCase()]=e})},{}],36:[function(e,t,n){function r(){}var i=e("datalib"),a=e("./Heap"),o=e("./ChangeSet"),s=e("./DataSource"),u=e("./Collector"),l=e("./Tuple"),c=e("./Signal"),f=e("./Dependencies"),d=r.prototype;d.init=function(){this._stamp=0,this._rank=0,this._data={},this._signals={},this.doNotPropagate={}},d.rank=function(){return++this._rank},d.values=function(e,t,n){var r,a,o=e===f.SIGNALS?this._signals:this._data,s=void 0!==t?t:i.keys(o);if(Array.isArray(s)){for(r=n||{},a=0;a<s.length;++a)r[s[a]]=o[s[a]].values();return r}return o[s].values()},d.dataValues=function(e){return this.values(f.DATA,e)},d.signalValues=function(e){return this.values(f.SIGNALS,e)},d.data=function(e,t,n){var r=this._data;if(arguments.length)return 1===arguments.length?r[e]:r[e]=new s(this,e,n).pipeline(t);var i,a=[];for(i in r)a.push(r[i]);return a},d.signal=function(e,t){if(1===arguments.length){var n=this;return Array.isArray(e)?e.map(function(e){return n._signals[e]}):this._signals[e]}return this._signals[e]=new c(this,e,t)},d.signalRef=function(e){Array.isArray(e)||(e=i.field(e));var t=this.signal(e[0]).value();if(e.length>1)for(var n=1,r=e.length;r>n;++n)t=t[e[n]];return t},d.propagate=function(e,t,n){var r,i,s,u,l,c,f,d={},h=new a(function(e,t){return e._qrank-t._qrank});if(e.stamp)throw Error("Pulse already has a non-zero stamp.");for(e.stamp=n||++this._stamp,d[t._id]=e,h.push(t.qrank(!0));h.size()>0;)if(t=h.peek(),e=d[t._id],t.rank()!==t.qrank())h.replace(t.qrank(!0));else if(h.pop(),d[t._id]=null,r=t._listeners,e=this.evaluate(e,t),e!==this.doNotPropagate)for(!e.reflow&&t.reflows()&&(e=o.create(e,!0)),c=0,f=r.length;f>c;++c)if(i=r[c],void 0!==(s=d[i._id])){if(null===s)throw Error("Already propagated to node.");if(s===e)continue;if(u=e.add.length||e.mod.length||e.rem.length,l=s.add.length||s.mod.length||s.rem.length,u&&l)throw Error("Multiple changeset pulses to same node");d[i._id]=u?e:s,d[i._id].reflow=e.reflow||s.reflow}else h.push(i.qrank(!0)),d[i._id]=e},d.preprocess=function(e){for(var t,n,r,i,a=this,o=0,s=0;s<e.length;++s)t=e[s],t.batch()&&!t._collector&&(n||!r?(t=new u(a),e.splice(s,0,t),n=!1):t._collector=r),(i=t.collector())&&(r=t),n=n||t.router()&&!i,o=o||t.mutates(),t.produces()&&(e.splice(s+1,0,new u(a)),n=!1);return{router:n,collector:r,mutates:o}},d.connect=function(e){var t,n,r,i,a,o,s,u;for(a=0,o=e.length;o>a;++a){for(n=e[a],n.collector()&&(t=n),r=n.dependency(f.DATA),s=0,u=r.length;u>s;++s)this.data(r[s]).addListener(t);for(i=n.dependency(f.SIGNALS),s=0,u=i.length;u>s;++s)this.signal(i[s]).addListener(t);a>0&&e[a-1].addListener(n)}return e},d.disconnect=function(e){var t,n,r,i,a,o,s,u;for(a=0,o=e.length;o>a;++a){for(n=e[a],n.collector()&&(t=n),r=n.dependency(f.DATA),s=0,u=r.length;u>s;++s)this.data(r[s]).removeListener(t);for(i=n.dependency(f.SIGNALS),s=0,u=i.length;u>s;++s)this.signal(i[s]).removeListener(t);n.disconnect()}return e},d.synchronize=function(e){var t,n,r,i,a,o,s,u,c={};for(r=0,i=e.length;i>r;++r)if(t=e[r],t.collector())for(a=0,n=t.data(),o=n.length;o>a;++a)u=(s=n[a])._id,c[u]||(l.prev_update(s),c[u]=1);return this},d.reevaluate=function(e,t){var n=e.reflow&&t.last()>=e.stamp,r=t.router()||e.add.length||e.rem.length;return r||!n||t.reevaluate(e)},d.evaluate=function(e,t){return this.reevaluate(e,t)?(e=t.evaluate(e),t.last(e.stamp),e):e},t.exports=r},{"./ChangeSet":32,"./Collector":33,"./DataSource":34,"./Dependencies":35,"./Heap":37,"./Signal":39,"./Tuple":40,datalib:26}],37:[function(e,t,n){function r(e){this.cmp=e,this.nodes=[]}function i(e,t,n,r){var i,a,o;for(i=e[n];n>t&&(o=n-1>>1,a=e[o],r(i,a)<0);)e[n]=a,n=o;return e[n]=i}function a(e,t,n){for(var r,a=t,o=e.length,s=e[t],u=2*t+1;o>u;)r=u+1,o>r&&n(e[u],e[r])>=0&&(u=r),e[t]=e[u],t=u,u=2*t+1;return e[t]=s,i(e,a,t,n)}var o=r.prototype;o.size=function(){return this.nodes.length},o.clear=function(){return this.nodes=[],this},o.peek=function(){return this.nodes[0]},o.push=function(e){var t=this.nodes;return t.push(e),i(t,0,t.length-1,this.cmp)},o.pop=function(){var e,t=this.nodes,n=t.pop();return t.length?(e=t[0],t[0]=n,a(t,0,this.cmp)):e=n,e},o.replace=function(e){var t=this.nodes,n=t[0];return t[0]=e,a(t,0,this.cmp),n},o.pushpop=function(e){var t=this.nodes,n=t[0];return t.length&&this.cmp(n,e)<0&&(t[0]=e,e=n,a(t,0,this.cmp)),e},t.exports=r},{}],38:[function(e,t,n){function r(e){e&&this.init(e)}var i=e("./Dependencies").ALL,a=0,o=r.Flags={Router:1,Collector:2,Produces:4,Mutates:8,Reflows:16,Batch:32},s=r.prototype;s.init=function(e){this._id=++a,this._graph=e,this._rank=e.rank(),this._qrank=null,this._stamp=0,this._listeners=[],this._listeners._ids={},this._deps={};for(var t=0,n=i.length;n>t;++t)this._deps[i[t]]=[];return this._flags=0,this},s.rank=function(){return this._rank},s.qrank=function(){return arguments.length?(this._qrank=this._rank,this):this._qrank},s.last=function(e){return arguments.length?(this._stamp=e,this):this._stamp},s._setf=function(e,t){return t?this._flags|=e:this._flags&=~e,this},s.router=function(e){return arguments.length?this._setf(o.Router,e):this._flags&o.Router},s.collector=function(e){return arguments.length?this._setf(o.Collector,e):this._flags&o.Collector},s.produces=function(e){return arguments.length?this._setf(o.Produces,e):this._flags&o.Produces},s.mutates=function(e){return arguments.length?this._setf(o.Mutates,e):this._flags&o.Mutates},s.reflows=function(e){return arguments.length?this._setf(o.Reflows,e):this._flags&o.Reflows},s.batch=function(e){return arguments.length?this._setf(o.Batch,e):this._flags&o.Batch},s.dependency=function(e,t){var n=this._deps[e],r=n._names||(n._names={});if(1===arguments.length)return n;if(null===t)n.splice(0,n.length),n._names={};else if(Array.isArray(t))for(var i,a=0,o=t.length;o>a;++a)i=t[a],r[i]||(n.push(i),r[i]=1);else{if(r[t])return this;n.push(t),r[t]=1}return this},s.listeners=function(){return this._listeners},s.addListener=function(e){if(!(e instanceof r))throw Error("Listener is not a Node");if(this._listeners._ids[e._id])return this;if(this._listeners.push(e),
this._listeners._ids[e._id]=1,this._rank>e._rank)for(var t,n=[e],i=this._graph;n.length;)t=n.shift(),t._rank=i.rank(),n.unshift.apply(n,t.listeners());return this},s.removeListener=function(e){if(!this._listeners._ids[e._id])return!1;var t=this._listeners.indexOf(e),n=t>=0;return n&&(this._listeners.splice(t,1),this._listeners._ids[e._id]=null),n},s.disconnect=function(){this._listeners=[],this._listeners._ids={}},s.evaluate=function(e){return e},s.reevaluate=function(e){var t,n,r,a,o,s;for(r=0,a=i.length;a>r;++r)for(t=i[r],n=this._deps[t],o=0,s=n.length;s>o;++o)if(e[t][n[o]])return!0;return!1},r.reset=function(){a=0},t.exports=r},{"./Dependencies":35}],39:[function(e,t,n){function r(e,t,n){return o.init.call(this,e),this._name=t,this._value=n,this._verbose=!1,this._handlers=[],this}var i=e("./ChangeSet"),a=e("./Node"),o=a.prototype,s=r.prototype=Object.create(o);s.constructor=r,s.name=function(){return this._name},s.value=function(e){return arguments.length?(this._value=e,this):this._value},s.values=s.value,s.verbose=function(e){return arguments.length?(this._verbose=!!e,this):this._verbose},s.evaluate=function(e){return e.signals[this._name]?e:this._graph.doNotPropagate},s.fire=function(e){e||(e=i.create(null,!0)),e.signals[this._name]=1,this._graph.propagate(e,this)},s.on=function(e){var t=this,n=new a(this._graph);return n.evaluate=function(n){return e(t.name(),t.value()),n},this._handlers.push({handler:e,node:n}),this.addListener(n)},s.off=function(e){var t,n,r=this._handlers;for(t=r.length;--t>=0;)e&&r[t].handler!==e||(n=r.splice(t,1)[0],this.removeListener(n.node));return this},t.exports=r},{"./ChangeSet":32,"./Node":38}],40:[function(e,t,n){function r(e){return e=e===Object(e)?e:{data:e},e._id=++o,e._prev&&(e._prev=null),e}function i(e,t){t=t||{};for(var n=0,r=e.length;r>n;++n)t[e[n]._id]=1;return t}function a(e,t){t=t||{};for(var n in e)"_prev"!==n&&"_id"!==n&&(t[n]=e[n]);return t}var o=0;t.exports={ingest:r,idMap:i,derive:function(e){return r(a(e))},rederive:function(e,t){return a(e,t)},set:function(e,t,n){return e[t]===n?0:(e[t]=n,1)},prev:function(e){return e._prev||e},prev_init:function(e){e._prev||(e._prev={_id:e._id})},prev_update:function(e){var t,n,r=e._prev;if(r)for(t in e)"_prev"!==t&&"_id"!==t&&(r[t]=(n=e[t])instanceof Object&&n._prev?n._prev:n)},reset:function(){o=0},idFilter:function(e){for(var t={},n=arguments.length;--n>0;)i(arguments[n],t);return e.filter(function(e){return!t[e._id]})}}},{}],41:[function(e,t,n){t.exports={ChangeSet:e("./ChangeSet"),Collector:e("./Collector"),DataSource:e("./DataSource"),Dependencies:e("./Dependencies"),Graph:e("./Graph"),Node:e("./Node"),Signal:e("./Signal"),Tuple:e("./Tuple"),debug:e("vega-logging").debug}},{"./ChangeSet":32,"./Collector":33,"./DataSource":34,"./Dependencies":35,"./Graph":36,"./Node":38,"./Signal":39,"./Tuple":40,"vega-logging":47}],42:[function(e,t,n){function r(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t]]=1;return r}function i(e){var t,n=[];for(t in e)n.push(t);return n}t.exports=function(t){function n(e){var t={code:o(e),globals:i(p),fields:i(g)};return p={},g={},t}function a(e){return h+'["'+e+'"]'}function o(e){if("string"==typeof e)return e;var t=m[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}t=t||{};var s=t.constants||e("./constants"),u=(t.functions||e("./functions"))(o),l=t.idWhiteList?r(t.idWhiteList):null,c=t.idBlackList?r(t.idBlackList):null,f=0,d=t.fieldVar||"datum",h=t.globalVar||"signals",p={},g={},m={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;if(f>0)return t;if(s.hasOwnProperty(t))return s[t];if(l)return l.hasOwnProperty(t)?t:(p[t]=1,a(t));if(c&&c.hasOwnProperty(t))throw new Error("Illegal identifier: "+t);return t},Program:function(e){return e.body.map(o).join("\n")},MemberExpression:function(e){var t=!e.computed,n=o(e.object);t&&(f+=1);var r=o(e.property);return n===d&&(g[r]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=u.hasOwnProperty(t)&&u[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n):r+"("+n.map(o).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(o).join(",")+"]"},BinaryExpression:function(e){return"("+o(e.left)+e.operator+o(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+o(e.argument)+")"},ConditionalExpression:function(e){return"("+o(e.test)+"?"+o(e.consequent)+":"+o(e.alternate)+")"},LogicalExpression:function(e){return"("+o(e.left)+e.operator+o(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(o).join(",")+"}"},Property:function(e){f+=1;var t=o(e.key);return f-=1,t+":"+o(e.value)},ExpressionStatement:function(e){return o(e.expression)}};return n.functions=u,n.constants=s,n}},{"./constants":43,"./functions":44}],43:[function(e,t,n){t.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],44:[function(e,t,n){t.exports=function(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),slice:n("slice",i),substring:n("substring",i),regexp:a,test:n("test",a),"if":function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return n[0]+"?"+n[1]+":"+n[2]}}}},{}],45:[function(e,t,n){var r=e("./parser"),i=e("./codegen"),a=t.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,o=function(t){var i=n(a.parse(t));return e[r]='"use strict"; return ('+i.code+");",i.fn=Function.apply(null,e),i};return o.codegen=n,o},functions:e("./functions"),constants:e("./constants")}},{"./codegen":42,"./constants":43,"./functions":44,"./parser":46}],46:[function(e,t,n){/*
  The following expression parser is based on Esprima (http://esprima.org/).
  Original header comment and license for Esprima is included here:

  Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
  Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
  Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
  Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
  Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
  Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
  Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
  Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

  Redistribution and use in source and binary forms, with or without
  modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
  ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
t.exports=function(){"use strict";function e(e,t){if(!e)throw new Error("ASSERT: "+t)}function t(e){return e>=48&&57>=e}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function a(e){return 10===e||13===e||8232===e||8233===e}function o(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&$e.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&$e.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function u(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function l(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function c(e){if(Me&&l(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function f(){var e,t;for(t=0===Te;Ae>Te;)if(e=Se.charCodeAt(Te),i(e))++Te;else{if(!a(e))break;++Te,13===e&&10===Se.charCodeAt(Te)&&++Te,++Ce,Ee=Te,t=!0}}function d(e){var t,r,i,a=0;for(r="u"===e?4:2,t=0;r>t;++t){if(!(Ae>Te&&n(Se[Te])))return"";i=Se[Te++],a=16*a+"0123456789abcdef".indexOf(i.toLowerCase())}return String.fromCharCode(a)}function h(){var e,t,r,i;for(e=Se[Te],t=0,"}"===e&&F({},ke.UnexpectedToken,"ILLEGAL");Ae>Te&&(e=Se[Te++],n(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&F({},ke.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function p(){var e,t;for(e=Se.charCodeAt(Te++),t=String.fromCharCode(e),92===e&&(117!==Se.charCodeAt(Te)&&F({},ke.UnexpectedToken,"ILLEGAL"),++Te,e=d("u"),e&&"\\"!==e&&o(e.charCodeAt(0))||F({},ke.UnexpectedToken,"ILLEGAL"),t=e);Ae>Te&&(e=Se.charCodeAt(Te),s(e));)++Te,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Se.charCodeAt(Te)&&F({},ke.UnexpectedToken,"ILLEGAL"),++Te,e=d("u"),e&&"\\"!==e&&s(e.charCodeAt(0))||F({},ke.UnexpectedToken,"ILLEGAL"),t+=e);return t}function g(){var e,t;for(e=Te++;Ae>Te;){if(t=Se.charCodeAt(Te),92===t)return Te=e,p();if(!s(t))break;++Te}return Se.slice(e,Te)}function m(){var e,t,n;return e=Te,t=92===Se.charCodeAt(Te)?p():g(),n=1===t.length?be.Identifier:c(t)?be.Keyword:"null"===t?be.NullLiteral:"true"===t||"false"===t?be.BooleanLiteral:be.Identifier,{type:n,value:t,lineNumber:Ce,lineStart:Ee,start:e,end:Te}}function v(){var e,t,n,r,i=Te,a=Se.charCodeAt(Te),o=Se[Te];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Te,Le.tokenize&&(40===a?Le.openParenToken=Le.tokens.length:123===a&&(Le.openCurlyToken=Le.tokens.length)),{type:be.Punctuator,value:String.fromCharCode(a),lineNumber:Ce,lineStart:Ee,start:i,end:Te};default:if(e=Se.charCodeAt(Te+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Te+=2,{type:be.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:Ce,lineStart:Ee,start:i,end:Te};case 33:case 61:return Te+=2,61===Se.charCodeAt(Te)&&++Te,{type:be.Punctuator,value:Se.slice(i,Te),lineNumber:Ce,lineStart:Ee,start:i,end:Te}}}return r=Se.substr(Te,4),">>>="===r?(Te+=4,{type:be.Punctuator,value:r,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(Te+=3,{type:be.Punctuator,value:n,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(Te+=2,{type:be.Punctuator,value:t,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):"<>=!+-*%&|^/".indexOf(o)>=0?(++Te,{type:be.Punctuator,value:o,lineNumber:Ce,lineStart:Ee,start:i,end:Te}):void F({},ke.UnexpectedToken,"ILLEGAL")))}function y(e){for(var t="";Ae>Te&&n(Se[Te]);)t+=Se[Te++];return 0===t.length&&F({},ke.UnexpectedToken,"ILLEGAL"),o(Se.charCodeAt(Te))&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Ce,lineStart:Ee,start:e,end:Te}}function b(e){for(var n="0"+Se[Te++];Ae>Te&&r(Se[Te]);)n+=Se[Te++];return(o(Se.charCodeAt(Te))||t(Se.charCodeAt(Te)))&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:Ce,lineStart:Ee,start:e,end:Te}}function x(){var n,i,a;if(a=Se[Te],e(t(a.charCodeAt(0))||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),i=Te,n="","."!==a){if(n=Se[Te++],a=Se[Te],"0"===n){if("x"===a||"X"===a)return++Te,y(i);if(r(a))return b(i);a&&t(a.charCodeAt(0))&&F({},ke.UnexpectedToken,"ILLEGAL")}for(;t(Se.charCodeAt(Te));)n+=Se[Te++];a=Se[Te]}if("."===a){for(n+=Se[Te++];t(Se.charCodeAt(Te));)n+=Se[Te++];a=Se[Te]}if("e"===a||"E"===a)if(n+=Se[Te++],a=Se[Te],("+"===a||"-"===a)&&(n+=Se[Te++]),t(Se.charCodeAt(Te)))for(;t(Se.charCodeAt(Te));)n+=Se[Te++];else F({},ke.UnexpectedToken,"ILLEGAL");return o(Se.charCodeAt(Te))&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.NumericLiteral,value:parseFloat(n),lineNumber:Ce,lineStart:Ee,start:i,end:Te}}function w(){var t,n,i,o,s,u,l,c,f="",p=!1;for(l=Ce,c=Ee,t=Se[Te],e("'"===t||'"'===t,"String literal must starts with a quote"),n=Te,++Te;Ae>Te;){if(i=Se[Te++],i===t){t="";break}if("\\"===i)if(i=Se[Te++],i&&a(i.charCodeAt(0)))++Ce,"\r"===i&&"\n"===Se[Te]&&++Te,Ee=Te;else switch(i){case"u":case"x":"{"===Se[Te]?(++Te,f+=h()):(u=Te,s=d(i),s?f+=s:(Te=u,f+=i));break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="	";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="";break;default:r(i)?(o="01234567".indexOf(i),0!==o&&(p=!0),Ae>Te&&r(Se[Te])&&(p=!0,o=8*o+"01234567".indexOf(Se[Te++]),"0123".indexOf(i)>=0&&Ae>Te&&r(Se[Te])&&(o=8*o+"01234567".indexOf(Se[Te++]))),f+=String.fromCharCode(o)):f+=i}else{if(a(i.charCodeAt(0)))break;f+=i}}return""!==t&&F({},ke.UnexpectedToken,"ILLEGAL"),{type:be.StringLiteral,value:f,octal:p,startLineNumber:l,startLineStart:c,lineNumber:Ce,lineStart:Ee,start:n,end:Te}}function _(e,t){var n,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void F({},ke.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(r)}catch(i){F({},ke.InvalidRegExp)}try{return new RegExp(e,t)}catch(a){return null}}function k(){var t,n,r,i,o;for(t=Se[Te],e("/"===t,"Regular expression literal must start with a slash"),n=Se[Te++],r=!1,i=!1;Ae>Te;)if(t=Se[Te++],n+=t,"\\"===t)t=Se[Te++],a(t.charCodeAt(0))&&F({},ke.UnterminatedRegExp),n+=t;else if(a(t.charCodeAt(0)))F({},ke.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){i=!0;break}"["===t&&(r=!0)}return i||F({},ke.UnterminatedRegExp),o=n.substr(1,n.length-2),{value:o,literal:n}}function $(){var e,t,n,r;for(t="",n="";Ae>Te&&(e=Se[Te],s(e.charCodeAt(0)));)if(++Te,"\\"===e&&Ae>Te)if(e=Se[Te],"u"===e){if(++Te,r=Te,e=d("u"))for(n+=e,t+="\\u";Te>r;++r)t+=Se[r];else Te=r,n+="u",t+="\\u";U({},ke.UnexpectedToken,"ILLEGAL")}else t+="\\",U({},ke.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function S(){var e,t,n,r;return Oe=null,f(),e=Te,t=k(),n=$(),r=_(t.value,n.value),Le.tokenize?{type:be.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:Ce,lineStart:Ee,start:e,end:Te}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Te}}function M(){var e,t,n,r;return f(),e=Te,t={start:{line:Ce,column:Te-Ee}},n=S(),t.end={line:Ce,column:Te-Ee},Le.tokenize||(Le.tokens.length>0&&(r=Le.tokens[Le.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&Le.tokens.pop()),Le.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Te],loc:t})),n}function T(e){return e.type===be.Identifier||e.type===be.Keyword||e.type===be.BooleanLiteral||e.type===be.NullLiteral}function C(){var e,t;if(e=Le.tokens[Le.tokens.length-1],!e)return M();if("Punctuator"===e.type){if("]"===e.value)return v();if(")"===e.value)return t=Le.tokens[Le.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?v():M();if("}"===e.value){if(Le.tokens[Le.openCurlyToken-3]&&"Keyword"===Le.tokens[Le.openCurlyToken-3].type){if(t=Le.tokens[Le.openCurlyToken-4],!t)return v()}else{if(!Le.tokens[Le.openCurlyToken-4]||"Keyword"!==Le.tokens[Le.openCurlyToken-4].type)return v();if(t=Le.tokens[Le.openCurlyToken-5],!t)return M()}return v()}return M()}return"Keyword"===e.type&&"this"!==e.value?M():v()}function E(){var e;return f(),Te>=Ae?{type:be.EOF,lineNumber:Ce,lineStart:Ee,start:Te,end:Te}:(e=Se.charCodeAt(Te),o(e)?m():40===e||41===e||59===e?v():39===e||34===e?w():46===e?t(Se.charCodeAt(Te+1))?x():v():t(e)?x():Le.tokenize&&47===e?C():v())}function A(){var e,t,n,r;return f(),e={start:{line:Ce,column:Te-Ee}},t=E(),e.end={line:Ce,column:Te-Ee},t.type!==be.EOF&&(n=Se.slice(t.start,t.end),r={type:xe[t.type],value:n,range:[t.start,t.end],loc:e},t.regex&&(r.regex={pattern:t.regex.pattern,flags:t.regex.flags}),Le.tokens.push(r)),t}function O(){var e;return e=Oe,Te=e.end,Ce=e.lineNumber,Ee=e.lineStart,Oe="undefined"!=typeof Le.tokens?A():E(),Te=e.end,Ce=e.lineNumber,Ee=e.lineStart,e}function D(){var e,t,n;e=Te,t=Ce,n=Ee,Oe="undefined"!=typeof Le.tokens?A():E(),Te=e,Ce=t,Ee=n}function L(){this.line=Ce,this.column=Te-Ee}function N(){this.start=new L,this.end=null}function j(e){this.start=e.type===be.StringLiteral?{line:e.startLineNumber,column:e.start-e.startLineStart}:{line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function P(){Te=Oe.start,Oe.type===be.StringLiteral?(Ce=Oe.startLineNumber,Ee=Oe.startLineStart):(Ce=Oe.lineNumber,Ee=Oe.lineStart),Le.range&&(this.range=[Te,0]),Le.loc&&(this.loc=new N)}function R(e){Le.range&&(this.range=[e.start,0]),Le.loc&&(this.loc=new j(e))}function I(){var e,t,n,r;return e=Te,t=Ce,n=Ee,f(),r=Ce!==t,Te=e,Ce=t,Ee=n,r}function F(t,n){var r,i=Array.prototype.slice.call(arguments,2),a=n.replace(/%(\d)/g,function(t,n){return e(n<i.length,"Message reference must be in range"),i[n]});throw"number"==typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+a),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-Ee+1):(r=new Error("Line "+Ce+": "+a),r.index=Te,r.lineNumber=Ce,r.column=Te-Ee+1),r.description=a,r}function U(){try{F.apply(null,arguments)}catch(e){if(!Le.errors)throw e;Le.errors.push(e)}}function z(e){if(e.type===be.EOF&&F(e,ke.UnexpectedEOS),e.type===be.NumericLiteral&&F(e,ke.UnexpectedNumber),e.type===be.StringLiteral&&F(e,ke.UnexpectedString),e.type===be.Identifier&&F(e,ke.UnexpectedIdentifier),e.type===be.Keyword){if(u(e.value))F(e,ke.UnexpectedReserved);else if(Me&&l(e.value))return void U(e,ke.StrictReservedWord);F(e,ke.UnexpectedToken,e.value)}F(e,ke.UnexpectedToken,e.value)}function q(e){var t=O();(t.type!==be.Punctuator||t.value!==e)&&z(t)}function H(e){if(Le.errors){var t=Oe;t.type!==be.Punctuator&&t.value!==e?U(t,ke.UnexpectedToken,t.value):O()}else q(e)}function B(e){return Oe.type===be.Punctuator&&Oe.value===e}function Y(e){return Oe.type===be.Keyword&&Oe.value===e}function V(){var e;return 59===Se.charCodeAt(Te)||B(";")?void O():(e=Ce,f(),void(Ce===e&&(Oe.type===be.EOF||B("}")||z(Oe))))}function W(){var e=[],t=new P;for(q("[");!B("]");)B(",")?(O(),e.push(null)):(e.push(le()),B("]")||q(","));return O(),t.finishArrayExpression(e)}function G(){var e,t=new P;return e=O(),e.type===be.StringLiteral||e.type===be.NumericLiteral?(Me&&e.octal&&U(e,ke.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function X(){var e,t,n,r,i=new P;return e=Oe,e.type===be.Identifier?(n=G(),q(":"),r=le(),i.finishProperty("init",n,r)):e.type!==be.EOF&&e.type!==be.Punctuator?(t=G(),q(":"),r=le(),i.finishProperty("init",t,r)):void z(e)}function J(){var e,t,n,r,i=[],a={},o=String,s=new P;for(q("{");!B("}");)e=X(),t=e.key.type===we.Identifier?e.key.name:o(e.key.value),r="init"===e.kind?_e.Data:"get"===e.kind?_e.Get:_e.Set,n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?(a[n]===_e.Data?Me&&r===_e.Data?U({},ke.StrictDuplicateProperty):r!==_e.Data&&U({},ke.AccessorDataProperty):r===_e.Data?U({},ke.AccessorDataProperty):a[n]&r&&U({},ke.AccessorGetSet),a[n]|=r):a[n]=r,i.push(e),B("}")||H(",");return q("}"),s.finishObjectExpression(i)}function K(){var e;return q("("),++De.parenthesisCount,e=ce(),q(")"),e}function Z(){var e,t,n,r;if(B("("))return K();if(B("["))return W();if(B("{"))return J();if(e=Oe.type,r=new P,e===be.Identifier||Ne[Oe.value])n=r.finishIdentifier(O().value);else if(e===be.StringLiteral||e===be.NumericLiteral)Me&&Oe.octal&&U(Oe,ke.StrictOctalLiteral),n=r.finishLiteral(O());else{if(e===be.Keyword)throw new Error("Disabled.");e===be.BooleanLiteral?(t=O(),t.value="true"===t.value,n=r.finishLiteral(t)):e===be.NullLiteral?(t=O(),t.value=null,n=r.finishLiteral(t)):B("/")||B("/=")?(n=r.finishLiteral("undefined"!=typeof Le.tokens?M():S()),D()):z(O())}return n}function Q(){var e=[];if(q("("),!B(")"))for(;Ae>Te&&(e.push(le()),!B(")"));)H(",");return q(")"),e}function ee(){var e,t=new P;return e=O(),T(e)||z(e),t.finishIdentifier(e.value)}function te(){return q("."),ee()}function ne(){var e;return q("["),e=ce(),q("]"),e}function re(){var e,t,n,r,i=De.allowIn;for(r=Oe,De.allowIn=!0,e=Z();;)if(B("."))n=te(),e=new R(r).finishMemberExpression(".",e,n);else if(B("("))t=Q(),e=new R(r).finishCallExpression(e,t);else{if(!B("["))break;n=ne(),e=new R(r).finishMemberExpression("[",e,n)}return De.allowIn=i,e}function ie(){var e=re();if(Oe.type===be.Punctuator&&(B("++")||B("--"))&&!I())throw new Error("Disabled.");return e}function ae(){var e,t,n;if(Oe.type!==be.Punctuator&&Oe.type!==be.Keyword)t=ie();else{if(B("++")||B("--"))throw new Error("Disabled.");if(B("+")||B("-")||B("~")||B("!"))n=Oe,e=O(),t=ae(),t=new R(n).finishUnaryExpression(e.value,t);else{if(Y("delete")||Y("void")||Y("typeof"))throw new Error("Disabled.");t=ie()}}return t}function oe(e,t){var n=0;if(e.type!==be.Punctuator&&e.type!==be.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function se(){var e,t,n,r,i,a,o,s,u,l;if(e=Oe,u=ae(),r=Oe,i=oe(r,De.allowIn),0===i)return u;for(r.prec=i,O(),t=[e,Oe],o=ae(),a=[u,r,o];(i=oe(Oe,De.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),t.pop(),n=new R(t[t.length-1]).finishBinaryExpression(s,u,o),a.push(n);r=O(),r.prec=i,a.push(r),t.push(Oe),n=ae(),a.push(n)}for(l=a.length-1,n=a[l],t.pop();l>1;)n=new R(t.pop()).finishBinaryExpression(a[l-1].value,a[l-2],n),l-=2;return n}function ue(){var e,t,n,r,i;return i=Oe,e=se(),B("?")&&(O(),t=De.allowIn,De.allowIn=!0,n=le(),De.allowIn=t,q(":"),r=le(),e=new R(i).finishConditionalExpression(e,n,r)),e}function le(){var e,t,n,r;return e=De.parenthesisCount,r=Oe,t=Oe,n=ue()}function ce(){var e=le();if(B(","))throw new Error("Disabled.");return e}function fe(e){var t=ce();return V(),e.finishExpressionStatement(t)}function de(){var e,t,n=Oe.type;if(n===be.EOF&&z(Oe),n===be.Punctuator&&"{"===Oe.value)throw new Error("Disabled.");if(t=new P,n===be.Punctuator)switch(Oe.value){case";":throw new Error("Disabled.");case"(":return fe(t)}else if(n===be.Keyword)throw new Error("Disabled.");return e=ce(),V(),t.finishExpressionStatement(e)}function he(){if(Oe.type===be.Keyword)switch(Oe.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return de()}return Oe.type!==be.EOF?de():void 0}function pe(){for(var e,t,n,r,i=[];Ae>Te&&(t=Oe,t.type===be.StringLiteral)&&(e=he(),i.push(e),e.expression.type===we.Literal);)n=Se.slice(t.start+1,t.end-1),"use strict"===n?(Me=!0,r&&U(r,ke.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;Ae>Te&&(e=he(),"undefined"!=typeof e);)i.push(e);return i}function ge(){var e,t;return f(),D(),t=new P,Me=!0,e=pe(),t.finishProgram(e)}function me(){var e,t,n,r=[];for(e=0;e<Le.tokens.length;++e)t=Le.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),Le.range&&(n.range=t.range),Le.loc&&(n.loc=t.loc),r.push(n);Le.tokens=r}function ve(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),Se=e,Te=0,Ce=Se.length>0?1:0,Ee=0,Ae=Se.length,Oe=null,De={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Le={},t=t||{},t.tokens=!0,Le.tokens=[],Le.tokenize=!0,Le.openParenToken=-1,Le.openCurlyToken=-1,Le.range="boolean"==typeof t.range&&t.range,Le.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.tolerant&&t.tolerant&&(Le.errors=[]);try{if(D(),Oe.type===be.EOF)return Le.tokens;for(O();Oe.type!==be.EOF;)try{O()}catch(i){if(Le.errors){Le.errors.push(i);break}throw i}me(),r=Le.tokens,"undefined"!=typeof Le.errors&&(r.errors=Le.errors)}catch(a){throw a}finally{Le={}}return r}function ye(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),Se=e,Te=0,Ce=Se.length>0?1:0,Ee=0,Ae=Se.length,Oe=null,De={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Le={},"undefined"!=typeof t&&(Le.range="boolean"==typeof t.range&&t.range,Le.loc="boolean"==typeof t.loc&&t.loc,Le.loc&&null!==t.source&&void 0!==t.source&&(Le.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(Le.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(Le.errors=[]));try{n=ge(),"undefined"!=typeof Le.tokens&&(me(),n.tokens=Le.tokens),"undefined"!=typeof Le.errors&&(n.errors=Le.errors)}catch(i){throw i}finally{Le={}}return n}var be,xe,we,_e,ke,$e,Se,Me,Te,Ce,Ee,Ae,Oe,De,Le;be={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},xe={},xe[be.BooleanLiteral]="Boolean",xe[be.EOF]="<end>",xe[be.Identifier]="Identifier",xe[be.Keyword]="Keyword",xe[be.NullLiteral]="Null",xe[be.NumericLiteral]="Numeric",xe[be.Punctuator]="Punctuator",xe[be.StringLiteral]="String",xe[be.RegularExpression]="RegularExpression",we={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},_e={Data:1,Get:2,Set:4},ke={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},$e={NonAsciiIdentifierStart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")},R.prototype=P.prototype={finish:function(){Le.range&&(this.range[1]=Te),Le.loc&&(this.loc.end=new L,Le.source&&(this.loc.source=Le.source))},finishArrayExpression:function(e){return this.type=we.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=we.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?we.LogicalExpression:we.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishCallExpression:function(e,t){return this.type=we.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=we.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishExpressionStatement:function(e){return this.type=we.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=we.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=we.Literal,this.value=e.value,this.raw=Se.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=we.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishObjectExpression:function(e){return this.type=we.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=we.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n){return this.type=we.Property,this.key=t,this.value=n,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=we.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var Ne={"if":1,"this":1};return{tokenize:ve,parse:ye}}()},{}],47:[function(e,t,n){function r(e){e="[Vega Log] "+e,console.log(e)}function i(e){e="[Vega Err] "+e,console.error(e)}function a(e,t){if(a.enable){var n=Function.prototype.bind.call(console.log,console),r={prevTime:Date.now()-o,stamp:e.stamp};e.add&&(r.add=e.add.length,r.mod=e.mod.length,r.rem=e.rem.length,r.reflow=!!e.reflow),n.apply(console,(t.push(JSON.stringify(r)),t)),o=Date.now()}}var o=Date.now();t.exports={log:r,error:i,debug:(a.enable=!1,a)}},{}],48:[function(e,t,n){t.exports={path:e("./path"),render:e("./render"),Item:e("./util/Item"),bound:e("./util/bound"),Bounds:e("./util/Bounds"),canvas:e("./util/canvas"),Gradient:e("./util/Gradient"),toJSON:e("./util/scene").toJSON,fromJSON:e("./util/scene").fromJSON}},{"./path":50,"./render":70,"./util/Bounds":76,"./util/Gradient":78,"./util/Item":80,"./util/bound":81,"./util/canvas":82,"./util/scene":84}],49:[function(e,t,n){function r(e,t,n,r,i,o,u,l,c){var f=s.call(arguments);if(a[f])return a[f];var d=u*(Math.PI/180),h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),r=Math.abs(r);var g=p*(l-e)*.5+h*(c-t)*.5,m=p*(c-t)*.5-h*(l-e)*.5,v=g*g/(n*n)+m*m/(r*r);v>1&&(v=Math.sqrt(v),n*=v,r*=v);var y=p/n,b=h/n,x=-h/r,w=p/r,_=y*l+b*c,k=x*l+w*c,$=y*e+b*t,S=x*e+w*t,M=($-_)*($-_)+(S-k)*(S-k),T=1/M-.25;0>T&&(T=0);var C=Math.sqrt(T);o==i&&(C=-C);var E=.5*(_+$)-C*(S-k),A=.5*(k+S)+C*($-_),O=Math.atan2(k-A,_-E),D=Math.atan2(S-A,$-E),L=D-O;0>L&&1===o?L+=2*Math.PI:L>0&&0===o&&(L-=2*Math.PI);for(var N=Math.ceil(Math.abs(L/(.5*Math.PI+.001))),j=[],P=0;N>P;++P){var R=O+P*L/N,I=O+(P+1)*L/N;j[P]=[E,A,R,I,n,r,h,p]}return a[f]=j}function i(e){var t=s.call(e);if(o[t])return o[t];var n=e[0],r=e[1],i=e[2],a=e[3],u=e[4],l=e[5],c=e[6],f=e[7],d=f*u,h=-c*l,p=c*u,g=f*l,m=Math.cos(i),v=Math.sin(i),y=Math.cos(a),b=Math.sin(a),x=.5*(a-i),w=Math.sin(.5*x),_=8/3*w*w/Math.sin(x),k=n+m-_*v,$=r+v+_*m,S=n+y,M=r+b,T=S+_*b,C=M-_*y;return o[t]=[d*k+h*$,p*k+g*$,d*T+h*C,p*T+g*C,d*S+h*M,p*S+g*M]}var a={},o={},s=[].join;t.exports={segments:r,bezier:i,cache:{segments:a,bezier:o}}},{}],50:[function(e,t,n){t.exports={parse:e("./parse"),render:e("./render")}},{"./parse":51,"./render":52}],51:[function(e,t,n){var r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/];t.exports=function(e){var t,n,a,o,s,u,l,c,f,d,h,p=[];for(t=e.slice().replace(i[0],"###$1").split(i[1]).slice(1),c=0,d=t.length;d>c;++c){for(n=t[c],a=n.slice(1).trim().replace(i[2],"$1###$2").split(i[3]),u=n.charAt(0),o=[u],f=0,h=a.length;h>f;++f)(s=+a[f])===s&&o.push(s);if(l=r[u.toLowerCase()],o.length-1>l)for(f=1,h=o.length;h>f;f+=l)p.push([u].concat(o.slice(f,f+l)));else p.push(o)}return p}},{}],52:[function(e,t,n){function r(e,t,n,r){for(var a=i.segments(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n),o=0;o<a.length;++o){var s=i.bezier(a[o]);e.bezierCurveTo.apply(e,s)}}var i=e("./arc");t.exports=function(e,t,n,i){var a,o,s,u,l,c=null,f=0,d=0,h=0,p=0;null==n&&(n=0),null==i&&(i=0),e.beginPath();for(var g=0,m=t.length;m>g;++g){switch(a=t[g],a[0]){case"l":f+=a[1],d+=a[2],e.lineTo(f+n,d+i);break;case"L":f=a[1],d=a[2],e.lineTo(f+n,d+i);break;case"h":f+=a[1],e.lineTo(f+n,d+i);break;case"H":f=a[1],e.lineTo(f+n,d+i);break;case"v":d+=a[1],e.lineTo(f+n,d+i);break;case"V":d=a[1],e.lineTo(f+n,d+i);break;case"m":f+=a[1],d+=a[2],e.moveTo(f+n,d+i);break;case"M":f=a[1],d=a[2],e.moveTo(f+n,d+i);break;case"c":o=f+a[5],s=d+a[6],h=f+a[3],p=d+a[4],e.bezierCurveTo(f+a[1]+n,d+a[2]+i,h+n,p+i,o+n,s+i),f=o,d=s;break;case"C":f=a[5],d=a[6],h=a[3],p=a[4],e.bezierCurveTo(a[1]+n,a[2]+i,h+n,p+i,f+n,d+i);break;case"s":o=f+a[3],s=d+a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+i,f+a[1]+n,d+a[2]+i,o+n,s+i),h=f+a[1],p=d+a[2],f=o,d=s;break;case"S":o=a[3],s=a[4],h=2*f-h,p=2*d-p,e.bezierCurveTo(h+n,p+i,a[1]+n,a[2]+i,o+n,s+i),f=o,d=s,h=a[1],p=a[2];break;case"q":o=f+a[3],s=d+a[4],h=f+a[1],p=d+a[2],e.quadraticCurveTo(h+n,p+i,o+n,s+i),f=o,d=s;break;case"Q":o=a[3],s=a[4],e.quadraticCurveTo(a[1]+n,a[2]+i,o+n,s+i),f=o,d=s,h=a[1],p=a[2];break;case"t":o=f+a[1],s=d+a[2],null===c[0].match(/[QqTt]/)?(h=f,p=d):"t"===c[0]?(h=2*f-u,p=2*d-l):"q"===c[0]&&(h=2*f-h,p=2*d-p),u=h,l=p,e.quadraticCurveTo(h+n,p+i,o+n,s+i),f=o,d=s,h=f+a[1],p=d+a[2];break;case"T":o=a[1],s=a[2],h=2*f-h,p=2*d-p,e.quadraticCurveTo(h+n,p+i,o+n,s+i),f=o,d=s;break;case"a":r(e,f+n,d+i,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+d+i]),f+=a[6],d+=a[7];break;case"A":r(e,f+n,d+i,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+i]),f=a[6],d=a[7];break;case"z":case"Z":e.closePath()}c=a}}},{"./arc":49}],53:[function(e,t,n){function r(){this._active=null,this._handlers={}}var i=r.prototype;i.initialize=function(e,t,n){return this._el=e,this._obj=n||null,this.padding(t)},i.element=function(){return this._el},i.padding=function(e){return this._padding=e||{top:0,left:0,bottom:0,right:0},this},i.scene=function(e){return arguments.length?(this._scene=e,this):this._scene},i.on=function(){},i.off=function(){},i.handlers=function(){var e,t=this._handlers,n=[];for(e in t)n.push.apply(n,t[e]);return n},i.eventName=function(e){var t=e.indexOf(".");return 0>t?e:e.slice(0,t)},t.exports=r},{}],54:[function(e,t,n){function r(){this._el=null,this._bgcolor=null}var i=r.prototype;i.initialize=function(e,t,n,r){return this._el=e,this.resize(t,n,r)},i.element=function(){return this._el},i.scene=function(){return this._el&&this._el.firstChild},i.background=function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},i.resize=function(e,t,n){return this._width=e,this._height=t,this._padding=n||{top:0,left:0,bottom:0,right:0},this},i.render=function(){return this},t.exports=r},{}],55:[function(e,t,n){function r(){a.call(this),this._down=null,this._touch=null,this._first=!0}var i=e("../../util/dom"),a=e("../Handler"),o=e("./marks"),s=a.prototype,u=r.prototype=Object.create(s);u.constructor=r,u.initialize=function(e,t,n){var r=this._canvas=i.find(e,"canvas"),a=this;return this.events.forEach(function(e){r.addEventListener(e,function(t){u[e]?u[e].call(a,t):a.fire(e,t)})}),s.initialize.call(this,e,t,n)},u.canvas=function(){return this._canvas},u.context=function(){return this._canvas.getContext("2d")},u.events=["keydown","keypress","keyup","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],u.DOMMouseScroll=function(e){this.fire("mousewheel",e)},u.mousemove=function(e){var t=this._active,n=this.pickEvent(e);n===t?this.fire("mousemove",e):(this.fire("mouseout",e),this._active=n,this.fire("mouseover",e),this.fire("mousemove",e))},u.mouseout=function(e){this.fire("mouseout",e),
this._active=null},u.mousedown=function(e){this._down=this._active,this.fire("mousedown",e)},u.click=function(e){this._down===this._active&&(this.fire("click",e),this._down=null)},u.touchstart=function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",e,!0)},u.touchmove=function(e){this.fire("touchmove",e,!0)},u.touchend=function(e){this.fire("touchend",e,!0),this._touch=null},u.fire=function(e,t,n){var r,i,a=n?this._touch:this._active,o=this._handlers[e];if(o)for(t.vegaType=e,r=0,i=o.length;i>r;++r)o[r].handler.call(this._obj,t,a)},u.on=function(e,t){var n=this.eventName(e),r=this._handlers;return(r[n]||(r[n]=[])).push({type:e,handler:t}),this},u.off=function(e,t){var n,r=this.eventName(e),i=this._handlers[r];if(i){for(n=i.length;--n>=0;)i[n].type===e&&(t&&i[n].handler!==t||i.splice(n,1));return this}},u.pickEvent=function(e){var t,n,r=this._canvas.getBoundingClientRect(),i=this._padding;return this.pick(this._scene,t=e.clientX-r.left,n=e.clientY-r.top,t-i.left,n-i.top)},u.pick=function(e,t,n,r,i){var a=this.context(),s=o[e.marktype];return s.pick.call(this,a,e,t,n,r,i)},t.exports=r},{"../../util/dom":83,"../Handler":53,"./marks":62}],56:[function(e,t,n){function r(e){c.call(this),this._loader=new u(e)}function i(e,t){if(!t)return null;var n,r,i,o,u,l=new s;for(n=0,r=t.length;r>n;++n)i=t[n],o=i.mark,u=o.group,i=f[o.marktype].nested?o:i,l.union(a(i.bounds,u)),i["bounds:prev"]&&l.union(a(i["bounds:prev"],u));return l.round(),e.beginPath(),e.rect(l.x1,l.y1,l.width(),l.height()),e.clip(),l}function a(e,t){if(null==t)return e;for(var n=e.clone();null!=t;t=t.mark.group)n.translate(t.x||0,t.y||0);return n}var o=e("../../util/dom"),s=e("../../util/Bounds"),u=e("../../util/ImageLoader"),l=e("../../util/canvas"),c=e("../Renderer"),f=e("./marks");r.RETINA=!0;var d=c.prototype,h=r.prototype=Object.create(d);h.constructor=r,h.initialize=function(e,t,n,r){return this._canvas=l.instance(t,n),e&&(o.clear(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),d.initialize.call(this,e,t,n,r)},h.resize=function(e,t,n){return d.resize.call(this,e,t,n),l.resize(this._canvas,this._width,this._height,this._padding,r.RETINA),this},h.canvas=function(){return this._canvas},h.context=function(){return this._canvas?this._canvas.getContext("2d"):null},h.pendingImages=function(){return this._loader.pending()},h.render=function(e,t){var n,r=this.context(),a=this._padding,o=this._width+a.left+a.right,s=this._height+a.top+a.bottom;return this._scene=e,r.save(),n=i(r,t),this.clear(-a.left,-a.top,o,s),this.draw(r,e,n),r.restore(),this._scene=null,this},h.draw=function(e,t,n){var r=f[t.marktype];r.draw.call(this,e,t,n)},h.clear=function(e,t,n,r){var i=this.context();i.clearRect(e,t,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(e,t,n,r))},h.loadImage=function(e){var t=this,n=this._scene;return this._loader.loadImage(e,function(){t.renderAsync(n)})},h.renderAsync=function(e){var t=this;t._async_id&&clearTimeout(t._async_id),t._async_id=setTimeout(function(){t.render(e),delete t._async_id},10)},t.exports=r},{"../../util/Bounds":76,"../../util/ImageLoader":79,"../../util/canvas":82,"../../util/dom":83,"../Renderer":54,"./marks":62}],57:[function(e,t,n){t.exports={Handler:e("./CanvasHandler"),Renderer:e("./CanvasRenderer")}},{"./CanvasHandler":55,"./CanvasRenderer":56}],58:[function(e,t,n){function r(e,t){var n=t.x||0,r=t.y||0,i=t.innerRadius||0,o=t.outerRadius||0,s=(t.startAngle||0)-a,u=(t.endAngle||0)-a;e.beginPath(),0===i?e.moveTo(n,r):e.arc(n,r,i,s,u,0),e.arc(n,r,o,u,s,1),e.closePath()}var i=e("./util"),a=Math.PI/2;t.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},{"./util":69}],59:[function(e,t,n){function r(e,t){var n=t[0],r=n.pathCache||(n.pathCache=o(u(t)));s(e,r)}function i(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),l(e,o,n,r)?o[0]:null)}var a=e("./util"),o=e("../../../path/parse"),s=e("../../../path/render"),u=e("../../../util/svg").path.area,l=a.testPath(r);t.exports={draw:a.drawOne(r),pick:i,nested:!0}},{"../../../path/parse":51,"../../../path/render":52,"../../../util/svg":85,"./util":69}],60:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length){var r,i,a,o,u,l,c,f,d,h,p=t.items,g=this;for(s.draw.call(g,e,t,n),c=0,f=p.length;f>c;++c){for(r=p[c],a=r.axisItems||[],i=r.items||[],o=r.legendItems||[],u=r.x||0,l=r.y||0,e.save(),e.translate(u,l),r.clip&&(e.beginPath(),e.rect(0,0,r.width||0,r.height||0),e.clip()),n&&n.translate(-u,-l),d=0,h=a.length;h>d;++d)"back"===a[d].layer&&g.draw(e,a[d],n);for(d=0,h=i.length;h>d;++d)g.draw(e,i[d],n);for(d=0,h=a.length;h>d;++d)"back"!==a[d].layer&&g.draw(e,a[d],n);for(d=0,h=o.length;h>d;++d)g.draw(e,o[d],n);n&&n.translate(u,l),e.restore()}}}function i(e,t){return t.fill||t.stroke}function a(e,t,n,r,i,a){if(t.bounds&&!t.bounds.contains(i,a))return null;var o,s,l,c,f,d,h,p=t.items||[];for(d=p.length;--d>=0;){for(s=p[d],c=s.x||0,f=s.y||0,e.save(),e.translate(c,f),h=s.items.length;--h>=0;)if(o=s.items[h],o.interactive!==!1&&(l=this.pick(o,n,r,i-c,a-f)))return e.restore(),l;e.restore()}return t.interactive!==!1?u(e,t,n,r,i,a):null}var o=e("./util"),s=e("./rect"),u=o.pick(i);t.exports={draw:r,pick:a}},{"./rect":65,"./util":69}],61:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i=this,a=t.items,o=0,s=a.length;s>o;++o)if(r=a[o],!n||n.intersects(r.bounds)){r.image&&r.image.url===r.url||(r.image=i.loadImage(r.url),r.image.url=r.url);var u,l=r.x||0,c=r.y||0,f=r.width||r.image&&r.image.width||0,d=r.height||r.image&&r.image.height||0;l-="center"===r.align?f/2:"right"===r.align?f:0,c-="middle"===r.baseline?d/2:"bottom"===r.baseline?d:0,r.image.loaded&&(e.globalAlpha=null!=(u=r.opacity)?u:1,e.drawImage(r.image,l,c,f,d))}}var i=e("./util");t.exports={draw:r,pick:i.pick()}},{"./util":69}],62:[function(e,t,n){t.exports={arc:e("./arc"),area:e("./area"),group:e("./group"),image:e("./image"),line:e("./line"),path:e("./path"),rect:e("./rect"),rule:e("./rule"),symbol:e("./symbol"),text:e("./text")}},{"./arc":58,"./area":59,"./group":60,"./image":61,"./line":63,"./path":64,"./rect":65,"./rule":66,"./symbol":67,"./text":68}],63:[function(e,t,n){function r(e,t){var n=t[0],r=n.pathCache||(n.pathCache=o(u(t)));s(e,r)}function i(e,t,n,r,i,a){var o=t.items,s=t.bounds;return!o||!o.length||s&&!s.contains(i,a)?null:(null!=e.pixelratio&&1!==e.pixelratio&&(n*=e.pixelratio,r*=e.pixelratio),l(e,o,n,r)?o[0]:null)}var a=e("./util"),o=e("../../../path/parse"),s=e("../../../path/render"),u=e("../../../util/svg").path.line,l=a.testPath(r,!1);t.exports={draw:a.drawOne(r),pick:i,nested:!0}},{"../../../path/parse":51,"../../../path/render":52,"../../../util/svg":85,"./util":69}],64:[function(e,t,n){function r(e,t){if(null==t.path)return!0;var n=t.pathCache||(t.pathCache=a(t.path));o(e,n,t.x,t.y)}var i=e("./util"),a=e("../../../path/parse"),o=e("../../../path/render");t.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},{"../../../path/parse":51,"../../../path/render":52,"./util":69}],65:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,a,o,s,u,l,c=t.items,f=0,d=c.length;d>f;++f)r=c[f],(!n||n.intersects(r.bounds))&&(a=null==r.opacity?1:r.opacity,0!==a&&(o=r.x||0,s=r.y||0,u=r.width||0,l=r.height||0,r.fill&&i.fill(e,r,a)&&e.fillRect(o,s,u,l),r.stroke&&i.stroke(e,r,a)&&e.strokeRect(o,s,u,l)))}var i=e("./util");t.exports={draw:r,pick:i.pick()}},{"./util":69}],66:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i,a,s,u,l,c=t.items,f=0,d=c.length;d>f;++f)r=c[f],(!n||n.intersects(r.bounds))&&(i=null==r.opacity?1:r.opacity,0!==i&&(a=r.x||0,s=r.y||0,u=null!=r.x2?r.x2:a,l=null!=r.y2?r.y2:s,r.stroke&&o.stroke(e,r,i)&&(e.beginPath(),e.moveTo(a,s),e.lineTo(u,l),e.stroke())))}function i(e,t){var n=t.x||0,r=t.y||0,i=null!=t.x2?t.x2:n,a=null!=t.y2?t.y2:r,o=t.strokeWidth,s=t.strokeCap;e.lineWidth=null!=o?o:1,e.lineCap=null!=s?s:"butt",e.beginPath(),e.moveTo(n,r),e.lineTo(i,a)}function a(e,t,n,r){return e.isPointInStroke?(i(e,t),e.isPointInStroke(n,r)):!1}var o=e("./util");t.exports={draw:r,pick:o.pick(a)}},{"./util":69}],67:[function(e,t,n){function r(e,t){var n,r,i,s,u=null!=t.size?t.size:100,l=t.x,c=t.y;if(e.beginPath(),null==t.shape||"circle"===t.shape)return n=Math.sqrt(u/Math.PI),e.arc(l,c,n,0,2*Math.PI,0),void e.closePath();switch(t.shape){case"cross":n=Math.sqrt(u/5)/2,r=3*n,e.moveTo(l-r,c-n),e.lineTo(l-n,c-n),e.lineTo(l-n,c-r),e.lineTo(l+n,c-r),e.lineTo(l+n,c-n),e.lineTo(l+r,c-n),e.lineTo(l+r,c+n),e.lineTo(l+n,c+n),e.lineTo(l+n,c+r),e.lineTo(l-n,c+r),e.lineTo(l-n,c+n),e.lineTo(l-r,c+n);break;case"diamond":s=Math.sqrt(u/(2*o)),i=s*o,e.moveTo(l,c-s),e.lineTo(l+i,c),e.lineTo(l,c+s),e.lineTo(l-i,c);break;case"square":r=Math.sqrt(u),n=r/2,e.rect(l-n,c-n,r,r);break;case"triangle-down":i=Math.sqrt(u/a),s=i*a/2,e.moveTo(l,c+s),e.lineTo(l+i,c-s),e.lineTo(l-i,c-s);break;case"triangle-up":i=Math.sqrt(u/a),s=i*a/2,e.moveTo(l,c-s),e.lineTo(l+i,c+s),e.lineTo(l-i,c+s)}e.closePath()}var i=e("./util"),a=Math.sqrt(3),o=Math.tan(30*Math.PI/180);t.exports={draw:i.drawAll(r),pick:i.pickPath(r)}},{"./util":69}],68:[function(e,t,n){function r(e,t,n){if(t.items&&t.items.length)for(var r,i,a,o,l,c,f,d=t.items,h=0,p=d.length;p>h;++h)r=d[h],(!n||n.intersects(r.bounds))&&(f=s.value(r.text),f&&(i=null==r.opacity?1:r.opacity,0!==i&&(e.font=s.font(r),e.textAlign=r.align||"left",a=r.x||0,o=r.y||0,(l=r.radius)&&(c=(r.theta||0)-Math.PI/2,a+=l*Math.cos(c),o+=l*Math.sin(c)),r.angle&&(e.save(),e.translate(a,o),e.rotate(r.angle*Math.PI/180),a=o=0),a+=r.dx||0,o+=(r.dy||0)+s.offset(r),r.fill&&u.fill(e,r,i)&&e.fillText(f,a,o),r.stroke&&u.stroke(e,r,i)&&e.strokeText(f,a,o),r.angle&&e.restore())))}function i(e,t,n,r,i,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=o(t,l,!0),u=-t.angle*Math.PI/180,c=Math.cos(u),f=Math.sin(u),d=t.x,h=t.y,p=c*i-f*a+(d-d*c+h*f),g=f*i+c*a+(h-d*f-h*c);return s.contains(p,g)}var a=e("../../../util/Bounds"),o=e("../../../util/bound").text,s=e("../../../util/text"),u=e("./util"),l=new a;t.exports={draw:r,pick:u.pick(i)}},{"../../../util/Bounds":76,"../../../util/bound":81,"../../../util/text":86,"./util":69}],69:[function(e,t,n){function r(e,t,n,r){if(!e(t,r)){var i=null==n.opacity?1:n.opacity;0!==i&&(n.fill&&c(t,n,i)&&t.fill(),n.stroke&&f(t,n,i)&&t.stroke())}}function i(e,t,n,i){var a,o,s;for(a=0,o=n.items.length;o>a;++a)s=n.items[a],(!i||i.intersects(s.bounds))&&r(e,t,s,s)}function a(e){return function(t,n,r){i(e,t,n,r)}}function o(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&r(e,t,n.items[0],n.items)}}function s(e){return e||(e=p),function(t,n,r,i,a,o){if(!n.items.length)return null;var s,u,l;for(null!=t.pixelratio&&1!==t.pixelratio&&(r*=t.pixelratio,i*=t.pixelratio),l=n.items.length;--l>=0;)if(s=n.items[l],u=s.bounds,(!u||u.contains(a,o))&&u&&e(t,s,r,i,a,o))return s;return null}}function u(e,t){return function(n,r,i,a){var o,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(o=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=s?s:"butt"),e(n,r)?!1:l&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a)}}function l(e){return s(u(e))}function c(e,t,n){return n*=null==t.fillOpacity?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=d(e,t,t.fill),!0):!1}function f(e,t,n){var r,i=null!=(i=t.strokeWidth)?i:1;return 0>=i?!1:(n*=null==t.strokeOpacity?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=d(e,t,t.stroke),e.lineWidth=i,e.lineCap=null!=(r=t.strokeCap)?r:"butt",e.vgLineDash(t.strokeDash||null),e.vgLineDashOffset(t.strokeDashOffset||0),!0):!1)}function d(e,t,n){return n.id?h(e,n,t.bounds):n}function h(e,t,n){var r,i,a=n.width(),o=n.height(),s=n.x1+t.x1*a,u=n.y1+t.y1*o,l=n.x1+t.x2*a,c=n.y1+t.y2*o,f=e.createLinearGradient(s,u,l,c),d=t.stops;for(r=0,i=d.length;i>r;++r)f.addColorStop(d[r].offset,d[r].color);return f}var p=function(){return!0};t.exports={drawOne:o,drawAll:a,pick:s,pickPath:l,testPath:u,stroke:f,fill:c,color:d,gradient:h}},{}],70:[function(e,t,n){t.exports={canvas:e("./canvas"),svg:e("./svg")}},{"./canvas":57,"./svg":74}],71:[function(e,t,n){function r(){a.call(this)}var i=e("../../util/dom"),a=e("../Handler"),o=a.prototype,s=r.prototype=Object.create(o);s.constructor=r,s.initialize=function(e,t,n){return this._svg=i.find(e,"svg"),o.initialize.call(this,e,t,n)},s.svg=function(){return this._svg},s.listener=function(e){var t=this;return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,e.call(t._obj,n,i)}},s.on=function(e,t){var n=this.eventName(e),r=this._svg,i=this._handlers,a={type:e,handler:t,listener:this.listener(t)};return(i[n]||(i[n]=[])).push(a),r.addEventListener(n,a.listener),this},s.off=function(e,t){var n,r=this.eventName(e),i=this._svg,a=this._handlers[r];if(a){for(n=a.length;--n>=0;)(a[n].type===e&&!t||a[n].handler===t)&&(i.removeEventListener(r,a[n].listener),a.splice(n,1));return this}},t.exports=r},{"../../util/dom":83,"../Handler":53}],72:[function(e,t,n){function r(e){c.call(this),this._loader=new l(e),this._dirtyID=0}function i(e,t,n){var r,i,a;for(e=d.child(e,n,"linearGradient",p),e.setAttribute("id",t.id),e.setAttribute("x1",t.x1),e.setAttribute("x2",t.x2),e.setAttribute("y1",t.y1),e.setAttribute("y2",t.y2),r=0,i=t.stops.length;i>r;++r)a=d.child(e,r,"stop",p),a.setAttribute("offset",t.stops[r].offset),a.setAttribute("stop-color",t.stops[r].color);d.clear(e,r)}function a(e,t,n){var r;e=d.child(e,n,"clipPath",p),e.setAttribute("id",t.id),r=d.child(e,0,"rect",p),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",t.width),r.setAttribute("height",t.height)}function o(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function s(e,t,n,r,i){var a=d.child(e,r,t.tag,p,null,i);if(a.__data__=n,a.__values__={fill:"default"},"g"===t.tag){var o=d.child(a,0,"rect",p,"background");o.__data__=n}return n._svg=a}function u(e,t,n){t!==x[e]&&(null!=t?n?b.setAttributeNS(n,e,t):b.setAttribute(e,t):n?b.removeAttributeNS(n,e):b.removeAttribute(e),x[e]=t)}var l=e("../../util/ImageLoader"),c=e("../Renderer"),f=e("../../util/text"),d=e("../../util/dom"),h=e("../../util/svg"),p=h.metadata.xmlns,g=e("./marks"),m=c.prototype,v=r.prototype=Object.create(m);v.constructor=r,v.initialize=function(e,t,n,r){return e&&(this._svg=d.child(e,0,"svg",p,"marks"),d.clear(e,1),this._root=d.child(this._svg,0,"g",p),d.clear(this._svg,1)),this._defs={clip_id:1,gradient:{},clipping:{}},this.background(this._bgcolor),m.initialize.call(this,e,t,n,r)},v.background=function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),m.background.apply(this,arguments)},v.resize=function(e,t,n){if(m.resize.call(this,e,t,n),this._svg){var r=this._width,i=this._height,a=this._padding;this._svg.setAttribute("width",r+a.left+a.right),this._svg.setAttribute("height",i+a.top+a.bottom),this._root.setAttribute("transform","translate("+a.left+","+a.top+")")}return this},v.svg=function(){if(!this._svg)return null;var e={"class":"marks",width:this._width+this._padding.left+this._padding.right,height:this._height+this._padding.top+this._padding.bottom};for(var t in h.metadata)e[t]=h.metadata[t];return d.openTag("svg",e)+this._svg.innerHTML+d.closeTag("svg")},v.imageURL=function(e){return this._loader.imageURL(e)},v.render=function(e,t){return this._dirtyCheck(t)&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,e,-1),d.clear(this._root,1)),this.updateDefs(),this},v.draw=function(e,t,n){this.drawMark(e,t,n,g[t.marktype])},v.updateDefs=function(){var e,t=this._svg,n=this._defs,r=n.el,o=0;for(e in n.gradient)r||(r=n.el=d.child(t,0,"defs",p)),i(r,n.gradient[e],o++);for(e in n.clipping)r||(r=n.el=d.child(t,0,"defs",p)),a(r,n.clipping[e],o++);r&&(0===o?(t.removeChild(r),n.el=null):d.clear(r,o))},v._resetDefs=function(){var e=this._defs;e.clip_id=1,e.gradient={},e.clipping={}},v.isDirty=function(e){return this._dirtyAll||e.dirty===this._dirtyID},v._dirtyCheck=function(e){if(this._dirtyAll=!0,!e)return!0;var t,n,r,i,a,s,u,l=++this._dirtyID;for(a=0,s=e.length;s>a;++a)t=e[a],n=t.mark,n.marktype!==r&&(r=n.marktype,i=g[r]),"exit"!==t.status?(t=i.nest?n.items[0]:t,t._update!==l&&(t._svg?this._update(i,t._svg,t):(this._dirtyAll=!1,o(t,l)),t._update=l)):t._svg&&(i.nest&&t.mark.items.length?(this._update(i,t._svg,t.mark.items[0]),u=t.mark.items[0],u._svg=t._svg,u._update=l):d.remove(t._svg),t._svg=null);return!this._dirtyAll},v.drawMark=function(e,t,n,r){if(this.isDirty(t)){var i,a,o,u,l,c,f=r.nest?t.items&&t.items.length?[t.items[0]]:[]:t.items||[],h=t.interactive===!1?"none":null,g="g"===r.tag,m=d.cssClass(t);for(i=d.child(e,n+1,"g",p,m),i.setAttribute("class",m),t._svg=i,!g&&h&&i.style.setProperty("pointer-events",h),a=0,o=f.length;o>a;++a)this.isDirty(l=f[a])&&(c=!(this._dirtyAll||l._svg),u=s(i,r,l,a,c),this._update(r,u,l),g&&(c&&(this._dirtyAll=!0),this._recurse(u,l),c&&(this._dirtyAll=!1)));return d.clear(i,a),i}},v._recurse=function(e,t){var n,r,i=t.items||[],a=t.legendItems||[],o=t.axisItems||[],s=0;for(n=0,r=o.length;r>n;++n)"back"===o[n].layer&&this.drawMark(e,o[n],s++,g.group);for(n=0,r=i.length;r>n;++n)this.draw(e,i[n],s++);for(n=0,r=o.length;r>n;++n)"back"!==o[n].layer&&this.drawMark(e,o[n],s++,g.group);for(n=0,r=a.length;r>n;++n)this.drawMark(e,a[n],s++,g.group);d.clear(e,1+s)};var y="undefined"!=typeof window?window.location.href:"",b=null,x=null,w={group:function(e,t,n){b=t.childNodes[0],x=t.__values__,e.background(u,n,this);var r=n.mark.interactive===!1?"none":null;r!==x.events&&(b.style.setProperty("pointer-events",r),x.events=r)},text:function(e,t,n){var r=f.value(n.text);r!==x.text&&(t.textContent=r,x.text=r),r=f.font(n),r!==x.font&&(t.style.setProperty("font",r),x.font=r)}};v._update=function(e,t,n){b=t,x=t.__values__,e.attr(u,n,this);var r=w[e.type];r&&r(e,t,n),this.style(b,n)},v.style=function(e,t){if(null!=t){var n,r,i,a,o;for(n=0,r=h.styleProperties.length;r>n;++n)i=h.styleProperties[n],o=t[i],o!==x[i]&&(a=h.styles[i],null==o?"fill"===a?e.style.setProperty(a,"none"):e.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+y+"#"+o.id+")"),e.style.setProperty(a,o+"")),x[i]=o)}},t.exports=r},{"../../util/ImageLoader":79,"../../util/dom":83,"../../util/svg":85,"../../util/text":86,"../Renderer":54,"./marks":75}],73:[function(e,t,n){function r(e){s.call(this),this._loader=new u(e),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={clip_id:1,gradient:{},clipping:{}}}function i(e,t,n,r){v[r||e]=t}function a(e,t,n,r){if(null==e)return"";var i,a,o,s,u,f="";for("bgrect"===n&&t.interactive===!1&&(f+="pointer-events: none;"),"text"===n&&(f+="font: "+c.font(e)+";"),i=0,a=l.styleProperties.length;a>i;++i)o=l.styleProperties[i],s=l.styles[o],u=e[o],null==u?"fill"===s&&(f+=(f.length?" ":"")+"fill: none;"):(u.id&&(r.gradient[u.id]=u,u="url(#"+u.id+")"),f+=(f.length?" ":"")+s+": "+u+";");return f?'style="'+f+'"':null}function o(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var s=e("../Renderer"),u=e("../../util/ImageLoader"),l=e("../../util/svg"),c=e("../../util/text"),f=e("../../util/dom"),d=f.openTag,h=f.closeTag,p=e("./marks"),g=s.prototype,m=r.prototype=Object.create(g);m.constructor=r,m.resize=function(e,t,n){g.resize.call(this,e,t,n);var r=this._padding,i=this._text,a={"class":"marks",width:this._width+r.left+r.right,height:this._height+r.top+r.bottom};for(var o in l.metadata)a[o]=l.metadata[o];return i.head=d("svg",a),i.root=d("g",{transform:"translate("+r.left+","+r.top+")"}),i.foot=h("g")+h("svg"),this},m.svg=function(){var e=this._text;return e.head+e.defs+e.root+e.body+e.foot},m.render=function(e){return this._text.body=this.mark(e),this._text.defs=this.buildDefs(),this},m.reset=function(){return this._defs.clip_id=0,this},m.buildDefs=function(){var e,t,n,r,i=this._defs,a="";for(t in i.gradient){for(n=i.gradient[t],r=n.stops,a+=d("linearGradient",{id:t,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),e=0;e<r.length;++e)a+=d("stop",{offset:r[e].offset,"stop-color":r[e].color})+h("stop");a+=h("linearGradient")}for(t in i.clipping)n=i.clipping[t],a+=d("clipPath",{id:t}),a+=d("rect",{x:0,y:0,width:n.width,height:n.height})+h("rect"),a+=h("clipPath");return a.length>0?d("defs")+a+h("defs"):""},m.imageURL=function(e){return this._loader.imageURL(e)};var v;m.attributes=function(e,t){return v={},e(i,t,this),v},m.mark=function(e){var t,n,r,i=p[e.marktype],s=i.tag,u=i.attr,l=i.nest||!1,g=l?e.items&&e.items.length?[e.items[0]]:[]:e.items||[],m=this._defs,v="";for("g"!==s&&e.interactive===!1&&(t='style="pointer-events: none;"'),v+=d("g",{"class":f.cssClass(e)},t),n=0;n<g.length;++n)r=g[n],t="g"!==s?a(r,e,s,m):null,v+=d(s,this.attributes(u,r),t),"text"===s?v+=o(c.value(r.text)):"g"===s&&(v+=d("rect",this.attributes(i.background,r),a(r,e,"bgrect",m))+h("rect"),v+=this.markGroup(r)),v+=h(s);return v+h("g")},m.markGroup=function(e){var t,n,r="",i=e.axisItems||[],a=e.items||[],o=e.legendItems||[];for(t=0,n=i.length;n>t;++t)"back"===i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=a.length;n>t;++t)r+=this.mark(a[t]);for(t=0,n=i.length;n>t;++t)"back"!==i[t].layer&&(r+=this.mark(i[t]));for(t=0,n=o.length;n>t;++t)r+=this.mark(o[t]);return r},t.exports=r},{"../../util/ImageLoader":79,"../../util/dom":83,"../../util/svg":85,"../../util/text":86,"../Renderer":54,"./marks":75}],74:[function(e,t,n){t.exports={Handler:e("./SVGHandler"),Renderer:e("./SVGRenderer"),string:{Renderer:e("./SVGStringRenderer")}}},{"./SVGHandler":71,"./SVGRenderer":72,"./SVGStringRenderer":73}],75:[function(e,t,n){function r(e){return i(e.x||0,e.y||0)}function i(e,t){return"translate("+e+","+t+")"}var a=e("../../util/text"),o=e("../../util/svg"),s=o.textAlign,u=o.path;t.exports={arc:{tag:"path",type:"arc",attr:function(e,t){e("transform",r(t)),e("d",u.arc(t))}},area:{tag:"path",type:"area",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",u.area(n))}},group:{tag:"g",type:"group",attr:function(e,t,n){var i,a,o=null;e("transform",r(t)),t.clip&&(i=n._defs,o=t.clip_id||(t.clip_id="clip"+i.clip_id++),a=i.clipping[o]||(i.clipping[o]={id:o}),a.width=t.width||0,a.height=t.height||0),e("clip-path",o?"url(#"+o+")":null)},background:function(e,t){e("class","background"),e("width",t.width||0),e("height",t.height||0)}},image:{tag:"image",type:"image",attr:function(e,t,n){var r=t.x||0,a=t.y||0,o=t.width||0,s=t.height||0,u=n.imageURL(t.url);r-="center"===t.align?o/2:"right"===t.align?o:0,a-="middle"===t.baseline?s/2:"bottom"===t.baseline?s:0,e("href",u,"http://www.w3.org/1999/xlink","xlink:href"),e("transform",i(r,a)),e("width",o),e("height",s)}},line:{tag:"path",type:"line",nest:!0,attr:function(e,t){var n=t.mark.items;n.length&&e("d",u.line(n))}},path:{tag:"path",type:"path",attr:function(e,t){e("transform",r(t)),e("d",t.path)}},rect:{tag:"rect",type:"rect",nest:!1,attr:function(e,t){e("transform",r(t)),e("width",t.width||0),e("height",t.height||0)}},rule:{tag:"line",type:"rule",attr:function(e,t){e("transform",r(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)}},symbol:{tag:"path",type:"symbol",attr:function(e,t){e("transform",r(t)),e("d",u.symbol(t))}},text:{tag:"text",type:"text",nest:!1,attr:function(e,t){var n,r=t.dx||0,o=(t.dy||0)+a.offset(t),u=t.x||0,l=t.y||0,c=t.angle||0,f=t.radius||0;f&&(n=(t.theta||0)-Math.PI/2,u+=f*Math.cos(n),l+=f*Math.sin(n)),e("text-anchor",s[t.align]||"start"),c?(n=i(u,l)+" rotate("+c+")",(r||o)&&(n+=" "+i(r,o))):n=i(u+r,l+o),e("transform",n)}}}},{"../../util/svg":85,"../../util/text":86}],76:[function(e,t,n){function r(e){this.clear(),e&&this.union(e)}var i=r.prototype;i.clone=function(){return new r(this)},i.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},i.set=function(e,t,n,r){return this.x1=e,this.y1=t,this.x2=n,this.y2=r,this},i.add=function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},i.expand=function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},i.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},i.translate=function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},i.rotate=function(e,t,n){var r=Math.cos(e),i=Math.sin(e),a=t-t*r+n*i,o=n-t*i-n*r,s=this.x1,u=this.x2,l=this.y1,c=this.y2;return this.clear().add(r*s-i*l+a,i*s+r*l+o).add(r*s-i*c+a,i*s+r*c+o).add(r*u-i*l+a,i*u+r*l+o).add(r*u-i*c+a,i*u+r*c+o)},i.union=function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},i.encloses=function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},i.intersects=function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},i.contains=function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},i.width=function(){return this.x2-this.x1},i.height=function(){return this.y2-this.y1},t.exports=r},{}],77:[function(e,t,n){t.exports=function(e){function t(){}function n(t,n){e.add(t,n)}return{bounds:function(t){return arguments.length?(e=t,this):e},beginPath:t,closePath:t,moveTo:n,lineTo:n,quadraticCurveTo:function(t,n,r,i){e.add(t,n),e.add(r,i)},bezierCurveTo:function(t,n,r,i,a,o){e.add(t,n),e.add(r,i),e.add(a,o)}}}},{}],78:[function(e,t,n){function r(e){this.id="gradient_"+i++,this.type=e||"linear",this.stops=[],this.x1=0,this.x2=1,this.y1=0,this.y2=0}var i=0,a=r.prototype;a.stop=function(e,t){return this.stops.push({offset:e,color:t}),this},t.exports=r},{}],79:[function(e,t,n){(function(n){function r(e){this._pending=0,this._config=e||r.Config}function i(e,t){var n=o.sanitizeUrl(this.params(e));if(!n)return t&&t(e,null),null;var r=this,i=new Image;return r._pending+=1,i.onload=function(){r._pending-=1,i.loaded=!0,t&&t(null,i)},i.src=n,i}function a(e,t){var r=this,i=new("undefined"!=typeof window?window.canvas:"undefined"!=typeof n?n.canvas:null).Image;return r._pending+=1,o(this.params(e),function(e,n){return r._pending-=1,e?(t&&t(e,null),null):(i.src=n,i.loaded=!0,void(t&&t(null,i)))}),i}var o=e("datalib/src/import/load");r.Config=null;var s=r.prototype;s.pending=function(){return this._pending},s.params=function(e){var t,n={url:e};for(t in this._config)n[t]=this._config[t];return n},s.imageURL=function(e){return o.sanitizeUrl(this.params(e))},s.loadImage=function(e,t){return o.useXHR?i.call(this,e,t):a.call(this,e,t)},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"datalib/src/import/load":22}],80:[function(e,t,n){function r(e){this.mark=e}var i=r.prototype;i.hasPropertySet=function(e){var t=this.mark.def.properties;return t&&null!=t[e]},i.cousin=function(e,t){if(0===e)return this;e=e||-1;var n=this.mark,r=n.group,i=null==t?n.items.indexOf(this):t,a=r.items.indexOf(n)+e;return r.items[a].items[i]},i.sibling=function(e){if(0===e)return this;e=e||-1;var t=this.mark,n=t.items.indexOf(this)+e;return t.items[n]},i.remove=function(){var e=this,t=e.mark.items,n=t.indexOf(e);return n>=0&&(n===t.length-1?t.pop():t.splice(n,1)),e},i.touch=function(){this.pathCache&&(this.pathCache=null)},t.exports=r},{}],81:[function(e,t,n){function r(){return O||(O=x.instance(1,1).getContext("2d"))}function i(e,t){return e.stroke&&0!==e.opacity&&0!==e.stokeOpacity&&t.expand(null!=e.strokeWidth?e.strokeWidth:1),t}function a(e,t,n,r,a){return null==t?n.set(0,0,0,0):(S(D.bounds(n),t,r,a),i(e,n)),n}function o(e,t){var n=e.path?e.pathCache||(e.pathCache=$(e.path)):null;return a(e,n,t,e.x,e.y)}function s(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=$(M(n)));return a(r,i,t)}function u(e,t){if(0===e.items.length)return t;var n=e.items,r=n[0],i=r.pathCache||(r.pathCache=$(T(n)));return a(r,i,t)}function l(e,t){var n,r;return i(e,t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0))}function c(e,t){var n=e.x||0,r=e.y||0,i=e.width||0,a=e.height||0;return n-="center"===e.align?i/2:"right"===e.align?i:0,r-="middle"===e.baseline?a/2:"bottom"===e.baseline?a:0,t.set(n,r,n+i,r+a)}function f(e,t){var n,r;return i(e,t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r))}function d(e,t){var n,r,a,o,s,u,l,c,f,d=e.x||0,h=e.y||0,p=e.innerRadius||0,g=e.outerRadius||0,m=(e.startAngle||0)-C,v=(e.endAngle||0)-C,y=1/0,b=-(1/0),x=1/0,w=-(1/0),_=[m,v],k=m-m%C;for(r=0;4>r&&v>k;++r,k+=C)_.push(k);for(r=0,a=_.length;a>r;++r)n=_[r],o=Math.cos(n),u=p*o,c=g*o,s=Math.sin(n),l=p*s,f=g*s,y=Math.min(y,u,c),b=Math.max(b,u,c),x=Math.min(x,l,f),w=Math.max(w,l,f);return i(e,t.set(d+y,h+x,d+b,h+w))}function h(e,t){var n,r,a,o,s=null!=e.size?e.size:100,u=e.x||0,l=e.y||0;switch(e.shape){case"cross":r=3*Math.sqrt(s/5)/2,t.set(u-r,l-r,u+r,l+r);break;case"diamond":o=Math.sqrt(s/(2*A)),a=o*A,t.set(u-a,l-o,u+a,l+o);break;case"square":r=Math.sqrt(s),n=r/2,t.set(u-n,l-n,u+n,l+n);break;case"triangle-down":a=Math.sqrt(s/E),o=a*E/2,t.set(u-a,l-o,u+a,l+o);break;case"triangle-up":a=Math.sqrt(s/E),o=a*E/2,t.set(u-a,l-o,u+a,l+o);break;default:n=Math.sqrt(s/Math.PI),t.set(u-n,l-n,u+n,l+n)}return i(e,t)}function p(e,t,n){var i,a,o=r(),s=_.size(e),u=e.align,l=e.radius||0,c=e.x||0,f=e.y||0,d=e.dx||0,h=(e.dy||0)+_.offset(e)-Math.round(.8*s);return l&&(a=(e.theta||0)-Math.PI/2,c+=l*Math.cos(a),f+=l*Math.sin(a)),o.font=_.font(e),i=o.measureText(_.value(e.text)).width,"center"===u?d-=i/2:"right"===u&&(d-=i),t.set(d+=c,h+=f,d+i,h+s),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,c,f),t.expand(n?0:1)}function g(e,t,n){var r,a,o=e.axisItems||[],s=e.items||[],u=e.legendItems||[];for(r=0,a=o.length;a>r;++r)t.union(o[r].bounds);for(r=0,a=s.length;a>r;++r)t.union(s[r].bounds);if(n)for(r=0,a=u.length;a>r;++r)t.union(u[r].bounds);return(e.width||e.height)&&i(e,t.add(0,0).add(e.width||0,e.height||0)),t.translate(e.x||0,e.y||0)}function m(e,t,n){var r=e.mark.marktype;t=t||L[r],t.nest&&(e=e.mark);var i=e.bounds,a=e["bounds:prev"]||(e["bounds:prev"]=new b);return i?(a.clear().union(i),i.clear()):e.bounds=new b,t(e,e.bounds,n),i||a.clear().union(e.bounds),e.bounds}function v(e,t,n){var r,i,a,o,s=e.marktype,u=L[s],l=e.items,c=l&&l.length;if(u.nest)return a=c?l[0]:(N.mark=e,N),o=m(a,u,n),t=t&&t.union(o)||o;if(t=t||e.bounds&&e.bounds.clear()||new b,c)for(r=0,i=l.length;i>r;++r)t.union(m(l[r],u,n));return e.bounds=t}var y=e("./BoundsContext"),b=e("./Bounds"),x=e("./canvas"),w=e("./svg"),_=e("./text"),k=e("../path"),$=k.parse,S=k.render,M=w.path.area,T=w.path.line,C=Math.PI/2,E=Math.sqrt(3),A=Math.tan(30*Math.PI/180),O=null,D=y(),L={group:g,symbol:h,image:c,rect:l,rule:f,arc:d,text:p,path:o,area:s,line:u};L.area.nest=!0,L.line.nest=!0;var N={mark:null};t.exports={mark:v,item:m,text:p,group:g}},{"../path":50,"./Bounds":76,"./BoundsContext":77,"./canvas":82,"./svg":85,"./text":86}],82:[function(e,t,n){(function(e){function n(t,n){t=t||1,n=n||1;var r;if("undefined"!=typeof document&&document.createElement)r=document.createElement("canvas"),r.width=t,r.height=n;else{var i="undefined"!=typeof window?window.canvas:"undefined"!=typeof e?e.canvas:null;if(!i.prototype)return null;r=new i(t,n)}return a(r)}function r(e,t,n,r,a){var o=this._ctx=e.getContext("2d"),s=1;return e.width=t+r.left+r.right,e.height=n+r.top+r.bottom,a&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&(o.pixelratio=s=i(e)||1),o.setTransform(s,0,0,s,s*r.left,s*r.top),e}function i(e){var t=e.getContext("2d"),n=window&&window.devicePixelRatio||1,r=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,i=n/r;if(n!==r){var a=e.width,o=e.height;e.width=a*i,e.height=o*i,e.style.width=a+"px",e.style.height=o+"px"}return i}function a(e){var t=e.getContext("2d");if(!t.vgLineDash){var n=function(){},r=[];return t.setLineDash?(t.vgLineDash=function(e){this.setLineDash(e||r)},
t.vgLineDashOffset=function(e){this.lineDashOffset=e}):void 0!==t.webkitLineDash?(t.vgLineDash=function(e){this.webkitLineDash=e||r},t.vgLineDashOffset=function(e){this.webkitLineDashOffset=e}):void 0!==t.mozDash?(t.vgLineDash=function(e){this.mozDash=e},t.vgLineDashOffset=n):(t.vgLineDash=n,t.vgLineDashOffset=n),e}}t.exports={instance:n,resize:r,lineDash:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],83:[function(e,t,n){function r(e,t,n){return n?e.createElementNS(n,t):e.createElement(t)}function i(e){if(e){var t=e.parentNode;t&&(t.removeChild(e),t.childNodes&&t.childNodes.length||i(t))}}t.exports={find:function(e,t){t=t.toLowerCase();for(var n=0,r=e.childNodes.length;r>n;++n)if(e.childNodes[n].tagName.toLowerCase()===t)return e.childNodes[n]},child:function(e,t,n,i,a,o){var s,u;return s=u=e.childNodes[t],(!s||o||s.tagName.toLowerCase()!==n.toLowerCase()||a&&s.getAttribute("class")!=a)&&(s=r(e.ownerDocument,n,i),e.insertBefore(s,u),a&&s.setAttribute("class",a)),s},clear:function(e,t){for(var n=e.childNodes.length;n>t;)e.removeChild(e.childNodes[--n]);return e},remove:i,cssClass:function(e){return"mark-"+e.marktype+(e.name?" "+e.name:"")},openTag:function(e,t,n){var r,i,a="<"+e;if(t)for(r in t)i=t[r],null!=i&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"},closeTag:function(e){return"</"+e+">"}}},{}],84:[function(e,t,n){function r(e,t){return JSON.stringify(e,u,t)}function i(e){var t="string"==typeof e?JSON.parse(e):e;return a(t)}function a(e){var t,n,r,i,u,l=e.marktype;for(r=0,i=s.length;i>r;++r)if(u=e[s[r]])for(t=0,n=u.length;n>t;++t)u[t][l?"mark":"group"]=e,l&&"group"!==l||a(u[t]);return l&&o.mark(e),e}var o=e("../util/bound"),s=["items","axisItems","legendItems"],u=["marktype","name","interactive","clip","items","axisItems","legendItems","layer","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","interpolate","tension","orient","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"];t.exports={toJSON:r,fromJSON:i}},{"../util/bound":81}],85:[function(e,t,n){(function(e){function n(e){return e.x||0}function r(e){return e.y||0}function i(e){return(e.x||0)+(e.width||0)}function a(e){return(e.y||0)+(e.height||0)}function o(e){return null==e.size?100:e.size}function s(e){return e.shape||"circle"}var u=("undefined"!=typeof window?window.d3:"undefined"!=typeof e?e.d3:null).svg,l=u.area().x(n).y1(r).y0(a),c=u.area().y(r).x1(n).x0(i),f=u.line().x(n).y(r);t.exports={metadata:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},path:{arc:u.arc(),symbol:u.symbol().type(s).size(o),area:function(e){var t=e[0];return("horizontal"===t.orient?c:l).interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)},line:function(e){var t=e[0];return f.interpolate(t.interpolate||"linear").tension(t.tension||.7)(e)}},textAlign:{left:"start",center:"middle",right:"end"},textBaseline:{top:"before-edge",bottom:"after-edge",middle:"central"},styles:{fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",opacity:"opacity"},styleProperties:["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","strokeCap","strokeDash","strokeDashOffset","opacity"]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],86:[function(e,t,n){function r(e){return null!=e.fontSize?e.fontSize:11}t.exports={size:r,value:function(e){return null!=e?String(e):""},font:function(e,t){var n=e.font;return t&&n&&(n=String(n).replace(/\"/g,"'")),""+(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+r(e)+"px "+(n||"sans-serif")},offset:function(e){var t=e.baseline,n=r(e);return Math.round("top"===t?.93*n:"middle"===t?.3*n:"bottom"===t?-.21*n:0)}}},{}],87:[function(e,t,n){function r(e,t,n){s.call(null,e,t,n),this._type="canvas",this._renderers={canvas:a,svg:o}}var i=e("vega-scenegraph").render,a=i.canvas,o=i.svg.string,s=e("./View"),u=r.prototype=new s;u.renderer=function(e){return e&&(this._type=e),s.prototype.renderer.apply(this,arguments)},u.canvas=function(){return"canvas"===this._type?this._renderer.canvas():null},u.canvasAsync=function(e){function t(){0===n.pendingImages()?(r.render(),e(r.canvas())):setTimeout(t,10)}var n=this._renderer,r=this;return"canvas"!==this._type?null:void(n.pendingImages()>0?t():e(this.canvas()))},u.svg=function(){return"svg"===this._type?this._renderer.svg():null},u.initialize=function(){var e=this._width,t=this._height,n=this._bgcolor,r=this._padding,i=this.model().config();return this._viewport&&(e=this._viewport[0]-(r?r.left+r.right:0),t=this._viewport[1]-(r?r.top+r.bottom:0)),this._renderer=(this._renderer||new this._io.Renderer(i.load)).initialize(null,e,t,r).background(n),this},t.exports=r},{"./View":89,"vega-scenegraph":48}],88:[function(e,t,n){function r(e){this._defs={},this._predicates={},this._scene=null,this._node=null,this._builder=null,this._reset={axes:!1,legends:!1},this.config(e),u.init.call(this)}function i(e){var t=this,n={};return a.isArray(e)?(e.forEach(function(e){n[e]=t._predicates[e]}),n):this._predicates[e]}var a=e("datalib"),o=e("vega-dataflow"),s=o.ChangeSet,u=o.Graph.prototype,l=o.Node,c=e("../scene/GroupBuilder"),f=e("../scene/visit"),d=e("./config"),h=r.prototype=Object.create(u);h.constructor=r,h.defs=function(e){return arguments.length?(this._defs=e,this):this._defs},h.config=function(e){if(!arguments.length)return this._config;this._config=Object.create(d);for(var t in e){var n=e[t],r=this._config[t];a.isObject(n)&&a.isObject(r)?a.extend(r,n):this._config[t]=n}return this},h.width=function(e){return this._defs&&(this._defs.width=e),this._defs&&this._defs.marks&&(this._defs.marks.width=e),this._scene&&(this._scene.items[0].width=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},h.height=function(e){return this._defs&&(this._defs.height=e),this._defs&&this._defs.marks&&(this._defs.marks.height=e),this._scene&&(this._scene.items[0].height=e,this._scene.items[0]._dirty=!0),this._reset.axes=!0,this},h.node=function(){return this._node||(this._node=new l(this))},h.data=function(){var e=u.data.apply(this,arguments);return arguments.length>1&&this.node().addListener(e.pipeline()[0]),e},h.predicate=function(e,t){return 1===arguments.length?i.call(this,e):this._predicates[e]=t},h.predicates=function(){return this._predicates},h.scene=function(e){if(!arguments.length)return this._scene;this._builder&&this.node().removeListener(this._builder.disconnect()),this._builder=new c(this,this._defs.marks,this._scene={}),this.node().addListener(this._builder.connect());var t=this._builder.pipeline();return t[t.length-1].addListener(e),this},h.reset=function(){return this._scene&&this._reset.axes&&(f(this._scene,function(e){e.axes&&e.axes.forEach(function(e){e.reset()})}),this._reset.axes=!1),this._scene&&this._reset.legends&&(f(this._scene,function(e){e.legends&&e.legends.forEach(function(e){e.reset()})}),this._reset.legends=!1),this},h.addListener=function(e){this.node().addListener(e)},h.removeListener=function(e){this.node().removeListener(e)},h.fire=function(e){e||(e=s.create()),this.propagate(e,this.node())},t.exports=r},{"../scene/GroupBuilder":112,"../scene/visit":117,"./config":90,datalib:26,"vega-dataflow":41}],89:[function(e,t,n){(function(n){function r(e,t,n){this._el=null,this._model=null,this._width=this.__width=t||500,this._height=this.__height=n||300,this._bgcolor=null,this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._viewport=null,this._renderer=null,this._handler=null,this._streamer=null,this._changeset=null,this._repaint=!0,this._renderers=l,this._io=null,this._api={}}function i(e){var t=this,n=this._model.data(e),r=n.name(),i=n.pipeline()[0],a=this._streamer,o={};return this._api[e]?this._api[e]:(o.insert=function(e){return n.insert(s.duplicate(e)),a.addListener(i),t._changeset.data[r]=1,o},o.update=function(){return a.addListener(i),t._changeset.data[r]=1,n.update.apply(n,arguments),o},o.remove=function(){return a.addListener(i),t._changeset.data[r]=1,n.remove.apply(n,arguments),o},o.values=function(){return n.values()},this._api[e]=o)}function a(){var e=this;return e._renderNode=new u.Node(e._model).router(!0),e._renderNode.evaluate=function(t){c.debug(t,["rendering"]);var n=e._model.scene(),r=e._handler;r&&r.scene&&r.scene(n),t.trans?t.trans.start(function(t){e._renderer.render(n,t)}):e._repaint?(e._renderer.render(n),e._repaint=!1):t.dirty.length&&e._renderer.render(n,t.dirty),t.dirty.length&&(t.dirty.forEach(function(e){e._dirty=!1}),n.items[0]._dirty=!1);for(var i in t.data)e._model.data(i).synchronize();return t},e._model.scene(e._renderNode),!0}var o="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,s=e("datalib"),u=e("vega-dataflow"),l=e("vega-scenegraph").render,c=e("vega-logging"),f=u.Dependencies,d=e("../parse/streams"),h=e("../scene/Encoder"),p=e("../scene/Transition"),g=r.prototype;g.model=function(e){return arguments.length?(this._model!==e&&(this._model=e,this._streamer=new u.Node(e),this._streamer._rank=-1,this._changeset=u.ChangeSet.create(),this._handler&&this._handler.model(e)),this):this._model},g.data=function(e){var t=this;return arguments.length?s.isString(e)?i.call(t,e):(s.isObject(e)&&s.keys(e).forEach(function(n){var r=i.call(t,n);e[n](r)}),this):t._model.values()},g.signal=function(e,t,n){var r,i=this._model,a=this._changeset,o=this._streamer;return arguments.length?1===arguments.length&&s.isString(e)?i.values(f.SIGNALS,e):(s.isObject(e)?(r=e,n=t):(r={},r[e]=t),s.keys(r).forEach(function(e){o.addListener(i.signal(e).value(r[e])),n!==!1&&(a.signals[e]=1),a.reflow=!0}),this):i.values(f.SIGNALS)},g.width=function(e){return arguments.length?(this.__width!==e&&(this._width=this.__width=e,this.model().width(e),this.initialize(),this._strict&&(this._autopad=1)),this):this.__width},g.height=function(e){return arguments.length?(this.__height!==e&&(this._height=this.__height=e,this.model().height(e),this.initialize(),this._strict&&(this._autopad=1)),this):this.__height},g.background=function(e){return arguments.length?(this._bgcolor!==e&&(this._bgcolor=e,this.initialize()),this):this._bgcolor},g.padding=function(e){return arguments.length?(this._padding!==e&&(s.isString(e)?(this._autopad=1,this._padding={top:0,left:0,bottom:0,right:0},this._strict="strict"===e):(this._autopad=0,this._padding=e,this._strict=!1),this._renderer&&this._renderer.resize(this._width,this._height,e),this._handler&&this._handler.padding(e)),this._repaint=!0,this):this._padding},g.autopad=function(e){if(this._autopad<1)return this;this._autopad=0;var t=this.model().scene().bounds,n=this._padding,r=this.model().config(),i=r.autopadInset,a=t.x1<0?Math.ceil(-t.x1)+i:0,o=t.y1<0?Math.ceil(-t.y1)+i:0,s=t.x2>this._width?Math.ceil(+t.x2-this._width)+i:0;return t=t.y2>this._height?Math.ceil(+t.y2-this._height)+i:0,n={left:a,top:o,right:s,bottom:t},this._strict?(this._autopad=0,this._padding=n,this._width=Math.max(0,this.__width-(a+s)),this._height=Math.max(0,this.__height-(o+t)),this._model.width(this._width).height(this._height).reset(),this.initialize().update({props:"enter"}).update({props:"update"})):this.padding(n).update(e),this},g.viewport=function(e){return arguments.length?(this._viewport!==e&&(this._viewport=e,this.initialize()),this):this._viewport},g.renderer=function(e){if(!arguments.length)return this._renderer;if(this._renderers[e])e=this._renderers[e];else{if(s.isString(e))throw new Error("Unknown renderer: "+e);if(!e)throw new Error("No renderer specified")}return this._io!==e&&(this._io=e,this._renderer=null,this.initialize(),this._build&&this.render()),this},g.initialize=function(e){var t,n=this,r=n._width,i=n._height,a=n._padding,s=n._bgcolor,u=this.model().config();return arguments.length&&null!==e||(e=this._el?this._el.parentNode:null)?(o.select(e).select("div.vega").remove(),this._el=e=o.select(e).append("div").attr("class","vega").style("position","relative").node(),n._viewport&&o.select(e).style("width",(n._viewport[0]||r)+"px").style("height",(n._viewport[1]||i)+"px").style("overflow","auto"),l.canvas.Renderer.RETINA=u.render.retina,n._renderer=(n._renderer||new this._io.Renderer(u.load)).initialize(e,r,i,a).background(s),t=n._handler,n._handler=(new this._io.Handler).initialize(e,a,n),t?t.handlers().forEach(function(e){n._handler.on(e.type,e.handler)}):n._detach=d(this),this._repaint=!0,this):this},g.destroy=function(){this._detach&&this._detach()},g.update=function(e){e=e||{};var t=this,n=e.duration?new p(e.duration,e.ease):null,r=t._changeset;if(n&&(r.trans=n),void 0!==e.props){if(s.keys(r.data).length>0)throw Error("New data values are not reflected in the visualization. Please call view.update() before updating a specified property set.");r.reflow=!0,r.request=e.props}var i=t._build;return t._build=t._build||a.call(this),e.items&&i?(h.update(this._model,e.trans,e.props,e.items,r.dirty),t._renderNode.evaluate(r)):t._streamer.listeners().length&&i?(t._model.propagate(r,t._streamer),t._streamer.disconnect()):t._model.fire(r),t._changeset=u.ChangeSet.create(),t.autopad(e)},g.toImageURL=function(e){var t,n=this;switch(e||"png"){case"canvas":case"png":t=l.canvas.Renderer;break;case"svg":t=l.svg.string.Renderer;break;default:throw Error("Unrecognized renderer type: "+e)}var r=l.canvas.Renderer.RETINA;l.canvas.Renderer.RETINA=!1;var i=new t(n._model.config.load).initialize(null,n._width,n._height,n._padding).render(n._model.scene());if(l.canvas.Renderer.RETINA=r,"svg"===e){var a=new Blob([i.svg()],{type:"image/svg+xml"});return window.URL.createObjectURL(a)}return i.canvas().toDataURL("image/png")},g.render=function(e){return this._renderer.render(this._model.scene(),e),this},g.on=function(){return this._handler.on.apply(this._handler,arguments),this},g.onSignal=function(e,t){return this._model.signal(e).on(t),this},g.off=function(){return this._handler.off.apply(this._handler,arguments),this},g.offSignal=function(e,t){return this._model.signal(e).off(t),this},r.factory=function(t){var n=e("./HeadlessView");return function(e){e=e||{};var i=t.defs(),a=(e.el?new r:new n).model(t).renderer(e.renderer||"canvas").width(i.width).height(i.height).background(i.background).padding(i.padding).viewport(i.viewport).initialize(e.el);return e.data&&a.data(e.data),e.hover!==!1&&e.el&&a.on("mouseover",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"hover",items:t})}).on("mouseout",function(e,t){t&&t.hasPropertySet("hover")&&this.update({props:"update",items:t})}),a}},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../parse/streams":107,"../scene/Encoder":111,"../scene/Transition":114,"./HeadlessView":87,datalib:26,"vega-dataflow":41,"vega-logging":47,"vega-scenegraph":48}],90:[function(e,t,n){(function(e){var n="undefined"!=typeof window?window.d3:"undefined"!=typeof e?e.d3:null,r={};r.load={baseURL:"",domainWhiteList:!1},r.autopadInset=5,r.scale={time:n.time.scale,utc:n.time.scale.utc},r.render={retina:!0},r.axis={orient:"bottom",ticks:10,padding:3,axisColor:"#000",gridColor:"#000",gridOpacity:.15,tickColor:"#000",tickLabelColor:"#000",axisWidth:1,tickWidth:1,tickSize:6,tickLabelFontSize:11,tickLabelFont:"sans-serif",titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleOffset:35},r.legend={orient:"right",offset:20,padding:3,gradientStrokeColor:"#888",gradientStrokeWidth:1,gradientHeight:16,gradientWidth:100,labelColor:"#000",labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,symbolShape:"circle",symbolSize:50,symbolColor:"#888",symbolStrokeWidth:1,titleColor:"#000",titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"},r.color={rgb:[128,128,128],lab:[50,0,0],hcl:[0,0,50],hsl:[0,0,.5]},r.range={category10:n.scale.category10().range(),category20:n.scale.category20().range(),category20b:n.scale.category20b().range(),category20c:n.scale.category20c().range(),shapes:["circle","cross","diamond","square","triangle-down","triangle-up"]},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(e,t,n){function r(e,t,n){var r=e.schema;r&&(r.refs&&i.extend(n.refs,r.refs),r.defs&&i.extend(n.defs,r.defs))}var i=e("datalib"),a=e("../parse"),o=e("../scene/Scale"),s=e("./config");t.exports=function(e){var t=null;return e=e||{},e.url?t=i.json(i.extend({url:e.url},s.load)):(t={$schema:"http://json-schema.org/draft-04/schema#",title:"Vega Visualization Specification Language",defs:{},refs:{},$ref:"#/defs/spec"},i.keys(a).forEach(function(n){r(a[n],e,t)}),r(o,e,t)),e.properties&&i.keys(e.properties).forEach(function(n){t.defs.propset.properties[n]={$ref:"#/refs/"+e.properties[n]+"Value"}}),e.propertySets&&i.keys(e.propertySets).forEach(function(e){t.defs.mark.properties.properties.properties[e]={$ref:"#/defs/propset"}}),t}},{"../parse":97,"../scene/Scale":113,"./config":90,datalib:26}],92:[function(e,t,n){function r(e,t,n,r){var a=e.config();(t||[]).forEach(function(t,s){n[s]=n[s]||o(e),i(a,t,s,n[s],r)})}function i(e,t,n,r,i){void 0!==t.scale&&r.scale(i.scale(t.scale)),r.orient(t.orient||s[t.type]),r.offset(t.offset||0),r.layer(t.layer||"front"),r.grid(t.grid||!1),r.title(t.title||null),r.titleOffset(null!=t.titleOffset?t.titleOffset:e.axis.titleOffset),r.tickValues(t.values||null),r.tickFormat(t.format||null),r.tickFormatType(t.formatType||null),r.tickSubdivide(t.subdivide||0),r.tickPadding(t.tickPadding||e.axis.padding);var o=[];if(void 0!==t.tickSize)for(var u=0;3>u;++u)o.push(t.tickSize);else{var l=e.axis.tickSize;o=[l,l,l]}null!=t.tickSizeMajor&&(o[0]=t.tickSizeMajor),null!=t.tickSizeMinor&&(o[1]=t.tickSizeMinor),null!=t.tickSizeEnd&&(o[2]=t.tickSizeEnd),o.length&&r.tickSize.apply(r,o),r.tickCount(t.ticks||e.axis.ticks);var c=t.properties;c&&c.ticks?(r.majorTickProperties(c.majorTicks?a.extend({},c.ticks,c.majorTicks):c.ticks),r.minorTickProperties(c.minorTicks?a.extend({},c.ticks,c.minorTicks):c.ticks)):(r.majorTickProperties(c&&c.majorTicks||{}),r.minorTickProperties(c&&c.minorTicks||{})),r.tickLabelProperties(c&&c.labels||{}),r.titleProperties(c&&c.title||{}),r.gridLineProperties(c&&c.grid||{}),r.domainProperties(c&&c.axis||{})}var a=e("datalib"),o=e("../scene/axis"),s={x:"bottom",y:"left",top:"top",bottom:"bottom",left:"left",right:"right"};t.exports=r},{"../scene/axis":115,datalib:26}],93:[function(e,t,n){(function(e){function n(e){return null==e?null:r.rgb(e)+""}var r="undefined"!=typeof window?window.d3:"undefined"!=typeof e?e.d3:null;t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],94:[function(e,t,n){function r(e,t,n){function o(t){return function(r,o){r?a.error("LOADING FAILED: "+t.url+" "+r):e.data(t.name).values(i.read(o,t.format)),0===--u&&n()}}var s=e.config(),u=0;return(t||[]).forEach(function(t){t.url&&(u+=1,i.load(i.extend({url:t.url},s.load),o(t))),r.datasource(e,t)}),0===u&&setTimeout(n,1),t}var i=e("datalib"),a=e("vega-logging"),o=e("./transforms"),s=e("./modify");r.datasource=function(e,t){var n=(t.transform||[]).map(function(t){return o(e,t)}),r=(t.modify||[]).map(function(n){return s(e,n,t)}),a=e.data(t.name,r.concat(n));return t.values?a.values(i.read(t.values,t.format)):t.source&&(a.source(t.source).addListener(a),e.removeListener(a.pipeline()[0])),a},t.exports=r},{"./modify":101,"./transforms":108,datalib:26,"vega-logging":47}],95:[function(e,t,n){t.exports=function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i,a){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=a,this.name="SyntaxError"}function n(e){function n(t){function n(t,n,r){var i,a;for(i=n;r>i;i++)a=e.charAt(i),"\n"===a?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return ut!==t&&(ut>t&&(ut=0,lt={line:1,column:1,seenCR:!1}),n(lt,ut,t),ut=t),lt}function r(e){ct>ot||(ot>ct&&(ct=ot,ft=[]),ft.push(e))}function i(r,i,a){function o(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function s(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r,i,a,o=new Array(e.length);for(a=0;a<e.length;a++)o[a]=e[a].description;return r=e.length>1?o.slice(0,-1).join(", ")+" or "+o[e.length-1]:o[0],i=t?'"'+n(t)+'"':"end of input","Expected "+r+" but "+i+" found."}var u=n(a),l=a<e.length?e.charAt(a):null;return null!==i&&o(i),new t(null!==r?r:s(i,l),i,l,a,u.line,u.column)}function a(){var e;return e=o()}function o(){var t,n,i,a,u,l;return t=ot,n=s(),n!==b?(i=m(),i!==b?(44===e.charCodeAt(ot)?(a=k,ot++):(a=b,0===dt&&r($)),a!==b?(u=m(),u!==b?(l=o(),l!==b?(st=t,n=S(n,l),t=n):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_),t===b&&(t=ot,n=s(),n!==b&&(st=t,n=M(n)),t=n),t}function s(){var t,n,i,a,o,l,c,f,d,h,p,g,v,y;return t=ot,91===e.charCodeAt(ot)?(n=T,ot++):(n=b,0===dt&&r(C)),n!==b?(i=m(),i!==b?(a=u(),a!==b?(o=m(),o!==b?(44===e.charCodeAt(ot)?(l=k,ot++):(l=b,0===dt&&r($)),l!==b?(c=m(),c!==b?(f=u(),f!==b?(d=m(),d!==b?(93===e.charCodeAt(ot)?(h=E,ot++):(h=b,0===dt&&r(A)),h!==b?(p=m(),p!==b?(62===e.charCodeAt(ot)?(g=O,ot++):(g=b,0===dt&&r(D)),g!==b?(v=m(),v!==b?(y=s(),y!==b?(st=t,n=L(a,f,y),t=n):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_),t===b&&(t=u()),t}function u(){var e,t,n,r;if(e=ot,t=l(),t!==b){if(n=[],r=d(),r!==b)for(;r!==b;)n.push(r),r=d();else n=_;n!==b?(st=e,t=N(t,n),e=t):(ot=e,e=_)}else ot=e,e=_;return e===b&&(e=ot,t=l(),t!==b&&(st=e,t=j(t)),e=t),e}function l(){var t,n,i,a,s;return t=ot,40===e.charCodeAt(ot)?(n=P,ot++):(n=b,0===dt&&r(R)),n!==b?(i=o(),i!==b?(41===e.charCodeAt(ot)?(a=I,ot++):(a=b,0===dt&&r(F)),a!==b?(st=t,n=U(i),t=n):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_),t===b&&(t=ot,64===e.charCodeAt(ot)?(n=z,ot++):(n=b,0===dt&&r(q)),n!==b?(i=h(),i!==b?(58===e.charCodeAt(ot)?(a=H,ot++):(a=b,0===dt&&r(B)),a!==b?(s=f(),s!==b?(st=t,n=Y(i,s),t=n):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_),t===b&&(t=ot,n=c(),n!==b?(58===e.charCodeAt(ot)?(i=H,ot++):(i=b,0===dt&&r(B)),i!==b?(a=f(),a!==b?(st=t,n=V(n,a),t=n):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_),t===b&&(t=ot,n=p(),n!==b?(58===e.charCodeAt(ot)?(i=H,ot++):(i=b,0===dt&&r(B)),i!==b?(a=f(),a!==b?(st=t,n=W(n,a),t=n):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_),t===b&&(t=ot,n=f(),n!==b&&(st=t,n=G(n)),t=n,t===b&&(t=ot,n=h(),n!==b&&(st=t,n=X(n)),t=n))))),t}function c(){var t;return e.substr(ot,4)===J?(t=J,ot+=4):(t=b,0===dt&&r(K)),t===b&&(e.substr(ot,6)===Z?(t=Z,ot+=6):(t=b,0===dt&&r(Q)),t===b&&(e.substr(ot,4)===ee?(t=ee,ot+=4):(t=b,0===dt&&r(te)),t===b&&(e.substr(ot,3)===ne?(t=ne,ot+=3):(t=b,0===dt&&r(re)),t===b&&(e.substr(ot,4)===ie?(t=ie,ot+=4):(t=b,0===dt&&r(ae)),t===b&&(e.substr(ot,4)===oe?(t=oe,ot+=4):(t=b,0===dt&&r(se)),t===b&&(e.substr(ot,4)===ue?(t=ue,ot+=4):(t=b,0===dt&&r(le)),t===b&&(e.substr(ot,5)===ce?(t=ce,ot+=5):(t=b,0===dt&&r(fe)),t===b&&(e.substr(ot,4)===de?(t=de,ot+=4):(t=b,0===dt&&r(he)),t===b&&(e.substr(ot,5)===pe?(t=pe,ot+=5):(t=b,0===dt&&r(ge))))))))))),t}function f(){var t;return e.substr(ot,9)===me?(t=me,ot+=9):(t=b,0===dt&&r(ve)),t===b&&(e.substr(ot,7)===ye?(t=ye,ot+=7):(t=b,0===dt&&r(be)),t===b&&(e.substr(ot,5)===xe?(t=xe,ot+=5):(t=b,0===dt&&r(we)),t===b&&(e.substr(ot,8)===_e?(t=_e,ot+=8):(t=b,0===dt&&r(ke)),t===b&&(e.substr(ot,5)===$e?(t=$e,ot+=5):(t=b,0===dt&&r(Se)),t===b&&(e.substr(ot,7)===Me?(t=Me,ot+=7):(t=b,0===dt&&r(Te)),t===b&&(e.substr(ot,8)===Ce?(t=Ce,ot+=8):(t=b,0===dt&&r(Ee)),t===b&&(e.substr(ot,5)===Ae?(t=Ae,ot+=5):(t=b,0===dt&&r(Oe)),t===b&&(e.substr(ot,10)===De?(t=De,ot+=10):(t=b,0===dt&&r(Le)),t===b&&(e.substr(ot,9)===Ne?(t=Ne,ot+=9):(t=b,0===dt&&r(je)),t===b&&(e.substr(ot,8)===Pe?(t=Pe,ot+=8):(t=b,0===dt&&r(Re)),t===b&&(e.substr(ot,9)===Ie?(t=Ie,ot+=9):(t=b,0===dt&&r(Fe)),t===b&&(e.substr(ot,10)===Ue?(t=Ue,ot+=10):(t=b,0===dt&&r(ze)),t===b&&(e.substr(ot,10)===qe?(t=qe,ot+=10):(t=b,0===dt&&r(He)),t===b&&(e.substr(ot,9)===Be?(t=Be,ot+=9):(t=b,0===dt&&r(Ye)),t===b&&(e.substr(ot,8)===Ve?(t=Ve,ot+=8):(t=b,0===dt&&r(We))))))))))))))))),t}function d(){var t,n,i,a;return t=ot,91===e.charCodeAt(ot)?(n=T,ot++):(n=b,0===dt&&r(C)),n!==b?(i=g(),i!==b?(93===e.charCodeAt(ot)?(a=E,ot++):(a=b,0===dt&&r(A)),a!==b?(st=t,n=Ge(i),t=n):(ot=t,t=_)):(ot=t,t=_)):(ot=t,t=_),t}function h(){var t,n,i;if(t=ot,n=[],Xe.test(e.charAt(ot))?(i=e.charAt(ot),ot++):(i=b,0===dt&&r(Je)),i!==b)for(;i!==b;)n.push(i),Xe.test(e.charAt(ot))?(i=e.charAt(ot),ot++):(i=b,0===dt&&r(Je));else n=_;return n!==b&&(st=t,n=Ke(n)),t=n}function p(){var t,n,i;if(t=ot,n=[],Ze.test(e.charAt(ot))?(i=e.charAt(ot),ot++):(i=b,0===dt&&r(Qe)),i!==b)for(;i!==b;)n.push(i),Ze.test(e.charAt(ot))?(i=e.charAt(ot),ot++):(i=b,0===dt&&r(Qe));else n=_;return n!==b&&(st=t,n=et(n)),t=n}function g(){var t,n,i;if(t=ot,n=[],tt.test(e.charAt(ot))?(i=e.charAt(ot),ot++):(i=b,0===dt&&r(nt)),i!==b)for(;i!==b;)n.push(i),tt.test(e.charAt(ot))?(i=e.charAt(ot),ot++):(i=b,0===dt&&r(nt));else n=_;return n!==b&&(st=t,n=rt(n)),t=n}function m(){var t,n;for(t=[],it.test(e.charAt(ot))?(n=e.charAt(ot),ot++):(n=b,0===dt&&r(at));n!==b;)t.push(n),it.test(e.charAt(ot))?(n=e.charAt(ot),ot++):(n=b,0===dt&&r(at));return t}var v,y=arguments.length>1?arguments[1]:{},b={},x={start:a},w=a,_=b,k=",",$={type:"literal",value:",",description:'","'},S=function(e,t){return[e].concat(t)},M=function(e){return[e]},T="[",C={type:"literal",value:"[",description:'"["'},E="]",A={type:"literal",value:"]",description:'"]"'},O=">",D={type:"literal",value:">",description:'">"'},L=function(e,t,n){return{start:e,end:t,middle:n}},N=function(e,t){return e.filters=t,e},j=function(e){return e},P="(",R={type:"literal",value:"(",description:'"("'},I=")",F={type:"literal",value:")",description:'")"'},U=function(e){return{stream:e}},z="@",q={type:"literal",value:"@",description:'"@"'},H=":",B={type:"literal",value:":",description:'":"'},Y=function(e,t){return{event:t,name:e}},V=function(e,t){return{event:t,mark:e}},W=function(e,t){return{event:t,target:e}},G=function(e){return{event:e}},X=function(e){return{signal:e}},J="rect",K={type:"literal",value:"rect",description:'"rect"'},Z="symbol",Q={type:"literal",value:"symbol",description:'"symbol"'},ee="path",te={type:"literal",value:"path",description:'"path"'},ne="arc",re={type:"literal",value:"arc",description:'"arc"'},ie="area",ae={type:"literal",value:"area",description:'"area"'},oe="line",se={type:"literal",value:"line",description:'"line"'},ue="rule",le={type:"literal",value:"rule",description:'"rule"'},ce="image",fe={type:"literal",value:"image",description:'"image"'},de="text",he={type:"literal",value:"text",description:'"text"'},pe="group",ge={type:"literal",value:"group",description:'"group"'},me="mousedown",ve={type:"literal",value:"mousedown",description:'"mousedown"'},ye="mouseup",be={type:"literal",value:"mouseup",description:'"mouseup"'},xe="click",we={type:"literal",value:"click",description:'"click"'},_e="dblclick",ke={type:"literal",value:"dblclick",description:'"dblclick"'},$e="wheel",Se={type:"literal",value:"wheel",description:'"wheel"'},Me="keydown",Te={type:"literal",value:"keydown",description:'"keydown"'},Ce="keypress",Ee={type:"literal",value:"keypress",description:'"keypress"'},Ae="keyup",Oe={type:"literal",value:"keyup",description:'"keyup"'},De="mousewheel",Le={type:"literal",value:"mousewheel",description:'"mousewheel"'},Ne="mousemove",je={type:"literal",value:"mousemove",description:'"mousemove"'},Pe="mouseout",Re={type:"literal",value:"mouseout",description:'"mouseout"'},Ie="mouseover",Fe={type:"literal",value:"mouseover",description:'"mouseover"'},Ue="mouseenter",ze={type:"literal",value:"mouseenter",description:'"mouseenter"'},qe="touchstart",He={type:"literal",value:"touchstart",description:'"touchstart"'},Be="touchmove",Ye={type:"literal",value:"touchmove",description:'"touchmove"'},Ve="touchend",We={type:"literal",value:"touchend",description:'"touchend"'},Ge=function(e){return e},Xe=/^[a-zA-Z0-9_\-]/,Je={type:"class",value:"[a-zA-Z0-9_\\-]",description:"[a-zA-Z0-9_\\-]"},Ke=function(e){return e.join("")},Ze=/^[a-zA-Z0-9\-_  #.>+~[\]=|\^$*]/,Qe={type:"class",value:"[a-zA-Z0-9\\-_  #.>+~[\\]=|\\^$*]",description:"[a-zA-Z0-9\\-_  #.>+~[\\]=|\\^$*]"},et=function(e){return e.join("")},tt=/^['"a-zA-Z0-9_().><=! \t-&|~]/,nt={type:"class",value:"['\"a-zA-Z0-9_().><=! \\t-&|~]",description:"['\"a-zA-Z0-9_().><=! \\t-&|~]"},rt=function(e){return e.join("")},it=/^[ \t\r\n]/,at={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},ot=0,st=0,ut=0,lt={line:1,column:1,seenCR:!1},ct=0,ft=[],dt=0;if("startRule"in y){if(!(y.startRule in x))throw new Error("Can't start parsing from rule \""+y.startRule+'".');w=x[y.startRule]}if(v=w(),v!==b&&ot===e.length)return v;throw v!==b&&ot<e.length&&r({type:"end",description:"end of input"}),i(null,ft,ct)}return e(t,Error),{SyntaxError:t,parse:n}}()},{}],96:[function(e,t,n){var r=e("vega-expression"),i=["datum","event","signals"];t.exports=r.compiler(i,{idWhiteList:i,fieldVar:i[0],globalVar:i[2],functions:function(e){var t=r.functions(e);return t.eventItem=function(){return"event.vg.item"},t.eventGroup="event.vg.getGroup",t.eventX="event.vg.getX",t.eventY="event.vg.getY",t.open="window.open",t}})},{"vega-expression":45}],97:[function(e,t,n){t.exports={axes:e("./axes"),background:e("./background"),data:e("./data"),events:e("./events"),expr:e("./expr"),legends:e("./legends"),mark:e("./mark"),marks:e("./marks"),modify:e("./modify"),padding:e("./padding"),predicates:e("./predicates"),properties:e("./properties"),signals:e("./signals"),spec:e("./spec"),streams:e("./streams"),transforms:e("./transforms")}},{"./axes":92,"./background":93,"./data":94,"./events":95,"./expr":96,"./legends":98,"./mark":99,"./marks":100,"./modify":101,"./padding":102,"./predicates":103,"./properties":104,"./signals":105,"./spec":106,"./streams":107,"./transforms":108}],98:[function(e,t,n){function r(e,t,n,r){(t||[]).forEach(function(t,o){n[o]=n[o]||a(e),i(t,o,n[o],r)})}function i(e,t,n,r){n.size(e.size?r.scale(e.size):null),n.shape(e.shape?r.scale(e.shape):null),n.fill(e.fill?r.scale(e.fill):null),n.stroke(e.stroke?r.scale(e.stroke):null),e.orient&&n.orient(e.orient),null!=e.offset&&n.offset(e.offset),n.title(e.title||null),n.values(e.values||null),n.format(void 0!==e.format?e.format:null);var i=e.properties;n.titleProperties(i&&i.title||{}),n.labelProperties(i&&i.labels||{}),n.legendProperties(i&&i.legend||{}),n.symbolProperties(i&&i.symbols||{}),n.gradientProperties(i&&i.gradient||{})}var a=e("../scene/legend");t.exports=r},{"../scene/legend":116}],99:[function(e,t,n){function r(e,t){var n=t.properties,o=t.marks;return i.keys(n).forEach(function(r){n[r]=a(e,t.type,n[r])}),t.delay&&(t.delay=a(e,t.type,{delay:t.delay})),o&&(t.marks=o.map(function(t){return r(e,t)})),t}var i=e("datalib"),a=e("./properties");t.exports=r},{"./properties":104,datalib:26}],100:[function(e,t,n){
function r(e,t,n,r){return{type:"group",width:n,height:r,scales:t.scales||[],axes:t.axes||[],legends:t.legends||[],marks:(t.marks||[]).map(function(t){return i(e,t)})}}var i=e("./mark");t.exports=r},{"./mark":99}],101:[function(e,t,n){function r(e,t,n){var r=t.signal?i.field(t.signal):null,o=r?r[0]:null,h=t.predicate?e.predicate(t.predicate.name||t.predicate):null,p=null===h,g=new s(e).router(t.type===c.CLEAR);return g.evaluate=function(i){if(null!==h){var o=e.values(l.DATA,h.data||f),s=e.values(l.SIGNALS,h.signals||f);p=h.call(h,{},o,s,e._predicates)}if(a.debug(i,[t.type+"ing",p]),!p)return i;var g={},m=r?e.signalRef(t.signal):null,v=e.data(n.name),y=null;if(g[t.field]=m,t.type===c.INSERT)y=u.ingest(g),i.add.push(y),v._data.push(y);else if(t.type===c.REMOVE)d(t.field,m,i.add,i.rem),d(t.field,m,i.mod,i.rem),v._data=v._data.filter(function(e){return e[t.field]!==m});else if(t.type===c.TOGGLE){var b=[],x=[];d(t.field,m,i.rem,b),d(t.field,m,i.add,x),d(t.field,m,i.mod,x),b.length||x.length||b.push(u.ingest(g)),i.add.push.apply(i.add,b),v._data.push.apply(v._data,b),i.rem.push.apply(i.rem,x),v._data=v._data.filter(function(e){return-1===x.indexOf(e)})}else t.type===c.CLEAR&&(i.rem.push.apply(i.rem,i.add),i.rem.push.apply(i.rem,i.mod),i.add=[],i.mod=[],v._data=[]);return i.fields[t.field]=1,i},o&&g.dependency(l.SIGNALS,o),h&&(g.dependency(l.DATA,h.data),g.dependency(l.SIGNALS,h.signals)),g}var i=e("datalib"),a=e("vega-logging"),o=e("vega-dataflow"),s=o.Node,u=o.Tuple,l=o.Dependencies,c={INSERT:"insert",REMOVE:"remove",TOGGLE:"toggle",CLEAR:"clear"},f=[],d=function(e,t,n,r){for(var i=n.length-1;i>=0;--i)n[i][e]==t&&r.push.apply(r,n.splice(i,1))};t.exports=r},{datalib:26,"vega-dataflow":41,"vega-logging":47}],102:[function(e,t,n){function r(e){if(null==e)return"auto";if(i.isString(e))return"strict"===e?"strict":"auto";if(i.isObject(e))return e;var t=i.isNumber(e)?e:20;return{top:t,left:t,right:t,bottom:t}}var i=e("datalib");t.exports=r},{datalib:26}],103:[function(e,t,n){function r(e,t){return(t||[]).forEach(function(t){var n=f[t.type](e,t),r=Function("args","db","signals","predicates",n.code);r.root=function(){return e.scene().items[0]},r.nullScale=d,r.isFunction=c.isFunction,r.signals=n.signals,r.data=n.data,e.predicate(t.name,r)}),t}function i(e,t){var n=c.field(e),r="signals["+n.map(c.str).join("][")+"]";return t[n[0]]=1,r}function a(e,t){function n(e){s[e]=1}function r(e){u[e]=1}var a=[],o=[],s={},u={};return c.array(t).forEach(function(t,u){var l="o"+u,f="";if(void 0!==t.value)f=c.str(t.value);else if(t.arg)f="args["+c.str(t.arg)+"]";else if(t.signal)f=i(t.signal,s);else if(t.predicate){var d=t.predicate,h=d&&(d.name||d),p=e.predicate(h),g="predicates["+c.str(h)+"]";p.signals.forEach(n),p.data.forEach(r),c.isObject(d)&&c.keys(d).forEach(function(e){if("name"!==e){var t=d[e];f+="args["+c.str(e)+"] = ",t.signal?f+=i(t.signal,s):t.arg&&(f+="args["+c.str(t.arg)+"]"),f+=", "}}),f+=g+".call("+g+", args, db, signals, predicates)"}a.push(l),o.push(l+"=("+f+")")}),{code:"var "+a.join(", ")+";\n"+o.join(";\n")+";\n",signals:c.keys(s),data:c.keys(u)}}function o(e,t){var n=a(e,t.operands);return"="===t.type&&(t.type="=="),n.code+="o0 = o0 instanceof Date ? o0.getTime() : o0;\no1 = o1 instanceof Date ? o1.getTime() : o1;\n",{code:n.code+"return "+["o0","o1"].join(t.type)+";",signals:n.signals,data:n.data}}function s(e,t){for(var n=a(e,t.operands),r=[],i=0,o=t.operands.length;r.push("o"+i++)<o;);return"and"===t.type?t.type="&&":"or"===t.type&&(t.type="||"),{code:n.code+"return "+r.join(t.type)+";",signals:n.signals,data:n.data}}function u(e,t){var n=[t.item],r="";t.range&&n.push.apply(n,t.range),t.scale&&(r=l(t.scale,n));var i=a(e,n);if(r=i.code+r+"\n  var ordSet = null;\n",t.data){var o=c.field(t.field).map(c.str);r+="var where = function(d) { return d["+o.join("][")+"] == o0 };\n",r+="return db["+c.str(t.data)+"].filter(where).length > 0;"}else t.range&&(t.scale&&(r+="if (scale.length == 2) {\n  ordSet = scale(o1, o2);\n} else {\n  o1 = scale(o1);\no2 = scale(o2);\n}"),r+="return ordSet !== null ? ordSet.indexOf(o0) !== -1 :\n  o1 < o2 ? o1 <= o0 && o0 <= o2 : o2 <= o0 && o0 <= o1;");return{code:r,signals:i.signals,data:i.data.concat(t.data?[t.data]:[])}}function l(e,t){var n="var scale = ",r=t.length;return c.isString(e)?(t.push({value:e}),n+="this.root().scale(o"+r+")"):e.arg?(t.push(e),n+="o"+r):e.name&&(t.push(c.isString(e.name)?{value:e.name}:e.name),n+="(this.isFunction(o"+r+") ? o"+r+" : ",e.scope?(t.push(e.scope),n+="((o"+(r+1)+".scale || this.root().scale)(o"+r+") || this.nullScale)"):n+="this.root().scale(o"+r+")",n+=")"),e.invert===!0&&(n+=".invert"),n+";\n"}var c=e("datalib"),f={"=":o,"==":o,"!=":o,">":o,">=":o,"<":o,"<=":o,and:s,"&&":s,or:s,"||":s,"in":u},d=function(){return 0};d.invert=d,t.exports=r},{datalib:26}],104:[function(e,t,n){(function(n){function r(e,t,n){function r(e){if(null!=m[e]){var t,n,r=d.array(m[e]);for(t=0,n=r.length;n>t;++t)w[e][r[t]]=1}}function i(e){var t=(e.parent?"parent_":"group_")+e.level;w._nRefs[t]=e}var u,l,c,m,v=e.config(),y="",b=d.keys(n),x={},w={signals:{},scales:{},data:{},fields:{},nested:[],_nRefs:{},reflow:!1};for(y+="var o = trans ? {} : item, d=0, set=this.tpl.set, tmpl=signals||{}, t;\ntmpl.datum  = item.datum;\ntmpl.group  = group;\ntmpl.parent = group.datum;\n",u=0,l=b.length;l>u;++u)m=n[c=b[u]],y+=u>0?"\n  ":"  ",m.rule?(m=o(e,c,m.rule),y+="\n  "+m.code):d.isArray(m)?(m=o(e,c,m),y+="\n  "+m.code):(m=s(v,c,m),y+="d += set(o, "+d.str(c)+", "+m.val+");"),x[c]=!0,g.forEach(r),w.reflow=w.reflow||m.reflow,m.nested.length&&m.nested.forEach(i);d.keys(w._nRefs).forEach(function(e){w.nested.push(w._nRefs[e])}),w.nested.sort(function(e,t){return e=e.level,t=t.level,t>e?-1:e>t?1:e>=t?0:0/0}),x.x2&&(x.x?(y+="\n  if (o.x > o.x2) { \n    t = o.x;\n    d += set(o, 'x', o.x2);\n    d += set(o, 'x2', t); \n  };",y+="\n  d += set(o, 'width', (o.x2 - o.x));"):y+=x.width?"\n  d += set(o, 'x', (o.x2 - o.width));":"\n  d += set(o, 'x', o.x2);"),x.xc&&(y+=x.width?"\n  d += set(o, 'x', (o.xc - o.width/2));":"\n  d += set(o, 'x', o.xc);"),x.y2&&(x.y?(y+="\n  if (o.y > o.y2) { \n    t = o.y;\n    d += set(o, 'y', o.y2);\n    d += set(o, 'y2', t);\n  };",y+="\n  d += set(o, 'height', (o.y2 - o.y));"):y+=x.height?"\n  d += set(o, 'y', (o.y2 - o.height));":"\n  d += set(o, 'y', o.y2);"),x.yc&&(y+=x.height?"\n  d += set(o, 'y', (o.yc - o.height/2));":"\n  d += set(o, 'y', o.yc);"),a(t,x)&&(y+="\n  d += (item.touch(), 1);"),y+="\n  if (trans) trans.interpolate(item, o);",y+="\n  return d > 0;";try{var _=Function("item","group","trans","db","signals","predicates",y);return _.tpl=p,_.util=d,_.d3=f,d.extend(_,d.template.context),{encode:_,signals:d.keys(w.signals),scales:d.keys(w.scales),data:d.keys(w.data),fields:d.keys(w.fields),nested:w.nested,reflow:w.reflow}}catch(k){h.error(k),h.log(y)}}function i(e,t){return d.isObject(e)||(e={reflow:!1,nested:[]},g.forEach(function(t){e[t]=[]})),d.isObject(t)&&(e.reflow=e.reflow||t.reflow,e.nested.push.apply(e.nested,t.nested),g.forEach(function(n){e[n].push.apply(e[n],t[n])})),e}function a(e,t){return t.path||("area"===e||"line"===e)&&(t.x||t.x2||t.width||t.y||t.y2||t.height||t.tension||t.interpolate)}function o(e,t,n){var r=e.config(),a=i(),o=[],u="";return(n||[]).forEach(function(l,c){var f,h=l.predicate,p=h&&(h.name||h),g=e.predicate(p),m="predicates["+d.str(p)+"]",v=[],y=t+"_arg"+c;d.isObject(h)&&d.keys(h).forEach(function(e){if("name"!==e){var t=s(r,c,h[e]);v.push(d.str(e)+": "+t.val),i(a,t)}}),f=s(r,t,l),i(a,f),p?(a.signals.push.apply(a.signals,g.signals),a.data.push.apply(a.data,g.data),o.push(y+" = {\n    "+v.join(",\n    ")+"\n  }"),u+="if ("+m+".call("+m+","+y+", db, signals, predicates)) {\n    d += set(o, "+d.str(t)+", "+f.val+");",u+=n[c+1]?"\n  } else ":"  }"):u+="{\n    d += set(o, "+d.str(t)+", "+f.val+");\n  }\n"}),u="var "+o.join(",\n      ")+";\n  "+u,a.code=u,a}function s(e,t,n){if(null==n)return null;if("fill"===t||"stroke"===t){if(n.c)return u(e,"hcl",n.h,n.c,n.l);if(n.h||n.s)return u(e,"hsl",n.h,n.s,n.l);if(n.l||n.a)return u(e,"lab",n.l,n.a,n.b);if(n.r||n.g||n.b)return u(e,"rgb",n.r,n.g,n.b)}var r=null,a=null,o=i(),s=null,f=null,h=null,p={};return void 0!==n.template&&(r=d.template.source(n.template,"tmpl",p),d.keys(p).forEach(function(e){var t=d.field(e),n=t.shift();"parent"===n||"group"===n?o.nested.push({parent:"parent"===n,group:"group"===n,level:1}):"datum"===n?o.fields.push(t[0]):o.signals.push(n)})),void 0!==n.value&&(r=d.str(n.value)),void 0!==n.signal&&(s=d.field(n.signal),r="signals["+s.map(d.str).join("][")+"]",o.signals.push(s.shift())),void 0!==n.field&&(n.field=d.isString(n.field)?{datum:n.field}:n.field,f=l(n.field),r=f.val,i(o,f)),void 0!==n.scale&&(h=c(n.scale),a=h.val,i(o,h),o.scales.push(n.scale.name||n.scale),r=null!==r||n.band||n.mult||n.offset?a+(n.band?".rangeBand()":"("+(null!==r?r:"item.datum.data")+")"):a),r="("+(n.mult?d.number(n.mult)+" * ":"")+r+")"+(n.offset?" + "+d.number(n.offset):""),o.val=r,o}function u(e,t,n,r,a){var o=n?s(e,"",n):e.color[t][0],u=r?s(e,"",r):e.color[t][1],l=a?s(e,"",a):e.color[t][2],c=i();[o,u,l].forEach(function(e){d.isArray||i(c,e)});var f="(this.d3."+t+"("+[o.val,u.val,l.val].join(",")+') + "")';return c.val=f,c}function l(e){if(d.isString(e))return{val:d.field(e).map(d.str).join("][")};var t=e.level||1,n=(e.group||e.parent)&&t,r=n?Array(t).join("group.mark."):"",a=l(e.datum||e.group||e.parent||e.signal),o=a.val,s=i(null,a);return e.datum?(o="item.datum["+o+"]",s.fields.push(e.datum)):e.group?(o=r+"group["+o+"]",s.nested.push({level:t,group:!0})):e.parent?(o=r+"group.datum["+o+"]",s.nested.push({level:t,parent:!0})):e.signal&&(o="signals["+o+"]",s.signals.push(d.field(e.signal)[0]),s.reflow=!0),s.val=o,s}function c(e){var t=null,n=null,r=i();return t=d.isString(e)?d.str(e):e.name?d.isString(e.name)?d.str(e.name):(n=l(e.name)).val:(n=l(e)).val,t="(item.mark._scaleRefs["+t+"] = 1, group.scale("+t+"))",e.invert&&(t+=".invert"),n&&n.nested.forEach(function(e){e.scale=!0}),n?(n.val=t,n):(r.val=t,r)}var f="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,d=e("datalib"),h=e("vega-logging"),p=e("vega-dataflow").Tuple,g=["signals","scales","data","fields"];t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{datalib:26,"vega-dataflow":41,"vega-logging":47}],105:[function(e,t,n){function r(e,t){return(t||[]).forEach(function(t){if(-1!==u.indexOf(t.name))throw Error('Signal name "'+t.name+'" is a reserved keyword ('+u.join(", ")+").");var n=e.signal(t.name,t.init).verbose(t.verbose);t.init&&t.init.expr&&(t.init.expr=s(t.init.expr),n.value(i(e,t.init))),t.expr&&(t.expr=s(t.expr),n.evaluate=function(r){var a=i(e,t),o=r.signals;return(a!==n.value()||n.verbose())&&(n.value(a),o[t.name]=1),o[t.name]?r:e.doNotPropagate},n.dependency(o,t.expr.globals),t.expr.globals.forEach(function(t){e.signal(t).addListener(n)}))}),t}function i(e,t){var n=t.expr,i=n.fn(null,null,e.values(o,n.globals));return t.scale?r.scale(e,t,i):i}var a=e("datalib"),o=e("vega-dataflow").Dependencies.SIGNALS,s=e("./expr"),u=["datum","event","signals"].concat(a.keys(s.codegen.functions));r.scale=function(e,t,n,r,i){var u,l=t.scale,c=l.name||l.signal||l,f=l.scope;f&&(f.signal?f=e.signalRef(f.signal):a.isString(f)&&(u=l._expr=l._expr||s(f),f=u.fn(r,i,e.values(o,u.globals)))),f&&f.scale||(f=f&&f.mark?f.mark.group:e.scene().items[0]);var d=f.scale(c);return d?l.invert?d.invert(n):d(n):n},t.exports=r},{"./expr":96,datalib:26,"vega-dataflow":41}],106:[function(e,t,n){function r(t,n){function r(t){t=i.duplicate(t);var r=e("./"),a=t.width||500,o=t.height||500,s=t.viewport||null;f.defs({width:a,height:o,viewport:s,background:r.background(t.background),padding:r.padding(t.padding),signals:r.signals(f,t.signals),predicates:r.predicates(f,t.predicates),marks:r.marks(f,t,a,o),data:r.data(f,t.data,function(){n(l(f))})})}var u=arguments[arguments.length-1],l=arguments.length>2&&i.isFunction(u)?u:s.factory,c=arguments[2]!==l?arguments[2]:{},f=new o(c);if(i.isObject(t))r(t);else if(i.isString(t)){var d=i.extend({url:t},f.config().load);i.load(d,function(e,t){if(e)a.error("LOADING SPECIFICATION FAILED: "+e.statusText);else try{r(JSON.parse(t))}catch(n){a.error("INVALID SPECIFICATION: Must be a valid JSON object. "+n)}})}else a.error("INVALID SPECIFICATION: Must be a valid JSON object or URL.")}var i=e("datalib"),a=e("vega-logging"),o=e("../core/Model"),s=e("../core/View");t.exports=r},{"../core/Model":88,"../core/View":89,"./":97,datalib:26,"vega-logging":47}],107:[function(e,t,n){(function(n){function r(e){function t(t,n){var r,a,o,s=i.mouse((i.event=t,e.renderer().scene())),u=e.padding(),l={};if(n)for(r=n.mark,a="group"===r.marktype?n:r.group,o=n;null!=o;o=o.mark.group)o.mark.def.name&&(l[o.mark.def.name]=o);l.root=e.model().scene().items[0],t.vg=Object.create(d),t.vg.group=a,t.vg.item=n||{},t.vg.name=l,t.vg.x=s[0]-u.left,t.vg.y=s[1]-u.top}function n(e,t,n,r){function i(e){return!e.fn(n,r,m.values(s,e.globals))}var a,l,c,f,d=e.handlers[t],h=e.nodes[t],p=o.ChangeSet.create(null,!0),g=!1;for(l=0,c=d.length;c>l;++l)f=d[l],g=f.filters.some(i),g||(a=f.exp.fn(n,r,m.values(s,f.exp.globals)),f.spec.scale&&(a=u.scale(m,f.spec,a,n,r)),(a!==f.signal.value()||f.signal.verbose())&&(f.signal.value(a),p.signals[f.signal.name()]=1));m.propagate(p,h)}function r(e,t,n,i){t.forEach(function(t){t.event?h(e,t,n,i):t.signal?p(e,t,n,i):t.start?g(e,t,n,i):t.stream&&r(e,t.stream,n,i)})}function h(e,t,n,r){var i=t.event,s=t.name,u=t.mark,l=t.target,f=t.filters||[],d=l?x:b,h=l?l+":"+i:i,p=d.nodes[h]||(d.nodes[h]=new o.Node(m)),g=d.handlers[h]||(d.handlers[h]=[]);s?f.push('!!event.vg.name["'+s+'"]'):u&&f.push("event.vg.item.mark && event.vg.item.mark.marktype==="+a.str(u)),g.push({signal:e,exp:n,spec:r,filters:f.map(function(e){return c(e)})}),p.addListener(e)}function p(e,t,n,r){var i=new o.Node(m);i.evaluate=function(i){if(!i.signals[t.signal])return m.doNotPropagate;var a=n.fn(null,null,m.values(s,n.globals));return r.scale&&(a=u.scale(m,r,a)),(a!==e.value()||e.verbose())&&(e.value(a),i.signals[e.name()]=1,i.reflow=!0),i},i.dependency(o.Dependencies.SIGNALS,t.signal),i.addListener(e),m.signal(t.signal).addListener(i)}function g(e,t,n,i){var a=e.name(),o=a+f,s=c("true"),u=c("false"),l=t.middle,d=l.filters||(l.filters=[]),h=m.signal(o)||m.signal(o,!1);r(h,[t.start],s,{}),r(h,[t.end],u,{}),d.push(h.name()),r(e,[t.middle],n,i)}var m=e.model(),v=m.defs().signals,y={handlers:{},nodes:{}},b=a.duplicate(y),x=a.duplicate(y);return(v||[]).forEach(function(e){var t=m.signal(e.name);e.expr||(e.streams||[]).forEach(function(e){var n=l.parse(e.type),i=c(e.expr);r(t,n,i,e)})}),a.keys(b.handlers).forEach(function(r){e.on(r,function(e,i){e.preventDefault(),t(e,i),n(b,r,i&&i.datum||{},e)})}),a.keys(x.handlers).forEach(function(e){function r(r){t(r),n(x,e,i.select(this).datum(),r)}if("undefined"!=typeof window){for(var a=x.handlers[e],o=e.split(":"),s="window"===o[0]?[window]:window.document.querySelectorAll(o[0]),u=0;u<s.length;++u)s[u].addEventListener(o[1],r);a.elements=s,a.listener=r}}),x.detach=function(){a.keys(x.handlers).forEach(function(e){for(var t=x.handlers[e],n=e.split(":"),r=t.elements||[],i=0;i<r.length;++i)r[i].removeEventListener(n[1],t.listener)})},x.detach}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow"),s=o.Dependencies.SIGNALS,u=e("./signals"),l=e("./events"),c=e("./expr"),f="_vgGATEKEEPER",d={getGroup:function(e){return e?this.name[e]:this.group},getXY:function(e){var t={x:this.x,y:this.y};for("string"==typeof e&&(e=this.name[e]);e;e=e.mark&&e.mark.group)t.x-=e.x||0,t.y-=e.y||0;return t},getX:function(e){return this.getXY(e).x},getY:function(e){return this.getXY(e).y}};t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./events":95,"./expr":96,"./signals":105,datalib:26,"vega-dataflow":41}],108:[function(e,t,n){function r(e,t){var n=new a[t.type](e);return t.output&&n.output(t.output),i.keys(t).forEach(function(e){"type"!==e&&"output"!==e&&n.param(e,t[e])}),n}var i=e("datalib"),a=e("../transforms/index");t.exports=r},{"../transforms/index":142,datalib:26}],109:[function(e,t,n){function r(e,t){return this._mark=t,o.prototype.init.call(this,e).router(!0).reflows(!0).mutates(!0)}var i=e("datalib"),a=e("vega-dataflow"),o=a.Node,s=e("vega-logging"),u=e("vega-scenegraph").bound,l=e("./Encoder"),c=r.prototype=new o;c.evaluate=function(e){s.debug(e,["bounds",this._mark.marktype]);var t,n,r,o,c,f,d=this._mark.marktype,h="group"===d,p=this._mark.items,g=i.array(this._mark.def.legends).length>0;if(e.add.length||e.rem.length||!p.length||e.mod.length===p.length||"area"===d||"line"===d?u.mark(this._mark,null,h&&!g):e.mod.forEach(function(e){u.item(e)}),h&&g){for(t=0,n=p.length;n>t;++t)for(c=p[t],c._legendPositions=null,r=0,o=c.legendItems.length;o>r;++r)f=c.legendItems[r],l.update(this._graph,e.trans,"vg_legendPosition",f.items,e.dirty),u.mark(f,null,!1);u.mark(this._mark,null,!0)}return a.ChangeSet.create(e,!0)},t.exports=r},{"./Encoder":111,datalib:26,"vega-dataflow":41,"vega-logging":47,"vega-scenegraph":48}],110:[function(e,t,n){function r(){return arguments.length?this.init.apply(this,arguments):this}function i(){var e,t,n,r,i,a,o=this._def.from,s=o.mark;s?(t=["vg",this._parent_id,s].join("_"),n={name:t,transform:o.transform,modify:o.modify}):(e=this._graph.data(this._from),t=["vg",this._from,this._def.type,e.listeners(!0).length].join("_"),n={name:t,source:this._from,transform:o.transform,modify:o.modify}),this._from=t,this._ds=b.datasource(this._graph,n);var u;s?(r=this.sibling(s),u=new d(this._graph).addListener(this._ds.listener()),u.evaluate=function(){return r._output},r._isSuper?r.addListener(u):r._bounder.addListener(u)):(i=this._ds.source().last(),a=g.create(i),a.add=i.add,a.mod=i.mod,a.rem=i.rem,a.stamp=null,this._graph.propagate(a,this._ds.listener(),i.stamp))}function a(){var e=p.ingest(new c(this._mark));return this._def.width&&p.set(e,"width",this._def.width),this._def.height&&p.set(e,"height",this._def.height),e}function o(e,t,n,r,i){var o,u,l,c,f,d,h,g=s(this._def.key||(r?"_id":null)),m=this._mark.items||[],v=r?e.rem:m,y=p.idMap(!r||i?n:e.mod),b=[];for(o=0,l=v.length;l>o;++o)c=v[o]===m[o]?m[o]:g?this._map[g(v[o])]:v[o],c.status=x.EXIT;for(o=0,l=n.length;l>o;++o)f=n[o],c=g?this._map[u=g(f)]:m[o],d=c?!1:(c=a.call(this),!0),c.status=d?x.ENTER:x.UPDATE,h=!d&&c.datum!==f,c.datum=f,g&&(p.set(c,"key",u),this._map[u]=c),d?t.add.push(c):(h||y[f._id])&&t.mod.push(c),b.push(c);for(o=0,l=v.length;l>o;++o)c=v[o]===m[o]?m[o]:g?this._map[u=g(v[o])]:v[o],c.status===x.EXIT&&(c._dirty=!0,e.dirty.push(c),b.push(c),t.rem.push(c),g&&(this._map[u]=null));return this._mark.items=b,t}function s(e){if(null==e)return null;var t=u.array(e).map(u.accessor);return function(e){for(var n="",r=0,i=t.length;i>r;++r)r>0&&(n+="|"),n+=String(t[r](e));return n}}var u=e("datalib"),l=e("vega-logging"),c=e("vega-scenegraph").Item,f=e("vega-dataflow"),d=f.Node,h=f.Dependencies,p=f.Tuple,g=f.ChangeSet,m={},v=e("./Encoder"),y=e("./Bounder"),b=e("../parse/data"),x=r.STATUS={ENTER:"enter",UPDATE:"update",EXIT:"exit"},w=1,_=2,k=r.prototype=new d;k.init=function(e,t,n,r,a,o){return d.prototype.init.call(this,e).router(!0).collector(!0),this._def=t,this._mark=n,this._from=(t.from?t.from.data:null)||o,this._ds=u.isString(this._from)?e.data(this._from):null,this._map={},this._status=null,n.def=t,n.marktype=t.type,n.interactive=t.interactive!==!1,n.items=[],u.isValid(t.name)&&(n.name=t.name),this._parent=r,this._parent_id=a,t.from&&(t.from.mark||t.from.transform||t.from.modify)&&i.call(this),this._isSuper="group"!==this._def.type,this._encoder=new v(this._graph,this._mark,this),this._bounder=new y(this._graph,this._mark),this._output=null,this._ds&&this._encoder.dependency(h.DATA,this._from),this.dependency(h.DATA,this._encoder.dependency(h.DATA)),this.dependency(h.SCALES,this._encoder.dependency(h.SCALES)),this.dependency(h.SIGNALS,this._encoder.dependency(h.SIGNALS)),this},k.ds=function(){return this._ds},k.parent=function(){return this._parent},k.encoder=function(){return this._encoder},k.pipeline=function(){return[this]},k.connect=function(){var e=this;return this._graph.connect(this.pipeline()),this._encoder._scales.forEach(function(t){(t=e._parent.scale(t))&&t.addListener(e)}),this._parent&&(this._isSuper?this.addListener(this._parent._collector):this._bounder.addListener(this._parent._collector)),this._status=w,this},k.disconnect=function(){function e(e){for(var n,r=0,i=e.length;i>r;++r)(n=t._parent.scale(e[r]))&&n.removeListener(t)}var t=this;return this._listeners.length?(d.prototype.disconnect.call(this),this._graph.disconnect(this.pipeline()),e(this._encoder._scales),e(u.keys(this._mark._scaleRefs)),this._status=_,this):this},k.sibling=function(e){return this._parent.child(e,this._parent_id)},k.evaluate=function(e){l.debug(e,["building",this._from||this._def.from,this._def.type]);var t,n,r,i,a=this,s=this._mark.def,c=s.properties||{},f=c.update||{},d=g.create(e);if(this._ds){if(r=d.data[i=this._ds.name()],d.data[i]=null,t=this._encoder.reevaluate(d),d.data[i]=r,n=this._ds.last(),!n)throw Error("Builder evaluated before backing DataSource.");n.stamp>this._stamp?o.call(this,n,d,this._ds.values(),!0,t):t&&(d.mod=this._mark.items.slice())}else r=u.isFunction(this._def.from)?this._def.from():[m],o.call(this,e,d,r);return this._output=d=this._graph.evaluate(d,this._encoder),f.nested&&f.nested.length&&this._status===w&&u.keys(this._mark._scaleRefs).forEach(function(e){var t=a._parent.scale(e);t&&(t.addListener(a),a.dependency(h.SCALES,e),a._encoder.dependency(h.SCALES,e))}),this._isSuper&&(d.mod=d.mod.filter(function(e){return e._dirty}),d=this._graph.evaluate(d,this._bounder)),d},t.exports=r},{"../parse/data":94,"./Bounder":109,"./Encoder":111,datalib:26,"vega-dataflow":41,"vega-logging":47,"vega-scenegraph":48}],111:[function(e,t,n){function r(e,t,n){var r=t.def.properties||{},i=r.enter,a=r.update,o=r.exit;c.prototype.init.call(this,e),this._mark=t,this._builder=n;var s=this._scales=[];return i&&s.push.apply(s,i.scales),a&&(this.dependency(f.DATA,a.data),this.dependency(f.SIGNALS,a.signals),this.dependency(f.FIELDS,a.fields),this.dependency(f.SCALES,a.scales),s.push.apply(s,a.scales)),o&&s.push.apply(s,o.scales),this.mutates(!0)}function i(e,t,n,r){var i,a,o,s=n.add.length;return(i=r.enter)&&(a=i[e]).length&&s&&(o=t.values(e,a,o=o||{})),(i=r.exit)&&(a=i[e]).length&&n.rem.length&&(o=t.values(e,a,o=o||{})),(i=r.update)&&(a=i[e]).length&&(s||n.mod.length)&&(o=t.values(e,a,o=o||{})),o||h}function a(e,t,n,r,i,a,o){var s=e.encode,u=t._dirty,l=s.call(s,t,t.mark.group||t,n,r,i,a);t._dirty=l||u,l&&!u&&o.push(t)}function o(){for(var e,t,n,r=this._mark.def.properties.update.nested,i=this._builder,a=0,o=0,s=r.length;s>o;++o)if(e=r[o],!e.scale){for(;a<e.level;++a)i=i.parent(),t=i.ds();if(n=(e.group?i.encoder():t.last())._stamp,n>this._stamp)return!0}return!1}var s=e("datalib"),u=e("vega-logging"),l=e("vega-dataflow"),c=l.Node,f=l.Dependencies,d=e("vega-scenegraph").bound,h={},p=r.prototype=new c;p.evaluate=function(t){u.debug(t,["encoding",this._mark.def.type]);var n,r,o,s,l=this._graph,c=this._mark.def.properties||{},d=this._mark.items,p=c.enter,g=c.update,m=c.exit,v=t.dirty,y=l.predicates(),b=t.request,x=this._mark.group,w=x&&(x.mark.axis||x.mark.legend),_=h,k=h;if(b&&!w){if((s=c[b])&&t.mod.length)for(_=s.data?l.values(f.DATA,s.data):null,k=s.signals?l.values(f.SIGNALS,s.signals):null,n=0,r=t.mod.length;r>n;++n)o=t.mod[n],a.call(this,s,o,t.trans,_,k,y,v);return t}for(_=i(f.DATA,l,t,c),k=i(f.SIGNALS,l,t,c),n=0,r=t.rem.length;r>n;++n)o=t.rem[n],m&&a.call(this,m,o,t.trans,_,k,y,v),t.trans&&!m?t.trans.interpolate(o,h):t.trans||d.pop();var $=e("./Builder").STATUS.UPDATE;for(n=0,r=t.add.length;r>n;++n)o=t.add[n],p&&a.call(this,p,o,t.trans,_,k,y,v),g&&a.call(this,g,o,t.trans,_,k,y,v),o.status=$;if(g)for(n=0,r=t.mod.length;r>n;++n)o=t.mod[n],a.call(this,g,o,t.trans,_,k,y,v);return t},p.reevaluate=function(e){var t=this._mark.def,n=t.properties||{},r=s.isFunction(t.from)||t.orient||e.request||c.prototype.reevaluate.call(this,e);return r||(n.update?o.call(this):!1)},r.update=function(e,t,n,r,i){r=s.array(r);var o,u,l,c,h,p=e.predicates(),g=e.values(f.DATA),m=e.values(f.SIGNALS);for(o=0,u=r.length;u>o;++o)l=r[o],c=l.mark.def.properties,h=c&&c[n],h&&(a.call(null,h,l,t,g,m,p,i),d.item(l))},t.exports=r},{"./Builder":110,datalib:26,"vega-dataflow":41,"vega-logging":47,"vega-scenegraph":48}],112:[function(e,t,n){function r(){return this._children={},this._scaler=null,this._recursor=null,this._scales={},this.scale=a.bind(this),arguments.length?this.init.apply(this,arguments):this}function i(e){function t(e){e.type!=x.MARK||e.inline||void 0===m._graph.data(e.from)||m._recursor.removeListener(e.builder)}function n(t){var n=t.scale();e.scales[n.scaleName]&&t.reset().def()}function r(t){var n=t.size()||t.shape()||t.fill()||t.stroke();e.scales[n.scaleName]&&t.reset().def()}function i(e){m._recursor.removeListener(e.builder),e.builder.disconnect()}var a,o,f,d,h,p,g,m=this,v=c.array(this._def.marks).length>0,y=c.array(this._def.axes).length>0,b=c.array(this._def.legends).length>0,w=!1;for(a=0,d=e.add.length;d>a;++a)h=e.add[a],v&&s.call(this,e,h),y&&u.call(this,e,h),b&&l.call(this,e,h);for(a=e.add.length-1;a>=0;--a)for(h=e.add[a],o=this._children[h._id].length-1;o>=0;--o)f=this._children[h._id][o],f.builder.connect(),p=f.builder.pipeline(),g=f.builder._def,w=g.type!==x.GROUP,w=w&&void 0!==this._graph.data(f.from),w=w&&1===p[p.length-1].listeners().length,w=w&&g.from&&!g.from.mark,f.inline=w,w?this._graph.evaluate(e,f.builder):this._recursor.addListener(f.builder);for(a=0,d=e.mod.length;d>a;++a)h=e.mod[a],v&&m._children[h._id].forEach(t),y&&h.axes.forEach(n),b&&h.legends.forEach(r);for(a=0,d=e.rem.length;d>a;++a)h=e.rem[a],m._children[h._id].forEach(i),delete m._children[h._id];return e}function a(e,t){var n=this,r=null;if(2===arguments.length)return n._scales[e]=t,t;for(;null==r&&(r=n._scales[e],n=n.mark?n.mark.group:n._parent););return r}function o(e,t){g.debug(e,["building group",t._id]),t._scales=t._scales||{},t.scale=a.bind(t),t.items=t.items||[],this._children[t._id]=this._children[t._id]||[],t.axes=t.axes||[],t.axisItems=t.axisItems||[],t.legends=t.legends||[],t.legendItems=t.legendItems||[]}function s(e,t){g.debug(e,["building children marks #"+t._id]);var n,i,a,o,s,u,l=this._def.marks;for(o=0,s=l.length;s>o;++o)n=l[o],i=n.from||{},a=t.datum._facetID,t.items[o]={group:t,_scaleRefs:{}},u=n.type===x.GROUP?new r:new m,u.init(this._graph,n,t.items[o],this,t._id,a),this._children[t._id].push({builder:u,from:i.data||(i.mark?"vg_"+t._id+"_"+i.mark:a),type:x.MARK})}function u(e,t){var n=t.axes,i=t.axisItems,a=this;y(this._graph,this._def.axes,n,t),n.forEach(function(e,n){var o=a._def.axes[n].scale,s=e.def(),u=null;i[n]={group:t,axis:!0,layer:s.layer},u=s.type===x.GROUP?new r:new m,u.init(a._graph,s,i[n],a).dependency(h.SCALES,o),a._children[t._id].push({builder:u,type:x.AXIS,scale:o})})}function l(e,t){var n=t.legends,i=t.legendItems,a=this;b(this._graph,this._def.legends,n,t),n.forEach(function(e,n){var o=e.size()||e.shape()||e.fill()||e.stroke(),s=e.def(),u=null;i[n]={group:t,legend:!0},u=s.type===x.GROUP?new r:new m,u.init(a._graph,s,i[n],a).dependency(h.SCALES,o),a._children[t._id].push({builder:u,type:x.LEGEND,scale:o})})}var c=e("datalib"),f=e("vega-dataflow"),d=f.Node,h=f.Dependencies,p=f.Collector,g=e("vega-logging"),m=e("./Builder"),v=e("./Scale"),y=e("../parse/axes"),b=e("../parse/legends"),x=r.TYPES={GROUP:"group",MARK:"mark",AXIS:"axis",LEGEND:"legend"},w=r.prototype=new m;w.init=function(e,t){var n,r=this;this._scaler=new d(e),(t.scales||[]).forEach(function(t){t=r.scale(n=t.name,new v(e,t,r)),r.scale(n+":prev",t),r._scaler.addListener(t)}),this._recursor=new d(e),this._recursor.evaluate=i.bind(this);var a=(t.axes||[]).reduce(function(e,t){return e[t.scale]=1,e},{});return a=(t.legends||[]).reduce(function(e,t){return e[t.size||t.shape||t.fill||t.stroke],e},a),this._recursor.dependency(h.SCALES,c.keys(a)),this._collector=new p(e),m.prototype.init.apply(this,arguments)},w.evaluate=function(){var e=m.prototype.evaluate.apply(this,arguments),t=this;return e.add.forEach(function(n){o.call(t,e,n)}),e},w.pipeline=function(){return[this,this._scaler,this._recursor,this._collector,this._bounder]},w.disconnect=function(){var e=this;return c.keys(e._children).forEach(function(t){e._children[t].forEach(function(t){e._recursor.removeListener(t.builder),t.builder.disconnect()})}),e._children={},m.prototype.disconnect.call(this)},w.child=function(e,t){for(var n,r=this._children[t],i=0,a=r.length;a>i&&(n=r[i],n.type!=x.MARK||n.builder._def.name!=e);++i);return n.builder},t.exports=r},{"../parse/axes":92,"../parse/legends":98,"./Builder":110,"./Scale":113,datalib:26,"vega-dataflow":41,"vega-logging":47}],113:[function(e,t,n){(function(n){function r(e,t,n){return this._def=t,this._parent=n,this._updated=!1,k.prototype.init.call(this,e).reflows(!0)}function i(e){var t=this._def.name,n=t+":prev",r=a.call(this,e.scale(t)),i=r.type===T.ORDINAL?o:u,s=y.call(this,e);return i.call(this,r,s,e),e.scale(t,r),e.scale(n,e.scale(n)||r),r}function a(e){var t=this._graph.config(),n=this._def.type||T.LINEAR;if(!e||n!==e.type){var r=t.scale[n]||b.scale[n];if(!r)throw Error("Unrecognized scale type: "+n);(e=r()).type=e.type||n,e.scaleName=this._def.name,e._prev={}}return e}function o(e,t,n){var r,i,a=this._def,o=e._prev,u=!1,l=m.call(this,a.padding)||0,c=null==a.outerPadding?l:m.call(this,a.outerPadding),f=a.points&&m.call(this,a.points),d=m.call(this,a.round)||null==a.round,h=!0;if(x.isObject(a.range)&&!x.isArray(a.range)&&(u=!0,t=g.call(this,C.RANGE,a.range,e,n)),r=g.call(this,C.DOMAIN,a.domain,e,n),r&&!x.equal(o.domain,r)&&(e.domain(r),o.domain=r,this._updated=!0),!x.equal(o.range,t)){if(a.bandWidth){var p,v=m.call(this,a.bandWidth),y=r.length,b=a.points?l*v:l*v*(y-1)+2*c;t[0]>t[1]?(p=t[1]||0,t=[p+(v*y+b),p]):(p=t[0]||0,t=[p,p+(v*y+b)])}i="string"==typeof t[0],i||t.length>2||1===t.length||u?(e.range(t),h=!1):f&&d?e.rangeRoundPoints(t,l):f?e.rangePoints(t,l):d?e.rangeRoundBands(t,l,c):e.rangeBands(t,l,c),o.range=t,this._updated=!0}!e.invert&&h&&s(e)}function s(e){e.invert=function(t,n){var r=e.range(),i=r[0]<r[1],a=i?O:D;if(1===arguments.length){if(!x.isNumber(t))throw Error("Ordinal scale inversion is only supported for numeric input ("+t+").");return e.domain()[a(r,t)]}if(2===arguments.length){if(!x.isNumber(t)||!x.isNumber(n))throw Error("Extents to ordinal invert are not numbers ("+t+", "+n+").");var o,s=e.domain(),u=a(r,t),l=a(r,n),c=r.length-1;return u>l&&(o=u,u=l,l=u),0>u&&(u=0),l>c&&(l=c),(i?x.range(u,l+1):x.range(l,u-1,-1)).map(function(e){return s[e]})}}}function u(e,t,n){var r,i,a=this._def,o=e._prev,s=m.call(this,a.round),u=m.call(this,a.exponent),l=m.call(this,a.clamp),c=m.call(this,a.nice);r=a.type===T.QUANTILE?g.call(this,C.DOMAIN,a.domain,e,n):v.call(this,e,n),r&&!x.equal(o.domain,r)&&(e.domain(r),o.domain=r,this._updated=!0),"height"===m.call(this,a.range)&&(t=t.reverse()),x.equal(o.range,t)||(e[s&&e.rangeRound?"rangeRound":"range"](t),o.range=t,this._updated=!0,this._stamp>0||(u&&a.type===T.POWER&&e.exponent(u),l&&e.clamp(!0),c&&(a.type===T.TIME?(i=b.time[c],i||_.error("Unrecognized interval: "+i),e.nice(i)):e.nice())))}function l(e){return e.type===T.ORDINAL||e.type===T.QUANTILE}function c(e){return e.fields||x.array(e)}function f(e){return e.some(function(e){return e.data?e.data&&x.array(e.field).some(function(e){return e.parent}):!0})}function d(e,t){return x.array(e.field).map(function(e){return e.parent?x.accessor(e.parent)(t.datum):e})}function h(e,t){var n=c(e);return 1==n.length&&1==x.array(n[0].field).length?S.TYPES.TUPLE:l(t)&&x.isObject(e.sort)?S.TYPES.MULTI:S.TYPES.VALUE}function p(e,t,n,r){var i=c(t),a=f(i),o=h(t,n),s=l(n),u=t.sort,p="_"+e,g=d(i[0],r);if(n[p]||this[p])return n[p]||this[p];

var m,v,y=new S(this._graph).type(o);return a?n[p]=y:this[p]=y,s?o===S.TYPES.VALUE?(m=[{name:C.GROUPBY,get:x.identity}],v={"*":C.COUNT}):o===S.TYPES.TUPLE?(m=[{name:C.GROUPBY,get:x.$(g[0])}],v=x.isObject(u)?[{field:C.VALUE,get:x.$(u.field),ops:[u.op]}]:{"*":C.COUNT}):(m=C.GROUPBY,v=[{field:C.VALUE,ops:[u.op]}]):(m=[],v=[{field:C.VALUE,get:o==S.TYPES.TUPLE?x.$(g[0]):x.identity,ops:[C.MIN,C.MAX],as:[C.MIN,C.MAX]}]),y.param("groupby",m).param("summarize",v),y._lastUpdate=-1,y}function g(e,t,n,r){function i(e){M.dependency($.SIGNALS,e)}if(null==t)return[];if(x.isArray(t))return t.map(m.bind(this));var a,o,s,u,g,v,y,b,w,_,k,M=this,T=this._graph,E=c(t),A=f(E),O=h(t,n),D=p.apply(this,arguments),L=t.sort,N=l(n);if(A||!A&&D._lastUpdate<this._stamp){for(a=0,o=E.length;o>a;++a)if(g=E[a],w=g.data||r.datum._facetID,b=T.data(w).last(),!(b.stamp<=this._stamp)){for(v=d(g,r),s=0,u=v.length;u>s;++s)y=v[s],O===S.TYPES.VALUE?D.accessors(null,y):O===S.TYPES.MULTI&&D.accessors(y,g.sort||L.field),D.evaluate(b);this.dependency($.DATA,w),D.dependency($.SIGNALS).forEach(i)}D._lastUpdate=this._stamp,b=D.aggr().result(),N?(x.isObject(L)?(k=(_=L.order)&&_.signal?T.signalRef(_.signal):_,k=(k==C.DESC?"-":"+")+L.op+"_"+C.VALUE,k=x.comparator(k)):L===!0&&(k=x.comparator(C.GROUPBY)),k&&(b=b.sort(k)),D._values=b.map(function(e){return e[C.GROUPBY]})):(b=b[0],D._values=x.isValid(b)?[b[C.MIN],b[C.MAX]]:[])}return D._values}function m(e){if(!e||!e.signal)return e;var t,n=e.signal;return this.dependency($.SIGNALS,(t=x.field(n))[0]),this._graph.signalRef(t)}function v(e,t){var n,r,i=this._def,a=[null,null];return void 0!==i.domain&&(a=x.isObject(i.domain)?g.call(this,C.DOMAIN,i.domain,e,t):a),r=a.length-1,void 0!==i.domainMin&&(a[0]=x.isObject(i.domainMin)?i.domainMin.signal?x.isValid(n=m.call(this,i.domainMin))?n:a[0]:g.call(this,C.DOMAIN+C.MIN,i.domainMin,e,t)[0]:i.domainMin),void 0!==i.domainMax&&(a[r]=x.isObject(i.domainMax)?i.domainMax.signal?x.isValid(n=m.call(this,i.domainMax))?n:a[r]:g.call(this,C.DOMAIN+C.MAX,i.domainMax,e,t)[1]:i.domainMax),i.type===T.LOG||i.type===T.TIME||!i.zero&&void 0!==i.zero||(a[0]=Math.min(0,a[0]),a[r]=Math.max(0,a[r])),a}function y(e){var t=this._def,n=this._graph.config(),r=m.call(this,t.range),i=[null,null];if(void 0!==r)if("string"==typeof r)if(M[r])i=[0,e[r]];else{if(!n.range[r])return _.error("Unrecogized range: "+r),i;i=n.range[r]}else if(x.isArray(r))i=x.duplicate(r).map(m.bind(this));else{if(x.isObject(r))return null;i=[0,r]}if(void 0!==t.rangeMin&&(i[0]=t.rangeMin.signal?m.call(this,t.rangeMin):t.rangeMin),void 0!==t.rangeMax&&(i[i.length-1]=t.rangeMax.signal?m.call(this,t.rangeMax):t.rangeMax),void 0!==t.reverse){var a=m.call(this,t.reverse);x.isObject(a)&&(a=x.accessor(a.field)(e.datum)),a&&(i=i.reverse())}return i}var b="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,x=e("datalib"),w=e("vega-dataflow"),_=e("vega-logging"),k=w.Node,$=w.Dependencies,S=e("../transforms/Aggregate"),M={width:1,height:1},T={LINEAR:"linear",ORDINAL:"ordinal",LOG:"log",POWER:"pow",SQRT:"sqrt",TIME:"time",TIME_UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold"},C={DOMAIN:"domain",RANGE:"range",COUNT:"count",GROUPBY:"groupby",MIN:"min",MAX:"max",VALUE:"value",ASC:"asc",DESC:"desc"},E=r.prototype=new k;E.evaluate=function(e){var t=this,n=function(e){i.call(t,e)};return this._updated=!1,e.add.forEach(n),e.mod.forEach(n),this._updated&&(e.scales[this._def.name]=1,_.debug(e,["scale",this._def.name])),w.ChangeSet.create(e,!0)},E.dependency=function(e,t){if(2==arguments.length){var n=e===$.DATA?"data":"signal";t=x.array(t);for(var r=0,i=t.length;i>r;++r)this._graph[n](t[r]).addListener(this._parent)}return k.prototype.dependency.call(this,e,t)};var A=b.bisector(x.numcmp).right,O=function(e,t){return A(e,t)-1},D=b.bisector(function(e,t){return-1*x.numcmp(e,t)}).left;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transforms/Aggregate":118,datalib:26,"vega-dataflow":41,"vega-logging":47}],114:[function(e,t,n){(function(n){function r(e,t){this.duration=e||500,this.ease=t&&a.ease(t)||a.ease("cubic-in-out"),this.updates={next:null}}function i(e){for(var t,n,r,i,a,s,l=this.updates,c=l,f=c.next,d=this.duration,h=!0;null!=f;c=f,f=c.next)if(t=f.item,n=t.delay||0,r=(e-n)/d,0>r)h=!1;else{for(r>1&&(r=1),i=f.ease(r),a=0,s=f.length;s>a;++a)t[f[a].property]=f[a](i);t.touch(),o.item(t),1===r?(f.remove&&(t.status=u.EXIT,t.remove()),c.next=f.next,f=c):h=!1}return this.callback(),h}var a="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,o=e("vega-scenegraph").bound,s=e("vega-dataflow").Tuple,u=e("./Builder").STATUS,l=r.prototype,c={text:1,url:1};l.interpolate=function(e,t){var n,r,i,o,l=null;for(n in t)r=e[n],i=t[n],r!==i&&(c[n]||void 0===r?s.set(e,n,i):"number"!=typeof r||isFinite(r)?(o=a.interpolate(r,i),o.property=n,(l||(l=[])).push(o)):s.set(e,n,i));return null===l&&e.status===u.EXIT&&(l=[]),null!=l&&(l.item=e,l.ease=e.mark.ease||this.ease,l.next=this.updates.next,this.updates.next=l),this},l.start=function(e){for(var t=this,n=t.updates,r=n.next;null!=r;n=r,r=n.next)r.item.status===u.EXIT&&(r.item.status=u.UPDATE,r.remove=!0);t.callback=e,a.timer(function(e){return i.call(t,e)})},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Builder":110,"vega-dataflow":41,"vega-scenegraph":48}],115:[function(e,t,n){function r(e){function t(){L.type=null}function n(e){return{data:e}}function r(){var e=H||a();return S(e,q)}function a(){switch(C.type){case b:return b;case x:return x;case _:return w;default:return k}}function v(e,t,n){function r(t){return(e[0]<0?-Math.log(t>0?0:-t):Math.log(0>t?0:t))/Math.log(o)}function i(t){return e[0]<0?-Math.pow(o,-t):Math.pow(o,t)}if(null==t)return n;var a,o=C.base(),s=Math.min(o,C.ticks().length/t),u=e[0]>0?(a=1e-12,Math.ceil):(a=-1e-12,Math.floor);return function(e){return i(u(r(e)+a))/e>=s?n(e):""}}function S(e,t){var n,r,i=m.format,a="log"===C.type;switch(e){case k:return n=C.domain(),r=i.auto.number(n,Y,t||(a?".1r":null)),a?v(n,Y,r):r;case b:return(t?i:i.auto).time(t);case x:return(t?i:i.auto).utc(t);default:return String}}function M(e){var t=z||(C.ticks?C.ticks(Y):C.domain()),r=i(C,t,B).map(n);return t=t.map(function(t){return t=n(t),t.label=e(t.data),t}),[t,r]}function T(t){var n,r,i;t.type===_?(n={scale:t.scaleName,offset:.5+t.rangeBand()/2},r=n):(n={scale:t.scaleName,offset:.5},r={scale:t.scaleName+":prev",offset:.5}),i=o(t),m.extend(Z.gridLines,d(E)),m.extend(Z.majorTicks,d(E)),m.extend(Z.minorTicks,d(E)),m.extend(Z.tickLabels,h(E)),m.extend(Z.domain,g(E)),m.extend(Z.title,p(E)),Z.gridLines.properties.enter.stroke={value:E.axis.gridColor},Z.gridLines.properties.enter.strokeOpacity={value:E.axis.gridOpacity},u(A,Z.gridLines,r,n,1/0),u(A,Z.majorTicks,r,n,R),u(A,Z.minorTicks,r,n,I),s(A,Z.tickLabels,r,n,R,U),c(A,Z.domain,i,F),l(A,Z.title,i,D),m.extend(Z.gridLines.properties.update,V),m.extend(Z.majorTicks.properties.update,G),m.extend(Z.minorTicks.properties.update,X),m.extend(Z.tickLabels.properties.update,W),m.extend(Z.domain.properties.update,K),m.extend(Z.title.properties.update,J);var a=[Z.gridLines,Z.majorTicks,Z.minorTicks,Z.tickLabels,Z.domain,Z.title];m.extend(L,{type:"group",interactive:!1,properties:{enter:{encode:f,scales:[t.scaleName],signals:[],data:[]},update:{encode:f,scales:[t.scaleName],signals:[],data:[]}}}),L.marks=a.map(function(t){return y(e,t)})}var C,E=e.config(),A=E.axis.orient,O=0,D=E.axis.titleOffset,L={},N="front",j=!1,P=null,R=E.axis.tickSize,I=E.axis.tickSize,F=E.axis.tickSize,U=E.axis.padding,z=null,q=null,H=null,B=0,Y=E.axis.ticks,V={},W={},G={},X={},J={},K={},Z={gridLines:{},majorTicks:{},minorTicks:{},tickLabels:{},domain:{},title:{}},Q={};return Q.def=function(){L.type||T(C);var e=M(r()),t=P?[P].map(n):[];return L.marks[0].from=function(){return j?e[0]:[]},L.marks[1].from=function(){return e[0]},L.marks[2].from=function(){return e[1]},L.marks[3].from=L.marks[1].from,L.marks[4].from=function(){return[1]},L.marks[5].from=function(){return t},L.offset=O,L.orient=A,L.layer=N,L},Q.scale=function(e){return arguments.length?(C!==e&&(C=e,t()),Q):C},Q.orient=function(e){return arguments.length?(A!==e&&(A=e in $?e+"":E.axis.orient,t()),Q):A},Q.title=function(e){return arguments.length?(P!==e&&(P=e,t()),Q):P},Q.tickCount=function(e){return arguments.length?(Y=e,Q):Y},Q.tickValues=function(e){return arguments.length?(z=e,Q):z},Q.tickFormat=function(e){return arguments.length?(q!==e&&(q=e,t()),Q):q},Q.tickFormatType=function(e){return arguments.length?(H!==e&&(H=e,t()),Q):H},Q.tickSize=function(e,n){if(!arguments.length)return R;var r=arguments.length-1,i=+e,a=r>1?+n:R,o=r>0?+arguments[r]:R;return(R!==i||I!==a||F!==o)&&t(),R=i,I=a,F=o,Q},Q.tickSubdivide=function(e){return arguments.length?(B=+e,Q):B},Q.offset=function(e){return arguments.length?(O=m.isObject(e)?e:+e,Q):O},Q.tickPadding=function(e){return arguments.length?(U!==+e&&(U=+e,t()),Q):U},Q.titleOffset=function(e){return arguments.length?(D!==+e&&(D=+e,t()),Q):D},Q.layer=function(e){return arguments.length?(N!==e&&(N=e,t()),Q):N},Q.grid=function(e){return arguments.length?(j!==e&&(j=e,t()),Q):j},Q.gridLineProperties=function(e){return arguments.length?(V!==e&&(V=e),Q):V},Q.majorTickProperties=function(e){return arguments.length?(G!==e&&(G=e),Q):G},Q.minorTickProperties=function(e){return arguments.length?(X!==e&&(X=e),Q):X},Q.tickLabelProperties=function(e){return arguments.length?(W!==e&&(W=e),Q):W},Q.titleProperties=function(e){return arguments.length?(J!==e&&(J=e),Q):J},Q.domainProperties=function(e){return arguments.length?(K!==e&&(K=e),Q):K},Q.reset=function(){return t(),Q},Q}function i(e,t,n){var r=[];if(n&&t.length>1){for(var i,o,s=a(e.domain()),u=-1,l=t.length,c=(t[1]-t[0])/++n;++u<l;)for(i=n;--i>0;)(o=+t[u]-i*c)>=s[0]&&r.push(o);for(--u,i=0;++i<n&&(o=+t[u]+i*c)<s[1];)r.push(o)}return r}function a(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function o(e){return e.rangeExtent?e.rangeExtent():a(e.range())}function s(e,t,n,r,i,a){i=Math.max(i,0)+a,("left"===e||"top"===e)&&(i*=-1),"top"===e||"bottom"===e?(m.extend(t.properties.enter,{x:n,y:{value:i}}),m.extend(t.properties.update,{x:r,y:{value:i},align:{value:"center"},baseline:{value:M[e]}})):(m.extend(t.properties.enter,{x:{value:i},y:n}),m.extend(t.properties.update,{x:{value:i},y:r,align:{value:S[e]},baseline:{value:"middle"}}))}function u(e,t,n,r,i){var a="left"===e||"top"===e?-1:1;i=i===1/0?"top"===e||"bottom"===e?{field:{group:"height",level:2},mult:-a}:{field:{group:"width",level:2},mult:-a}:{value:a*i},"top"===e||"bottom"===e?(m.extend(t.properties.enter,{x:n,y:{value:0},y2:i}),m.extend(t.properties.update,{x:r,y:{value:0},y2:i}),m.extend(t.properties.exit,{x:r})):(m.extend(t.properties.enter,{x:{value:0},x2:i,y:n}),m.extend(t.properties.update,{x:{value:0},x2:i,y:r}),m.extend(t.properties.exit,{y:r}))}function l(e,t,n,r){var i=~~((n[0]+n[1])/2),a="top"===e||"left"===e?-1:1;"bottom"===e||"top"===e?m.extend(t.properties.update,{x:{value:i},y:{value:a*r},angle:{value:0}}):m.extend(t.properties.update,{x:{value:a*r},y:{value:i},angle:{value:"left"===e?-90:90}})}function c(e,t,n,r){var i;("top"===e||"left"===e)&&(r=-1*r),i="bottom"===e||"top"===e?"M"+n[0]+","+r+"V0H"+n[1]+"V"+r:"M"+r+","+n[0]+"H0V"+n[1]+"H"+r,t.properties.update.path={value:i}}function f(e,t,n){var r=n?{}:e,i=e.mark.def.offset,a=e.mark.def.orient,o=t.width,s=t.height;if(m.isArray(i)){var u=i[0],l=i[1];switch(a){case"left":v.set(r,"x",-u),v.set(r,"y",l);break;case"right":v.set(r,"x",o+u),v.set(r,"y",l);break;case"bottom":v.set(r,"x",u),v.set(r,"y",s+l);break;case"top":v.set(r,"x",u),v.set(r,"y",-l);break;default:v.set(r,"x",u),v.set(r,"y",l)}}else switch(m.isObject(i)&&(i=-t.scale(i.scale)(i.value)),a){case"left":v.set(r,"x",-i),v.set(r,"y",0);break;case"right":v.set(r,"x",o+i),v.set(r,"y",0);break;case"bottom":v.set(r,"x",0),v.set(r,"y",s+i);break;case"top":v.set(r,"x",0),v.set(r,"y",-i);break;default:v.set(r,"x",0),v.set(r,"y",0)}return n&&n.interpolate(e,r),!0}function d(e){return{type:"rule",interactive:!1,key:"data",properties:{enter:{stroke:{value:e.axis.tickColor},strokeWidth:{value:e.axis.tickWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function h(e){return{type:"text",interactive:!0,key:"data",properties:{enter:{fill:{value:e.axis.tickLabelColor},font:{value:e.axis.tickLabelFont},fontSize:{value:e.axis.tickLabelFontSize},opacity:{value:1e-6},text:{field:"label"}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function p(e){return{type:"text",interactive:!0,properties:{enter:{font:{value:e.axis.titleFont},fontSize:{value:e.axis.titleFontSize},fontWeight:{value:e.axis.titleFontWeight},fill:{value:e.axis.titleColor},align:{value:"center"},baseline:{value:"middle"},text:{field:"data"}},update:{}}}}function g(e){return{type:"path",interactive:!1,properties:{enter:{x:{value:.5},y:{value:.5},stroke:{value:e.axis.axisColor},strokeWidth:{value:e.axis.axisWidth}},update:{}}}}var m=e("datalib"),v=e("vega-dataflow").Tuple,y=e("../parse/mark"),b="time",x="utc",w="string",_="ordinal",k="number",$={top:1,right:1,bottom:1,left:1},S={bottom:"center",top:"center",left:"right",right:"left"},M={bottom:"top",top:"bottom",left:"middle",right:"middle"};t.exports=r},{"../parse/mark":99,datalib:26,"vega-dataflow":41}],116:[function(e,t,n){(function(n){function r(e){function t(){q.type=null}function n(e,t){return{data:e,index:t}}function r(e){return"ordinal"===e||"quantize"===e||"quantile"===e||"threshold"===e}function v(e){var t,r,i,a=y(_,k,$,S),o=(null==T?e.ticks?e.ticks.apply(e,N):e.domain():T).map(n),s=null==C?e.tickFormat?e.tickFormat.apply(e,N):String:C,u=5,l=f.range(o.length);_?(r=o.map(function(e){return Math.sqrt(_(e.data))}),i=f.max(r),r=r.reduce(function(e,t,n,r){return n>0&&(e[n]=e[n-1]+r[n-1]/2+u),e[n]+=t/2,e},[0]).map(Math.round)):(i=Math.round(Math.sqrt(A.legend.symbolSize)),r=M||(t=F.fontSize)&&t.value+u||A.legend.labelFontSize+u,r=l.map(function(e,t){return Math.round(i/2+t*r)}));var c,d=L;w&&(c=I.fontSize,d+=5+(c&&c.value||A.legend.titleFontSize));for(var h=0,p=r.length;p>h;++h)r[h]+=d;var g={name:"legend",type:"ordinal",points:!0,domain:l,range:r},m=(w?[w]:[]).map(n);return o.forEach(function(e){e.label=s(e.data),e.offset=i}),a.scales=[g],a.marks[0].from=function(){return m},a.marks[1].from=function(){return o},a.marks[2].from=a.marks[1].from,a}function y(t,n,r,l){var c=d.extend(U.titles,o(A)),f=d.extend(U.symbols,s(A)),h=d.extend(U.labels,u(A));return a(f,t,n,r,l),d.extend(c.properties.update,I),d.extend(f.properties.update,P),d.extend(h.properties.update,F),c.properties.enter.x.value+=L,c.properties.enter.y.value+=L,h.properties.enter.x.offset+=L+1,f.properties.enter.x.offset=L+1,h.properties.update.x.offset+=L+1,f.properties.update.x.offset=L+1,d.extend(q,{type:"group",interactive:!1,properties:{enter:p(e,"group",j),vg_legendPosition:{encode:i,signals:[],scales:[],data:[],fields:[]}}}),q.marks=[c,f,h].map(function(t){return g(e,t)}),q}function b(e){var t=x(e),r=e.domain(),i=(null==T?r:T).map(n),a=R.width&&R.width.value||A.legend.gradientWidth,o=null==C?e.tickFormat?e.tickFormat.apply(e,N):String:C,s={name:"legend",type:e.type,round:!0,zero:!1,domain:[r[0],r[r.length-1]],range:[L,a+L]};"pow"===e.type&&(s.exponent=e.exponent());var u=(w?[w]:[]).map(n);return i.forEach(function(e,t){e.label=o(e.data),e.align=t==i.length-1?"right":0===t?"left":"center"}),t.scales=[s],t.marks[0].from=function(){return u},t.marks[1].from=function(){return[1]},t.marks[2].from=function(){return i},t}function x(t){var n=d.extend(U.titles,o(A)),r=d.extend(U.gradient,l(A)),a=d.extend(U.labels,c(A)),s=new h,u=t.domain(),f=u[0],m=u[u.length-1],v=t.copy().domain([f,m]).range([0,1]),y="linear"!==t.type&&t.ticks?t.ticks.call(t,15):u;f!==y[0]&&y.unshift(f),m!==y[y.length-1]&&y.push(m);for(var b=0,x=y.length;x>b;++b)s.stop(v(y[b]),t(y[b]));r.properties.enter.fill={value:s},d.extend(n.properties.update,I),d.extend(r.properties.update,R),d.extend(a.properties.update,F);var _=r.properties,k=R.height,$=k&&k.value||_.enter.height.value;if(a.properties.enter.y.value=$,a.properties.update.y.value=$,w){var S=n.properties,M=I.fontSize,T=4+(M&&M.value||S.enter.fontSize.value);r.properties.enter.y.value+=T,a.properties.enter.y.value+=T,r.properties.update.y.value+=T,a.properties.update.y.value+=T}return n.properties.enter.x.value+=L,n.properties.enter.y.value+=L,r.properties.enter.x.value+=L,r.properties.enter.y.value+=L,a.properties.enter.y.value+=L,r.properties.update.x.value+=L,r.properties.update.y.value+=L,a.properties.update.y.value+=L,d.extend(q,{type:"group",interactive:!1,properties:{enter:p(e,"group",j),vg_legendPosition:{encode:i,signals:[],scales:[],data:[],fields:[]}}}),q.marks=[n,r,a].map(function(t){return g(e,t)}),q}var w,_=null,k=null,$=null,S=null,M=null,T=null,C=null,E=null,A=e.config(),O="right",D=A.legend.offset,L=A.legend.padding,N=[5],j={},P={},R={},I={},F={},U={titles:{},symbols:{},labels:{},gradient:{}},z={},q={};return z.def=function(){var e=_||k||$||S;return C=E?"time"===e.type?d.format.time(E):d.format.number(E):null,q.type||(q=e!==$&&e!==S||r(e.type)?v(e):b(e)),q.orient=O,q.offset=D,q.padding=L,q},z.size=function(e){return arguments.length?(_!==e&&(_=e,t()),z):_},z.shape=function(e){return arguments.length?(k!==e&&(k=e,t()),z):k},z.fill=function(e){return arguments.length?($!==e&&($=e,t()),z):$},z.stroke=function(e){return arguments.length?(S!==e&&(S=e,t()),z):S},z.title=function(e){return arguments.length?(w!==e&&(w=e,t()),z):w},z.format=function(e){return arguments.length?(E!==e&&(E=e,t()),z):E},z.spacing=function(e){return arguments.length?(M!==+e&&(M=+e,t()),z):M},z.orient=function(e){return arguments.length?(O=e in m?e+"":A.legend.orient,z):O},z.offset=function(e){return arguments.length?(D=+e,z):D},z.values=function(e){return arguments.length?(T=e,z):T},z.legendProperties=function(e){return arguments.length?(j=e,z):j},z.symbolProperties=function(e){return arguments.length?(P=e,z):P},z.gradientProperties=function(e){return arguments.length?(R=e,z):R},z.labelProperties=function(e){return arguments.length?(F=e,z):F},z.titleProperties=function(e){return arguments.length?(I=e,z):I},z.reset=function(){return t(),z},z}function i(e,t,n,r,i,a){var o,s=n?{}:e,u=e.mark.def.offset,l=e.mark.def.orient,c=2*e.mark.def.padding,f=~~e.bounds.width()+(e.width?0:c),d=~~e.bounds.height()+(e.height?0:c),h=t._legendPositions||(t._legendPositions={right:.5,left:.5});switch(s.x=.5,s.width=f,s.y=h[l],h[l]+=s.height=d,!n&&t.bounds&&(t.bounds.delta=t.bounds.x2-t.width),l){case"left":o=t.bounds?t.bounds.x1:0,s.x+=o-u-f;break;case"right":o=t.width+(t.bounds&&n?t.bounds.delta:0),s.x+=o+u}n&&n.interpolate(e,s);var p=e.mark.def.properties.enter.encode;return p.call(p,e,t,n,r,i,a),!0}function a(e,t,n,r,i){var a=e.properties.enter,o=e.properties.update;t&&(a.size=o.size={scale:t.scaleName,field:"data"}),n&&(a.shape=o.shape={scale:n.scaleName,field:"data"}),r&&(a.fill=o.fill={scale:r.scaleName,field:"data"}),i&&(a.stroke=o.stroke={scale:i.scaleName,field:"data"})}function o(e){var t=e.legend;return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{value:0},y:{value:0},fill:{value:t.titleColor},font:{value:t.titleFont},fontSize:{value:t.titleFontSize},fontWeight:{value:t.titleFontWeight},baseline:{value:"top"},text:{field:"data"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1}}}}}function s(e){var t=e.legend;return{type:"symbol",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},shape:{value:t.symbolShape},size:{value:t.symbolSize},stroke:{value:t.symbolColor},strokeWidth:{value:t.symbolStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{field:"offset",mult:.5},y:{scale:"legend",field:"index"},opacity:{value:1}}}}}function u(e){var t=e.legend;return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{field:"offset",offset:5},y:{scale:"legend",field:"index"},fill:{value:t.labelColor},font:{value:t.labelFont},fontSize:{value:t.labelFontSize},align:{value:t.labelAlign},baseline:{value:t.labelBaseline},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{opacity:{value:1},x:{field:"offset",offset:5},y:{scale:"legend",field:"index"}}}}}function l(e){var t=e.legend;return{type:"rect",interactive:!1,properties:{enter:{x:{value:0},y:{value:0},width:{value:t.gradientWidth},height:{value:t.gradientHeight},stroke:{value:t.gradientStrokeColor},strokeWidth:{value:t.gradientStrokeWidth},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{value:0},y:{value:0},opacity:{value:1}}}}}function c(e){var t=e.legend;return{type:"text",interactive:!1,key:"data",properties:{enter:{x:{scale:"legend",field:"data"},y:{value:20},dy:{value:2},fill:{value:t.labelColor},font:{value:t.labelFont},fontSize:{value:t.labelFontSize},align:{field:"align"},baseline:{value:"top"},text:{field:"label"},opacity:{value:1e-6}},exit:{opacity:{value:1e-6}},update:{x:{scale:"legend",field:"data"},y:{value:20},opacity:{value:1}}}}}var f="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,d=e("datalib"),h=e("vega-scenegraph").Gradient,p=e("../parse/properties"),g=e("../parse/mark"),m={right:1,left:1};t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../parse/mark":99,"../parse/properties":104,datalib:26,"vega-scenegraph":48}],117:[function(e,t,n){t.exports=function r(e,t){var n,i,a,o,s;if(t(e))return!0;var u=["items","axisItems","legendItems"];for(a=0,o=u.length;o>a;++a)if(s=e[u[a]])for(n=0,i=s.length;i>n;++n)if(r(s[n],t))return!0}},{}],118:[function(e,t,n){function r(e){return f.prototype.init.call(this,e),f.addParameters(this,{groupby:{type:"array<field>"},summarize:{type:"custom",set:function(e){function t(e){e.signal&&(l[e.signal]=1)}var n,r,i,o,s,u,l={},f=this._transform;if(!a.isArray(o=e)){o=[];for(s in e)u=a.array(e[s]),o.push({field:s,ops:u})}for(n=0,r=o.length;r>n;++n)i=o[n],i.field.signal&&(l[i.field.signal]=1),a.array(i.ops).forEach(t),a.array(i.as).forEach(t);return f._fields=o,f._aggr=null,f.dependency(c.SIGNALS,a.keys(l)),f}}}),this._aggr=null,this._input=null,this._args=null,this._fields=[],this._out=[],this._type=p.TUPLE,this._acc={groupby:a["true"],value:a["true"]},this.router(!0).produces(!0)}function i(e){var t,n,r,i,a,o,s,u=[];for(a=e._dims,t=0,n=a.length;n>t;++t)u.push(a[t].name);for(o=e._aggr,t=0,n=o.length;n>t;++t)for(s=o[t].measures.fields,r=0,i=s.length;i>r;++r)u.push(s[r]);return u}var a=e("datalib"),o=e("vega-dataflow"),s=e("vega-logging"),u=o.ChangeSet,l=o.Tuple,c=o.Dependencies,f=e("./Transform"),d=e("./Facetor"),h=r.prototype=Object.create(f.prototype);h.constructor=r;var p=r.TYPES={VALUE:1,TUPLE:2,MULTI:3};r.VALID_OPS=["values","count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","median","q1","q3","modeskew","min","max","argmin","argmax"],h.type=function(e){return this._type=e,this},h.accessors=function(e,t){var n=this._acc;n.groupby=a.$(e)||a["true"],n.value=a.$(t)||a["true"]},h.aggr=function(){if(this._aggr)return this._aggr;var e=this._graph,t=!1,n=[],r=this.param("groupby").field,o=function(t){return t.signal?e.signalRef(t.signal):t},s=this._fields.map(function(e){var r={name:o(e.field),as:a.array(e.as),ops:a.array(o(e.ops)).map(o),get:e.get};return t=t||null!=r.get,n.push(r.name),r});r.forEach(function(e){e.get&&(t=!0),n.push(e.name||e)}),this._args=t||!s.length?null:n,s.length||(s={"*":"values"});var u=this._aggr=(new d).groupby(r).stream(!0).summarize(s);return this._out=i(u),this._type!==p.VALUE&&u.key("_id"),u},h.transform=function(e,t){s.debug(e,["aggregate"]);var n,r,i,a,o=u.create(e),c=this.aggr(),f=this._out,d=this._args,h=!0,g=l.prev;if(t&&(o.rem.push.apply(o.rem,c.result()),c.clear(),this._aggr=null,c=this.aggr()),this._type===p.TUPLE)n=function(e){c._add(e),l.prev_init(e)},r=function(e){c._rem(g(e))},i=function(e){c._mod(e,g(e))};else{var m=this._acc.groupby,v=this._acc.value,y=this._type===p.VALUE?v:function(e){return{_id:e._id,groupby:m(e),value:v(e)}};n=function(e){c._add(y(e)),l.prev_init(e)},r=function(e){c._rem(y(g(e)))},i=function(e){c._mod(y(e),y(g(e)))}}if(e.add.forEach(n),t)e.mod.forEach(n);else{if(e.rem.forEach(r),d)for(a=0,h=!1;a<d.length;++a)if(e.fields[d[a]]){h=!0;break}h&&e.mod.forEach(i)}for(a=0;a<f.length;++a)o.fields[f[a]]=1;return c._input=e,c.changes(o)},t.exports=r},{"./Facetor":124,"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],119:[function(e,t,n){function r(){this._collector=null}var i=e("./Transform").prototype,a=r.prototype=Object.create(i);a.constructor=r,a.init=function(e){return i.init.call(this,e),this.batch(!0)},a.transform=function(e){return this.batchTransform(e,this._collector.data())},a.batchTransform=function(){},t.exports=r},{"./Transform":138}],120:[function(e,t,n){function r(e){return u.prototype.init.call(this,e),s.addParameters(this,{field:{type:"field"},min:{type:"value"},max:{type:"value"},base:{type:"value","default":10},maxbins:{type:"value","default":20},step:{type:"value"},steps:{type:"value"},minstep:{type:"value"},div:{type:"array<value>","default":[5,2]}}),this._output={start:"bin_start",end:"bin_end"},this.mutates(!0)}var i=e("datalib"),a=e("vega-dataflow").Tuple,o=e("vega-logging"),s=e("./Transform"),u=e("./BatchTransform"),l=r.prototype=Object.create(u.prototype);l.constructor=r,l.extent=function(e){var t,n=[this.param("min"),this.param("max")];return(null==n[0]||null==n[1])&&(t=i.extent(e,this.param("field").accessor),null==n[0]&&(n[0]=t[0]),null==n[1]&&(n[1]=t[1])),n},l.batchTransform=function(e,t){function n(e){var t=f(e);t=null==t?null:h.start+h.step*~~((t-h.start)/h.step),a.set(e,s.start,t),a.set(e,s.end,t+h.step)}o.debug(e,["binning"]);var r=this.extent(t),s=this._output,u=this.param("step"),l=this.param("steps"),c=this.param("minstep"),f=this.param("field").accessor,d={min:r[0],max:r[1],base:this.param("base"),maxbins:this.param("maxbins"),div:this.param("div")};u&&(d.step=u),l&&(d.steps=l),c&&(d.minstep=c);var h=i.bins(d);return e.add.forEach(n),e.mod.forEach(n),e.rem.forEach(n),e.fields[s.start]=1,e.fields[s.end]=1,e},t.exports=r},{"./BatchTransform":119,"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],121:[function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{field:{type:"field","default":"data"},pattern:{type:"value","default":"[\\w']+"},"case":{type:"value","default":"lower"},stopwords:{type:"value","default":""}}),this._output={text:"text",count:"count"},this.router(!0).produces(!0)}var i=e("vega-dataflow"),a=i.Tuple,o=e("vega-logging"),s=e("./Transform"),u=r.prototype=Object.create(s.prototype);u.constructor=r,u.transform=function(e,t){function n(e){return a.prev_init(e),i(e)}function r(e){return i(a.prev(e))}o.debug(e,["countpattern"]);var i=this.param("field").accessor,s=this.param("pattern"),u=this.param("stopwords"),l=!1;return this._stop!==u&&(this._stop=u,this._stop_re=new RegExp("^"+u+"$","i"),t=!0),this._pattern!==s&&(this._pattern=s,this._match=new RegExp(this._pattern,"g"),t=!0),t&&(this._counts={}),this._add(e.add,n),t||this._rem(e.rem,r),(t||(l=e.fields[i.field]))&&(l&&this._rem(e.mod,r),this._add(e.mod,n)),this._changeset(e)},u._changeset=function(e){var t,n,r,o=this._counts,s=this._tuples||(this._tuples={}),u=i.ChangeSet.create(e),l=this._output;for(t in o)n=s[t],r=o[t]||0,!n&&r?(s[t]=n=a.ingest({}),n[l.text]=t,n[l.count]=r,u.add.push(n)):0===r?(n&&u.rem.push(n),delete o[t],delete s[t]):n[l.count]!==r&&(a.set(n,l.count,r),u.mod.push(n));return u},u._tokenize=function(e){switch(this.param("case")){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(this._match)},u._add=function(e,t){var n,r,i,a,o=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(a=n[r])||(o[a]=1+(o[a]||0))},u._rem=function(e,t){var n,r,i,a,o=this._counts,s=this._stop_re;for(i=0;i<e.length;++i)for(n=this._tokenize(t(e[i])),r=0;r<n.length;++r)s.test(a=n[r])||(o[a]-=1)},t.exports=r},{"./Transform":138,"vega-dataflow":41,"vega-logging":47}],122:[function(e,t,n){function r(e){return g.prototype.init.call(this,e),p.addParameters(this,{"with":{type:"data"},diagonal:{type:"value","default":"true"},filter:{type:"expr"}}),this._output={left:"a",right:"b"},this._lastRem=null,this._lastWith=null,this._ids={},this._cache={},this.router(!0).produces(!0)}function i(e,t){var n=this._cache[e._id]=this._cache[e._id]||{c:[],s:this._stamp};n.c.push(t)}function a(e,t,n,r,a,o){for(var s,u,l=0,c=n.length,d={};c>l;++l)s=n[l],u=t?o._id+"_"+s._id:s._id+"_"+o._id,this._ids[u]||(o._id!=s._id||r)&&(d[this._output.left]=t?o:s,d[this._output.right]=t?s:o,(!a||a(d))&&(e.add.push(d=f.ingest(d)),i.call(this,o,d),i.call(this,s,d),this._ids[u]=1,d={}))}function o(e,t,n){var r=this,i=this._cache[n._id];this._lastRem>i.s&&(i.c=i.c.filter(function(e){var n=e[r._output[t?"right":"left"]];return null!==r._cache[n._id]}),i.s=this._lastRem),e.mod.push.apply(e.mod,i.c)}function s(e,t){e.rem.push.apply(e.rem,this._cache[t._id].c),this._cache[t._id]=null,this._lastRem=this._stamp}function u(e,t){(e.add.length||e.rem.length)&&(t.fields[this._output.left]=1,t.fields[this._output.right]=1)}var l=e("vega-dataflow"),c=l.ChangeSet,f=l.Tuple,d=l.Dependencies.SIGNALS,h=e("vega-logging"),p=e("./Transform"),g=e("./BatchTransform"),m=r.prototype=Object.create(g.prototype);m.constructor=r,m.batchTransform=function(e,t){h.debug(e,["crossing"]);var n=this.param("with"),r=this.param("filter"),i=this.param("diagonal"),l=this._graph,f=l.values(d,this.dependency(d)),p=r?function(e){return r(e,null,f)}:null,g=!n.name,m=g?e:n.source.last(),v=g?t:n.source.values(),y=c.create(e),b=s.bind(this,y);return e.rem.forEach(b),e.add.forEach(a.bind(this,y,!0,v,i,p)),!g&&m.stamp>this._lastWith&&(m.rem.forEach(b),m.add.forEach(a.bind(this,y,!1,t,i,p)),m.mod.forEach(o.bind(this,y,!1)),u.call(this,m,y),this._lastWith=m.stamp),e.mod.forEach(o.bind(this,y,!0)),u.call(this,e,y),y},t.exports=r},{"./BatchTransform":119,"./Transform":138,"vega-dataflow":41,"vega-logging":47}],123:[function(e,t,n){function r(t){return i.addParameters(this,{transform:{type:"custom",set:function(e){return this._transform._pipeline=e,this._transform},get:function(){var t=e("../parse/transforms"),n=this._transform;return n._pipeline.map(function(e){return t(n._graph,e)})}}}),this._pipeline=[],a.call(this,t)}var i=e("./Transform"),a=e("./Aggregate"),o=r.prototype=Object.create(a.prototype);o.constructor=r,o.aggr=function(){return a.prototype.aggr.call(this).facet(this)},t.exports=r},{"../parse/transforms":108,"./Aggregate":118,"./Transform":138}],124:[function(e,t,n){function r(){o.call(this),this._facet=null,this._facetID=++f}function i(e){c.debug({},["disconnecting cell",this.tuple._id]);var t=this.ds.pipeline();e.removeListener(t[0]),e._graph.removeListener(t[0]),e._graph.disconnect(t)}var a=e("datalib"),o=a.Aggregator,s=o.prototype,u=e("vega-dataflow"),l=u.Tuple,c=e("vega-logging"),f=0,d=r.prototype=Object.create(s);d.constructor=r,d.facet=function(e){return arguments.length?(this._facet=e,this):this._facet},d._ingest=function(e){return l.ingest(e,null)},d._assign=l.set,d._newcell=function(e,t){var n=s._newcell.call(this,e,t),r=this._facet;if(r){var a=r._graph,o=n.tuple,u=r.param("transform");n.ds=a.data(o._facetID,u,o),n.disconnect=i,r.addListener(u[0])}return n},d._newtuple=function(e,t){var n=s._newtuple.call(this,e);return this._facet&&(l.set(n,"key",t),l.set(n,"_facetID",this._facetID+"_"+t)),n},d.clear=function(){if(this._facet)for(var e in this._cells)this._cells[e].disconnect(this._facet);return s.clear.call(this)},d._on_add=function(e,t){this._facet&&t.ds._input.add.push(e)},d._on_rem=function(e,t){this._facet&&t.ds._input.rem.push(e)},d._on_mod=function(e,t,n,r){
this._facet&&(n===r?n.ds._input.mod.push(e):(n.ds._input.rem.push(e),r.ds._input.add.push(e)))},d._on_drop=function(e){this._facet&&e.disconnect(this._facet)},d._on_keep=function(e){this._facet&&u.ChangeSet.copy(this._input,e.ds._input)},t.exports=r},{datalib:26,"vega-dataflow":41,"vega-logging":47}],125:[function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{test:{type:"expr"}}),this._skip={},this.router(!0)}var i=e("vega-dataflow"),a=i.Dependencies.SIGNALS,o=e("vega-logging"),s=e("./Transform"),u=r.prototype=Object.create(s.prototype);u.constructor=r,u.transform=function(e){o.debug(e,["filtering"]);var t=i.ChangeSet.create(e),n=this._graph,r=this._skip,s=this.param("test"),u=n.values(a,this.dependency(a));return e.rem.forEach(function(e){1!==r[e._id]?t.rem.push(e):r[e._id]=0}),e.add.forEach(function(e){s(e,null,u)?t.add.push(e):r[e._id]=1}),e.mod.forEach(function(e){var n=s(e,null,u),i=1===r[e._id];n&&i?(r[e._id]=0,t.add.push(e)):n&&!i?t.mod.push(e):!n&&i||(t.rem.push(e),r[e._id]=1)}),t},t.exports=r},{"./Transform":138,"vega-dataflow":41,"vega-logging":47}],126:[function(e,t,n){function r(e){return s.prototype.init.call(this,e),s.addParameters(this,{fields:{type:"array<field>"}}),this._output={key:"key",value:"value"},this._cache={},this.router(!0).produces(!0)}var i=e("vega-dataflow"),a=i.Tuple,o=e("vega-logging"),s=e("./Transform"),u=r.prototype=Object.create(s.prototype);u.constructor=r,u._reset=function(e,t){for(var n in this._cache)t.rem.push.apply(t.rem,this._cache[n]);this._cache={}},u._tuple=function(e,t,n){var r=this._cache[e._id]||(this._cache[e._id]=Array(n));return r[t]?a.rederive(e,r[t]):r[t]=a.derive(e)},u._fn=function(e,t,n){var r,i,o,s,u,l;for(r=0,o=e.length;o>r;++r)for(u=e[r],i=0,s=t.field.length;s>i;++i)l=this._tuple(u,i,s),a.set(l,this._output.key,t.field[i]),a.set(l,this._output.value,t.accessor[i](u)),n.push(l)},u.transform=function(e,t){o.debug(e,["folding"]);var n=this,r=this.param("fields"),a=i.ChangeSet.create(e);return t&&this._reset(e,a),this._fn(e.add,r,a.add),this._fn(e.mod,r,t?a.add:a.mod),e.rem.forEach(function(e){a.rem.push.apply(a.rem,n._cache[e._id]),n._cache[e._id]=null}),(e.add.length||e.rem.length||r.field.some(function(t){return!!e.fields[t]}))&&(a.fields[this._output.key]=1,a.fields[this._output.value]=1),a},t.exports=r},{"./Transform":138,"vega-dataflow":41,"vega-logging":47}],127:[function(e,t,n){(function(n){function r(e){return l.prototype.init.call(this,e),this._prev=null,this._interactive=!1,this._setup=!0,this._nodes=[],this._links=[],this._layout=i.layout.force(),l.addParameters(this,{size:{type:"array<value>","default":[500,500]},bound:{type:"value","default":!0},links:{type:"data"},linkStrength:{type:"value","default":1},linkDistance:{type:"value","default":20},charge:{type:"value","default":-30},chargeDistance:{type:"value","default":1/0},friction:{type:"value","default":.9},theta:{type:"value","default":.8},gravity:{type:"value","default":.1},alpha:{type:"value","default":.1},iterations:{type:"value","default":500},interactive:{type:"value","default":this._interactive},active:{type:"value","default":this._prev},fixed:{type:"data"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("vega-dataflow"),o=a.Tuple,s=a.ChangeSet,u=e("vega-logging"),l=e("./Transform"),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.transform=function(e,t){u.debug(e,["force"]),t-=e.signals.active?1:0;var n=this.param("interactive"),r=this.param("links").source,i=r.last(),a=this.param("active"),s=this._output,l=this._layout,c=this._nodes,f=this._links;if(i.stamp<e.stamp&&(i=null),this.configure(e,i,n,t),!n){for(var d=this.param("iterations"),h=0;d>h;++h)l.tick();l.stop()}return this.update(a),(t||a!==this._prev&&a&&a.update)&&l.alpha(this.param("alpha")),a!==this._prev&&(this._prev=a),e.rem.length&&l.nodes(this._nodes=o.idFilter(c,e.rem)),i&&i.rem.length&&l.links(this._links=o.idFilter(f,i.rem)),e.fields[s.x]=1,e.fields[s.y]=1,e},c.configure=function(e,t,n,r){var i=this._layout,a=this._setup||e.add.length||t&&t.add.length||n!==this._interactive||this.param("charge")!==i.charge()||this.param("linkStrength")!==i.linkStrength()||this.param("linkDistance")!==i.linkDistance();if((a||r)&&i.size(this.param("size")).chargeDistance(this.param("chargeDistance")).theta(this.param("theta")).gravity(this.param("gravity")).friction(this.param("friction")),a){this._setup=!1,this._interactive=n;var o,u,l=this,c=this._graph,f=this._nodes,d=this._links;for(o=e.add,u=0;u<o.length;++u)f.push({tuple:o[u]});if(t)for(o=t.add,u=0;u<o.length;++u)d.push({tuple:o[u],source:f[o[u].source],target:f[o[u].target]});var h=n?function(){c.propagate(s.create(null,!0),l)}:null;i.linkStrength(this.param("linkStrength")).linkDistance(this.param("linkDistance")).charge(this.param("charge")).nodes(f).links(d).on("tick",h).start().alpha(this.param("alpha"))}},c.update=function(e){var t,n,r,i,a,s,u=this._output,l=this.param("bound"),c=this.param("fixed"),f=this.param("size"),d=this._nodes,h={};if(c&&c.source)for(c=c.source.values(),n=0,r=c.length;r>n;++n)h[c[n].id]=1;for(n=0;n<d.length;++n)r=d[n],i=r.tuple,t=i._id,e&&e.id===t?(r.fixed=1,e.update&&(r.x=r.px=e.x,r.y=r.py=e.y)):r.fixed=h[t]||0,a=l?Math.max(0,Math.min(r.x,f[0])):r.x,s=l?Math.max(0,Math.min(r.y,f[1])):r.y,o.set(i,u.x,a),o.set(i,u.y,s)},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Transform":138,"vega-dataflow":41,"vega-logging":47}],128:[function(e,t,n){function r(e){return u.prototype.init.call(this,e),u.addParameters(this,{field:{type:"value"},expr:{type:"expr"}}),this.mutates(!0)}var i=e("vega-dataflow"),a=i.Tuple,o=i.Dependencies.SIGNALS,s=e("vega-logging"),u=e("./Transform"),l=r.prototype=Object.create(u.prototype);l.constructor=r,l.transform=function(e){function t(e){a.set(e,r,i(e,null,u))}s.debug(e,["formulating"]);var n=this._graph,r=this.param("field"),i=this.param("expr"),u=n.values(o,this.dependency(o));return e.add.forEach(t),this.reevaluate(e)&&e.mod.forEach(t),e.fields[r]=1,e},t.exports=r},{"./Transform":138,"vega-dataflow":41,"vega-logging":47}],129:[function(e,t,n){(function(n){function r(e){return u.prototype.init.call(this,e),u.addParameters(this,r.Parameters),u.addParameters(this,{lon:{type:"field"},lat:{type:"field"}}),this._output={x:"layout_x",y:"layout_y"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),u=e("./Transform");r.Parameters={projection:{type:"value","default":"mercator"},center:{type:"array<value>"},translate:{type:"array<value>"},rotate:{type:"array<value>"},scale:{type:"value"},precision:{type:"value"},clipAngle:{type:"value"},clipExtent:{type:"value"}},r.d3Projection=function(){var e,t,n,o=this.param("projection"),s=r.Parameters;o!==this._mode&&(this._mode=o,this._projection=i.geo[o]()),e=this._projection;for(t in s)"projection"!==t&&e[t]&&(n=this.param(t),void 0===n||a.isArray(n)&&0===n.length||n!==e[t]()&&e[t](n));return e};var l=r.prototype=Object.create(u.prototype);l.constructor=r,l.transform=function(e){function t(e){var t=[i(e),a(e)],r=u(t)||[null,null];o.set(e,n.x,r[0]),o.set(e,n.y,r[1])}s.debug(e,["geo"]);var n=this._output,i=this.param("lon").accessor,a=this.param("lat").accessor,u=r.d3Projection.call(this);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.x]=1,e.fields[n.y]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],130:[function(e,t,n){(function(n){function r(e){return l.prototype.init.call(this,e),l.addParameters(this,u.Parameters),l.addParameters(this,{field:{type:"field","default":null}}),this._output={path:"layout_path"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),u=e("./Geo"),l=e("./Transform"),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.transform=function(e){function t(e){o.set(e,n.path,c(r(e)))}s.debug(e,["geopath"]);var n=this._output,r=this.param("field").accessor||a.identity,l=u.d3Projection.call(this),c=i.geo.path().projection(l);return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Geo":129,"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],131:[function(e,t,n){function r(e){return c.prototype.init.call(this,e),l.addParameters(this,{groupby:{type:"array<field>"},orderby:{type:"array<field>"},field:{type:"field"},method:{type:"value","default":"value"},value:{type:"value","default":0}}),this.router(!0).produces(!0)}function i(e,t,n,r){var i,a={_imputed:!0};for(i=0;i<t.length;++i)a[e[i]]=t[i];for(i=0;i<r.length;++i)a[n[i]]=r[i];return u.ingest(a)}function a(e,t,n){var r,i,a,s,u,l,c,f,d=[],h=function(e){return e(a)},p=function(e){return a=e,n.map(h)};for(l=d.domain=o.unique(e,p),f=l.length,c=l.reduce(function(e,t,n){return e[t]={value:t,index:n},e},{}),r={},i=0;i<e.length;++i)a=e[i],s=null==t?[]:t.map(h),u=r[s]||(d.push(r[s]=Array(f)),r[s].values=s,r[s]),u[c[p(a)].index]=a;return d}var o=e("datalib"),s=e("vega-logging"),u=e("vega-dataflow").Tuple,l=e("./Transform"),c=e("./BatchTransform"),f=r.prototype=Object.create(c.prototype);f.constructor=r,f.batchTransform=function(e,t){function n(e){return null==e?null:y(e)}s.debug(e,["imputing"]);var r,u,l,c,f,d,h=this.param("groupby"),p=this.param("orderby"),g=this.param("method"),m=this.param("value"),v=this.param("field"),y=v.accessor,b=v.field,x=this._imputed||[],w=[],_=a(t,h.accessor,p.accessor),k=_.domain;for(l=0,f=_.length;f>l;++l)for(r=_[l],"value"!==g&&(m=o[g](r,n)),u=0,c=r.length;c>u;++u)null==r[u]&&(d=i(h.field,r.values,p.field,k[u]),d[b]=m,w.push(d));for(u=0,c=w.length;c>u;++u)e.add.push(w[u]);for(u=0,c=x.length;c>u;++u)e.rem.push(x[u]);return this._imputed=w,s.debug(e,["imputing2"]),e},t.exports=r},{"./BatchTransform":119,"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],132:[function(e,t,n){function r(e){return c.prototype.init.call(this,e),c.addParameters(this,{sourceX:{type:"field","default":"_source.layout_x"},sourceY:{type:"field","default":"_source.layout_y"},targetX:{type:"field","default":"_target.layout_x"},targetY:{type:"field","default":"_target.layout_y"},tension:{type:"value","default":.2},shape:{type:"value","default":"line"}}),this._output={path:"layout_path"},this.mutates(!0)}function i(e,t,n,r){return"M"+e+","+t+"L"+n+","+r}function a(e,t,n,r,i){var a=n-e,o=r-t,s=i*(a+o),u=i*(o-a);return"M"+e+","+t+"C"+(e+s)+","+(t+u)+" "+(n+u)+","+(r-s)+" "+n+","+r}function o(e,t,n,r){var i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r}function s(e,t,n,r){var i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r}var u=e("vega-dataflow").Tuple,l=e("vega-logging"),c=e("./Transform"),f=r.prototype=Object.create(c.prototype);f.constructor=r;var d={line:i,curve:a,diagonal:o,diagonalX:o,diagonalY:s};f.transform=function(e){function t(e){var t=r(i(e),a(e),o(e),s(e),c);u.set(e,n.path,t)}l.debug(e,["linkpath"]);var n=this._output,r=d[this.param("shape")]||d.line,i=this.param("sourceX").accessor,a=this.param("sourceY").accessor,o=this.param("targetX").accessor,s=this.param("targetY").accessor,c=this.param("tension");return e.add.forEach(t),this.reevaluate(e)&&(e.mod.forEach(t),e.rem.forEach(t)),e.fields[n.path]=1,e},t.exports=r},{"./Transform":138,"vega-dataflow":41,"vega-logging":47}],133:[function(e,t,n){function r(e){return o.prototype.init.call(this,e),o.addParameters(this,{on:{type:"data"},onKey:{type:"field","default":null},as:{type:"array<value>"},keys:{type:"array<field>","default":["data"]},"default":{type:"value"}}),this.mutates(!0)}var i=e("vega-dataflow").Tuple,a=e("vega-logging"),o=e("./Transform"),s=r.prototype=Object.create(o.prototype);s.constructor=r,s.transform=function(e,t){function n(e){for(var t=0;t<h.length;++t){var n=m[h[t](e)]||g;i.set(e,p[t],n)}}a.debug(e,["lookup"]);var r,o,s=this.param("on"),u=s.source.last(),l=s.source.values(),c=this.param("onKey"),f=c.field,d=this.param("keys"),h=d.accessor,p=this.param("as"),g=this.param("default"),m=this._lut;if(null==m||this._on!==f||f&&u.fields[f]||u.add.length||u.rem.length){if(f)for(c=c.accessor,m={},r=0;r<l.length;++r)m[c(o=l[r])]=o;else m=l;this._lut=m,this._on=f,t=!0}e.add.forEach(n);var v=d.field.some(function(t){return e.fields[t]});return(v||t)&&(e.mod.forEach(n),e.rem.forEach(n)),p.forEach(function(t){e.fields[t]=1}),e},t.exports=r},{"./Transform":138,"vega-dataflow":41,"vega-logging":47}],134:[function(e,t,n){function r(e,t,n){this._name=e,this._type=t,this._transform=n,this._value=[],this._accessors=[],this._resolution=!1,this._signals={}}function i(){var e=u.test(this._type),t=l.test(this._type),n=c.test(this._type),r=e?this._value:this._value[0],i=e?this._accessors:this._accessors[0];return!a.isValid(i)&&d.test(this._type)?r:t?{name:r,source:i}:n?{field:r,accessor:i}:r}var a=e("datalib"),o=e("vega-dataflow").Dependencies,s=e("../parse/expr"),u=/array/i,l=/data/i,c=/field/i,f=/expr/i,d=/value/i,h=r.prototype;h.get=function(){var e,t,n,r=this._transform._graph,o=l.test(this._type),s=c.test(this._type);if(!this._resolution)return i.call(this);if(o)return this._accessors=this._value.map(function(e){return r.data(e)}),i.call(this);for(e in this._signals)t=this._signals[e],n=r.signalRef(e),s&&(this._accessors[t]=this._value[t]!=n?a.accessor(n):this._accessors[t]),this._value[t]=n;return i.call(this)},h.set=function(e){var t=this,n=f.test(this._type),r=l.test(this._type),i=c.test(this._type);return this._value=a.array(e).map(function(e,u){if(a.isString(e)){if(n){var l=s(e);return t._transform.dependency(o.FIELDS,l.fields),t._transform.dependency(o.SIGNALS,l.globals),l.fn}return i?(t._accessors[u]=a.accessor(e),t._transform.dependency(o.FIELDS,a.field(e))):r&&(t._resolution=!0,t._transform.dependency(o.DATA,e)),e}return void 0!==e.value?e.value:void 0!==e.field?(t._accessors[u]=a.accessor(e.field),t._transform.dependency(o.FIELDS,a.field(e.field)),e.field):void 0!==e.signal?(t._resolution=!0,t._signals[e.signal]=u,t._transform.dependency(o.SIGNALS,e.signal),e.signal):e}),t._transform},t.exports=r},{"../parse/expr":96,datalib:26,"vega-dataflow":41}],135:[function(e,t,n){function r(e){return l.prototype.init.call(this,e),u.addParameters(this,{field:{type:"field","default":null},startAngle:{type:"value","default":0},endAngle:{type:"value","default":2*Math.PI},sort:{type:"value","default":!1}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function i(){return 1}var a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),u=e("./Transform"),l=e("./BatchTransform"),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.batchTransform=function(e,t){s.debug(e,["pie"]);var n,r,u,l=this._output,c=this.param("field").accessor||i,f=this.param("startAngle"),d=this.param("endAngle"),h=this.param("sort"),p=t.map(c),g=f,m=(d-f)/a.sum(p),v=a.range(t.length);for(h&&v.sort(function(e,t){return p[e]-p[t]}),n=0;n<v.length;++n)r=t[v[n]],u=p[v[n]],o.set(r,l.start,g),o.set(r,l.mid,g+.5*u*m),o.set(r,l.end,g+=u*m);return e.fields[l.start]=1,e.fields[l.end]=1,e.fields[l.mid]=1,e},t.exports=r},{"./BatchTransform":119,"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],136:[function(e,t,n){function r(e){o.prototype.init.call(this,e),o.addParameters(this,{by:{type:"array<field>"}}),this.router(!0)}var i=e("datalib"),a=e("vega-logging"),o=e("./Transform"),s=r.prototype=Object.create(o.prototype);s.constructor=r,s.transform=function(e){return a.debug(e,["sorting"]),(e.add.length||e.mod.length||e.rem.length)&&(e.sort=i.comparator(this.param("by").field)),e},t.exports=r},{"./Transform":138,datalib:26,"vega-logging":47}],137:[function(e,t,n){function r(e){return l.prototype.init.call(this,e),u.addParameters(this,{groupby:{type:"array<field>"},sortby:{type:"array<field>"},field:{type:"field"},offset:{type:"value","default":"zero"}}),this._output={start:"layout_start",end:"layout_end",mid:"layout_mid"},this.mutates(!0)}function i(e,t,n,r){var i,a,o,s,u,l,c,f=[],d=function(e){return e(o)};if(null==t)f.push(e.slice());else for(i={},a=0;a<e.length;++a)o=e[a],s=t.map(d),u=i[s]||(f.push(i[s]=[]),i[s]),u.push(o);for(s=0,c=0;s<f.length;++s){for(u=f[s],a=0,l=0;a<u.length;++a)l+=r(u[a]);u.sum=l,l>c&&(c=l),null!=n&&u.sort(n)}return f.max=c,f}var a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),u=e("./Transform"),l=e("./BatchTransform"),c=r.prototype=Object.create(l.prototype);c.constructor=r,c.batchTransform=function(e,t){s.debug(e,["stacking"]);for(var n=this.param("groupby").accessor,r=a.comparator(this.param("sortby").field),u=this.param("field").accessor,l=this.param("offset"),c=this._output,f=i(t,n,r,u),d=0,h=f.max;d<f.length;++d){var p,g,m,v=f[d],y=v.sum,b="center"===l?(h-y)/2:0,x="normalize"===l?1/y:1,w=b,_=0;for(p=0;p<v.length;++p)g=v[p],m=w,_+=u(g),w=x*_+b,o.set(g,c.start,m),o.set(g,c.end,w),o.set(g,c.mid,.5*(m+w))}return e.fields[c.start]=1,e.fields[c.end]=1,e.fields[c.mid]=1,e},t.exports=r},{"./BatchTransform":119,"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],138:[function(e,t,n){function r(e){e&&a.init.call(this,e)}var i=e("vega-dataflow"),a=i.Node.prototype,o=i.Dependencies,s=e("./Parameter");r.addParameters=function(e,t){e._parameters=e._parameters||{};for(var n in t){var r=t[n],i=new s(n,r.type,e);e._parameters[n]=i,"custom"===r.type&&(r.set&&(i.set=r.set.bind(i)),r.get&&(i.get=r.get.bind(i))),r.hasOwnProperty("default")&&i.set(r["default"])}};var u=r.prototype=Object.create(a);u.constructor=r,u.param=function(e,t){var n=this._parameters[e];return void 0===n?this:1===arguments.length?n.get():n.set(t)},u.transform=function(e){return e},u.evaluate=function(e){var t=this._stamp<e.stamp&&this.dependency(o.SIGNALS).reduce(function(t,n){return t+=e.signals[n]?1:0},0);return this.transform(e,t)},u.output=function(e){for(var t in this._output)void 0!==e[t]&&(this._output[t]=e[t]);return this},t.exports=r},{"./Parameter":134,"vega-dataflow":41}],139:[function(e,t,n){(function(n){function r(e){return l.prototype.init.call(this,e),u.addParameters(this,{sort:{type:"array<field>","default":["-value"]},children:{type:"field","default":"children"},field:{type:"field","default":"value"},size:{type:"array<value>","default":[500,500]},round:{type:"value","default":!0},sticky:{type:"value","default":!1},ratio:{type:"value","default":c},padding:{type:"value","default":null},mode:{type:"value","default":"squarify"}}),this._layout=i.layout.treemap(),this._output={x:"layout_x",y:"layout_y",width:"layout_width",height:"layout_height",depth:"layout_depth"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("datalib"),o=e("vega-dataflow").Tuple,s=e("vega-logging"),u=e("./Transform"),l=e("./BatchTransform"),c=.5*(1+Math.sqrt(5)),f=r.prototype=Object.create(l.prototype);f.constructor=r,f.batchTransform=function(e,t){s.debug(e,["treemap"]);var n=this._layout,r=this._output;return n.sort(a.comparator(this.param("sort").field)).children(this.param("children").accessor).value(this.param("field").accessor).size(this.param("size")).round(this.param("round")).sticky(this.param("sticky")).ratio(this.param("ratio")).padding(this.param("padding")).mode(this.param("mode")).nodes(t[0]),t.forEach(function(e){o.set(e,r.x,e.x),o.set(e,r.y,e.y),o.set(e,r.width,e.dx),o.set(e,r.height,e.dy),o.set(e,r.depth,e.depth)}),e.fields[r.x]=1,e.fields[r.y]=1,e.fields[r.width]=1,e.fields[r.height]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":119,"./Transform":138,datalib:26,"vega-dataflow":41,"vega-logging":47}],140:[function(e,t,n){(function(n){function r(e){return u.prototype.init.call(this,e),s.addParameters(this,{clipExtent:{type:"array<value>","default":[[-1e5,-1e5],[1e5,1e5]]},x:{type:"field","default":"layout_x"},y:{type:"field","default":"layout_y"}}),this._layout=i.geom.voronoi(),this._output={path:"layout_path"},this.mutates(!0)}var i="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,a=e("vega-dataflow/src/Tuple"),o=e("vega-logging"),s=e("./Transform"),u=e("./BatchTransform"),l=r.prototype=Object.create(u.prototype);l.constructor=r,l.batchTransform=function(e,t){o.debug(e,["voronoi"]);for(var n=this._output.path,r=this._layout.clipExtent(this.param("clipExtent")).x(this.param("x").accessor).y(this.param("y").accessor)(t),i=0;i<t.length;++i)a.set(t[i],n,"M"+r[i].join("L")+"Z");return e.fields[n]=1,e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":119,"./Transform":138,"vega-dataflow/src/Tuple":40,"vega-logging":47}],141:[function(e,t,n){(function(n){function r(e){return h.prototype.init.call(this,e),d.addParameters(this,{size:{type:"array<value>","default":[900,500]},text:{type:"field","default":"data"},rotate:{type:"field|value","default":0},font:{type:"field|value","default":{value:"sans-serif"}},fontSize:{type:"field|value","default":14},fontStyle:{type:"field|value","default":{value:"normal"}},fontWeight:{type:"field|value","default":{value:"normal"}},fontScale:{type:"array<value>","default":[10,50]},padding:{type:"value","default":1},spiral:{type:"value","default":"archimedean"}}),this._layout=u().canvas(l.instance),this._output={x:"layout_x",y:"layout_y",font:"layout_font",fontSize:"layout_fontSize",fontStyle:"layout_fontStyle",fontWeight:"layout_fontWeight",rotate:"layout_rotate"},this.mutates(!0)}function i(e){return e&&e.accessor||e}function a(e){var t=Object.create(e);return t._tuple=e,t}var o=e("datalib"),s="undefined"!=typeof window?window.d3:"undefined"!=typeof n?n.d3:null,u=e("d3-cloud"),l=e("vega-scenegraph").canvas,c=e("vega-dataflow/src/Tuple"),f=e("vega-logging"),d=e("./Transform"),h=e("./BatchTransform"),p=r.prototype=Object.create(h.prototype);p.constructor=r,p.batchTransform=function(e,t){f.debug(e,["wordcloud"]);var n,r,u=this._layout,l=this._output,d=this.param("fontSize"),h=d.accessor&&this.param("fontScale");d=d.accessor||s.functor(d),h.length&&(r=s.scale.sqrt().domain(o.extent(t,n=d)).range(h),d=function(e){return r(n(e))}),u.size(this.param("size")).text(i(this.param("text"))).padding(this.param("padding")).spiral(this.param("spiral")).rotate(i(this.param("rotate"))).font(i(this.param("font"))).fontStyle(i(this.param("fontStyle"))).fontWeight(i(this.param("fontWeight"))).fontSize(d).words(t.map(a)).on("end",function(e){var t,n,r,i,a=u.size(),o=a[0]>>1,s=a[1]>>1;for(r=0,i=e.length;i>r;++r)t=e[r],n=t._tuple,c.set(n,l.x,t.x+o),c.set(n,l.y,t.y+s),c.set(n,l.font,t.font),c.set(n,l.fontSize,t.size),c.set(n,l.fontStyle,t.style),c.set(n,l.fontWeight,t.weight),c.set(n,l.rotate,t.rotate)}).start();for(var p in l)e.fields[l[p]]=1;return e},t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./BatchTransform":119,"./Transform":138,"d3-cloud":3,datalib:26,"vega-dataflow/src/Tuple":40,"vega-logging":47,"vega-scenegraph":48}],142:[function(e,t,n){t.exports={aggregate:e("./Aggregate"),bin:e("./Bin"),cross:e("./Cross"),countpattern:e("./CountPattern"),linkpath:e("./LinkPath"),facet:e("./Facet"),filter:e("./Filter"),fold:e("./Fold"),force:e("./Force"),formula:e("./Formula"),geo:e("./Geo"),geopath:e("./GeoPath"),impute:e("./Impute"),lookup:e("./Lookup"),pie:e("./Pie"),sort:e("./Sort"),stack:e("./Stack"),treemap:e("./Treemap"),voronoi:e("./Voronoi"),wordcloud:e("./Wordcloud")}},{"./Aggregate":118,"./Bin":120,"./CountPattern":121,"./Cross":122,"./Facet":123,"./Filter":125,"./Fold":126,"./Force":127,"./Formula":128,"./Geo":129,"./GeoPath":130,"./Impute":131,"./LinkPath":132,"./Lookup":133,"./Pie":135,"./Sort":136,"./Stack":137,"./Treemap":139,"./Voronoi":140,"./Wordcloud":141}]},{},[1])(1)}),/**
 * sifter.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=r(String(e||"").toLowerCase()),!e||!e.length)return[];var t,n,a,s,u=[],l=e.split(/ +/);for(t=0,n=l.length;n>t;t++){if(a=i(l[t]),this.settings.diacritics)for(s in o)o.hasOwnProperty(s)&&(a=a.replace(new RegExp(s,"g"),o[s]));u.push({string:l[t],regex:new RegExp(a,"i")})}return u},e.prototype.iterator=function(e,t){var n;n=a(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},n.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var n,r,i,a;n=this,e=n.prepareSearch(e,t),i=e.tokens,r=e.options.fields,a=i.length;var o=function(e,t){var n,r;return e?(e=String(e||""),r=e.search(t.regex),-1===r?0:(n=t.string.length/e.length,0===r&&(n+=.5),n)):0},s=function(){var e=r.length;return e?1===e?function(e,t){return o(t[r[0]],e)}:function(t,n){for(var i=0,a=0;e>i;i++)a+=o(n[r[i]],t);return a/e}:function(){return 0}}();return a?1===a?function(e){return s(i[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,r=0;a>n;n++){if(t=s(i[n],e),0>=t)return 0;r+=t}return r/a}:function(e){for(var t=0,n=0;a>t;t++)n+=s(i[t],e);return n/a}:function(){return 0}},e.prototype.getSortFunction=function(e,n){var r,i,a,o,s,u,l,c,f,d,h;if(a=this,e=a.prepareSearch(e,n),h=!e.query&&n.sort_empty||n.sort,f=function(e,t){return"$score"===e?t.score:a.items[t.id][e]},s=[],h)for(r=0,i=h.length;i>r;r++)(e.query||"$score"!==h[r].field)&&s.push(h[r]);if(e.query){for(d=!0,r=0,i=s.length;i>r;r++)if("$score"===s[r].field){d=!1;break}d&&s.unshift({field:"$score",direction:"desc"})}else for(r=0,i=s.length;i>r;r++)if("$score"===s[r].field){s.splice(r,1);break}for(c=[],r=0,i=s.length;i>r;r++)c.push("desc"===s[r].direction?-1:1);return u=s.length,u?1===u?(o=s[0].field,l=c[0],function(e,n){return l*t(f(o,e),f(o,n))}):function(e,n){var r,i,a;for(r=0;u>r;r++)if(a=s[r].field,i=c[r]*t(f(a,e),f(a,n)))return i;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=n({},t);var r=t.fields,i=t.sort,o=t.sort_empty;return r&&!a(r)&&(t.fields=[r]),i&&!a(i)&&(t.sort=[i]),o&&!a(o)&&(t.sort_empty=[o]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var n,r,i,a,o=this;return r=this.prepareSearch(e,t),t=r.options,e=r.query,a=t.score||o.getScoreFunction(r),e.length?o.iterator(o.items,function(e,i){n=a(e),(t.filter===!1||n>0)&&r.items.push({score:n,id:i})}):o.iterator(o.items,function(e,t){r.items.push({score:1,id:t})}),i=o.getSortFunction(r,t),i&&r.items.sort(i),r.total=r.items.length,"number"==typeof t.limit&&(r.items=r.items.slice(0,t.limit)),r};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=s(String(e||"")),t=s(String(t||"")),e>t?1:t>e?-1:0)},n=function(e,t){var n,r,i,a;for(n=1,r=arguments.length;r>n;n++)if(a=arguments[n])for(i in a)a.hasOwnProperty(i)&&(e[i]=a[i]);return e},r=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},i=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},a=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o={a:"[a]",c:"[c]",d:"[d]",e:"[e]",i:"[i]",l:"[l]",n:"[n]",o:"[o]",r:"[r]",s:"[s]",t:"[t]",u:"[u]",y:"[y]",z:"[z]"},s=function(){var e,t,n,r,i="",a={};for(n in o)if(o.hasOwnProperty(n))for(r=o[n].substring(2,o[n].length-1),i+=r,e=0,t=r.length;t>e;e++)a[r.charAt(e)]=n;var s=new RegExp("["+i+"]","g");return function(e){return e.replace(s,function(e){return a[e]}).toLowerCase()}}();return e}),/**
 * microplugin.js
 * Copyright (c) 2013 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var n,r,i,a=this,o=[];if(a.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(n=0,r=e.length;r>n;n++)"string"==typeof e[n]?o.push(e[n]):(a.plugins.settings[e[n].name]=e[n].options,o.push(e[n].name));else if(e)for(i in e)e.hasOwnProperty(i)&&(a.plugins.settings[i]=e[i],o.push(i));for(;o.length;)a.require(o.shift())},e.prototype.loadPlugin=function(t){var n=this,r=n.plugins,i=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');r.requested[t]=!0,r.loaded[t]=i.fn.apply(n,[n.plugins.settings[t]||{}]),r.names.push(t)},e.prototype.require=function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]},e.define=function(t,n){e.plugins[t]={name:t,fn:n}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),/**
 * selectize.js (v0.12.1)
 * Copyright (c) 20132015 Brian Reavis & contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this
 * file except in compliance with the License. You may obtain a copy of the License at:
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF
 * ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 *
 * @author Brian Reavis <brian@thirdroute.com>
 */
function(e,t){"function"==typeof define&&define.amd?define(["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,n){"use strict";var r=function(e,t){if("string"!=typeof t||t.length){var n="string"==typeof t?new RegExp(t,"i"):t,r=function(e){var t=0;if(3===e.nodeType){var i=e.data.search(n);if(i>=0&&e.data.length>0){var a=e.data.match(n),o=document.createElement("span");o.className="highlight";var s=e.splitText(i),u=(s.splitText(a[0].length),s.cloneNode(!0));o.appendChild(u),s.parentNode.replaceChild(o,s),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=r(e.childNodes[l]);return t};return e.each(function(){r(this)})}},i=function(){};i.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},i.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=i.prototype[t[n]]};var a=/Mac/.test(navigator.userAgent),o=65,s=13,u=27,l=37,c=38,f=80,d=39,h=40,p=78,g=8,m=46,v=16,y=a?91:17,b=a?18:17,x=9,w=1,_=2,k=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,$=function(e){return"undefined"!=typeof e},S=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},M=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},T=function(e){return(e+"").replace(/\$/g,"$$$$")},C={};C.before=function(e,t,n){var r=e[t];e[t]=function(){return n.apply(e,arguments),r.apply(e,arguments)}},C.after=function(e,t,n){var r=e[t];e[t]=function(){var t=r.apply(e,arguments);return n.apply(e,arguments),t}};var E=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},A=function(e,t){var n;return function(){var r=this,i=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(r,i)},t)}},O=function(e,t,n){var r,i=e.trigger,a={};e.trigger=function(){var n=arguments[0];return-1===t.indexOf(n)?i.apply(e,arguments):void(a[n]=arguments)},n.apply(e,[]),e.trigger=i;for(r in a)a.hasOwnProperty(r)&&i.apply(e,a[r])},D=function(e,t,n,r){e.on(t,n,function(t){for(var n=t.target;n&&n.parentNode!==e[0];)n=n.parentNode;return t.currentTarget=n,r.apply(this,[t])})},L=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),r=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-r,t.length=r}return t},N=function(e,t,n){var r,i,a={};if(n)for(r=0,i=n.length;i>r;r++)a[n[r]]=e.css(n[r]);else a=e.css();t.css(a)},j=function(t,n){if(!t)return 0;var r=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");N(n,r,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var i=r.width();return r.remove(),i},P=function(e){var t=null,n=function(n,r){var i,a,o,s,u,l,c,f;n=n||window.event||{},r=r||{},n.metaKey||n.altKey||(r.force||e.data("grow")!==!1)&&(i=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(a=n.keyCode,o=a>=97&&122>=a||a>=65&&90>=a||a>=48&&57>=a||32===a,a===m||a===g?(f=L(e[0]),f.length?i=i.substring(0,f.start)+i.substring(f.start+f.length):a===g&&f.start?i=i.substring(0,f.start-1)+i.substring(f.start+1):a===m&&"undefined"!=typeof f.start&&(i=i.substring(0,f.start)+i.substring(f.start+1))):o&&(l=n.shiftKey,c=String.fromCharCode(n.keyCode),c=l?c.toUpperCase():c.toLowerCase(),i+=c)),s=e.attr("placeholder"),!i&&s&&(i=s),u=j(i,e)+4,u!==t&&(t=u,e.width(u),e.triggerHandler("resize")))};e.on("keydown keyup update blur",n),n()},R=function(n,r){var i,a,o,s,u=this;s=n[0],s.selectize=u;var l=window.getComputedStyle&&window.getComputedStyle(s,null);if(o=l?l.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,o=o||n.parents("[dir]:first").attr("dir")||"",e.extend(u,{order:0,settings:r,$input:n,tabIndex:n.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?w:_,rtl:/rtl/i.test(o),eventNS:".selectize"+ ++R.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===r.loadThrottle?u.onSearchChange:A(u.onSearchChange,r.loadThrottle)}),u.sifter=new t(this.options,{diacritics:r.diacritics}),u.settings.options){for(i=0,a=u.settings.options.length;a>i;i++)u.registerOption(u.settings.options[i]);delete u.settings.options}if(u.settings.optgroups){for(i=0,a=u.settings.optgroups.length;a>i;i++)u.registerOptionGroup(u.settings.optgroups[i]);delete u.settings.optgroups}u.settings.mode=u.settings.mode||(1===u.settings.maxItems?"single":"multi"),"boolean"!=typeof u.settings.hideSelected&&(u.settings.hideSelected="multi"===u.settings.mode),u.initializePlugins(u.settings.plugins),u.setupCallbacks(),u.setupTemplates(),u.setup()};return i.mixin(R),n.mixin(R),e.extend(R.prototype,{setup:function(){var t,n,r,i,o,s,u,l,c,f=this,d=f.settings,h=f.eventNS,p=e(window),g=e(document),m=f.$input;if(u=f.settings.mode,l=m.attr("class")||"",t=e("<div>").addClass(d.wrapperClass).addClass(l).addClass(u),n=e("<div>").addClass(d.inputClass).addClass("items").appendTo(t),r=e('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",m.is(":disabled")?"-1":f.tabIndex),s=e(d.dropdownParent||t),i=e("<div>").addClass(d.dropdownClass).addClass(u).hide().appendTo(s),o=e("<div>").addClass(d.dropdownContentClass).appendTo(i),f.settings.copyClassesToDropdown&&i.addClass(l),t.css({width:m[0].style.width}),f.plugins.names.length&&(c="plugin-"+f.plugins.names.join(" plugin-"),t.addClass(c),i.addClass(c)),(null===d.maxItems||d.maxItems>1)&&f.tagType===w&&m.attr("multiple","multiple"),f.settings.placeholder&&r.attr("placeholder",d.placeholder),!f.settings.splitOn&&f.settings.delimiter){var x=f.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");f.settings.splitOn=new RegExp("\\s*"+x+"+\\s*")}m.attr("autocorrect")&&r.attr("autocorrect",m.attr("autocorrect")),m.attr("autocapitalize")&&r.attr("autocapitalize",m.attr("autocapitalize")),f.$wrapper=t,f.$control=n,f.$control_input=r,f.$dropdown=i,f.$dropdown_content=o,i.on("mouseenter","[data-selectable]",function(){return f.onOptionHover.apply(f,arguments)}),i.on("mousedown click","[data-selectable]",function(){return f.onOptionSelect.apply(f,arguments)}),D(n,"mousedown","*:not(input)",function(){return f.onItemSelect.apply(f,arguments)}),P(r),n.on({mousedown:function(){return f.onMouseDown.apply(f,arguments)},click:function(){return f.onClick.apply(f,arguments)}}),r.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return f.onKeyDown.apply(f,arguments)},keyup:function(){return f.onKeyUp.apply(f,arguments)},keypress:function(){return f.onKeyPress.apply(f,arguments)},resize:function(){f.positionDropdown.apply(f,[])},blur:function(){return f.onBlur.apply(f,arguments)},focus:function(){return f.ignoreBlur=!1,f.onFocus.apply(f,arguments)},paste:function(){return f.onPaste.apply(f,arguments)}}),g.on("keydown"+h,function(e){f.isCmdDown=e[a?"metaKey":"ctrlKey"],f.isCtrlDown=e[a?"altKey":"ctrlKey"],f.isShiftDown=e.shiftKey}),g.on("keyup"+h,function(e){e.keyCode===b&&(f.isCtrlDown=!1),e.keyCode===v&&(f.isShiftDown=!1),e.keyCode===y&&(f.isCmdDown=!1)}),g.on("mousedown"+h,function(e){if(f.isFocused){if(e.target===f.$dropdown[0]||e.target.parentNode===f.$dropdown[0])return!1;f.$control.has(e.target).length||e.target===f.$control[0]||f.blur(e.target)}}),p.on(["scroll"+h,"resize"+h].join(" "),function(){f.isOpen&&f.positionDropdown.apply(f,arguments)}),p.on("mousemove"+h,function(){f.ignoreHover=!1}),this.revertSettings={$children:m.children().detach(),tabindex:m.attr("tabindex")},m.attr("tabindex",-1).hide().after(f.$wrapper),e.isArray(d.items)&&(f.setValue(d.items),delete d.items),k&&m.on("invalid"+h,function(e){e.preventDefault(),f.isInvalid=!0,f.refreshState()}),f.updateOriginalInput(),f.refreshItems(),f.refreshState(),f.updatePlaceholder(),f.isSetup=!0,m.is(":disabled")&&f.disable(),f.on("change",this.onChange),m.data("selectize",f),m.addClass("selectized"),f.trigger("initialize"),d.preload===!0&&f.onSearchChange("")},setupTemplates:function(){var t=this,n=t.settings.labelField,r=t.settings.optgroupLabelField,i={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[r])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[n])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},i,t.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){{var n=this,r=t.isDefaultPrevented();e(t.target)}if(n.isFocused){if(t.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():r||n.setActiveItem(null),!1}else r||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var n=this;n.isFull()||n.isInputHidden||n.isLocked?t.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var t=e.trim(n.$control_input.val()||"").split(n.settings.splitOn),r=0,i=t.length;i>r;r++)n.createItem(t[r])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==x&&e.preventDefault());switch(e.keyCode){case o:if(t.isCmdDown)return void t.selectAll();break;case u:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case p:if(!e.ctrlKey||e.altKey)break;case h:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case f:if(!e.ctrlKey||e.altKey)break;case c:if(t.$activeOption){t.ignoreHover=!0;var r=t.getAdjacentOption(t.$activeOption,-1);r.length&&t.setActiveOption(r,!0,!0)}return void e.preventDefault();case s:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case l:return void t.advanceSelection(-1,e);case d:return void t.advanceSelection(1,e);case x:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case g:case m:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(a?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(e){var t=this,n=t.settings.load;n&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(r){n.apply(t,[e,r])})))},onFocus:function(e){var t=this,n=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(e);var r=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),(t||document.body).focus(),n.ignoreFocus=!1,n.trigger("blur")};n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,r):r()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var n,r,i=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),r=e(t.currentTarget),r.hasClass("create")?i.createItem(null,function(){i.settings.closeAfterSelect&&i.close()}):(n=r.attr("data-value"),"undefined"!=typeof n&&(i.lastQuery=null,i.setTextboxValue(""),i.addItem(n),i.settings.closeAfterSelect?i.close():!i.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&i.setActiveOption(i.getOption(n))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,n=t.val()!==e;n&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var n=t?[]:["change"];O(this,n,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,n){var r,i,a,o,s,u,l,c,f=this;if("single"!==f.settings.mode){if(t=e(t),!t.length)return e(f.$activeItems).removeClass("active"),f.$activeItems=[],void(f.isFocused&&f.showInput());if(r=n&&n.type.toLowerCase(),"mousedown"===r&&f.isShiftDown&&f.$activeItems.length){for(c=f.$control.children(".active:last"),o=Array.prototype.indexOf.apply(f.$control[0].childNodes,[c[0]]),s=Array.prototype.indexOf.apply(f.$control[0].childNodes,[t[0]]),o>s&&(l=o,o=s,s=l),i=o;s>=i;i++)u=f.$control[0].childNodes[i],-1===f.$activeItems.indexOf(u)&&(e(u).addClass("active"),f.$activeItems.push(u));n.preventDefault()}else"mousedown"===r&&f.isCtrlDown||"keydown"===r&&this.isShiftDown?t.hasClass("active")?(a=f.$activeItems.indexOf(t[0]),f.$activeItems.splice(a,1),t.removeClass("active")):f.$activeItems.push(t.addClass("active")[0]):(e(f.$activeItems).removeClass("active"),f.$activeItems=[t.addClass("active")[0]]);f.hideInput(),this.isFocused||f.focus()}},setActiveOption:function(t,n,r){var i,a,o,s,u,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,t=e(t),t.length&&(l.$activeOption=t.addClass("active"),(n||!$(n))&&(i=l.$dropdown_content.height(),a=l.$activeOption.outerHeight(!0),n=l.$dropdown_content.scrollTop()||0,o=l.$activeOption.offset().top-l.$dropdown_content.offset().top+n,s=o,u=o-i+a,o+a>i+n?l.$dropdown_content.stop().animate({scrollTop:u},r?l.settings.scrollDuration:0):n>o&&l.$dropdown_content.stop().animate({scrollTop:s},r?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var n,r,i,a=this,o=a.settings,s=this.getSearchOptions();if(o.score&&(i=a.settings.score.apply(this,[t]),"function"!=typeof i))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==a.lastQuery?(a.lastQuery=t,r=a.sifter.search(t,e.extend(s,{score:i})),a.currentResults=r):r=e.extend(!0,{},a.currentResults),o.hideSelected)for(n=r.items.length-1;n>=0;n--)-1!==a.items.indexOf(S(r.items[n].id))&&r.items.splice(n,1);return r},refreshOptions:function(t){var n,i,a,o,s,u,l,c,f,d,h,p,g,m,v,y;"undefined"==typeof t&&(t=!0);var b=this,x=e.trim(b.$control_input.val()),w=b.search(x),_=b.$dropdown_content,k=b.$activeOption&&S(b.$activeOption.attr("data-value"));for(o=w.items.length,"number"==typeof b.settings.maxOptions&&(o=Math.min(o,b.settings.maxOptions)),s={},u=[],n=0;o>n;n++)for(l=b.options[w.items[n].id],c=b.render("option",l),f=l[b.settings.optgroupField]||"",d=e.isArray(f)?f:[f],i=0,a=d&&d.length;a>i;i++)f=d[i],b.optgroups.hasOwnProperty(f)||(f=""),s.hasOwnProperty(f)||(s[f]=[],u.push(f)),s[f].push(c);for(this.settings.lockOptgroupOrder&&u.sort(function(e,t){var n=b.optgroups[e].$order||0,r=b.optgroups[t].$order||0;return n-r}),h=[],n=0,o=u.length;o>n;n++)f=u[n],b.optgroups.hasOwnProperty(f)&&s[f].length?(p=b.render("optgroup_header",b.optgroups[f])||"",p+=s[f].join(""),h.push(b.render("optgroup",e.extend({},b.optgroups[f],{html:p})))):h.push(s[f].join(""));if(_.html(h.join("")),b.settings.highlight&&w.query.length&&w.tokens.length)for(n=0,o=w.tokens.length;o>n;n++)r(_,w.tokens[n].regex);if(!b.settings.hideSelected)for(n=0,o=b.items.length;o>n;n++)b.getOption(b.items[n]).addClass("selected");g=b.canCreate(x),g&&(_.prepend(b.render("option_create",{input:x})),y=e(_[0].childNodes[0])),b.hasOptions=w.items.length>0||g,b.hasOptions?(w.items.length>0?(v=k&&b.getOption(k),v&&v.length?m=v:"single"===b.settings.mode&&b.items.length&&(m=b.getOption(b.items[0])),m&&m.length||(m=y&&!b.settings.addPrecedence?b.getAdjacentOption(y,1):_.find("[data-selectable]:first"))):m=y,b.setActiveOption(m),t&&!b.isOpen&&b.open()):(b.setActiveOption(null),t&&b.isOpen&&b.close())},addOption:function(t){var n,r,i,a=this;if(e.isArray(t))for(n=0,r=t.length;r>n;n++)a.addOption(t[n]);else(i=a.registerOption(t))&&(a.userOptions[i]=!0,a.lastQuery=null,a.trigger("option_add",i,t))},registerOption:function(e){var t=S(e[this.settings.valueField]);return!t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=S(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,n){var r,i,a,o,s,u,l,c=this;if(t=S(t),a=S(n[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof a)throw new Error("Value must be set in option data");l=c.options[t].$order,a!==t&&(delete c.options[t],o=c.items.indexOf(t),-1!==o&&c.items.splice(o,1,a)),n.$order=n.$order||l,c.options[a]=n,s=c.renderCache.item,u=c.renderCache.option,s&&(delete s[t],delete s[a]),u&&(delete u[t],delete u[a]),-1!==c.items.indexOf(a)&&(r=c.getItem(t),i=e(c.render("item",n)),r.hasClass("active")&&i.addClass("active"),r.replaceWith(i)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var n=this;e=S(e);var r=n.renderCache.item,i=n.renderCache.option;r&&delete r[e],i&&delete i[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,n){var r=this.$dropdown.find("[data-selectable]"),i=r.index(t)+n;return i>=0&&i<r.length?r.eq(i):e()},getElementWithValue:function(t,n){if(t=S(t),"undefined"!=typeof t&&null!==t)for(var r=0,i=n.length;i>r;r++)if(n[r].getAttribute("data-value")===t)return e(n[r]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,n){for(var r=e.isArray(t)?t:[t],i=0,a=r.length;a>i;i++)this.isPending=a-1>i,this.addItem(r[i],n)},addItem:function(t,n){var r=n?[]:["change"];O(this,r,function(){var r,i,a,o,s,u=this,l=u.settings.mode;return t=S(t),-1!==u.items.indexOf(t)?void("single"===l&&u.close()):void(u.options.hasOwnProperty(t)&&("single"===l&&u.clear(n),"multi"===l&&u.isFull()||(r=e(u.render("item",u.options[t])),s=u.isFull(),u.items.splice(u.caretPos,0,t),u.insertAtCaret(r),(!u.isPending||!s&&u.isFull())&&u.refreshState(),u.isSetup&&(a=u.$dropdown_content.find("[data-selectable]"),u.isPending||(i=u.getOption(t),o=u.getAdjacentOption(i,1).attr("data-value"),u.refreshOptions(u.isFocused&&"single"!==l),o&&u.setActiveOption(u.getOption(o))),!a.length||u.isFull()?u.close():u.positionDropdown(),u.updatePlaceholder(),u.trigger("item_add",t,r),u.updateOriginalInput({silent:n})))))})},removeItem:function(e,t){var n,r,i,a=this;n="object"==typeof e?e:a.getItem(e),e=S(n.attr("data-value")),r=a.items.indexOf(e),-1!==r&&(n.remove(),n.hasClass("active")&&(i=a.$activeItems.indexOf(n[0]),a.$activeItems.splice(i,1)),a.items.splice(r,1),a.lastQuery=null,!a.settings.persist&&a.userOptions.hasOwnProperty(e)&&a.removeOption(e,t),r<a.caretPos&&a.setCaret(a.caretPos-1),a.refreshState(),a.updatePlaceholder(),a.updateOriginalInput({silent:t}),a.positionDropdown(),a.trigger("item_remove",e,n))},createItem:function(t,n){var r=this,i=r.caretPos;t=t||e.trim(r.$control_input.val()||"");var a=arguments[arguments.length-1];if("function"!=typeof a&&(a=function(){}),"boolean"!=typeof n&&(n=!0),!r.canCreate(t))return a(),!1;r.lock();var o="function"==typeof r.settings.create?this.settings.create:function(e){var t={};return t[r.settings.labelField]=e,t[r.settings.valueField]=e,t},s=E(function(e){if(r.unlock(),!e||"object"!=typeof e)return a();var t=S(e[r.settings.valueField]);return"string"!=typeof t?a():(r.setTextboxValue(""),r.addOption(e),r.setCaret(i),r.addItem(t),r.refreshOptions(n&&"single"!==r.settings.mode),void a(e))}),u=o.apply(this,[t,s]);return"undefined"!=typeof u&&s(u),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,n=t.isFull(),r=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",r).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!n&&!r)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,r,i,a=this;if(e=e||{},a.tagType===w){for(r=[],t=0,n=a.items.length;n>t;t++)i=a.options[a.items[t]][a.settings.labelField]||"",r.push('<option value="'+M(a.items[t])+'" selected="selected">'+M(i)+"</option>");r.length||this.$input.attr("multiple")||r.push('<option value="" selected="selected"></option>'),a.$input.html(r.join(""))}else a.$input.val(a.getValue()),a.$input.attr("value",a.$input.val());a.isSetup&&(e.silent||a.trigger("change",a.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(t):e(this.$control[0].childNodes[n]).before(t),this.setCaret(n+1)},deleteSelection:function(t){var n,r,i,a,o,s,u,l,c,f=this;if(i=t&&t.keyCode===g?-1:1,a=L(f.$control_input[0]),f.$activeOption&&!f.settings.hideSelected&&(u=f.getAdjacentOption(f.$activeOption,-1).attr("data-value")),o=[],f.$activeItems.length){for(c=f.$control.children(".active:"+(i>0?"last":"first")),s=f.$control.children(":not(input)").index(c),i>0&&s++,n=0,r=f.$activeItems.length;r>n;n++)o.push(e(f.$activeItems[n]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(f.isFocused||"single"===f.settings.mode)&&f.items.length&&(0>i&&0===a.start&&0===a.length?o.push(f.items[f.caretPos-1]):i>0&&a.start===f.$control_input.val().length&&o.push(f.items[f.caretPos]));if(!o.length||"function"==typeof f.settings.onDelete&&f.settings.onDelete.apply(f,[o])===!1)return!1;for("undefined"!=typeof s&&f.setCaret(s);o.length;)f.removeItem(o.pop());return f.showInput(),f.positionDropdown(),f.refreshOptions(!0),u&&(l=f.getOption(u),l.length&&f.setActiveOption(l)),!0},advanceSelection:function(e,t){var n,r,i,a,o,s,u=this;0!==e&&(u.rtl&&(e*=-1),n=e>0?"last":"first",r=L(u.$control_input[0]),u.isFocused&&!u.isInputHidden?(a=u.$control_input.val().length,o=0>e?0===r.start&&0===r.length:r.start===a,o&&!a&&u.advanceCaret(e,t)):(s=u.$control.children(".active:"+n),s.length&&(i=u.$control.children(":not(input)").index(s),u.setActiveItem(null),u.setCaret(e>0?i+1:i))))},advanceCaret:function(e,t){var n,r,i=this;0!==e&&(n=e>0?"next":"prev",i.isShiftDown?(r=i.$control_input[n](),r.length&&(i.hideInput(),i.setActiveItem(r),t&&t.preventDefault())):i.setCaret(i.caretPos+e))},setCaret:function(t){var n=this;if(t="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,t)),!n.isPending){var r,i,a,o;for(a=n.$control.children(":not(input)"),r=0,i=a.length;i>r;r++)o=e(a[r]).detach(),t>r?n.$control_input.before(o):n.$control.append(o)}n.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,n=t.eventNS,r=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(r.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:r.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(n),e(document).off(n),e(document.body).off(n),delete t.$input[0].selectize},render:function(e,t){var n,r,i="",a=!1,o=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(n=S(t[o.settings.valueField]),a=!!n),a&&($(o.renderCache[e])||(o.renderCache[e]={}),o.renderCache[e].hasOwnProperty(n))?o.renderCache[e][n]:(i=o.settings.render[e].apply(this,[t,M]),("option"===e||"option_create"===e)&&(i=i.replace(s,"<$1 data-selectable")),"optgroup"===e&&(r=t[o.settings.optgroupValueField]||"",i=i.replace(s,'<$1 data-group="'+T(M(r))+'"')),("option"===e||"item"===e)&&(i=i.replace(s,'<$1 data-value="'+T(M(n||""))+'"')),a&&(o.renderCache[e][n]=i),i)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var n=t.settings.createFilter;return!(!e.length||"function"==typeof n&&!n.apply(t,[e])||"string"==typeof n&&!new RegExp(n).test(e)||n instanceof RegExp&&!n.test(e))}}),R.count=0,R.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var n=e.fn.selectize.defaults,r=e.extend({},n,t),i=r.dataAttr,a=r.labelField,o=r.valueField,s=r.optgroupField,u=r.optgroupLabelField,l=r.optgroupValueField,c=function(t,n){var s,u,l,c,f=t.attr(i);if(f)for(n.options=JSON.parse(f),s=0,u=n.options.length;u>s;s++)n.items.push(n.options[s][o]);else{var d=e.trim(t.val()||"");if(!r.allowEmptyOption&&!d.length)return;for(l=d.split(r.delimiter),s=0,u=l.length;u>s;s++)c={},c[a]=l[s],c[o]=l[s],n.options.push(c);n.items=l}},f=function(t,n){var c,f,d,h,p=n.options,g={},m=function(e){var t=i&&e.attr(i);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,i){t=e(t);var u=S(t.attr("value"));if(u||r.allowEmptyOption)if(g.hasOwnProperty(u)){if(i){var l=g[u][s];l?e.isArray(l)?l.push(i):g[u][s]=[l,i]:g[u][s]=i}}else{var c=m(t)||{};c[a]=c[a]||t.text(),c[o]=c[o]||u,c[s]=c[s]||i,g[u]=c,p.push(c),t.is(":selected")&&n.items.push(u);

}},y=function(t){var r,i,a,o,s;for(t=e(t),a=t.attr("label"),a&&(o=m(t)||{},o[u]=a,o[l]=a,n.optgroups.push(o)),s=e("option",t),r=0,i=s.length;i>r;r++)v(s[r],a)};for(n.maxItems=t.attr("multiple")?null:1,h=t.children(),c=0,f=h.length;f>c;c++)d=h[c].tagName.toLowerCase(),"optgroup"===d?y(h[c]):"option"===d&&v(h[c])};return this.each(function(){if(!this.selectize){var i,a=e(this),o=this.tagName.toLowerCase(),s=a.attr("placeholder")||a.attr("data-placeholder");s||r.allowEmptyOption||(s=a.children('option[value=""]').text());var u={placeholder:s,options:[],optgroups:[],items:[]};"select"===o?f(a,u):c(a,u),i=new R(a,e.extend(!0,{},n,u,t))}})},e.fn.selectize.defaults=R.defaults,e.fn.selectize.support={validity:k},R.define("drag_drop",function(t){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var n=this;n.lock=function(){var e=n.lock;return function(){var t=n.$control.data("sortable");return t&&t.disable(),e.apply(n,arguments)}}(),n.unlock=function(){var e=n.unlock;return function(){var t=n.$control.data("sortable");return t&&t.enable(),e.apply(n,arguments)}}(),n.setup=function(){var t=n.setup;return function(){t.apply(this,arguments);var r=n.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:n.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),r.css({overflow:"visible"})},stop:function(){r.css({overflow:"hidden"});var t=n.$activeItems?n.$activeItems.slice():null,i=[];r.children("[data-value]").each(function(){i.push(e(this).attr("data-value"))}),n.setValue(i),n.setActiveItem(t)}})}}()}}),R.define("dropdown_header",function(t){var n=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),n.setup=function(){var r=n.setup;return function(){r.apply(n,arguments),n.$dropdown_header=e(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)}}()}),R.define("optgroup_columns",function(t){var n=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,n){var r=t.closest("[data-group]").find("[data-selectable]"),i=r.index(t)+n;return i>=0&&i<r.length?r.eq(i):e()},this.onKeyDown=function(){var e=n.onKeyDown;return function(t){var r,i,a,o;return!this.isOpen||t.keyCode!==l&&t.keyCode!==d?e.apply(this,arguments):(n.ignoreHover=!0,o=this.$activeOption.closest("[data-group]"),r=o.find("[data-selectable]").index(this.$activeOption),o=t.keyCode===l?o.prev("[data-group]"):o.next("[data-group]"),a=o.find("[data-selectable]"),i=a.eq(Math.min(a.length-1,r)),void(i.length&&this.setActiveOption(i)))}}();var r=function(){var e,t=r.width,n=document;return"undefined"==typeof t&&(e=n.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=r.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t},i=function(){var i,a,o,s,u,l,c;if(c=e("[data-group]",n.$dropdown_content),a=c.length,a&&n.$dropdown_content.width()){if(t.equalizeHeight){for(o=0,i=0;a>i;i++)o=Math.max(o,c.eq(i).height());c.css({height:o})}t.equalizeWidth&&(l=n.$dropdown_content.innerWidth()-r(),s=Math.round(l/a),c.css({width:s}),a>1&&(u=l-s*(a-1),c.eq(a-1).css({width:u})))}};(t.equalizeHeight||t.equalizeWidth)&&(C.after(this,"positionDropdown",i),C.after(this,"refreshOptions",i))}),R.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var n=this,r='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+M(t.title)+'">'+t.label+"</a>",i=function(e,t){var n=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,n)+t+e.substring(n)};this.setup=function(){var a=n.setup;return function(){if(t.append){var o=n.settings.render.item;n.settings.render.item=function(e){return i(o.apply(this,arguments),r)}}a.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!n.isLocked){var r=e(t.currentTarget).parent();n.setActiveItem(r),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}}),R.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var n=t.onKeyDown;return function(t){var r,i;return t.keyCode===g&&""===this.$control_input.val()&&!this.$activeItems.length&&(r=this.caretPos-1,r>=0&&r<this.items.length)?(i=this.options[this.items[r]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[i])),this.refreshOptions(!0)),void t.preventDefault()):n.apply(this,arguments)}}()}),R}),/**
 * Angular Google Analytics - Easy tracking for your AngularJS application
 * @version v1.1.2 - 2015-10-13
 * @link http://github.com/revolunet/angular-google-analytics
 * @author Julien Bouquillon <julien@revolunet.com> (https://github.com/revolunet)
 * @contributors Julien Bouquillon (https://github.com/revolunet),Justin Saunders (https://github.com/justinsa),Chris Esplin (https://github.com/deltaepsilon),Adam Misiorny (https://github.com/adam187)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(e,t,n,r){"use strict";n.module("angular-google-analytics",[]).provider("Analytics",function(){var i,a,o,s,u,l=!0,c="auto",f=!1,d=!1,h="USD",p=!1,g=!1,m=!1,v=!1,y=!1,b=!1,x=!1,w=!1,_=!1,k="$routeChangeSuccess",$=!1,S="",M=!0,T=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(e){return i=n.isUndefined(e)||e===!1?r:n.isArray(e)?e:n.isObject(e)?[e]:[{tracker:e,trackEvent:!0}],this},this.trackPages=function(e){return M=e,this},this.trackPrefix=function(e){return S=e,this},this.setDomainName=function(e){return o=e,this},this.useDisplayFeatures=function(e){return g=!!e,this},this.useAnalytics=function(e){return l=!!e,this},this.useEnhancedLinkAttribution=function(e){return y=!!e,this},this.useCrossDomainLinker=function(e){return d=!!e,this},this.setCrossLinkDomains=function(e){return a=e,this},this.setPageEvent=function(e){return k=e,this},this.setCookieConfig=function(e){return c=e,this},this.useECommerce=function(e,t){return m=!!e,v=!!t,this},this.setCurrency=function(e){return h=e,this},this.setRemoveRegExp=function(e){return e instanceof RegExp&&(u=e),this},this.setExperimentId=function(e){return s=e,this},this.ignoreFirstPageLoad=function(e){return b=!!e,this},this.trackUrlParams=function(e){return T=!!e,this},this.setHybridMobileSupport=function(e){return w=!!e,this},this.startOffline=function(e){return _=!!e,_===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(e){return p=!!e,this},this.logAllCalls=function(e){return x=!!e,this},this.enterTestMode=function(){return $=!0,this},this.$get=["$document","$location","$log","$rootScope","$window",function(C,E,A,O,D){var L=this,N=function(e,t){return n.isString(t)?t+"."+e:j("name",t)?t.name+"."+e:e},j=function(e,t){return n.isObject(t)&&n.isDefined(t[e])},P=function(e,t,n){return j(e,t)&&t[e]===n},R=function(){var e=T?E.url():E.path();return u?e.replace(u,""):e},I=function(){var e={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},t={};return n.forEach(E.search(),function(r,i){var a=e[i];n.isDefined(a)&&(t[a]=r)}),t},F=function(e,t,n,r,i,a,o,s,u){var l={};return e&&(l.id=e),t&&(l.affiliation=t),n&&(l.revenue=n),r&&(l.tax=r),i&&(l.shipping=i),a&&(l.coupon=a),o&&(l.list=o),s&&(l.step=s),u&&(l.option=u),l},U=function(e){!l&&D._gaq&&"function"==typeof e&&e()},z=function(){var e=Array.prototype.slice.call(arguments);return _===!0?void L.offlineQueue.push([z,e]):(D._gaq||(D._gaq=[]),x===!0&&L._log.apply(L,e),void D._gaq.push(e))},q=function(e){l&&D.ga&&"function"==typeof e&&e()},H=function(){var e=Array.prototype.slice.call(arguments);return _===!0?void L.offlineQueue.push([H,e]):"function"!=typeof D.ga?void L._log("warn","ga function not set on window"):(x===!0&&L._log.apply(L,e),void D.ga.apply(null,e))},B=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[0],r=[];return"function"==typeof e?i.forEach(function(t){e(t)&&r.push(t)}):r=i,0===r.length?void H.apply(L,t):void r.forEach(function(e){t[0]=N(n,e),H.apply(L,t)})};return this._log=function(){var e=Array.prototype.slice.call(arguments);if(e.length>0){if(e.length>1)switch(e[0]){case"debug":case"error":case"info":case"log":case"warn":A[e[0]](e.slice(1))}L.log.push(e)}},this._createScriptTag=function(){if(!i||i.length<1)return void L._log("warn","No account id set to create script tag");if(i.length>1&&(L._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),i=i.slice(0,1)),f===!0)return void L._log("warn","ga.js or analytics.js script tag already created");z("_setAccount",i[0].tracker),o&&z("_setDomainName",o),y&&z("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),M&&!b&&(u?z("_trackPageview",R()):z("_trackPageview"));var e;return e=g===!0?("https:"===t.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js":("https:"===t.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",$!==!0?!function(){var t=C[0],n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src=e;var r=t.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r)}():L._log("inject",e),f=!0,!0},this._createAnalyticsScriptTag=function(){if(!i)return void L._log("warn","No account id set to create analytics script tag");if(f===!0)return void L._log("warn","ga.js or analytics.js script tag already created");var r=w===!0?"https:":"",o=r+"//www.google-analytics.com/analytics.js";if($!==!0?!function(e,t,n,r,i,a,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(n),o=t.getElementsByTagName(n)[0],a.async=1,a.src=r,o.parentNode.insertBefore(a,o)}(e,t,"script",o,"ga"):("function"!=typeof D.ga&&(D.ga=function(){}),L._log("inject",o)),i.forEach(function(e){e.crossDomainLinker=j("crossDomainLinker",e)?e.crossDomainLinker:d,e.crossLinkDomains=j("crossLinkDomains",e)?e.crossLinkDomains:a,e.displayFeatures=j("displayFeatures",e)?e.displayFeatures:g,e.enhancedLinkAttribution=j("enhancedLinkAttribution",e)?e.enhancedLinkAttribution:y,e.trackEcommerce=j("trackEcommerce",e)?e.trackEcommerce:m,e.trackEvent=j("trackEvent",e)?e.trackEvent:!1;var t={};j("fields",e)?t=e.fields:j("cookieConfig",e)?n.isString(e.cookieConfig)?t.cookieDomain=e.cookieConfig:t=e.cookieConfig:n.isString(c)?t.cookieDomain=c:c&&(t=c),e.crossDomainLinker===!0&&(t.allowLinker=!0),j("name",e)&&(t.name=e.name),e.fields=t,H("create",e.tracker,e.fields),w===!0&&H(N("set",e),"checkProtocolTask",null),e.crossDomainLinker===!0&&(H(N("require",e),"linker"),n.isDefined(e.crossLinkDomains)&&H(N("linker:autoLink",e),e.crossLinkDomains)),e.displayFeatures&&H(N("require",e),"displayfeatures"),e.trackEcommerce&&(v?(H(N("require",e),"ec"),H(N("set",e),"&cu",h)):H(N("require",e),"ecommerce")),e.enhancedLinkAttribution&&H(N("require",e),"linkid"),M&&!b&&H(N("send",e),"pageview",R())}),s){var u=t.createElement("script"),l=t.getElementsByTagName("script")[0];u.src=r+"//www.google-analytics.com/cx/api.js?experiment="+s,l.parentNode.insertBefore(u,l)}return f=!0,!0},this._ecommerceEnabled=function(e,t){var n=m&&!v;return e===!0&&n===!1&&(m&&v?L._log("warn",t+" is not available when Enhanced Ecommerce is enabled with analytics.js"):L._log("warn","Ecommerce must be enabled to use "+t+" with analytics.js")),n},this._enhancedEcommerceEnabled=function(e,t){var n=m&&v;return e===!0&&n===!1&&L._log("warn","Enhanced Ecommerce must be enabled to use "+t+" with analytics.js"),n},this._trackPage=function(e,t,i){e=e?e:R(),t=t?t:C[0].title,U(function(){z("_set","title",t),z("_trackPageview",S+e)}),q(function(){var a={page:S+e,title:t};n.extend(a,I()),n.isObject(i)&&n.extend(a,i),B(r,"send","pageview",a)})},this._trackEvent=function(e,t,r,i,a,o){U(function(){z("_trackEvent",e,t,r,i,!!a)}),q(function(){var s={},u=function(e){return P("trackEvent",e,!0)};n.isDefined(a)&&(s.nonInteraction=!!a),n.isObject(o)&&n.extend(s,o),B(u,"send","event",e,t,r,i,s)})},this._addTrans=function(e,t,n,r,i,a,o,s,u){U(function(){z("_addTrans",e,t,n,r,i,a,o,s)}),q(function(){if(L._ecommerceEnabled(!0,"addTrans")){var a=function(e){return P("trackEcommerce",e,!0)};B(a,"ecommerce:addTransaction",{id:e,affiliation:t,revenue:n,tax:r,shipping:i,currency:u||"USD"})}})},this._addItem=function(e,t,n,r,i,a){U(function(){z("_addItem",e,t,n,r,i,a)}),q(function(){if(L._ecommerceEnabled(!0,"addItem")){var o=function(e){return P("trackEcommerce",e,!0)};B(o,"ecommerce:addItem",{id:e,name:n,sku:t,category:r,price:i,quantity:a})}})},this._trackTrans=function(){U(function(){z("_trackTrans")}),q(function(){if(L._ecommerceEnabled(!0,"trackTrans")){var e=function(e){return P("trackEcommerce",e,!0)};B(e,"ecommerce:send")}})},this._clearTrans=function(){q(function(){if(L._ecommerceEnabled(!0,"clearTrans")){var e=function(e){return P("trackEcommerce",e,!0)};B(e,"ecommerce:clear")}})},this._addProduct=function(e,t,r,i,a,o,s,u,l,c){U(function(){z("_addProduct",e,t,r,i,a,o,s,u,l)}),q(function(){if(L._enhancedEcommerceEnabled(!0,"addProduct")){var f=function(e){return P("trackEcommerce",e,!0)},d={id:e,name:t,category:r,brand:i,variant:a,price:o,quantity:s,coupon:u,position:l};n.isObject(c)&&n.extend(d,c),B(f,"ec:addProduct",d)}})},this._addImpression=function(e,t,n,r,i,a,o,s){U(function(){z("_addImpression",e,t,n,r,i,a,o,s)}),q(function(){if(L._enhancedEcommerceEnabled(!0,"addImpression")){var u=function(e){return P("trackEcommerce",e,!0)};B(u,"ec:addImpression",{id:e,name:t,category:i,brand:r,variant:a,list:n,position:o,price:s})}})},this._addPromo=function(e,t,n,r){U(function(){z("_addPromo",e,t,n,r)}),q(function(){if(L._enhancedEcommerceEnabled(!0,"addPromo")){var i=function(e){return P("trackEcommerce",e,!0)};B(i,"ec:addPromo",{id:e,name:t,creative:n,position:r})}})},this._setAction=function(e,t){U(function(){z("_setAction",e,t)}),q(function(){if(L._enhancedEcommerceEnabled(!0,"setAction")){var n=function(e){return P("trackEcommerce",e,!0)};B(n,"ec:setAction",e,t)}})},this._trackTransaction=function(e,t,n,r,i,a,o,s,u){this._setAction("purchase",F(e,t,n,r,i,a,o,s,u))},this._trackRefund=function(e){this._setAction("refund",F(e))},this._trackCheckOut=function(e,t){this._setAction("checkout",F(null,null,null,null,null,null,null,e,t))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(e){-1!==["add","remove"].indexOf(e)&&(this._setAction(e),this._trackEvent("UX","click",e+("add"===e?" to cart":" from cart")))},this._promoClick=function(e){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",e)},this._productClick=function(e){this._setAction("click",F(null,null,null,null,null,null,e,null,null)),this._trackEvent("UX","click",e)},this._pageView=function(e){q(function(){H(N("send",e),"pageview")})},this._send=function(){var e=Array.prototype.slice.call(arguments);e.unshift("send"),q(function(){H.apply(L,e)})},this._set=function(e,t,n){q(function(){H(N("set",n),e,t)})},this._trackTimings=function(e,t,n,r){this._send("timing",e,t,n,r)},p||(l?this._createAnalyticsScriptTag():this._createScriptTag()),M&&O.$on(k,function(){L._trackPage()}),{log:L.log,offlineQueue:L.offlineQueue,configuration:{accounts:i,universalAnalytics:l,crossDomainLinker:d,crossLinkDomains:a,currency:h,delayScriptTag:p,displayFeatures:g,domainName:o,ecommerce:L._ecommerceEnabled(),enhancedEcommerce:L._enhancedEcommerceEnabled(),enhancedLinkAttribution:y,experimentId:s,hybridMobileSupport:w,ignoreFirstPageLoad:b,logAllCalls:x,pageEvent:k,removeRegExp:u,testMode:$,trackPrefix:S,trackRoutes:M,trackUrlParams:T},getUrl:R,setCookieConfig:L._setCookieConfig,getCookieConfig:function(){return c},createAnalyticsScriptTag:function(e){return e&&(c=e),L._createAnalyticsScriptTag()},createScriptTag:function(){return L._createScriptTag()},offline:function(e){if(e===!0&&_===!1&&(_=!0),e===!1&&_===!0)for(_=!1;L.offlineQueue.length>0;){var t=L.offlineQueue.shift();t[0].apply(L,t[1])}return _},trackPage:function(e,t,n){L._trackPage.apply(L,arguments)},trackEvent:function(e,t,n,r,i,a){L._trackEvent.apply(L,arguments)},addTrans:function(e,t,n,r,i,a,o,s,u){L._addTrans.apply(L,arguments)},addItem:function(e,t,n,r,i,a){L._addItem.apply(L,arguments)},trackTrans:function(){L._trackTrans.apply(L,arguments)},clearTrans:function(){L._clearTrans.apply(L,arguments)},addProduct:function(e,t,n,r,i,a,o,s,u,l){L._addProduct.apply(L,arguments)},addPromo:function(e,t,n,r){L._addPromo.apply(L,arguments)},addImpression:function(e,t,n,r,i,a,o,s){L._addImpression.apply(L,arguments)},productClick:function(e){L._productClick.apply(L,arguments)},promoClick:function(e){L._promoClick.apply(L,arguments)},trackDetail:function(){L._trackDetail.apply(L,arguments)},trackCart:function(e){L._trackCart.apply(L,arguments)},trackCheckout:function(e,t){L._trackCheckOut.apply(L,arguments)},trackTimings:function(e,t,n,r){L._trackTimings.apply(L,arguments)},trackTransaction:function(e,t,n,r,i,a,o,s,u){L._trackTransaction.apply(L,arguments)},setAction:function(e,t){L._setAction.apply(L,arguments)},pageView:function(){L._pageView.apply(L,arguments)},send:function(e){L._send.apply(L,arguments)},set:function(e,t,n){L._set.apply(L,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(e,t){return{restrict:"A",link:function(n,r,i){var a=t(i.gaTrackEvent);r.bind("click",function(){(!i.gaTrackEventIf||n.$eval(i.gaTrackEventIf))&&a.length>1&&e.trackEvent.apply(e,a(n))})}}}])}(window,document,window.angular),function(){(function(){function e(t,r){function a(e){if(a[e]!==m)return a[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=a("json-stringify")&&a("json-parse");else{var n,i='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var u=r.stringify,c="function"==typeof u&&b;if(c){(n=function(){return 1}).toJSON=n;try{c="0"===u(0)&&"0"===u(new o)&&'""'==u(new s)&&u(y)===m&&u(m)===m&&u()===m&&"1"===u(n)&&"[1]"==u([n])&&"[null]"==u([m])&&"null"==u(null)&&"[null,null,null]"==u([m,y,null])&&u({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==i&&"1"===u(null,n)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new l(-1))}catch(f){c=!1}}t=c}if("json-parse"==e){var d=r.parse;if("function"==typeof d)try{if(0===d("0")&&!d(!1)){n=d(i);var h=5==n.a.length&&1===n.a[0];if(h){try{h=!d('"	"')}catch(f){}if(h)try{h=1!==d("01")}catch(f){}if(h)try{h=1!==d("1.")}catch(f){}}}}catch(f){h=!1}t=h}}return a[e]=!!t}t||(t=i.Object()),r||(r=i.Object());var o=t.Number||i.Number,s=t.String||i.String,u=t.Object||i.Object,l=t.Date||i.Date,c=t.SyntaxError||i.SyntaxError,f=t.TypeError||i.TypeError,d=t.Math||i.Math,h=t.JSON||i.JSON;"object"==typeof h&&h&&(r.stringify=h.stringify,r.parse=h.parse);var p,g,m,v=u.prototype,y=v.toString,b=new l(-0xc782b5b800cec);try{b=-109252==b.getUTCFullYear()&&0===b.getUTCMonth()&&1===b.getUTCDate()&&10==b.getUTCHours()&&37==b.getUTCMinutes()&&6==b.getUTCSeconds()&&708==b.getUTCMilliseconds()}catch(x){}var w="[object Function]",_="[object Date]",k="[object Number]",$="[object String]",S="[object Array]",M="[object Boolean]",T=a("bug-string-char-index");if(!b)var C=d.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return E[t]+365*(e-1970)+C((e-1969+(t=+(t>1)))/4)-C((e-1901+t)/100)+C((e-1601+t)/400)};(p=v.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=y?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),g=function(e,t){var r,i,a,o=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,i=new r;for(a in i)p.call(i,a)&&o++;return r=i=null,o?g=2==o?function(e,t){var n,r={},i=y.call(e)==w;for(n in e)i&&"prototype"==n||p.call(r,n)||!(r[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,r,i=y.call(e)==w;for(n in e)i&&"prototype"==n||!p.call(e,n)||(r="constructor"===n)||t(n);(r||p.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(e,t){var r,a,o=y.call(e)==w,s=!o&&"function"!=typeof e.constructor&&n[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(r in e)o&&"prototype"==r||!s.call(e,r)||t(r);for(a=i.length;r=i[--a];s.call(e,r)&&t(r));}),g(e,t)};var O={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},D="000000",L=function(e,t){return(D+(t||0)).slice(-e)},N="\\u00",j=function(e){for(var t='"',n=0,r=e.length,i=!T||r>10,a=i&&(T?e.split(""):e);r>n;n++){var o=e.charCodeAt(n);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=O[o];break;default:if(32>o){t+=N+L(2,o.toString(16));break}t+=i?a[n]:e.charAt(n)}}return t+'"'},P=function(e,t,n,r,i,a,o,s){var u,l,c,d,h,v,b,x,w,T,E,O,D,N,R,I;s=s||0;try{u=t[e]}catch(F){}if("object"==typeof u&&u)if(l=y.call(u),l!=_||p.call(u,"toJSON"))"function"==typeof u.toJSON&&(l!=k&&l!=$&&l!=S||p.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&1/0>u){if(A){for(h=C(u/864e5),c=C(h/365.2425)+1970-1;A(c+1,0)<=h;c++);for(d=C((h-A(c,0))/30.42);A(c,d+1)<=h;d++);h=1+h-A(c,d),v=(u%864e5+864e5)%864e5,b=C(v/36e5)%24,x=C(v/6e4)%60,w=C(v/1e3)%60,T=v%1e3}else c=u.getUTCFullYear(),d=u.getUTCMonth(),h=u.getUTCDate(),b=u.getUTCHours(),x=u.getUTCMinutes(),w=u.getUTCSeconds(),T=u.getUTCMilliseconds();u=(0>=c||c>=1e4?(0>c?"-":"+")+L(6,0>c?-c:c):L(4,c))+"-"+L(2,d+1)+"-"+L(2,h)+"T"+L(2,b)+":"+L(2,x)+":"+L(2,w)+"."+L(3,T)+"Z"}else u=null;if(n&&(u=n.call(t,e,u)),null===u)return"null";if(l=y.call(u),l==M)return""+u;if(l==k)return u>-1/0&&1/0>u?""+u:"null";if(l==$)return j(""+u);if("object"==typeof u){for(N=o.length;N--;)if(o[N]===u)throw f();if(o.push(u),E=[],R=a,a+=i,l==S){var I,U=a.length;for(D=0,N=u.length;N>D;D++)O=P(D,u,n,r,i,a,o,s),I=O===m?"null":O,U+=I.length+(D>0?1:0),E.push(I);I=E.length?i&&U>s?"[\n"+a+E.join(",\n"+a)+"\n"+R+"]":"["+E.join(",")+"]":"[]"}else{var U=a.length,D=0;g(r||u,function(e){var t,l=P(e,u,n,r,i,a,o,s);l!==m&&(t=j(e)+":"+(i?" ":"")+l,U+=t.length+(D++>0?1:0),E.push(t))}),I=E.length?i&&U>s?"{\n"+a+E.join(",\n"+a)+"\n"+R+"}":"{"+E.join(",")+"}":"{}"}return o.pop(),I}};if(r.stringify=function(e,t,r,i){var a,o,s,u;if(n[typeof t]&&t)if((u=y.call(t))==w)o=t;else if(u==S){s={};for(var l,c=0,f=t.length;f>c;l=t[c++],u=y.call(l),(u==$||u==k)&&(s[l]=1));}if(r)if((u=y.call(r))==k){if((r-=r%1)>0)for(a="",r>10&&(r=10);a.length<r;a+=" ");}else u==$&&(a=r.length<=10?r:r.slice(0,10));return P("",(l={},l[""]=e,l),o,s,a,"",[],i)},r.compactStringify=function(e,t,n){return r.stringify(e,t,n,60)},!a("json-parse")){var R,I,F=s.fromCharCode,U={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},z=function(){throw R=I=null,c()},q=function(){for(var e,t,n,r,i,a=I,o=a.length;o>R;)switch(i=a.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=T?a.charAt(R):a[R],R++,e;case 34:for(e="@",R++;o>R;)if(i=a.charCodeAt(R),32>i)z();else if(92==i)switch(i=a.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=U[i],R++;break;case 117:for(t=++R,n=R+4;n>R;R++)i=a.charCodeAt(R),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||z();e+=F("0x"+a.slice(t,R));break;default:z()}else{if(34==i)break;for(i=a.charCodeAt(R),t=R;i>=32&&92!=i&&34!=i;)i=a.charCodeAt(++R);e+=a.slice(t,R)}if(34==a.charCodeAt(R))return R++,e;z();default:if(t=R,45==i&&(r=!0,i=a.charCodeAt(++R)),i>=48&&57>=i){for(48==i&&(i=a.charCodeAt(R+1),i>=48&&57>=i)&&z(),r=!1;o>R&&(i=a.charCodeAt(R),i>=48&&57>=i);R++);if(46==a.charCodeAt(R)){for(n=++R;o>n&&(i=a.charCodeAt(n),i>=48&&57>=i);n++);n==R&&z(),R=n}if(i=a.charCodeAt(R),101==i||69==i){for(i=a.charCodeAt(++R),(43==i||45==i)&&R++,n=R;o>n&&(i=a.charCodeAt(n),i>=48&&57>=i);n++);n==R&&z(),R=n}return+a.slice(t,R)}if(r&&z(),"true"==a.slice(R,R+4))return R+=4,!0;if("false"==a.slice(R,R+5))return R+=5,!1;if("null"==a.slice(R,R+4))return R+=4,null;z()}return"$"},H=function(e){var t,n;if("$"==e&&z(),"string"==typeof e){if("@"==(T?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=q(),"]"!=e;n||(n=!0))n&&(","==e?(e=q(),"]"==e&&z()):z()),","==e&&z(),t.push(H(e));return t}if("{"==e){for(t={};e=q(),"}"!=e;n||(n=!0))n&&(","==e?(e=q(),"}"==e&&z()):z()),(","==e||"string"!=typeof e||"@"!=(T?e.charAt(0):e[0])||":"!=q())&&z(),t[e.slice(1)]=H(q());return t}z()}return e},B=function(e,t,n){var r=Y(e,t,n);r===m?delete e[t]:e[t]=r},Y=function(e,t,n){var r,i=e[t];if("object"==typeof i&&i)if(y.call(i)==S)for(r=i.length;r--;)B(i,r,n);else g(i,function(e){B(i,e,n)});return n.call(e,t,i)};r.parse=function(e,t){var n,r;return R=0,I=""+e,n=H(q()),"$"!=q()&&z(),R=I=null,t&&y.call(t)==w?Y((r={},r[""]=n,r),"",t):n}}return r.runInContext=e,r}var t="function"==typeof define&&define.amd,n={"function":!0,object:!0},r=n[typeof exports]&&exports&&!exports.nodeType&&exports,i=n[typeof window]&&window||this,a=r&&n[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!a||a.global!==a&&a.window!==a&&a.self!==a||(i=a),r&&!t)e(i,r);else{var o=i.JSON,s=i.JSON3,u=!1,l=e(i,i.JSON3={noConflict:function(){return u||(u=!0,i.JSON=o,i.JSON3=s,o=s=null),l}});i.JSON={parse:l.parse,stringify:l.stringify}}t&&define(function(){return l})}).call(this)}(),function(){"use strict";angular.module("vlui",["LocalStorageModule","angular-google-analytics"]).constant("_",window._).constant("dl",window.dl).constant("vl",window.vl).constant("vg",window.vg).constant("Blob",window.Blob).constant("URL",window.URL).constant("Drop",window.Drop).constant("Heap",window.Heap).constant("JSON3",window.JSON3.noConflict()).constant("consts",{addCount:!0,debug:!0,useUrl:!0,logging:!0,defaultConfigSet:"large",appId:"vlui",embeddedData:window.vguiData||void 0,priority:{bookmark:0,popup:0,vislist:1e3},myriaRest:"http://ec2-52-1-38-182.compute-1.amazonaws.com:8753",typeNames:{N:"text",O:"text-ordinal",Q:"number",T:"time",G:"geo"}}).config(["AnalyticsProvider",function(e){e.setAccount({tracker:"UA-44428446-4",name:"voyager",trackEvent:!0})}])}(),function(){angular.module("vlui").run(["$templateCache",function(e){e.put("alertmessages/alertmessages.html",'<div class="alert-box" ng-show="Alerts.alerts.length > 0"><div class="alert-item" ng-repeat="alert in Alerts.alerts">{{ alert.msg }} <a class="close" ng-click="Alerts.closeAlert($index)">&times;</a></div></div>'),e.put("bookmarklist/bookmarklist.html",'<modal id="bookmark-list" ng-if="Bookmarks.isSupported"><div class="modal-header card no-top-margin no-right-margin"><modal-close-button on-close="logBookmarksClosed()"></modal-close-button><h2 class="no-bottom-margin">Bookmarks ({{ Bookmarks.length }})</h2><a ng-click="Bookmarks.clear()"><i class="fa fa-trash-o"></i> Clear all</a></div><div class="flex-grow-1 scroll-y"><div ng-if="Bookmarks.length > 0" class="hflex flex-wrap"><vl-plot-group ng-repeat="chart in Bookmarks.dict | orderObjectBy : \'timeAdded\' : false" class="wrapped-vl-plot-group card" chart="chart" field-set="chart.fieldSet" show-bookmark="true" show-debug="consts.debug" show-expand="false" always-selected="true" highlighted="highlighted" ng-mouseover="(highlighted||{})[field.name] = true" ng-mouseout="(highlighted||{})[field.name] = false" overflow="true" tooltip="true" priority="consts.priority.bookmark"></vl-plot-group></div><div class="vis-list-empty" ng-if="Bookmarks.length === 0">You have no bookmarks</div></div></modal>'),e.put("dataset/addmyriadataset.html",'<div class="add-myria-dataset"><p>Select a dataset from the Myria instance at <code>{{myriaRestUrl}}</code>.</p><form ng-submit="addDataset(myriaDataset)"><div><select name="myria-dataset" id="select-myria-dataset" ng-disabled="disabled" ng-model="myriaDataset" ng-options="optionName(dataset) for dataset in myriaDatasets track by dataset.relationName"><option value="">Select Dataset...</option></select></div><button type="submit">Add dataset</button></form></div>'),e.put("dataset/addurldataset.html",'<div class="add-url-dataset"><p>Add the name of the dataset and the URL to a <b>JSON</b> or <b>CSV</b> (with header) file. Make sure that the formatting is correct and clean the data before adding it to Voyager. The added dataset is only visible to you.</p><form ng-submit="addFromUrl(addedDataset)"><div class="form-group"><label for="dataset-name">Name</label> <input ng-model="addedDataset.name" id="dataset-name" type="text"></div><div class="form-group"><label for="dataset-url">URL</label> <input ng-model="addedDataset.url" id="dataset-url" type="url"><p>Make sure that you host the file on a server that has <code>Access-Control-Allow-Origin: *</code> set.</p></div><button type="submit">Add dataset</button></form></div>'),e.put("dataset/changeloadeddataset.html",'<div class="change-loaded-dataset"><div ng-if="userData.length"><h3>Uploaded Datasets</h3><ul><li ng-repeat="dataset in userData track by dataset.id" ng-class="{selected: Dataset.currentDataset.id === dataset.id}"><a class="dataset" ng-click="selectDataset(dataset)" ng-disabled="Dataset.currentDataset.id === dataset.id"><i class="fa fa-database"></i> <strong>{{dataset.name}}</strong></a> <span ng-if="dataset.description">{{dataset.description}}</span> <strong ng-if="Dataset.currentDataset === dataset">(selected)</strong></li></ul></div><h3>Explore a Sample Dataset</h3><ul class="loaded-dataset-list"><li ng-repeat="dataset in sampleData track by dataset.id" ng-class="{selected: Dataset.currentDataset.id === dataset.id}"><a class="dataset" ng-click="selectDataset(dataset)" ng-disabled="Dataset.currentDataset.id === dataset.id"><i class="fa fa-database"></i> <strong>{{dataset.name}}</strong></a> <strong ng-if="Dataset.currentDataset === dataset">(selected)</strong> <em ng-if="dataset.description">{{dataset.description}}</em></li></ul></div>'),e.put("dataset/datasetmodal.html",'<modal id="dataset-modal" max-width="800px"><div class="modal-header"><modal-close-button></modal-close-button><h2>Add Dataset</h2></div><div class="modal-main"><tabset><tab heading="Change Dataset"><change-loaded-dataset></change-loaded-dataset></tab><tab heading="Paste or Upload Data"><paste-dataset></paste-dataset></tab><tab heading="From URL"><add-url-dataset></add-url-dataset></tab><tab heading="From Myria"><add-myria-dataset></add-myria-dataset></tab></tabset></div></modal>'),e.put("dataset/datasetselector.html",'<button id="select-data" class="small-button select-data" ng-click="loadDataset();">Change</button>'),e.put("dataset/filedropzone.html",'<div class="dropzone" ng-transclude=""></div>'),e.put("dataset/pastedataset.html",'<div class="paste-data"><file-dropzone dataset="dataset" max-file-size="10" valid-mime-types="[text/csv, text/json, text/tsv]"><div class="upload-data"><div class="form-group"><label for="dataset-file">File</label> <input type="file" id="dataset-file" accept="text/csv,text/tsv"></div><p>Upload a CSV, or paste data in <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> format into the fields.</p><div class="dropzone-target"><p>Drop CSV file here</p></div></div><form ng-submit="addDataset()"><div class="form-group"><label for="dataset-name">Name</label> <input type="name" ng-model="dataset.name" id="dataset-name" required=""></div><div class="form-group"><textarea ng-model="dataset.data" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 17, \'blur\': 0 }}" required="">\n      </textarea></div><button type="submit">Add data</button></form></file-dropzone></div>'),e.put("fieldinfo/fieldinfo.html",'<span class="field-info"><span class="hflex full-width" ng-click="clicked($event)"><span class="type-caret" ng-class="{active: !disableCountCaret || field.aggregate!==\'count\'}"><i class="fa fa-caret-down" ng-show="showCaret"></i> <span class="type fa {{icon}}" ng-show="showType" title="{{typeNames[field.type]}}"></span></span> <span ng-if="field.aggregate!==\'count\'" class="field-info-text"><span ng-if="func(field)" class="field-func" ng-class="{any: field._any}">{{ func(field) }}</span><span class="field-name" ng-class="{hasfunc: func(field), any: field._any}">{{ field.name | underscore2space }}</span></span> <span ng-if="field.aggregate===\'count\'" class="field-count field-info-text"><span class="field-name">COUNT</span></span> <span class="no-shrink remove" ng-show="showRemove"><a class="remove-field" ng-click="removeAction()"><i class="fa fa-times"></i></a></span> <span class="no-shrink info" ng-show="showInfo"><i ng-if="field.aggregate !== \'count\' && isTypes(field, [\'N\', \'O\'])" class="fa fa-info-circle" tooltips="" tooltip-size="small" tooltip-html="<div class=\'tooltip-content\'> <strong>Name:</strong> {{field.name}}<br> <strong>Cardinality:</strong> {{stats.distinct | number}}<br> <strong>Min:</strong> {{stats.min}}<br> <strong>Max:</strong> {{stats.max}}<br> <strong>Sample:</strong> <span class=\'sample\'>{{stats.sample.join(\', \')}}</span> </div>" tooltip-side="right"></i> <i ng-if="field.aggregate !== \'count\' && field.type === \'T\'" class="fa fa-info-circle" tooltips="" tooltip-size="small" tooltip-html="<div class=\'tooltip-content\'> <strong>Name:</strong> {{field.name}}<br> <strong>Cardinality:</strong> {{stats.distinct | number}}<br> <strong>Min:</strong> {{stats.min | date: short}}<br> <strong>Max:</strong> {{stats.max | date: short}}<br> <strong>Sample:</strong> <span class=\'sample\'>{{stats.sample.join(\', \')}}</span> </div>" tooltip-side="right"></i> <i ng-if="field.aggregate !== \'count\' && field.type === \'Q\'" class="fa fa-info-circle" tooltips="" tooltip-size="small" tooltip-html="<div class=\'tooltip-content\'> <strong>Name:</strong> {{field.name}}<br> <strong>Cardinality:</strong> {{stats.distinct | number}}<br> <strong>Min:</strong> {{stats.min | number}}<br> <strong>Max:</strong> {{stats.max | number}}<br> <strong>Stdev:</strong> {{stats.stdev | number:2}}<br> <strong>Mean:</strong> {{stats.mean | number:2}}<br> <strong>Median:</strong> {{stats.median | number}}<br> <strong>Sample:</strong> <span class=\'sample\'>{{stats.sample.join(\', \')}}</span> </div>" tooltip-side="right"></i><i ng-if="field.aggregate === \'count\'" class="fa fa-info-circle" tooltips="" tooltip-size="small" tooltip-html="<div class=\'tooltip-content\'> <strong>Count:</strong> {{stats.max}} </div>" tooltip-side="right"></i></span></span></span>'),e.put("modal/modal.html",'<div class="modal" ng-if="isOpen"><div class="modal-wrapper" style="{{wrapperStyle}}" ng-transclude=""></div></div>'),e.put("modal/modalclosebutton.html",'<div class="right"><a ng-click="closeModal()" class="right">Close</a></div>'),e.put("tabs/tab.html",'<div ng-if="active" ng-transclude=""></div>'),e.put("tabs/tabset.html",'<div class="tab-container"><div><a class="tab" ng-repeat="tab in tabset.tabs" ng-class="{\'active\': tab.active}" ng-click="tabset.showTab(tab)">{{tab.heading}}</a></div><div class="tab-contents" ng-transclude=""></div></div>'),e.put("vlplot/vlplot.html",'<div class="vl-plot" id="vis-{{visId}}" ng-class="{ fit: !alwaysScrollable && !overflow && (maxHeight && (!height || height <= maxHeight)) && (maxWidth && (!width || width <= maxWidth)), overflow: alwaysScrollable || overflow || (maxHeight && height && height > maxHeight) || (maxWidth && width && width > maxWidth), scroll: alwaysScrollable || unlocked || hoverFocus }" ng-mousedown="unlocked=!thumbnail" ng-mouseup="unlocked=false" ng-mouseover="mouseover()" ng-mouseout="mouseout()"><div class="vis-tooltip" ng-show="tooltipActive"><table><tr ng-repeat="p in data"><td class="key">{{p[0]}}</td><td class="value"><b>{{p[1]}}</b></td></tr></table></div></div>'),e.put("vlplotgroup/vlplotgroup.html",'<div class="vl-plot-group vflex"><div ng-show="showExpand || fieldSet || showTranspose || showBookmark && Bookmarks.isSupported || showToggle" class="vl-plot-group-header no-shrink"><div class="field-set-info"><field-info ng-repeat="field in fieldSet" ng-if="fieldSet" field="field" show-type="true" ng-class="{ selected: alwaysSelected || (isSelected && isSelected(field.name)), unselected: isSelected && !isSelected(field.name), highlighted: (highlighted||{})[field.name] }" ng-mouseover="(highlighted||{})[field.name] = true" ng-mouseout="(highlighted||{})[field.name] = false"></field-info></div><div class="toolbox"><a ng-if="consts.debug && showDebug" class="command debug"><i class="fa fa-wrench" ng-click="shCopied=\'\'; vlCopied=\'\'; vgCopied=\'\';" ng-mouseover="initializePopup();"></i></a><vl-plot-group-popup ng-if="consts.debug && showDebug && renderPopup"></vl-plot-group-popup><a ng-if="showMarkType" class="command disabled"><i class="fa fa-font"></i> <i class="fa fa-line-chart"></i> <i class="fa fa-area-chart"></i> <i class="fa fa-bar-chart"></i> <i class="fa fa-circle-o"></i></a> <a ng-if="showLog && chart.vlSpec && log.support(chart.vlSpec, \'x\')" class="command" ng-click="log.toggle(chart.vlSpec, \'x\')" ng-class="{active: log.active(chart.vlSpec, \'x\')}"><i class="fa fa-long-arrow-right"></i> <small>Log X</small></a> <a ng-if="showLog && chart.vlSpec && log.support(chart.vlSpec, \'y\')" class="command" ng-click="log.toggle(chart.vlSpec, \'y\')" ng-class="{active: log.active(chart.vlSpec, \'y\')}"><i class="fa fa-long-arrow-up"></i> <small>Log Y</small></a> <a ng-if="showSort && chart.vlSpec && toggleSort.support(chart.vlSpec, Dataset.stats)" class="command" ng-click="toggleSort.toggle(chart.vlSpec)"><i class="fa sort" ng-class="toggleSortClass(chart.vlSpec)"></i> <small ng-if="showLabel">Sort</small></a> <a ng-if="showFilterNull && chart.vlSpec && toggleFilterNull.support(chart.vlSpec, Dataset.stats)" class="command" ng-click="toggleFilterNull(chart.vlSpec)" ng-class="{active: chart.vlSpec && chart.vlSpec.cfg.filterNull.O}"><i class="fa fa-filter"></i> <small ng-if="showLabel">Filter</small> <small>NULL</small></a> <a ng-if="showTranspose" class="command" ng-click="transpose()"><i class="fa fa-refresh transpose"></i> <small ng-if="showLabel">Swap X/Y</small></a> <a ng-if="showBookmark && Bookmarks.isSupported" class="command" ng-click="Bookmarks.toggle(chart)" ng-class="{disabled: !chart.vlSpec.encoding, active: Bookmarks.isBookmarked(chart.shorthand)}"><i class="fa fa-bookmark"></i> <small ng-if="showLabel">Bookmark</small></a> <a ng-if="showExpand" ng-click="expandAction()" class="command"><i class="fa fa-expand"></i></a></div></div><vl-plot class="flex-grow-1" data-fieldset="{fieldSet.key}}" chart="chart" disabled="disabled" is-in-list="isInList" always-scrollable="alwaysScrollable" config-set="{{configSet||\'small\'}}" max-height="maxHeight" max-width="maxWidth" overflow="overflow" priority="priority" rescale="rescale" thumbnail="thumbnail" tooltip="tooltip"></vl-plot></div>'),
e.put("vlplotgroup/vlplotgrouppopup.html",'<div class="drop-container"><div class="popup-menu popup-command no-shrink dev-tool"><div class="command debug"><span class="debug">Vls</span> <a class="debug" ui-zeroclip="" zeroclip-copied="shCopied=\'(Copied)\'" zeroclip-model="chart.shorthand">Copy</a> / <a class="debug" ng-click="logCode(\'VL shorthand\', chart.shorthand); shCopied=\'(Logged)\';">Log</a> <span>{{shCopied}}</span></div><div class="command debug"><span class="debug">Vl</span> <a class="debug" ui-zeroclip="" zeroclip-copied="vlCopied=\'(Copied)\'" zeroclip-model="chart.cleanSpec | compactJSON">Copy</a> / <a class="debug" ng-click="logCode(\'Vega-lite\', chart.cleanSpec); vlCopied=\'(Logged)\';">Log</a> <span>{{vlCopied}}</span></div><div class="command debug"><span class="debug">Vg</span> <a class="debug" ui-zeroclip="" zeroclip-copied="vgCopied=\'(Copied)\'" zeroclip-model="chart.vgSpec | compactJSON">Copy</a> / <a class="debug" ng-click="logCode(\'Vega\', chart.vgSpec); vgCopied=\'(Logged)\';">Log</a> <span>{{vgCopied}}</span></div><a class="command debug" ng-href="{{ {type:\'vl\', encoding: chart.cleanSpec} | reportUrl }}" target="_blank">Report Bad Render</a> <a ng-click="showFeature=!showFeature" class="command debug">{{chart.score}}</a><div ng-repeat="f in chart.scoreFeatures track by f.reason">[{{f.score}}] {{f.reason}}</div></div></div>')}])}(),function(){"use strict";angular.module("vlui").directive("alertMessages",["Alerts",function(e){return{templateUrl:"alertmessages/alertmessages.html",restrict:"E",scope:{},link:function(t){t.Alerts=e}}}])}(),function(){"use strict";angular.module("vlui").service("Alerts",["$timeout","_",function(e,t){var n={};return n.alerts=[],n.add=function(r,i){var a={msg:r};n.alerts.push(a),i&&e(function(){var e=t.findIndex(n.alerts,a);n.closeAlert(e)},i)},n.closeAlert=function(e){n.alerts.splice(e,1)},n}])}(),function(){"use strict";angular.module("vlui").directive("bookmarkList",["Bookmarks","consts","Logger",function(e,t,n){return{templateUrl:"bookmarklist/bookmarklist.html",restrict:"E",replace:!0,scope:{highlighted:"="},link:function(r){n.logInteraction(n.actions.BOOKMARK_OPEN),r.logBookmarksClosed=function(){n.logInteraction(n.actions.BOOKMARK_CLOSE)},r.Bookmarks=e,r.consts=t}}}])}(),function(){"use strict";angular.module("vlui").service("Bookmarks",["_","vl","localStorageService","Logger","Dataset",function(e,t,n,r,i){var a=function(){this.dict={},this.length=0,this.isSupported=n.isSupported},o=a.prototype;return o.updateLength=function(){this.length=Object.keys(this.dict).length},o.save=function(){n.set("bookmarks",this.dict)},o.load=function(){this.dict=n.get("bookmarks")||{},this.updateLength()},o.clear=function(){this.dict={},this.updateLength(),this.save(),r.logInteraction(r.actions.BOOKMARK_CLEAR)},o.toggle=function(e){var t=e.shorthand;this.dict[t]?this.remove(e):this.add(e)},o.add=function(t){var n=t.shorthand;console.log("adding",t.vlSpec,n),t.timeAdded=(new Date).getTime(),t.stats=i.stats,this.dict[n]=e.cloneDeep(t),this.updateLength(),this.save(),r.logInteraction(r.actions.BOOKMARK_ADD,n)},o.remove=function(e){var t=e.shorthand;console.log("removing",e.vlSpec,t),delete this.dict[t],this.updateLength(),this.save(),r.logInteraction(r.actions.BOOKMARK_REMOVE,t)},o.isBookmarked=function(e){return e in this.dict},new a}])}(),function(){"use strict";angular.module("vlui").factory("Config",["vl","_",function(e,t){var n={};return n.schema=e.schema.schema.properties.config,n.dataschema=e.schema.schema.properties.data,n.data=e.schema.util.instantiate(n.dataschema),n.config=e.schema.util.instantiate(n.schema),n.getConfig=function(){return t.cloneDeep(n.config)},n.getData=function(){return n.data},n.large=function(){return{singleWidth:400,singleHeight:400,largeBandMaxCardinality:20}},n.small=function(){return{}},n.updateDataset=function(e,t){e.values?(n.data.values=e.values,delete n.data.url,n.data.formatType=void 0):(n.data.url=e.url,delete n.data.values,n.data.formatType=t)},n}])}(),function(){"use strict";angular.module("vlui").directive("addMyriaDataset",["$http","Dataset","consts",function(e,t,n){return{templateUrl:"dataset/addmyriadataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(r,i,a,o){function s(){o&&o.close()}r.myriaRestUrl=n.myriaRest,r.myriaDatasets=[],r.myriaDataset=null,r.loadDatasets=function(t){return e.get(r.myriaRestUrl+"/dataset/search/?q="+t).then(function(e){r.myriaDatasets=e.data})},r.loadDatasets(""),r.optionName=function(e){return e.userName+":"+e.programName+":"+e.relationName},r.addDataset=function(e){var n={group:"myria",name:e.relationName,url:r.myriaRestUrl+"/dataset/user-"+e.userName+"/program-"+e.programName+"/relation-"+e.relationName+"/data?format=json"};t.type="json",t.dataset=t.add(n),t.update(t.dataset),s()}}}}])}(),function(){"use strict";angular.module("vlui").directive("addUrlDataset",["Dataset","Logger",function(e,t){return{templateUrl:"dataset/addurldataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(n,r,i,a){function o(){a&&a.close()}n.addedDataset={group:"user"},n.addFromUrl=function(n){t.logInteraction(t.actions.DATASET_NEW_URL,n.url),e.dataset=e.add(n),e.update(e.dataset),o()}}}}])}(),function(){"use strict";angular.module("vlui").filter("inGroup",["_",function(e){return function(t,n){return e.where(t,{group:n})}}]),angular.module("vlui").directive("changeLoadedDataset",["Dataset","_",function(e,t){return{templateUrl:"dataset/changeloadeddataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(n,r,i,a){function o(){a&&a.close()}n.Dataset=e,n.userData=t.filter(e.datasets,function(e){return"sample"!==e.group}),n.sampleData=t.where(e.datasets,{group:"sample"}),n.$watch(function(){return e.datasets.length},function(){n.userData=t.filter(e.datasets,function(e){return"sample"!==e.group})}),n.selectDataset=function(t){e.update(t),o()}}}}])}(),function(){"use strict";function e(e){return e.reduce(function(e,t){return e[t.name]=t,e},{})}angular.module("vlui").factory("Dataset",["$http","$q","Alerts","_","dl","vl","SampleData","Config","Logger",function(t,n,r,i,a,o,s,u,l){var c={},f=s;c.datasets=f,c.dataset=f[1],c.currentDataset=void 0,c.dataschema=[],c.dataschema.byName={},c.stats={},c.type=void 0;var d={N:0,O:0,G:2,T:3,Q:4};return c.fieldOrderBy={},c.fieldOrderBy.type=function(e){return"count"===e.aggregate?4:d[e.type]},c.fieldOrderBy.typeThenName=function(e){return c.fieldOrderBy.type(e)+"_"+("count"===e.aggregate?"~":e.name.toLowerCase())},c.fieldOrderBy.original=function(){return 0},c.fieldOrderBy.name=function(e){return e.name},c.fieldOrderBy.cardinality=function(e,t){return t[e.name].distinct},c.fieldOrder=c.fieldOrderBy.typeThenName,c.getSchema=function(e,t,n){var r=a.type.inferAll(e),s=i.reduce(r,function(e,n,r){var i={name:r,type:o.data.types[n],primitiveType:n};return"Q"===i.type&&t[i.name].distinct<=5&&(i.type="O"),e.push(i),e},[]);return s=a.stablesort(s,n||c.fieldOrderBy.typeThenName,c.fieldOrderBy.name),s.push(o.encDef.count()),s},c.onUpdate=[],c.update=function(e){var r;return l.logInteraction(l.actions.DATASET_CHANGE,e.name),r=e.values?n(function(t,n){c.type=void 0,c.updateFromData(e,e.values),t()}):t.get(e.url,{cache:!0}).then(function(t){var n;i.isObject(t.data)?(n=t.data,c.type="json"):(n=a.read(t.data,{type:"csv"}),c.type="csv"),c.updateFromData(e,n)}),c.onUpdate.forEach(function(e){r=r.then(e)}),r.then(function(){u.updateDataset(e,c.type)}),r},c.updateFromData=function(t,n){c.data=n,c.currentDataset=t,c.stats=o.data.stats(c.data);for(var r in c.stats)"*"!==r&&(c.stats[r].sample=i.sample(i.pluck(c.data,r),7));c.dataschema=c.getSchema(c.data,c.stats),c.dataschema.byName=e(c.dataschema)},c.add=function(e){return e.id||(e.id=e.url),f.push(e),e},c}])}(),function(){"use strict";angular.module("vlui").directive("datasetModal",function(){return{templateUrl:"dataset/datasetmodal.html",restrict:"E",scope:!1}})}(),function(){"use strict";angular.module("vlui").directive("datasetSelector",["Modals","Logger",function(e,t){return{templateUrl:"dataset/datasetselector.html",restrict:"E",replace:!0,scope:{},link:function(n){n.loadDataset=function(){t.logInteraction(t.actions.DATASET_OPEN),e.open("dataset-modal")}}}}])}(),function(){"use strict";angular.module("vlui").constant("FileReader",window.FileReader).directive("fileDropzone",["Modals","Alerts","FileReader",function(e,t,n){function r(e,t){return!t||+t>e/1024/1024}function i(e,t){return!t||t.indexOf(e)>-1}return{templateUrl:"dataset/filedropzone.html",replace:!0,restrict:"E",transclude:!0,scope:{maxFileSize:"@",validMimeTypes:"@",dataset:"="},link:function(e,a){function o(a){if(!i(a.type,e.validMimeTypes))return void e.$apply(function(){t.add("Invalid file type. File must be one of following types: "+e.validMimeTypes)});if(!r(a.size,e.maxFileSize))return void e.$apply(function(){t.add("File must be smaller than "+e.maxFileSize+" MB")});var o=new n;o.onload=function(t){return e.$apply(function(e){e.dataset.data=t.target.result,e.dataset.name=a.name.replace(/\.\w+$/,"")})},o.onerror=function(){t.add("Error reading file")},o.readAsText(a)}e.dataset=e.dataset||{},a.on("dragover dragenter",function(e){e&&e.preventDefault(),e.originalEvent.dataTransfer.effectAllowed="copy"}),a.on("drop",function(e){e&&e.preventDefault(),o(e.originalEvent.dataTransfer.files[0])}),a.find('input[type="file"]').on("change",function(){o(this.files[0])})}}}])}(),function(){"use strict";angular.module("vlui").directive("pasteDataset",["Dataset","Logger","Config","_","dl",function(e,t,n,r,i){return{templateUrl:"dataset/pastedataset.html",restrict:"E",require:"?^^modal",replace:!0,scope:!0,link:function(n,r,a,o){function s(){o&&o.close()}n.dataset={name:"",data:""},n.addDataset=function(){var r=i.read(n.dataset.data,{type:"csv"}),a={id:Date.now(),name:n.dataset.name,values:r,group:"pasted"};t.logInteraction(t.actions.DATASET_NEW_PASTE,a.name),e.dataset=e.add(a),e.update(e.dataset),s()}}}}])}(),function(){angular.module("vlui").constant("SampleData",[{name:"Barley",description:"Barley yield by variety across the upper midwest in 1931 and 1932",url:"data/barley.json",id:"barley",group:"sample"},{name:"Cars",description:"Automotive statistics for a variety of car models between 1970 & 1982",url:"data/cars.json",id:"cars",group:"sample"},{name:"Crimea",url:"data/crimea.json",id:"crimea",group:"sample"},{name:"Driving",url:"data/driving.json",id:"driving",group:"sample"},{name:"Iris",url:"data/iris.json",id:"iris",group:"sample"},{name:"Jobs",url:"data/jobs.json",id:"jobs",group:"sample"},{name:"Population",url:"data/population.json",id:"population",group:"sample"},{name:"Movies",url:"data/movies.json",id:"movies",group:"sample"},{name:"Birdstrikes",url:"data/birdstrikes.json",id:"birdstrikes",group:"sample"},{name:"Burtin",url:"data/burtin.json",id:"burtin",group:"sample"},{name:"Budget 2016",url:"data/budget.json",id:"budget",group:"sample"},{name:"Climate Normals",url:"data/climate.json",id:"climate",group:"sample"},{name:"Campaigns",url:"data/weball26.json",id:"weball26",group:"sample"}])}(),function(){"use strict";angular.module("vlui").directive("fieldInfo",["Dataset","Drop","vl","consts",function(e,t,n,r){return{templateUrl:"fieldinfo/fieldinfo.html",restrict:"E",replace:!0,scope:{field:"=",showType:"=",showInfo:"=",showCaret:"=",popupContent:"=",showRemove:"=",removeAction:"&",action:"&",disableCountCaret:"="},link:function(i,a){var o;switch(i.typeNames=r.typeNames,i.stats=e.stats[i.field.name],i.isTypes=n.encDef.isTypes,i.field.type){case"O":i.icon="fa-font";break;case"N":i.icon="fa-font";break;case"Q":i.icon="icon-hash";break;case"T":i.icon="fa-calendar"}i.clicked=function(e){i.action&&e.target!==a.find(".fa-caret-down")[0]&&e.target!==a.find("span.type")[0]&&i.action(e)},i.func=function(e){return e.aggregate||e.timeUnit||e.bin&&"bin"||e._aggregate||e._timeUnit||e._bin&&"bin"||e._any&&"auto"},i.$watch("popupContent",function(e){e&&(o&&o.destroy(),o=new t({content:e,target:a.find(".type-caret")[0],position:"bottom left",openOn:"click"}))}),i.$on("$destroy",function(){o&&o.destroy()})}}}])}(),function(){"use strict";angular.module("vlui").service("Logger",["$location","$window","consts","Analytics",function(e,t,n,r){var i={};return i.levels={OFF:{id:"OFF",rank:0},TRACE:{id:"TRACE",rank:1},DEBUG:{id:"DEBUG",rank:2},INFO:{id:"INFO",rank:3},WARN:{id:"WARN",rank:4},ERROR:{id:"ERROR",rank:5},FATAL:{id:"FATAL",rank:6}},i.actions={INITIALIZE:{category:"DATA",id:"INITIALIZE",level:i.levels.DEBUG},UNDO:{category:"DATA",id:"UNDO",level:i.levels.INFO},REDO:{category:"DATA",id:"REDO",level:i.levels.INFO},DATASET_CHANGE:{category:"DATA",id:"DATASET_CHANGE",level:i.levels.INFO},DATASET_OPEN:{category:"DATA",id:"DATASET_OPEN",level:i.levels.INFO},DATASET_NEW_PASTE:{category:"DATA",id:"DATASET_NEW_PASTE",level:i.levels.INFO},DATASET_NEW_URL:{category:"DATA",id:"DATASET_NEW_URL",level:i.levels.INFO},BOOKMARK_ADD:{category:"BOOKMARK",id:"BOOKMARK_ADD",level:i.levels.INFO},BOOKMARK_REMOVE:{category:"BOOKMARK",id:"BOOKMARK_REMOVE",level:i.levels.INFO},BOOKMARK_OPEN:{category:"BOOKMARK",id:"BOOKMARK_OPEN",level:i.levels.INFO},BOOKMARK_CLOSE:{category:"BOOKMARK",id:"BOOKMARK_CLOSE",level:i.levels.INFO},BOOKMARK_CLEAR:{category:"BOOKMARK",id:"BOOKMARK_CLEAR",level:i.levels.INFO},CHART_MOUSEOVER:{category:"CHART",id:"CHART_MOUSEOVER",level:i.levels.DEBUG},CHART_MOUSEOUT:{category:"CHART",id:"CHART_MOUSEOUT",level:i.levels.DEBUG},CHART_RENDER:{category:"CHART",id:"CHART_RENDER",level:i.levels.DEBUG},CHART_EXPOSE:{category:"CHART",id:"CHART_EXPOSE",level:i.levels.DEBUG},CHART_TOOLTIP:{category:"CHART",id:"CHART_TOOLTIP",level:i.levels.DEBUG},CHART_TOOLTIP_END:{category:"CHART",id:"CHART_TOOLTIP_END",level:i.levels.DEBUG},SORT_TOGGLE:{category:"CHART",id:"SORT_TOGGLE",level:i.levels.INFO},MARKTYPE_TOGGLE:{category:"CHART",id:"MARKTYPE_TOGGLE",level:i.levels.INFO},DRILL_DOWN_OPEN:{category:"CHART",id:"DRILL_DOWN_OPEN",level:i.levels.INFO},DRILL_DOWN_CLOSE:{category:"CHART",id:"DRILL_DOWN_CLOSE",level:i.levels.INFO},LOG_TOGGLE:{category:"CHART",id:"LOG_TOGGLE",level:i.levels.INFO},TRANSPOSE_TOGGLE:{category:"CHART",id:"TRANSPOSE_TOGGLE",level:i.levels.INFO},NULL_FILTER_TOGGLE:{category:"CHART",id:"NULL_FILTER_TOGGLE",level:i.levels.INFO},CLUSTER_SELECT:{category:"CHART",id:"CLUSTER_SELECT",level:i.levels.INFO},LOAD_MORE:{category:"CHART",id:"LOAD_MORE",level:i.levels.INFO},FIELDS_CHANGE:{category:"FIELDS",id:"FIELDS_CHANGE",level:i.levels.INFO},FIELDS_RESET:{category:"FIELDS",id:"FIELDS_RESET",level:i.levels.INFO},FUNC_CHANGE:{category:"FIELDS",id:"FUNC_CHANGE",level:i.levels.INFO},SPEC_CHANGE:{category:"POLESTAR",id:"SPEC_CHANGE",level:i.levels.DEBUG},FIELD_DROP:{category:"POLESTAR",id:"FIELD_DROP",level:i.levels.DEBUG},MARK_CHANGE:{category:"POLESTAR",id:"MARK_CHANGE",level:i.levels.DEBUG}},i.logInteraction=function(e,t,a){if(n.logging){var o=a?a.value:void 0;e.level.rank>=i.levels.INFO.rank&&(r.trackEvent(e.category,e.id,t,o),console.log("[Logging] ",e.id,t,a))}},i.logInteraction(i.actions.INITIALIZE,n.appId),i}])}(),function(){"use strict";angular.module("vlui").directive("modal",["$document","Modals",function(e,t){return{templateUrl:"modal/modal.html",restrict:"E",transclude:!0,scope:{autoOpen:"=",maxWidth:"@"},controller:["$scope",function(e){this.close=function(){e.isOpen=!1}}],link:function(n,r,i){function a(e){27===e.keyCode&&n.isOpen&&(n.isOpen=!1,n.$digest())}var o=i.id;n.maxWidth&&(n.wrapperStyle="max-width:"+n.maxWidth),n.isOpen=n.autoOpen,angular.element(e).on("keydown",a),t.register(o,n),n.$on("$destroy",function(){t.deregister(o)})}}}])}(),function(){"use strict";angular.module("vlui").directive("modalCloseButton",function(){return{templateUrl:"modal/modalclosebutton.html",restrict:"E",require:"^^modal",scope:{closeCallback:"&onClose"},link:function(e,t,n,r){e.closeModal=function(){r.close(),e.closeCallback&&e.closeCallback()}}}})}(),function(){"use strict";angular.module("vlui").factory("Modals",["$cacheFactory",function(e){var t=e("modals");return{register:function(e,n){return t.get(e)?void console.error("Cannot register two modals with id "+e):void t.put(e,n)},deregister:function(e){t.remove(e)},open:function(e){var n=t.get(e);return n?void(n.isOpen=!0):void console.error("Unregistered modal id "+e)},close:function(e){var n=t.get(e);return n?void(n.isOpen=!1):void console.error("Unregistered modal id "+e)},empty:function(){t.removeAll()},count:function(){return t.info().size}}}])}(),function(){"use strict";angular.module("vlui").directive("tab",function(){return{templateUrl:"tabs/tab.html",restrict:"E",require:"^^tabset",replace:!0,transclude:!0,scope:{heading:"@"},link:function(e,t,n,r){r.addTab(e)}}})}(),function(){"use strict";angular.module("vlui").directive("tabset",function(){return{templateUrl:"tabs/tabset.html",restrict:"E",transclude:!0,controller:function(){var e=this;this.tabs=[],this.addTab=function(t){t.active=0===e.tabs.length,e.tabs.push(t)},this.showTab=function(t){e.tabs.forEach(function(e){e.active=e===t})}},controllerAs:"tabset"}})}(),function(){"use strict";angular.module("vlui").directive("vlPlot",["dl","vl","vg","$timeout","$q","Dataset","Config","consts","_","$document","Logger","Heap","$window",function(e,t,n,r,i,a,o,s,u,l,c,f,d){function h(e,t){return e>g||t>g||e*t>m?"svg":"canvas"}var p=0,g=16383.5,m=67108864,v=new f(function(e,t){return t.priority-e.priority}),y=!1;return{templateUrl:"vlplot/vlplot.html",restrict:"E",scope:{chart:"=",disabled:"=",isInList:"=",alwaysScrollable:"=",configSet:"@",maxHeight:"=",maxWidth:"=",overflow:"=",priority:"=",rescale:"=",thumbnail:"=",tooltip:"="},replace:!0,link:function(i,f){function g(t,n){n&&n.datum&&(i.tooltipPromise=r(function(){if(!n.datum._facetID){i.tooltipActive=!0,c.logInteraction(c.actions.CHART_TOOLTIP,n.datum),i.data=u(n.datum).omit("_prev","_id").pairs().value().map(function(t){return t[1]=e.isNumber(t[1])?T(t[1]):t[1],t}),i.$digest();var r=f.find(".vis-tooltip"),a=angular.element(l),o=r.width(),s=r.height();t.pageY+10+s<a.height()?r.css("top",t.pageY+10):r.css("top",t.pageY-10-s),t.pageX+10+o<a.width()?r.css("left",t.pageX+10):r.css("left",t.pageX-10-o)}},M))}function m(e,t){var n=f.find(".vis-tooltip");n.css("top",null),n.css("left",null),r.cancel(i.tooltipPromise),i.tooltipActive&&c.logInteraction(c.actions.CHART_TOOLTIP_END,t.datum),i.tooltipActive=!1,i.data=[],i.$digest()}function b(){var e=i.configSet||s.defaultConfigSet||{};if(i.chart.vlSpec){var n=u.cloneDeep(i.chart.vlSpec);t.extend(n.config,o[e]());var r=i.chart.stats||a.stats;return t.compile(n,r)}}function x(){return f.find(".vega > :first-child")}function w(){var e=x();if(i.rescale){i.$digest();var t=Math.max(.2,f.width()/i.width);1>t&&e.width(i.width*t).height(i.height*t)}else e.css("transform",null).css("transform-origin",null)}function _(){return i.chart.shorthand||(i.chart.vlSpec?t.Encoding.shorthand(i.chart.vlSpec):"")}function k(){if(v.size()>0){var e=v.pop();e.parse()}else y=!1}function $(e){function t(){if(i.destroyed||i.disabled||i.isInList&&i.chart.fieldSetKey&&!i.isInList(i.chart.fieldSetKey))return console.log("cancel rendering",r),void k();var t=(new Date).getTime();n.parse.spec(e,function(n){try{var o=(new Date).getTime();C=null,C=n({el:f[0]}),s.useUrl||C.data({raw:a.data}),C.renderer(h(e.width,i.height)),C.update();var u=f.find(".vega > :first-child");i.width=u.width(),i.height=u.height(),s.debug&&(d.views=d.views||{},d.views[r]=C),c.logInteraction(c.actions.CHART_RENDER,"",i.chart.vlSpec),w();var l=(new Date).getTime();console.log("parse spec",o-t,"charting",l-o,r),i.tooltip&&(C.on("mouseover",g),C.on("mouseout",m))}catch(p){console.error(p)}finally{k()}})}if(!e)return void(C&&(C.off("mouseover"),C.off("mouseout")));i.height=e.height,f||console.error("can not find vis element");var r=_();i.renderer=h(e),y?v.push({priority:i.priority||0,parse:t}):(y=!0,t())}var S=500,M=250;i.visId=p++,i.hoverPromise=null,i.tooltipPromise=null,i.hoverFocus=!1,i.tooltipActive=!1,i.destroyed=!1;var T=t.format("");i.mouseover=function(){i.hoverPromise=r(function(){c.logInteraction(c.actions.CHART_MOUSEOVER,"",i.chart.vlSpec),i.hoverFocus=!i.thumbnail},S)},i.mouseout=function(){i.hoverFocus&&c.logInteraction(c.actions.CHART_MOUSEOUT,"",i.chart.vlSpec),r.cancel(i.hoverPromise),i.hoverFocus=i.unlocked=!1};var C;i.$watch(function(){return u.omit(i.chart.vlSpec,"data")},function(){var e=i.chart.vgSpec=b();i.chart.cleanSpec||(i.chart.cleanSpec=t.Encoding.fromSpec(i.chart.vlSpec).toSpec(!0)),$(e)},!0),i.$on("$destroy",function(){console.log("vlplot destroyed"),C&&(C.off("mouseover"),C.off("mouseout"),C=null);var e=_();s.debug&&d.views&&delete d.views[e],i.destroyed=!0})}}}])}(),function(){"use strict";angular.module("vlui").directive("vlPlotGroup",["Bookmarks","consts","dl","vl","Dataset","Logger","_",function(e,t,n,r,i,a,o){return{templateUrl:"vlplotgroup/vlplotgroup.html",restrict:"E",replace:!0,controller:["$scope","$element",function(e,t){this.getDropTarget=function(){return t.find(".fa-wrench")[0]}}],scope:{chart:"=",disabled:"=",isInList:"=",alwaysScrollable:"=",configSet:"@",maxHeight:"=",maxWidth:"=",overflow:"=",priority:"=",rescale:"=",thumbnail:"=",tooltip:"=",fieldSet:"=",showBookmark:"@",showDebug:"=",showExpand:"=",showFilterNull:"@",showLabel:"@",showLog:"@",showMarkType:"@",showSort:"@",showTranspose:"@",alwaysSelected:"=",isSelected:"=",highlighted:"=",expandAction:"&"},link:function(s){s.Bookmarks=e,s.consts=t,s.Dataset=i,s.renderPopup=!1,s.initializePopup=o.once(function(){s.renderPopup=!0}),s.logCode=function(e,t){console.log(e+":\n\n",JSON.stringify(t))},s.log={},s.log.support=function(e,t){if(!e)return!1;var n=e.encoding,r=n[t];return r&&"Q"===r.type&&!r.bin},s.log.toggle=function(e,t){if(s.log.support(e,t)){var n=e.encoding[t],r=n.scale=n.scale||{};r.type="log"===r.type?"linear":"log",a.logInteraction(a.actions.LOG_TOGGLE,s.chart.shorthand)}},s.log.active=function(e,t){if(s.log.support(e,t)){var n=e.encoding[t],r=n.scale=n.scale||{};return"log"===r.type}},s.toggleFilterNull=function(e){a.logInteraction(a.actions.NULL_FILTER_TOGGLE,s.chart.shorthand),e.config=e.config||{},e.config.filterNull=e.config.filterNull||{N:!1,O:!1,T:!0,Q:!0},e.config.filterNull.O=!e.config.filterNull.O,e.config.filterNull.N=!e.config.filterNull.N},s.toggleFilterNull.support=function(e,t){var n=r.enc.fields(e.encoding);for(var i in n){var a=n[i];if((a.containsType.O||a.containsType.N)&&i in t&&t[i].missing>0)return!0}return!1};var u=s.toggleSort={};u.modes=["ordinal-ascending","ordinal-descending","quantitative-ascending","quantitative-descending","custom"],u.toggle=function(e){a.logInteraction(a.actions.SORT_TOGGLE,s.chart.shorthand);var t=u.mode(e),n=u.modes.indexOf(t),r=(n+1)%(u.modes.length-1),i=u.modes[r];console.log("toggleSort",t,i);var o=u.channels(e);e.encoding[o.ordinal].sort=u.getSort(i,e)},u.getSort=function(e,t){if("ordinal-ascending"===e)return"ascending";if("ordinal-descending"===e)return"descending";var n=u.channels(t),r=t.encoding[n.quantitative];return"quantitative-ascending"===e?{op:r.aggregate,field:r.name,order:"ascending"}:"quantitative-descending"===e?{op:r.aggregate,field:r.name,order:"descending"}:null},u.mode=function(e){var t=u.channels(e),r=e.encoding[t.ordinal].sort;if(void 0===r)return"ordinal-ascending";for(var i=0;i<u.modes.length-1;i++){var a=u.modes[i],s=u.getSort(a,e);if(o.isEqual(r,s))return a}return n.isObject(r)&&r.op&&r.field?"custom":(console.error("invalid mode"),null)},u.channels=function(e){return"N"===e.encoding.x.type||"O"===e.encoding.x.type?{ordinal:"x",quantitative:"y"}:{ordinal:"y",quantitative:"x"}},u.support=function(e,t){var n=e.encoding;return!r.enc.has(n,"row")&&!r.enc.has(n,"col")&&r.enc.has(n,"x")&&r.enc.has(n,"y")&&r.Encoding.alwaysNoOcclusion(e,t)?r.encDef.isTypes(n.x,["N","O"])&&r.encDef.isMeasure(n.y)?"x":r.encDef.isTypes(n.y,["N","O"])&&r.encDef.isMeasure(n.x)?"y":!1:!1},s.toggleSortClass=function(e){if(!e||!u.support(e,i.stats))return"invisible";var t=e&&u.channels(e).ordinal,n=e&&u.mode(e),r="x"===t?"sort-x ":"";switch(n){case"ordinal-ascending":return r+"fa-sort-alpha-asc";case"ordinal-descending":return r+"fa-sort-alpha-desc";case"quantitative-ascending":return r+"fa-sort-amount-asc";case"quantitative-descending":return r+"fa-sort-amount-desc";default:return r+"fa-sort"}},s.transpose=function(){a.logInteraction(a.actions.TRANSPOSE_TOGGLE,s.chart.shorthand),r.Encoding.transpose(s.chart.vlSpec)},s.$on("$destroy",function(){s.chart=null})}}}])}(),function(){"use strict";angular.module("vlui").directive("vlPlotGroupPopup",["Drop",function(e){return{templateUrl:"vlplotgroup/vlplotgrouppopup.html",restrict:"E",require:"^^vlPlotGroup",scope:!1,link:function(t,n,r,i){var a=new e({content:n.find(".dev-tool")[0],target:i.getDropTarget(),position:"bottom right",openOn:"click",constrainToWindow:!0});t.$on("$destroy",function(){a.destroy()})}}}])}(),function(){"use strict";angular.module("vlui").filter("encodeURI",function(){return function(e){return window.encodeURI(e)}})}(),function(){"use strict";angular.module("vlui").filter("compactJSON",["JSON3",function(e){return function(t){return e.stringify(t,null,"  ",80)}}])}(),function(){"use strict";angular.module("vlui").filter("reportUrl",["compactJSONFilter","_","consts",function(e,t,n){function r(n){var r="https://docs.google.com/forms/d/1T9ZA14F3mmzrHR7JJVUKyPXzrMqF54CjLIOjv2E7ZEM/viewform?";if(n.fields){var i=encodeURI(e(t.values(n.fields)));r+="entry.1245199477="+i+"&"}if(n.encoding){var a=t.omit(n.encoding,"config");a=encodeURI(e(a)),r+="entry.1323680136="+a+"&"}if(n.encoding2){var o=t.omit(n.encoding2,"config");o=encodeURI(e(o)),r+="entry.853137786="+o+"&"}var s="entry.1940292677=";switch(n.type){case"vl":r+=s+"Visualization+Rendering+(Vegalite)&";break;case"vr":r+=s+"Recommender+Algorithm+(Visrec)&";break;case"fv":r+=s+"Recommender+UI+(FacetedViz)&"}return r}function i(n){var r="https://docs.google.com/forms/d/1xKs-qGaLZEUfbTmhdmSoS13OKOEpuu_NNWE5TAAml_Y/viewform?";if(n.encoding){var i=t.omit(n.encoding,"config");i=encodeURI(e(i)),r+="entry.1245199477="+i+"&"}return r}return"voyager"===n.appId?r:i}])}(),function(){"use strict";angular.module("vlui").filter("scaleType",function(){return function(e){var t={Q:"Quantitative",N:"Nominal",O:"Ordinal",T:"Time"};return t[e]}})}(),function(){"use strict";angular.module("vlui").filter("underscore2space",function(){return function(e){return e?e.replace(/_+/g," "):""}})}();